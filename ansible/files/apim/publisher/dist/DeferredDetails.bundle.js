(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{2152:function(e,t,a){var n={"./af":1315,"./af.js":1315,"./ar":1316,"./ar-dz":1317,"./ar-dz.js":1317,"./ar-kw":1318,"./ar-kw.js":1318,"./ar-ly":1319,"./ar-ly.js":1319,"./ar-ma":1320,"./ar-ma.js":1320,"./ar-sa":1321,"./ar-sa.js":1321,"./ar-tn":1322,"./ar-tn.js":1322,"./ar.js":1316,"./az":1323,"./az.js":1323,"./be":1324,"./be.js":1324,"./bg":1325,"./bg.js":1325,"./bm":1326,"./bm.js":1326,"./bn":1327,"./bn.js":1327,"./bo":1328,"./bo.js":1328,"./br":1329,"./br.js":1329,"./bs":1330,"./bs.js":1330,"./ca":1331,"./ca.js":1331,"./cs":1332,"./cs.js":1332,"./cv":1333,"./cv.js":1333,"./cy":1334,"./cy.js":1334,"./da":1335,"./da.js":1335,"./de":1336,"./de-at":1337,"./de-at.js":1337,"./de-ch":1338,"./de-ch.js":1338,"./de.js":1336,"./dv":1339,"./dv.js":1339,"./el":1340,"./el.js":1340,"./en-SG":1341,"./en-SG.js":1341,"./en-au":1342,"./en-au.js":1342,"./en-ca":1343,"./en-ca.js":1343,"./en-gb":1344,"./en-gb.js":1344,"./en-ie":1345,"./en-ie.js":1345,"./en-il":1346,"./en-il.js":1346,"./en-nz":1347,"./en-nz.js":1347,"./eo":1348,"./eo.js":1348,"./es":1349,"./es-do":1350,"./es-do.js":1350,"./es-us":1351,"./es-us.js":1351,"./es.js":1349,"./et":1352,"./et.js":1352,"./eu":1353,"./eu.js":1353,"./fa":1354,"./fa.js":1354,"./fi":1355,"./fi.js":1355,"./fo":1356,"./fo.js":1356,"./fr":1357,"./fr-ca":1358,"./fr-ca.js":1358,"./fr-ch":1359,"./fr-ch.js":1359,"./fr.js":1357,"./fy":1360,"./fy.js":1360,"./ga":1361,"./ga.js":1361,"./gd":1362,"./gd.js":1362,"./gl":1363,"./gl.js":1363,"./gom-latn":1364,"./gom-latn.js":1364,"./gu":1365,"./gu.js":1365,"./he":1366,"./he.js":1366,"./hi":1367,"./hi.js":1367,"./hr":1368,"./hr.js":1368,"./hu":1369,"./hu.js":1369,"./hy-am":1370,"./hy-am.js":1370,"./id":1371,"./id.js":1371,"./is":1372,"./is.js":1372,"./it":1373,"./it-ch":1374,"./it-ch.js":1374,"./it.js":1373,"./ja":1375,"./ja.js":1375,"./jv":1376,"./jv.js":1376,"./ka":1377,"./ka.js":1377,"./kk":1378,"./kk.js":1378,"./km":1379,"./km.js":1379,"./kn":1380,"./kn.js":1380,"./ko":1381,"./ko.js":1381,"./ku":1382,"./ku.js":1382,"./ky":1383,"./ky.js":1383,"./lb":1384,"./lb.js":1384,"./lo":1385,"./lo.js":1385,"./lt":1386,"./lt.js":1386,"./lv":1387,"./lv.js":1387,"./me":1388,"./me.js":1388,"./mi":1389,"./mi.js":1389,"./mk":1390,"./mk.js":1390,"./ml":1391,"./ml.js":1391,"./mn":1392,"./mn.js":1392,"./mr":1393,"./mr.js":1393,"./ms":1394,"./ms-my":1395,"./ms-my.js":1395,"./ms.js":1394,"./mt":1396,"./mt.js":1396,"./my":1397,"./my.js":1397,"./nb":1398,"./nb.js":1398,"./ne":1399,"./ne.js":1399,"./nl":1400,"./nl-be":1401,"./nl-be.js":1401,"./nl.js":1400,"./nn":1402,"./nn.js":1402,"./pa-in":1403,"./pa-in.js":1403,"./pl":1404,"./pl.js":1404,"./pt":1405,"./pt-br":1406,"./pt-br.js":1406,"./pt.js":1405,"./ro":1407,"./ro.js":1407,"./ru":1408,"./ru.js":1408,"./sd":1409,"./sd.js":1409,"./se":1410,"./se.js":1410,"./si":1411,"./si.js":1411,"./sk":1412,"./sk.js":1412,"./sl":1413,"./sl.js":1413,"./sq":1414,"./sq.js":1414,"./sr":1415,"./sr-cyrl":1416,"./sr-cyrl.js":1416,"./sr.js":1415,"./ss":1417,"./ss.js":1417,"./sv":1418,"./sv.js":1418,"./sw":1419,"./sw.js":1419,"./ta":1420,"./ta.js":1420,"./te":1421,"./te.js":1421,"./tet":1422,"./tet.js":1422,"./tg":1423,"./tg.js":1423,"./th":1424,"./th.js":1424,"./tl-ph":1425,"./tl-ph.js":1425,"./tlh":1426,"./tlh.js":1426,"./tr":1427,"./tr.js":1427,"./tzl":1428,"./tzl.js":1428,"./tzm":1429,"./tzm-latn":1430,"./tzm-latn.js":1430,"./tzm.js":1429,"./ug-cn":1431,"./ug-cn.js":1431,"./uk":1432,"./uk.js":1432,"./ur":1433,"./ur.js":1433,"./uz":1434,"./uz-latn":1435,"./uz-latn.js":1435,"./uz.js":1434,"./vi":1436,"./vi.js":1436,"./x-pseudo":1437,"./x-pseudo.js":1437,"./yo":1438,"./yo.js":1438,"./zh-cn":1439,"./zh-cn.js":1439,"./zh-hk":1440,"./zh-hk.js":1440,"./zh-tw":1441,"./zh-tw.js":1441};function i(e){var t=r(e);return a(t)}function r(e){var t=n[e];if(!(t+1)){var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}return t}i.keys=function(){return Object.keys(n)},i.resolve=r,e.exports=i,i.id=2152},2172:function(e,t){},2283:function(e,t){},2287:function(e,t){},2289:function(e,t){},2868:function(e,t,a){"use strict";a.r(t);var n=a(1),i=a.n(n),r=a(35),s=a.n(r),o=a(56),l=a(2492),c=a.n(l),p=a(2490),d=a.n(p),m=a(2493),u=a.n(m),g=a(2487),h=a.n(g),f=a(2494),E=a.n(f),b=a(2496),y=a.n(b),v=a(2495),C=a.n(v),A=a(2486),D=a.n(A),S=a(2488),O=a.n(S),w=a(2489),P=a.n(w),x=a(1314),T=a.n(x),I=a(2491),M=a.n(I),R=a(2497),N=a.n(R),j=a(2498),k=a.n(j),L=a(426),q=a(16),_=a(42),W=a(95),F=a(981),z=a.n(F),B=a(12),U=a(560),V=a(674),H=a(605),G=a.n(H),K=a(1088);function Y(e){const[t,a]=Object(n.useState)(!1),{classes:r,theme:s,Icon:o,to:l,history:c,text:p,route:d}=e,m=d||p,{leftMenu:u}=s.custom,g=s.palette.getContrastText(s.palette.background.leftMenu),h=s.custom.leftMenuIconSize,f=e=>{const{pathname:t}=e,n=new RegExp("/"+m+"$","g"),i=new RegExp("/"+m+"/","g");t.match(n)||t.match(i)?a(!0):a(!1)};return Object(n.useEffect)(()=>{const{location:e}=c;f(e)},[]),c.listen(e=>{f(e)}),i.a.createElement(W.b,{className:G()(r.leftLInk,{[r.leftLink_IconLeft]:"icon left"===u},"leftLInk"),to:l,style:{backgroundColor:t?s.palette.background.appBarSelected:""}},o?i.a.cloneElement(o,{className:G()(r.leftLink_Icon,{[r.noIcon]:"no icon"===u},"leftLink_Icon")}):i.a.createElement(V.a,{strokeColor:g,width:h,height:h,icon:p,className:G()(r.leftLInk,{[r.noIcon]:"no icon"===u},"leftLink_Icon")}),i.a.createElement(K.a,{className:G()(r.leftLInkText,{[r.leftLInkText_IconLeft]:"icon left"===u,[r.leftLInkText_NoText]:"no text"===u},"leftLInkText")},p))}Y.defaultProps={route:null},Y.propTypes={classes:s.a.shape({divider:s.a.string,leftLInk:s.a.string,leftLink_IconLeft:s.a.string,noIcon:s.a.string,leftLink_Icon:s.a.string,leftLInkText:s.a.string,leftLInkText_IconLeft:s.a.string,leftLInkText_NoText:s.a.string}).isRequired,theme:s.a.shape({custom:s.a.shape({leftMenu:s.a.string,leftMenuIconSize:s.a.number}),palette:s.a.shape({getContrastText:s.a.func,background:s.a.shape({leftMenu:s.a.string,appBar:s.a.string}),leftMenu:s.a.string})}).isRequired,Icon:s.a.element.isRequired,text:s.a.string.isRequired,to:s.a.string.isRequired,route:s.a.string,history:s.a.shape({listen:s.a.func.isRequired,location:s.a.string.isRequired}).isRequired};var J=Object(_.withRouter)(Object(L.a)(e=>({leftLInkText:{color:e.palette.getContrastText(e.palette.background.leftMenu),textTransform:e.custom.leftMenuTextStyle,width:"100%",textAlign:"left",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},leftLInkText_IconLeft:{paddingLeft:10},LeftMenu:{backgroundColor:e.palette.background.leftMenu,width:e.custom.leftMenuWidth,textAlign:"center",fontFamily:e.typography.fontFamily,position:"absolute",bottom:0,left:0,top:0},leftLInk:{paddingTop:e.spacing(1),paddingBottom:e.spacing(1),paddingLeft:e.spacing(1),paddingRight:e.spacing(1),fontSize:e.typography.caption.fontSize,cursor:"pointer",textDecoration:"none"},leftLink_Icon:{color:e.palette.getContrastText(e.palette.background.leftMenu),fontSize:e.custom.leftMenuIconSize+"px"},leftLink_IconLeft:{display:"flex",alignItems:"center"},noIcon:{display:"none"},leftLInkText_NoText:{diplay:"none"}}),{withTheme:!0})(Y)),Q=a(433),Z=a(512),X=a(596),$=a(443),ee=a(78),te=a(547),ae=a(421),ne=a.n(ae),ie=a(1184);function re(e){const{lastUpdatedTime:t}=e;return i.a.createElement("div",{style:{float:"right"}},i.a.createElement(ie.a,{title:ne()(t).calendar(),"aria-label":"add"},i.a.createElement(K.a,{variant:"caption",display:"block"},i.a.createElement(q.a,{id:"Apis.Details.components.APIDetailsTopMenu.last.updated.time",defaultMessage:"Last updated:"})," ",ne()(t).fromNow())))}re.propTypes={lastUpdatedTime:s.a.shape({content:s.a.string}).isRequired};var se=re,oe=a(550),le=a.n(oe),ce=a(1086),pe=a(1087),de=a(438),me=a(1262),ue=a(1613),ge=a(1050),he=a(574),fe=a.n(he),Ee=a(50);function be(e){const{theme:t,method:a}=e;let n=t.custom.resourceChipColors?t.custom.resourceChipColors[a]:null,r="#000000";return n?r=t.palette.getContrastText(t.custom.resourceChipColors[a]):(console.log("Check the theme settings. The resourceChipColors is not populated properly"),n="#cccccc"),i.a.createElement(ue.a,{label:a.toUpperCase(),style:{backgroundColor:n,color:r,height:20,marginRight:5}})}be.propTypes={method:s.a.string.isRequired,theme:s.a.shape({}).isRequired,classes:s.a.shape({}).isRequired};const ye=Object(me.a)(be);class ve extends i.a.Component{constructor(e){super(e),this.state={paths:null},this.restApi=new Q.a}componentDidMount(){const{id:e}=this.props.api;this.restApi.getSwagger(e).then(e=>{void 0!==e.obj.paths&&this.setState({paths:e.obj.paths})}).catch(e=>{const{status:t}=e;404===t?this.setState({notFound:!0}):401===t&&Object(ee.b)()})}render(){const{paths:e}=this.state;if(this.state.notFound)return i.a.createElement("div",null,i.a.createElement(q.a,{id:"Apis.Details.NewOverview.Resources.resource.not.found",defaultMessage:"resource not found..."}));if(!e)return i.a.createElement("div",null,i.a.createElement(q.a,{id:"Apis.Details.NewOverview.Resources.loading",defaultMessage:"loading..."}));const{classes:t,parentClasses:a,api:n}=this.props;return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:a.titleWrapper},"GraphQL"===n.type?i.a.createElement(K.a,{variant:"h5",component:"h3",className:a.title},i.a.createElement(q.a,{id:"Apis.Details.NewOverview.Operations.operations",defaultMessage:"Operation"})):i.a.createElement(K.a,{variant:"h5",component:"h3",className:a.title},i.a.createElement(q.a,{id:"Apis.Details.NewOverview.Resources.resources",defaultMessage:"Resources"}))),i.a.createElement(ge.a,{p:1},i.a.createElement("div",{className:t.contentWrapper},Object.keys(e).map(a=>{const n=e[a];return i.a.createElement("div",{className:t.root},i.a.createElement(K.a,{className:t.heading,variant:"body1"},a),Object.keys(n).map(e=>Ee.a.HTTP_METHODS.includes(e)?i.a.createElement(ye,{method:e}):null))})),i.a.createElement(W.b,{to:"/apis/"+n.id+"/resources"},i.a.createElement(K.a,{className:t.subHeading,color:"primary",display:"inline",variant:"caption"},i.a.createElement(q.a,{id:"Apis.Details.NewOverview.Operations.ShowMore",defaultMessage:"Show More"}),i.a.createElement(fe.a,{style:{marginLeft:"2px"},fontSize:"small"})))))}}ve.propTypes={classes:s.a.shape({}).isRequired,theme:s.a.shape({}).isRequired,history:s.a.shape({push:s.a.shape({})}).isRequired,location:s.a.shape({pathname:s.a.shape({})}).isRequired,parentClasses:s.a.shape({}).isRequired,api:s.a.shape({id:s.a.string}).isRequired};var Ce=Object(L.a)({root:{display:"flex",flexDirection:"row",alignItems:"center",marginBottom:10},heading:{marginRight:20},contentWrapper:{maxHeight:"125px",overflowY:"auto"}})(ve),Ae=a(1224),De=a(1228),Se=a(1227);function Oe(e){const{theme:t,method:a}=e,n=a.toLowerCase();let r=t.custom.operationChipColor?t.custom.operationChipColor[n]:null,s="#000000";return r?s=t.palette.getContrastText(t.custom.operationChipColor[n]):(console.log("Check the theme settings. The resourceChipColors is not populated properlly"),r="#cccccc"),i.a.createElement(ue.a,{label:a,style:{backgroundColor:r,color:s,height:20,fontSize:9,width:95}})}Oe.propTypes={method:s.a.string.isRequired,theme:s.a.shape({}).isRequired,classes:s.a.shape({}).isRequired};const we=Object(me.a)(Oe);function Pe(e){const{classes:t,parentClasses:a}=e;return i.a.createElement(de.c.Consumer,null,e=>{let{api:n}=e;return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:a.titleWrapper},i.a.createElement(K.a,{variant:"h5",component:"h3",className:a.title},i.a.createElement(q.a,{id:"Apis.Details.NewOverview.Operations.operation",defaultMessage:"Operations"}))),i.a.createElement("div",null,i.a.createElement("div",{className:t.contentWrapper},i.a.createElement(Ae.a,{style:{padding:20}},n.operations&&0!==n.operations.length&&n.operations.map(e=>i.a.createElement(Se.a,{style:{borderStyle:"hidden"}},i.a.createElement(De.a,{style:{padding:8}},i.a.createElement(K.a,{className:a.heading,component:"p",variant:"body1"},e.target)),i.a.createElement(De.a,{style:{padding:8}},i.a.createElement(we,{method:e.verb})))))),i.a.createElement(ge.a,{py:2},i.a.createElement(W.b,{to:"/apis/"+n.id+"/operations"},i.a.createElement(K.a,{className:t.subHeading,color:"primary",display:"inline",variant:"caption"},i.a.createElement(q.a,{id:"Apis.Details.NewOverview.Operations.ShowMore",defaultMessage:"Show More"}),i.a.createElement(fe.a,{style:{marginLeft:"2px"},fontSize:"small"}))))))})}Pe.propTypes={parentClasses:s.a.shape({}).isRequired,classes:s.a.shape({}).isRequired};var xe=Object(L.a)(e=>({contentWrapper:{marginTop:e.spacing(2),maxHeight:"250px",overflowY:"auto"}}))(Pe);function Te(e){const{theme:t,method:a}=e,n=a.toLowerCase();let r=t.custom.resourceChipColors?t.custom.resourceChipColors[n]:null,s="#000000";return r?s=t.palette.getContrastText(t.custom.resourceChipColors[n]):(console.log("Check the theme settings. The resourceChipColors is not populated properly"),r="#cccccc"),i.a.createElement(ue.a,{label:a.toUpperCase(),style:{backgroundColor:r,color:s,height:20}})}Te.propTypes={method:s.a.string.isRequired,theme:s.a.shape({}).isRequired,classes:s.a.shape({}).isRequired};const Ie=Object(me.a)(Te);class Me extends i.a.PureComponent{render(){const{classes:e,parentClasses:t,api:a}=this.props,n=a.apis;return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:t.titleWrapper,style:{margin:"20px 0 0"}},i.a.createElement(K.a,{variant:"h5",component:"h3",className:t.title},i.a.createElement(q.a,{id:"Apis.Details.Overview.ProductResources.resources",defaultMessage:"Resources"}))),i.a.createElement("div",{className:e.root},i.a.createElement("div",{className:e.contentWrapper},Object.keys(n).map(t=>{const a=n[t];return i.a.createElement("div",{className:e.root},i.a.createElement(K.a,{className:e.heading,variant:"body1"},a.name),Object.keys(a.operations).map(t=>{const n=a.operations[t];return i.a.createElement("div",{className:e.resourceRow},i.a.createElement(K.a,{className:e.heading,variant:"body1"},n.target),i.a.createElement(Ie,{method:n.verb}))}))}))))}}Me.propTypes={classes:s.a.shape({}).isRequired,theme:s.a.shape({}).isRequired,history:s.a.shape({push:s.a.shape({})}).isRequired,location:s.a.shape({pathname:s.a.shape({})}).isRequired,parentClasses:s.a.shape({}).isRequired,api:s.a.shape({id:s.a.string}).isRequired};var Re=Object(L.a)({root:{display:"flex",flexDirection:"column",alignItems:"left",marginBottom:10,padding:5},heading:{marginRight:20,paddingBottom:10},resourceRow:{display:"flex",flexDirection:"row",marginLeft:10}})(Me),Ne=a(1089),je=a(505),ke=a.n(je);function Le(e){return e&&e.charAt(0).toUpperCase()+e.slice(1)}function qe(e){return e.toLowerCase()}function _e(e){const{parentClasses:t,api:a}=e;return i.a.createElement(i.a.Fragment,null,i.a.createElement(pe.a,{item:!0,xs:12,md:6,lg:4},i.a.createElement(K.a,{component:"p",variant:"subtitle2",className:t.subtitle},i.a.createElement(q.a,{id:"Apis.Details.NewOverview.Policies.business.plans",defaultMessage:"Business Plans:"}))),i.a.createElement(pe.a,{item:!0,xs:12,md:6,lg:8},i.a.createElement(K.a,{component:"p",variant:"body1"},a.policies&&0!==a.policies.length&&a.policies.map((e,t)=>i.a.createElement("span",null,e,a.policies.length!==t+1&&", "," ")))))}_e.propTypes={parentClasses:s.a.shape({}).isRequired,api:s.a.shape({}).isRequired};var We=Object(de.e)(_e);const Fe={oauth2:"OAuth2",basic_auth:"Basic Auth",mutualssl:"Mutual TLS",api_key:"API Key"};function ze(e){const{parentClasses:t}=e,{api:a}=Object(n.useContext)(de.c);return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",null,i.a.createElement(K.a,{variant:"h5",component:"h3",className:t.title},i.a.createElement(q.a,{id:"Apis.Details.NewOverview.MetaData.config",defaultMessage:"Configuration"}))),i.a.createElement(ge.a,{p:1},i.a.createElement(pe.a,{container:!0,spacing:2},i.a.createElement(pe.a,{item:!0,xs:12,md:6,lg:4},i.a.createElement(K.a,{component:"p",variant:"subtitle2",className:t.subtitle},i.a.createElement(q.a,{id:"Apis.Details.NewOverview.MetaData.transports",defaultMessage:"Transports"}),i.a.createElement(ie.a,{placement:"top",tabIndex:"-1",classes:{tooltip:t.htmlTooltip},title:i.a.createElement(i.a.Fragment,null,i.a.createElement(q.a,{id:"Apis.Details.NewOverview.MetaData.transport.tooltip",defaultMessage:"HTTP is less secure than HTTPS and makes your API vulnerable to security threats."}))},i.a.createElement(Ne.a,{className:t.helpButton},i.a.createElement(ke.a,{className:t.helpIcon}))))),i.a.createElement(pe.a,{item:!0,xs:12,md:6,lg:8},i.a.createElement(K.a,{component:"p",variant:"body1"},a.transport&&0!==a.transport.length&&i.a.createElement(i.a.Fragment,null,a.transport.map((e,t)=>i.a.createElement("span",null,function(e){return e.toUpperCase()}(e),a.transport.length!==t+1&&", "))),!a.transport&&i.a.createElement(i.a.Fragment,null,i.a.createElement(K.a,{component:"p",variant:"body1",className:t.notConfigured},i.a.createElement(q.a,{id:"Apis.Details.NewOverview.MetaData.transports.not.set",defaultMessage:"-"}))))),i.a.createElement(pe.a,{item:!0,xs:12,md:6,lg:4},i.a.createElement(K.a,{component:"p",variant:"subtitle2",className:t.subtitle},i.a.createElement(q.a,{id:"Apis.Details.NewOverview.MetaData.securityScheme",defaultMessage:"API Security"}),i.a.createElement(ie.a,{placement:"top",tabIndex:"-1",classes:{tooltip:t.htmlTooltip},title:i.a.createElement(i.a.Fragment,null,i.a.createElement(q.a,{id:"Apis.Details.NewOverview.MetaData.securityScheme.tooltip",defaultMessage:"OAuth2 is used as the default security schema."}))},i.a.createElement(Ne.a,{className:t.helpButton},i.a.createElement(ke.a,{className:t.helpIcon}))))),i.a.createElement(pe.a,{item:!0,xs:12,md:6,lg:8},i.a.createElement(K.a,{component:"p",variant:"body1"},a.securityScheme&&0!==a.securityScheme.length&&i.a.createElement(i.a.Fragment,null,a.securityScheme.filter(e=>!e.includes("mandatory")).map(e=>Fe[e]).join(" , ")),!a.securityScheme&&i.a.createElement(i.a.Fragment,null,i.a.createElement(K.a,{component:"p",variant:"body1",className:t.notConfigured},i.a.createElement(q.a,{id:"Apis.Details.NewOverview.MetaData.securityScheme.not.set",defaultMessage:"-"}))))),i.a.createElement(pe.a,{item:!0,xs:12,md:6,lg:4},i.a.createElement(K.a,{component:"p",variant:"subtitle2",className:t.subtitle},i.a.createElement(q.a,{id:"Apis.Details.NewOverview.MetaData.access.control",defaultMessage:"Access Control"}),i.a.createElement(ie.a,{placement:"top",tabIndex:"-1",classes:{tooltip:t.htmlTooltip},title:i.a.createElement(i.a.Fragment,null,i.a.createElement(q.a,{id:"Apis.Details.NewOverview.MetaData.access.control.all.tooltip",defaultMessage:"All : The API is viewable, modifiable by all the publishers and creators."}),i.a.createElement("br",null),i.a.createElement(q.a,{id:"Apis.Details.NewOverview.MetaData.access.control.tooltip",defaultMessage:"Restricted by roles : The API can be viewable and modifiable by only specific publishers and creators with the roles that you specify"}))},i.a.createElement(Ne.a,{className:t.helpButton},i.a.createElement(ke.a,{className:t.helpIcon}))))),i.a.createElement(pe.a,{item:!0,xs:12,md:6,lg:8},i.a.createElement(K.a,{component:"p",variant:"body1"},a.accessControl&&i.a.createElement(i.a.Fragment,null,Le(qe(a.accessControl))),"RESTRICTED"===a.accessControl&&" ( Visible to ","RESTRICTED"===a.accessControl&&a.accessControlRoles.join(),"RESTRICTED"===a.accessControl&&" ) ")),i.a.createElement(pe.a,{item:!0,xs:12,md:6,lg:4},i.a.createElement(K.a,{component:"p",variant:"subtitle2",className:t.subtitle},i.a.createElement(q.a,{id:"Apis.Details.NewOverview.MetaData.workflow.status",defaultMessage:"Workflow Status"}))),i.a.createElement(pe.a,{item:!0,xs:12,md:6,lg:8},i.a.createElement(K.a,{component:"p",variant:"body1"},a.workflowStatus&&i.a.createElement(i.a.Fragment,null,a.workflowStatus),!a.workflowStatus&&i.a.createElement(i.a.Fragment,null,i.a.createElement(K.a,{component:"p",variant:"body1",className:t.notConfigured},i.a.createElement(q.a,{id:"Apis.Details.NewOverview.MetaData.workflowStatus.not.set",defaultMessage:"-"}))))),i.a.createElement(pe.a,{item:!0,xs:12,md:6,lg:4},i.a.createElement(K.a,{component:"p",variant:"subtitle2",className:t.subtitle},i.a.createElement(q.a,{id:"Apis.Details.NewOverview.MetaData.visibility.store",defaultMessage:"Visibility on Developer Portal"}),i.a.createElement(ie.a,{placement:"top",tabIndex:"-1",classes:{tooltip:t.htmlTooltip},title:i.a.createElement(i.a.Fragment,null,i.a.createElement(q.a,{id:"Apis.Details.NewOverview.MetaData.visibility.store.all.tooltip",defaultMessage:"Public: The API is accessible to everyone and can be advertised in multiple developer portals - a central developer portal and/or non-WSO2 developer portals."}),i.a.createElement("br",null),i.a.createElement(q.a,{id:"Apis.Details.NewOverview.MetaData.visibility.store.res.tooltip",defaultMessage:"Restricted by roles: The API is visible only to specific user roles in the tenant developer portal that you specify."}))},i.a.createElement(Ne.a,{className:t.helpButton},i.a.createElement(ke.a,{className:t.helpIcon}))))),i.a.createElement(pe.a,{item:!0,xs:12,md:6,lg:8},i.a.createElement(K.a,{component:"p",variant:"body1"},a.visibility&&"PRIVATE"===a.visibility?i.a.createElement(i.a.Fragment,null,"Visible to my domain"):i.a.createElement(i.a.Fragment,null,Le(qe(a.visibility))),"RESTRICTED"===a.visibility&&" ( Visible to ","RESTRICTED"===a.visibility&&a.visibleRoles.join(),"RESTRICTED"===a.visibility&&" ) ")),i.a.createElement(We,{parentClasses:t}),a.apiType===Q.a.CONSTS.APIProduct?null:i.a.createElement(i.a.Fragment,null,i.a.createElement(pe.a,{item:!0,xs:12,md:6,lg:4},i.a.createElement(K.a,{component:"p",variant:"subtitle2",className:t.subtitle},i.a.createElement(q.a,{id:"Apis.Details.NewOverview.MetaData.tags",defaultMessage:"Tags"}))),i.a.createElement(pe.a,{item:!0,xs:12,md:6,lg:8},a.tags&&a.tags.map(e=>i.a.createElement(ue.a,{key:e,label:e,style:{"font-size":13,height:20,marginRight:5}})),0===a.tags.length&&i.a.createElement(i.a.Fragment,null,i.a.createElement(K.a,{component:"p",variant:"body1",className:t.notConfigured},i.a.createElement(q.a,{id:"Apis.Details.NewOverview.MetaData.tags.not.set",defaultMessage:"-"}))))))))}ze.propTypes={parentClasses:s.a.shape({}).isRequired};var Be=ze,Ue=a(933),Ve=a(1248),He=a(1250),Ge=a(1251),Ke=a(727),Ye=a.n(Ke),Je=a(792),Qe=a.n(Je),Ze=a(1210);const Xe=Object(Ue.a)(e=>({root:{width:"90%"},button:{color:e.palette.secondary,marginRight:e.spacing(1)},gridRequirements:{display:"flex",justifyContent:"center",alignItems:"center",marginTop:e.spacing(2)},gridSmall:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",marginLeft:0,marginTop:e.spacing(1)},gridEndpoint:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",marginLeft:0,marginRight:e.spacing(4.2),marginTop:e.spacing(.5)},iconTrue:{color:le.a[500],display:"block",justifyContent:"flex-start",alignItems:"center",marginRight:e.spacing(1)},iconFalse:{color:e.palette.grey[500],display:"block",justifyContent:"flex-start",alignItems:"center",marginRight:e.spacing(1)},arrowIcon:{position:"absolute",top:"16px",right:"-76px",fontSize:"7.9461rem",color:e.palette.background.default,zIndex:e.zIndex.overviewArrow},label:{paddingLeft:"0",paddingRight:"0",flexBasis:"33.3333%",maxWidth:"33.3333%"},stepper:{background:"transparent",marginLeft:e.spacing(10)},box:{display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"transparent",padding:"2px",height:"82px",borderRight:"0",marginRight:"0"},pointerStart:{height:82,position:"relative",background:e.custom.overviewStepper.backgrounds.completed,marginRight:"21px","&:before":{content:'""',position:"absolute",right:"-41px",bottom:0,width:0,height:0,borderLeft:"41px solid",borderLeftColor:e.custom.overviewStepper.backgrounds.completed,borderTop:"41px solid transparent",borderBottom:"41px solid transparent"}},pointerMiddle:{height:82,position:"relative",background:e.custom.overviewStepper.backgrounds.active,margin:"0 20px","&:before":{content:'""',position:"absolute",right:"-41px",bottom:0,width:0,height:0,borderLeft:"41px solid",borderLeftColor:e.custom.overviewStepper.backgrounds.active,borderTop:"41px solid transparent",borderBottom:"41px solid transparent"},"&:after":{content:'""',position:"absolute",left:0,bottom:0,width:0,height:0,borderLeft:"41px solid",borderLeftColor:e.custom.wrapperBackground,borderTop:"41px solid transparent",borderBottom:"41px solid transparent"}},pointerEnd:{height:82,position:"relative",background:e.custom.overviewStepper.backgrounds.inactive,marginLeft:"21px","&:after":{content:'""',position:"absolute",left:0,bottom:0,width:0,height:0,borderLeft:"41px solid",borderLeftColor:e.custom.wrapperBackground,borderTop:"41px solid transparent",borderBottom:"41px solid transparent"}},pointerMiddleCompleted:{background:e.custom.overviewStepper.backgrounds.completed,"&:before":{borderLeftColor:e.custom.overviewStepper.backgrounds.completed}},pointerEndActive:{background:e.custom.overviewStepper.backgrounds.active},pointerEndCompleted:{background:e.custom.overviewStepper.backgrounds.completed},stepIcon:{fontSize:e.custom.overviewStepper.iconSize}}));function $e(){const[e,t]=Object(de.d)(),a=Xe(),{settings:r,user:s}=Object(te.c)(),l=null!==e.endpointConfig,c=0!==e.policies.length,p=null!==e.endpointConfig&&"prototyped"===e.endpointConfig.implementation_status,[d,m]=Object(n.useState)([]),[u,g]=Object(n.useState)(!1),{tenantList:h}=Object(n.useContext)(de.c),f=s.name.split("@"),E=f[f.length-1];let b="".concat(r.storeUrl,"/apis/").concat(e.id,"/overview");function y(a,n){g(!0),e.updateLcState(a,n).then(()=>{t().then().catch(e=>{e.response?$.a.error(e.response.body.description):$.a.error("Something went wrong while updating the API"),console.error(e)}),$.a.info("Lifecycle state updated successfully")}).finally(()=>g(!1)).catch(e=>{console.log(e),$.a.error(JSON.stringify(e.message))})}h&&h.length>0&&(b="".concat(r.storeUrl,"/apis/").concat(e.id,"/overview?tenant=").concat(E)),Object(n.useEffect)(()=>{e.getLcState(e.id).then(e=>{m(e.body.state)})},[]);let v=0;"Created"===d&&(l&&c||p)?v=2:"Created"===d?v=1:"Created"!==d&&(v=3);const C=v>1?a.pointerMiddleCompleted:"";let A;return A=2===v?a.pointerEndActive:3===v?a.pointerEndCompleted:"",i.a.createElement("div",{className:a.root},i.a.createElement(Ve.a,{alternativeLabel:!0,activeStep:v,className:a.stepper},i.a.createElement(He.a,{className:a.label},i.a.createElement(Ge.a,{style:{position:"relative"},StepIconProps:{classes:{root:a.stepIcon}}},i.a.createElement("div",{className:a.pointerStart},i.a.createElement(ge.a,{className:a.box},i.a.createElement(K.a,{variant:"h5"},i.a.createElement(q.a,{id:"Apis.Details.Overview.CustomizedStepper.create",defaultMessage:"Created"})))))),i.a.createElement(He.a,{className:a.label},i.a.createElement(Ge.a,{style:{position:"relative"},StepIconProps:{classes:{root:a.stepIcon}}},i.a.createElement("div",{className:"".concat(a.pointerMiddle," ").concat(C)},i.a.createElement(ge.a,{p:2,borderLeft:"0",borderRight:"0"},i.a.createElement(ie.a,{title:l?"":"You have to specify an endpoint for the API",placement:"top"},i.a.createElement(pe.a,{className:a.gridEndpoint},l?i.a.createElement(Ye.a,{className:a.iconTrue}):i.a.createElement(Qe.a,{className:a.iconFalse}),i.a.createElement(K.a,{variant:"h7"},i.a.createElement(q.a,{id:"Apis.Details.Overview.CustomizedStepper.business.plan.endpoint",defaultMessage:"Endpoint"})),i.a.createElement(W.b,{to:"/apis/"+e.id+"/endpoints"},i.a.createElement(fe.a,{style:{marginLeft:"5px"},color:"primary",fontSize:"small"})))),i.a.createElement(ie.a,{title:c?"":"You have to select the business plan for the API",placement:"bottom"},i.a.createElement(pe.a,{xs:12,className:a.gridSmall},c?i.a.createElement(Ye.a,{className:a.iconTrue}):i.a.createElement(Qe.a,{className:a.iconFalse}),i.a.createElement(K.a,{variant:"h7"},i.a.createElement(q.a,{id:"Apis.Details.Overview.CustomizedStepper.business.plan.businessPlans",defaultMessage:" Business plans"})),i.a.createElement(W.b,{to:"/apis/"+e.id+"/subscriptions"},i.a.createElement(fe.a,{style:{marginLeft:"5px"},color:"primary",fontSize:"small"})))))))),i.a.createElement(He.a,{className:a.label},i.a.createElement(Ge.a,{style:{position:"relative"},StepIconProps:{classes:{root:a.stepIcon}}},i.a.createElement("div",{className:"".concat(a.pointerEnd," ").concat(A)},i.a.createElement(ge.a,{className:a.box},function(t){switch(t){case"Published":return i.a.createElement(pe.a,{xs:12,display:"block"},i.a.createElement(pe.a,{xs:12},i.a.createElement(K.a,{variant:"h5"},i.a.createElement(q.a,{id:"Apis.Details.Overview.CustomizedStepper.published",defaultMessage:"Published"}))),i.a.createElement(pe.a,{xs:12},i.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:b,className:a.viewInStoreLauncher},i.a.createElement(K.a,{variant:"h6",color:"primary"},i.a.createElement(q.a,{id:"Apis.Details.components.APIDetailsTopMenu.view.in.portal",defaultMessage:"View in Dev Portal"}),i.a.createElement(fe.a,{style:{marginLeft:"5px"},fontSize:"small"})))));case"Prototyped":return i.a.createElement(K.a,{variant:"h5"},i.a.createElement(q.a,{id:"Apis.Details.Overview.CustomizedStepper.prototyped",defaultMessage:"Prototyped"}));case"Blocked":return i.a.createElement(K.a,{variant:"h5"},i.a.createElement(q.a,{id:"Apis.Details.Overview.CustomizedStepper.blocked",defaultMessage:"Blocked"}));case"Deprecated":return i.a.createElement(K.a,{variant:"h5"},i.a.createElement(q.a,{id:"Apis.Details.Overview.CustomizedStepper.deprecated",defaultMessage:"Deprecated"}));case"Retired":return i.a.createElement(K.a,{variant:"h5"},i.a.createElement(q.a,{id:"Apis.Details.Overview.CustomizedStepper.retired",defaultMessage:"Retired"}));default:return i.a.createElement(pe.a,{xs:12,display:"block"},i.a.createElement(pe.a,{xs:12},p?i.a.createElement(Ne.a,{variant:"contained",color:"primary",onClick:()=>y(e.id,"Deploy as a Prototype"),disabled:"CREATED"===e.workflowStatus||o.a.isNotPublisher()},"Deploy as a prototype",u&&i.a.createElement(Ze.a,{size:20})):i.a.createElement(Ne.a,{variant:"contained",color:"primary",onClick:()=>y(e.id,"Publish"),disabled:!l||!c||o.a.isNotPublisher()||"CREATED"===e.workflowStatus},"Publish",u&&i.a.createElement(Ze.a,{size:20}))),"CREATED"===e.workflowStatus&&i.a.createElement(pe.a,{xs:12},i.a.createElement(K.a,{variant:"caption",color:"error"},i.a.createElement(q.a,{id:"Apis.Details.Overview.CustomizedStepper.pending",defaultMessage:"The request is pending"}))))}}(d)))))))}function et(e){const{parentClasses:t,api:a}=e;return i.a.createElement(i.a.Fragment,null,i.a.createElement(pe.a,{item:!0,xs:12,md:6,lg:4},i.a.createElement(K.a,{component:"p",variant:"subtitle2",className:t.subtitle},i.a.createElement(q.a,{id:"Apis.Details.NewOverview.BusinessInformation.business.owner",defaultMessage:"Business Owner"}))),i.a.createElement(pe.a,{item:!0,xs:12,md:6,lg:8},i.a.createElement(K.a,{component:"p",variant:"body1"},a.businessInformation.businessOwner&&i.a.createElement(i.a.Fragment,null,a.businessInformation.businessOwner)),i.a.createElement(K.a,{component:"p",variant:"body1",className:t.notConfigured},!a.businessInformation.businessOwner&&i.a.createElement(i.a.Fragment,null,i.a.createElement(q.a,{id:"Apis.Details.NewOverview.BusinessInformation.business.owner.not.set",defaultMessage:"-"})))),i.a.createElement(pe.a,{item:!0,xs:12,md:6,lg:4},i.a.createElement(K.a,{component:"p",variant:"subtitle2",className:t.subtitle},i.a.createElement(q.a,{id:"Apis.Details.NewOverview.BusinessInformation.technical.owner",defaultMessage:"Technical Owner"}))),i.a.createElement(pe.a,{item:!0,xs:12,md:6,lg:8},i.a.createElement(K.a,{component:"p",variant:"body1"},a.businessInformation.technicalOwner&&i.a.createElement(i.a.Fragment,null,a.businessInformation.technicalOwner)),i.a.createElement(K.a,{component:"p",variant:"body1",className:t.notConfigured},!a.businessInformation.technicalOwner&&i.a.createElement(i.a.Fragment,null,i.a.createElement(q.a,{id:"Apis.Details.NewOverview.BusinessInformation.technical.owner.not.set",defaultMessage:"-"})))))}$e.propTypes={classes:s.a.shape({}).isRequired,api:s.a.shape({id:s.a.string}).isRequired},$e.contextType=de.c,et.propTypes={parentClasses:s.a.shape({}).isRequired,api:s.a.shape({}).isRequired};var tt=Object(de.e)(et);function at(e){const{parentClasses:t}=e,[a]=Object(de.d)();return i.a.createElement(i.a.Fragment,null,i.a.createElement(K.a,{variant:"h5",component:"h3",className:t.title},i.a.createElement(q.a,{id:"Apis.Details.NewOverview.MetaData.metadata",defaultMessage:"Metadata"})),i.a.createElement(ge.a,{p:1},i.a.createElement(pe.a,{container:!0,spacing:1},i.a.createElement(pe.a,{item:!0,xs:12,md:6,lg:4},i.a.createElement(K.a,{component:"p",variant:"subtitle2",className:t.subtitle},i.a.createElement(q.a,{id:"Apis.Details.NewOverview.MetaData.description",defaultMessage:"Description"}))),i.a.createElement(pe.a,{item:!0,xs:12,md:6,lg:8},i.a.createElement(K.a,{component:"p",variant:"body1"},a.description&&i.a.createElement(i.a.Fragment,null,Le(a.description))),i.a.createElement(K.a,{component:"p",variant:"body1",className:t.notConfigured},!a.description&&i.a.createElement(i.a.Fragment,null,i.a.createElement(K.a,{component:"p",variant:"body1",className:t.notConfigured},i.a.createElement(q.a,{id:"Apis.Details.NewOverview.MetaData.description.not.set",defaultMessage:"-"}))))),i.a.createElement(pe.a,{item:!0,xs:12,md:6,lg:4},i.a.createElement(K.a,{component:"p",variant:"subtitle2",className:t.subtitle},i.a.createElement(q.a,{id:"Apis.Details.NewOverview.MetaData.provider",defaultMessage:"Provider"}))),i.a.createElement(pe.a,{item:!0,xs:12,md:6,lg:8},i.a.createElement(K.a,{component:"p",variant:"body1"},a.provider&&i.a.createElement(i.a.Fragment,null,a.provider))),i.a.createElement(pe.a,{item:!0,xs:12,md:6,lg:4},i.a.createElement(K.a,{component:"p",variant:"subtitle2",className:t.subtitle},i.a.createElement(q.a,{id:"Apis.Details.NewOverview.MetaData.context:",defaultMessage:"Context:"}))),i.a.createElement(pe.a,{item:!0,xs:12,md:6,lg:8},i.a.createElement(K.a,{component:"p",variant:"body1"},a.context&&i.a.createElement(i.a.Fragment,null,a.context))),a.apiType===Q.a.CONSTS.API&&i.a.createElement(i.a.Fragment,null,i.a.createElement(pe.a,{item:!0,xs:12,md:6,lg:4},i.a.createElement(K.a,{component:"p",variant:"subtitle2",className:t.subtitle},i.a.createElement(q.a,{id:"Apis.Details.NewOverview.MetaData.version",defaultMessage:"Version"}))),i.a.createElement(pe.a,{item:!0,xs:12,md:6,lg:8},i.a.createElement(K.a,{component:"p",variant:"body1"},a.version&&i.a.createElement(i.a.Fragment,null,a.version)))),a.apiType===Q.a.CONSTS.APIProduct?null:i.a.createElement(i.a.Fragment,null,i.a.createElement(pe.a,{item:!0,xs:12,md:6,lg:4},i.a.createElement(i.a.Fragment,null,i.a.createElement(K.a,{component:"p",variant:"subtitle2",className:t.subtitle},i.a.createElement(q.a,{id:"Apis.Details.NewOverview.MetaData.type:",defaultMessage:"Type:"})))),i.a.createElement(pe.a,{item:!0,xs:12,md:6,lg:8},i.a.createElement(K.a,{component:"p",variant:"body1"},a.type&&i.a.createElement(i.a.Fragment,null,a.type),!a.type&&i.a.createElement(i.a.Fragment,null,i.a.createElement(K.a,{component:"p",variant:"body1",className:t.notConfigured},i.a.createElement(q.a,{id:"Apis.Details.NewOverview.MetaData.type.not.set",defaultMessage:"-"})))))),i.a.createElement(pe.a,{item:!0,xs:12,md:6,lg:4},i.a.createElement(K.a,{component:"p",variant:"subtitle2",className:t.subtitle},i.a.createElement(q.a,{id:"Apis.Details.NewOverview.MetaData.created.time",defaultMessage:"Created Time"}))),i.a.createElement(pe.a,{item:!0,xs:12,md:6,lg:8},i.a.createElement(K.a,{component:"p",variant:"body1"},a.createdTime&&i.a.createElement(i.a.Fragment,null,i.a.createElement(ie.a,{title:ne()(a.createdTime).calendar(),"aria-label":"add",interactive:!0,placement:"top-start",tabIndex:"-1"},i.a.createElement(K.a,{variant:"body1",display:"block"},Le(ne()(a.createdTime).fromNow())))),!a.createdTime&&i.a.createElement(i.a.Fragment,null,i.a.createElement(K.a,{component:"p",variant:"body1",className:t.notConfigured},i.a.createElement(q.a,{id:"Apis.Details.NewOverview.MetaData.createdTime.not.set",defaultMessage:"-"}))))),i.a.createElement(pe.a,{item:!0,xs:12,md:6,lg:4},i.a.createElement(K.a,{component:"p",variant:"subtitle2",className:t.subtitle},i.a.createElement(q.a,{id:"Apis.Details.NewOverview.MetaData.last.updated.time",defaultMessage:"Last Updated Time"}))),i.a.createElement(pe.a,{item:!0,xs:12,md:6,lg:8},i.a.createElement(K.a,{component:"p",variant:"body1"},a.lastUpdatedTime&&i.a.createElement(i.a.Fragment,null,i.a.createElement(ie.a,{title:ne()(a.lastUpdatedTime).calendar(),"aria-label":"add",interactive:!0,placement:"top-start",tabIndex:"-1"},i.a.createElement(K.a,{variant:"body1",display:"block"},Le(ne()(a.lastUpdatedTime).fromNow())))),!a.lastUpdatedTime&&i.a.createElement(i.a.Fragment,null,i.a.createElement(K.a,{component:"p",variant:"body1",className:t.notConfigured},i.a.createElement(q.a,{id:"Apis.Details.NewOverview.MetaData.lastUpdatedTime.not.set",defaultMessage:"-"}))))),i.a.createElement(tt,{parentClasses:t}))))}at.propTypes={parentClasses:s.a.shape({}).isRequired};var nt=at;const it=(e,t)=>{if(e.endpointConfig){if("prod"===t)return e.getProductionEndpoint();if("sand"===t)return e.getSandboxEndpoint()}return null};function rt(e){const{parentClasses:t,api:a}=e,n=null!==a.endpointConfig&&"prototyped"===a.endpointConfig.implementation_status;return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",null,i.a.createElement(K.a,{variant:"h5",component:"h3",className:t.title},i.a.createElement(q.a,{id:"Apis.Details.NewOverview.Endpoints.endpoints",defaultMessage:"Endpoints"}))),i.a.createElement(ge.a,{p:1},i.a.createElement(pe.a,{container:!0,spacing:2},i.a.createElement(pe.a,{item:!0,xs:12,md:6,lg:4},n?i.a.createElement(K.a,{component:"p",variant:"subtitle2",className:t.subtitle},i.a.createElement(q.a,{id:"Apis.Details.NewOverview.Endpoints.prototype.endpoint",defaultMessage:"Prototype Endpoint"})):i.a.createElement(K.a,{component:"p",variant:"subtitle2",className:t.subtitle},i.a.createElement(q.a,{id:"Apis.Details.NewOverview.Endpoints.production.endpoint",defaultMessage:"Production Endpoint"}))),i.a.createElement(pe.a,{item:!0,xs:12,md:6,lg:8},i.a.createElement(ie.a,{placement:"top",classes:{tooltip:t.htmlTooltip},title:it(a,"prod")&&i.a.createElement(i.a.Fragment,null,it(a,"prod"))},i.a.createElement(K.a,{component:"p",variant:"body1",className:t.url},it(a,"prod")&&i.a.createElement(i.a.Fragment,null,it(a,"prod")))),i.a.createElement(K.a,{component:"p",variant:"body1",className:t.notConfigured},!it(a,"prod")&&i.a.createElement(i.a.Fragment,null,i.a.createElement(q.a,{id:"Apis.Details.NewOverview.Endpoints.not.set",defaultMessage:"-"})))),!n&&i.a.createElement(pe.a,{item:!0,xs:12,md:6,lg:4},i.a.createElement(K.a,{component:"p",variant:"subtitle2",className:t.subtitle},i.a.createElement(q.a,{id:"Apis.Details.NewOverview.Endpoints.sandbox.endpoint",defaultMessage:"Sandbox Endpoint"}))),!n&&i.a.createElement(pe.a,{item:!0,xs:12,md:6,lg:8},i.a.createElement(ie.a,{placement:"top",classes:{tooltip:t.htmlTooltip},title:it(a,"sand")&&i.a.createElement(i.a.Fragment,null,it(a,"sand"))},i.a.createElement(K.a,{component:"p",variant:"body1",className:t.url},it(a,"sand")&&i.a.createElement(i.a.Fragment,null,it(a,"sand")))),i.a.createElement(K.a,{component:"p",variant:"body1",className:t.notConfigured},!it(a,"sand")&&i.a.createElement(i.a.Fragment,null,i.a.createElement(q.a,{id:"Apis.Details.NewOverview.Endpoints.sandbox.not.set",defaultMessage:"-"})))),i.a.createElement(pe.a,{item:!0,xs:12,md:6,lg:4},i.a.createElement(K.a,{component:"p",variant:"subtitle2",className:t.subtitle},i.a.createElement(q.a,{id:"Apis.Details.NewOverview.Endpoints.endpoint.security",defaultMessage:"Endpoint Security"}))),i.a.createElement(pe.a,{item:!0,xs:12,md:6,lg:8},i.a.createElement(K.a,{component:"p",variant:"body1"},a.endpointSecurity&&i.a.createElement(i.a.Fragment,null,a.endpointSecurity.type)),i.a.createElement(K.a,{component:"p",variant:"body1",className:t.notConfigured},!a.endpointSecurity&&i.a.createElement(i.a.Fragment,null,i.a.createElement(q.a,{id:"Apis.Details.NewOverview.Endpoints.security.not.set",defaultMessage:"-"})))))))}rt.propTypes={parentClasses:s.a.shape({}).isRequired,api:s.a.shape({}).isRequired};var st=Object(de.e)(rt);function ot(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function lt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ot(a,!0).forEach(function(t){ct(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ot(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function ct(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function pt(e){const{classes:t,api:a}=e,{api:r}=Object(n.useContext)(de.c);let s;return r.apiType===Q.a.CONSTS.API&&(s=i.a.createElement(st,{parentClasses:t,api:r})),a.apiType===Q.a.CONSTS.APIProduct&&(r.type=Q.a.CONSTS.APIProduct),i.a.createElement(i.a.Fragment,null,i.a.createElement(K.a,{variant:"h4",align:"left",className:t.mainTitle},i.a.createElement(q.a,{id:"Apis.Details.Overview.Overview.topic.header",defaultMessage:"Overview"})),r.type!==Q.a.CONSTS.APIProduct&&i.a.createElement(pe.a,{container:!0,spacing:12},i.a.createElement(pe.a,{item:!0,xs:12,s:12,md:12,lg:12},i.a.createElement($e,null))),i.a.createElement("div",{className:t.contentWrapper},i.a.createElement(ce.a,{className:t.root},i.a.createElement(pe.a,{container:!0,spacing:24},i.a.createElement(pe.a,{item:!0,xs:12,md:12,lg:12},i.a.createElement(pe.a,{container:!0,spacing:24},i.a.createElement(pe.a,{item:!0,xs:12,md:6,lg:6},i.a.createElement(nt,{parentClasses:t})),i.a.createElement(pe.a,{item:!0,xs:12,md:6,lg:6},i.a.createElement(Be,{parentClasses:t})))),i.a.createElement(pe.a,{item:!0,xs:12,md:12,lg:12},i.a.createElement("div",{className:t.specialGap},i.a.createElement(pe.a,{container:!0,spacing:24},i.a.createElement(pe.a,{item:!0,xs:12,md:6,lg:6},i.a.createElement(pe.a,{item:!0,xs:12,md:8,lg:8},function(e){switch(e){case"GRAPHQL":return i.a.createElement(xe,{parentClasses:t,api:r});case"APIProduct":return i.a.createElement(Re,{parentClasses:t,api:r});case"WS":return"";default:return i.a.createElement(Ce,{parentClasses:t,api:r})}}(r.type))),i.a.createElement(pe.a,{item:!0,xs:12,md:6,lg:6},s))))))))}pt.propTypes={classes:s.a.shape({}).isRequired,api:s.a.shape({id:s.a.string}).isRequired};var dt=Object(L.a)(e=>({root:lt({},e.mixins.gutters(),{paddingTop:e.spacing(2),paddingBottom:e.spacing(2)}),contentWrapper:{marginTop:e.spacing(2)},buttonSuccess:{backgroundColor:le.a[500],"&:hover":{backgroundColor:le.a[700]}},checkItem:{textAlign:"center"},divider:{marginTop:20,marginBottom:20},chip:{margin:e.spacing(.5),padding:0,height:"auto","& span":{padding:"0 5px"}},imageContainer:{display:"flex"},imageWrapper:{marginRight:e.spacing(3)},subtitle:{marginTop:e.spacing(0)},specialGap:{marginTop:e.spacing(3)},resourceTitle:{marginBottom:e.spacing(3)},ListRoot:{padding:0,margin:0},titleWrapper:{display:"flex"},title:{flex:1},helpButton:{padding:0,minWidth:20},helpIcon:{fontSize:16},htmlTooltip:{backgroundColor:"#f5f5f9",color:"rgba(0, 0, 0, 0.87)",maxWidth:220,fontSize:e.typography.pxToRem(14),border:"1px solid #dadde9","& b":{fontWeight:e.typography.fontWeightMedium}},lifecycleWrapper:{display:"flex",alignItems:"center"},lifecycleIcon:{fontSize:36,color:"green",marginRight:e.spacing(1)},leftSideWrapper:{paddingRight:e.spacing(2)},notConfigured:{color:"rgba(0, 0, 0, 0.40)"},url:{maxWidth:"100%",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}}))(pt),mt=a(1071),ut=a(865),gt=a(1599),ht=a(1253),ft=a(1200),Et=a(1256),bt=a(1202);function yt(e){const{api:t,configDispatcher:a}=e,[n]=Object(de.d)();return i.a.createElement(pe.a,{container:!0,spacing:1,alignItems:"flex-start",xs:11},i.a.createElement(pe.a,{item:!0},i.a.createElement(ge.a,{mt:4},i.a.createElement(ft.a,{component:"fieldset",style:{display:"flex"}},i.a.createElement(bt.a,{component:"legend"},i.a.createElement(q.a,{id:"Apis.Details.Configuration.Configuration.isdefault.label",defaultMessage:"Make this the default version"})),i.a.createElement(ht.a,{"aria-label":"Make this the default version",value:t.isDefaultVersion,onChange:e=>{let{target:{value:t}}=e;return a({action:"isDefaultVersion",value:"true"===t})},style:{display:"flow-root"}},i.a.createElement(Et.a,{disabled:Object(o.b)(["apim:api_create"],n),value:!0,control:i.a.createElement(gt.a,{color:"primary"}),label:i.a.createElement(q.a,{id:"Apis.Details.Configuration.Configuration.isdefault.yes",defaultMessage:"Yes"})}),i.a.createElement(Et.a,{disabled:Object(o.b)(["apim:api_create"],n),value:!1,control:i.a.createElement(gt.a,{color:"primary"}),label:i.a.createElement(q.a,{id:"Apis.Details.Configuration.Configuration.isdefault.no",defaultMessage:"No"})}))))),i.a.createElement(pe.a,{item:!0,xs:1},i.a.createElement(ge.a,{mt:3},i.a.createElement(ie.a,{title:i.a.createElement(q.a,{id:"Apis.Details.Configuration.Configuration.defaultversion.tooltip",defaultMessage:"Indicates if this is the default version of the API. If an API is invoked without specifying a version, the API Gateway will route the request to the default version of the API."}),"aria-label":"add",placement:"right-end",interactive:!0},i.a.createElement(ke.a,null)))))}yt.propTypes={api:s.a.shape({}).isRequired,configDispatcher:s.a.func.isRequired};var vt=a(1195);function Ct(e){const{api:t,configDispatcher:a}=e,[n]=Object(de.d)();return i.a.createElement(vt.a,{id:"outlined-multiline-static",label:"Description",multiline:!0,rows:"4",value:t.description,margin:"0",fullWidth:!0,variant:"outlined",onChange:e=>a({action:"description",value:e.target.value}),disabled:Object(o.b)(["apim:api_create"],n)})}Ct.propTypes={api:s.a.shape({}).isRequired,configDispatcher:s.a.func.isRequired};var At=a(1212),Dt=a(636),St=a.n(Dt),Ot=a(548),wt=a(723),Pt=a.n(wt),xt=a(721),Tt=a.n(xt),It=a(1214),Mt=a(872);function Rt(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}const Nt=Object(Ue.a)(e=>({tooltip:{position:"absolute",right:e.spacing(-4),top:e.spacing(1)}}));function jt(e){const[t,a]=Object(n.useState)(!0),[r,s]=Object(n.useState)(!0),{api:l,configDispatcher:c}=e,p="NONE"===l.accessControl,[d]=Object(de.d)(),m=Nt(),[u,g]=Object(n.useState)([]);Object(n.useEffect)(()=>{0===u.length&&(a(!0),s(!0))},[u]);return i.a.createElement(i.a.Fragment,null,i.a.createElement(ge.a,{style:{position:"relative",marginBottom:-12}},i.a.createElement(vt.a,{fullWidth:!0,id:"accessControl-selector",select:!0,label:i.a.createElement(q.a,{id:"Apis.Details.Configuration.components.AccessControl.head.topic",defaultMessage:"Publisher Access Control"}),value:l.accessControl,name:"accessControl",onChange:e=>{let{target:{value:t}}=e;return c({action:"accessControl",value:t})},SelectProps:{MenuProps:{className:m.menu}},helperText:i.a.createElement(q.a,{id:"Apis.Details.Configuration.components.AccessControl.form.helper.text",defaultMessage:"There are no access restrictions by default"}),margin:"normal",variant:"outlined",disabled:Object(o.b)(["apim:api_create"],d)},i.a.createElement(At.a,{value:"NONE"},i.a.createElement(q.a,{id:"Apis.Details.Configuration.components.AccessControl.dropdown.none",defaultMessage:"All"})),i.a.createElement(At.a,{value:"RESTRICTED"},i.a.createElement(q.a,{id:"Apis.Details.Configuration.components.AccessControl.dropdown.restricted",defaultMessage:"Restrict by role(s)"}))),i.a.createElement(ie.a,{title:i.a.createElement(i.a.Fragment,null,i.a.createElement("p",null,i.a.createElement("strong",null,i.a.createElement(q.a,{id:"Apis.Details.Configuration.components.AccessControl.tooltip.all",defaultMessage:"All :"})),"  ",i.a.createElement(q.a,{id:"Apis.Details.Configuration.components.AccessControl.tooltip.all.desc",defaultMessage:"The API is viewable, modifiable by all the publishers and creators."}),i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement("strong",null,i.a.createElement(q.a,{id:"Apis.Details.Configuration.components.AccessControl.tooltip.restrict",defaultMessage:"Restricted by roles :"})),"  ",i.a.createElement(q.a,{id:"Apis.Details.Configuration.components.AccessControl.tooltip.restrict. desc",defaultMessage:"The API can be viewed and modified only by specific publishers and creators with the roles that you specify"}))),"aria-label":"Publisher Access Control",placement:"right-end",interactive:!0,className:m.tooltip},i.a.createElement(ke.a,null))),!p&&i.a.createElement(ge.a,{py:1,style:{marginTop:10}},i.a.createElement(St.a,{fullWidth:!0,variant:"outlined",label:i.a.createElement(q.a,{id:"Apis.Details.Configuration.components.AccessControl.roles",defaultMessage:"Roles"}),disabled:Object(o.b)(["apim:api_create"],d),value:l.accessControlRoles.concat(u),alwaysShowPlaceholder:!1,placeholder:"Enter roles and press Enter",blurBehavior:"clear",InputProps:{endAdornment:(!t||!r)&&i.a.createElement(It.a,{position:"end"},i.a.createElement(Tt.a,{color:"error",style:{paddingBottom:8}}))},onAdd:e=>{const t=Ot.a.role.validate(Pt.a.encode(e)),n=Ot.a.userRole.validate(Pt.a.encode(e));t.then(()=>{a(!0),n.then(()=>{s(!0),c({action:"accessControlRoles",value:[].concat(Rt(l.accessControlRoles),[e])})}).catch(t=>{404===t.status?(s(!1),g([].concat(Rt(u),[e]))):($.a.error("Error when validating role: "+e),console.error("Error when validating user roles "+t))})}).catch(t=>{404===t.status?(a(!1),g([].concat(Rt(u),[e]))):($.a.error("Error when validating role: "+e),console.error("Error when validating roles "+t))})},error:!t||!r,helperText:(()=>t?r?i.a.createElement(q.a,{id:"Apis.Details.Scopes.CreateScope.roles.help",defaultMessage:"Enter valid role and press enter"}):i.a.createElement(q.a,{id:"Apis.Details.Scopes.Roles.User.Invalid",defaultMessage:"Role must be associated with the API creator"}):i.a.createElement(q.a,{id:"Apis.Details.Scopes.Roles.Invalid",defaultMessage:"Role is invalid"}))(),chipRenderer:(e,t)=>{let{value:a}=e;return i.a.createElement(ue.a,{key:t,size:"small",label:a,onDelete:()=>{(e=>{g(u.filter(t=>t!==e)),c({action:"accessControlRoles",value:l.accessControlRoles.filter(t=>t!==e)})})(a)},style:{backgroundColor:u.includes(a)?Mt.a[300]:null,margin:"0 8px 12px 0",float:"left"}})}})))}function kt(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}jt.propTypes={api:s.a.shape({}).isRequired,configDispatcher:s.a.func.isRequired};const Lt=Object(Ue.a)(e=>({tooltip:{position:"absolute",right:e.spacing(-4),top:e.spacing(1)}}));function qt(e){const[t,a]=Object(n.useState)(!0),[r,s]=Object(n.useState)(!0),{api:l,configDispatcher:c}=e,[p,d]=Object(n.useState)([]),m="RESTRICTED"===l.visibility,[u]=Object(de.d)(),g=Lt(),h=new Q.a,[f,E]=Object(n.useState)([]);Object(n.useEffect)(()=>{h.getTenantsByState(Ee.a.TENANT_STATE_ACTIVE).then(e=>{E(e.body.count)})},[]),Object(n.useEffect)(()=>{0===p.length&&a(!0),"RESTRICTED"===l.visibility&&0!==l.visibleRoles.length&&s(!0)},[p]);return i.a.createElement(i.a.Fragment,null,i.a.createElement(ge.a,{style:{position:"relative"}},i.a.createElement(vt.a,{fullWidth:!0,id:"storeVisibility-selector",select:!0,label:i.a.createElement(q.a,{id:"Apis.Details.Configuration.components.storeVisibility.head.topic",defaultMessage:"Developer Portal Visibility"}),value:l.visibility,name:"storeVisibility",onChange:e=>{let{target:{value:t}}=e;return c({action:"visibility",value:t})},SelectProps:{MenuProps:{className:g.menu}},helperText:i.a.createElement(q.a,{id:"Apis.Details.Configuration.components.storeVisibility.form.helper.text",defaultMessage:"By default API is visible to all developer portal users"}),margin:"normal",variant:"outlined",disabled:Object(o.b)(["apim:api_create","apim:api_publish"],u)},i.a.createElement(At.a,{value:"PUBLIC"},i.a.createElement(q.a,{id:"Apis.Details.Configuration.components.StoreVisibility.dropdown.public",defaultMessage:"Public"})),i.a.createElement(At.a,{value:"RESTRICTED"},i.a.createElement(q.a,{id:"Apis.Details.Configuration.components.storeVisibility.dropdown.restrict",defaultMessage:"Restrict by role(s)"})),0!==f&&i.a.createElement(At.a,{value:"PRIVATE"},i.a.createElement(q.a,{id:"Apis.Details.Configuration.components.storeVisibility.dropdown.private",defaultMessage:"Visible to my domain"}))),i.a.createElement(ie.a,{title:i.a.createElement(i.a.Fragment,null,i.a.createElement("p",null,i.a.createElement("strong",null,i.a.createElement(q.a,{id:"Apis.Details.Configuration.components.storeVisibility.tooltip.public",defaultMessage:"Public :"})),"  ",i.a.createElement(q.a,{id:"Apis.Details.Configuration.components.storeVisibility.tooltip.public.desc",defaultMessage:"The API is accessible to everyone and can be advertised in multiple developer portals - a central developer portal and/or non-WSO2 developer portals."}),i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement("strong",null,i.a.createElement(q.a,{id:"Apis.Details.Configuration.components.storeVisibility.tooltip.restrict",defaultMessage:"Restricted by roles(s) :"})),"  ",i.a.createElement(q.a,{id:"Apis.Details.Configuration.components.storeVisibility.tooltip.restrict.desc",defaultMessage:"The API is visible only to specific user roles in the tenant developer portal that you specify."}))),"aria-label":"Store Visibility",placement:"right-end",className:g.tooltip,interactive:!0},i.a.createElement(ke.a,null))),m&&i.a.createElement(ge.a,{py:2,style:{marginTop:-10,marginBottom:10}},i.a.createElement(St.a,{fullWidth:!0,variant:"outlined",label:i.a.createElement(q.a,{id:"Apis.Details.Configuration.components.storeVisibility.roles",defaultMessage:"Roles"}),disabled:Object(o.b)(["apim:api_create","apim:api_publish"],u),value:l.visibleRoles.concat(p),alwaysShowPlaceholder:!1,placeholder:"Enter roles and press Enter",blurBehavior:"clear",InputProps:{endAdornment:!t&&i.a.createElement(It.a,{position:"end"},i.a.createElement(Tt.a,{color:"error",style:{paddingBottom:8}}))},onAdd:e=>{Ot.a.role.validate(Pt.a.encode(e)).then(()=>{s(!0),a(!0),c({action:"visibleRoles",value:[].concat(kt(l.visibleRoles),[e])})}).catch(t=>{404===t.status?(a(!1),d([].concat(kt(p),[e]))):($.a.error("Error when validating role: "+e),console.error("Error when validating roles "+t))})},error:!t||!r,helperText:t?i.a.createElement(q.a,{id:"Apis.Details.Scopes.CreateScope.roles.help",defaultMessage:"Enter valid role and press enter"}):i.a.createElement(q.a,{id:"Apis.Details.Scopes.Roles.Invalid",defaultMessage:"Role is invalid"}),chipRenderer:(e,t)=>{let{value:a}=e;return i.a.createElement(ue.a,{key:t,size:"small",label:a,onDelete:()=>{(e=>{p.includes(e)&&d(p.filter(t=>t!==e)),"RESTRICTED"===l.visibility&&l.visibleRoles.length>1?s(!0):s(!1),c({action:"visibleRoles",value:l.visibleRoles.filter(t=>t!==e)})})(a)},style:{backgroundColor:p.includes(a)?Mt.a[300]:null,margin:"0 8px 12px 0",float:"left"}})}})))}function _t(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Wt(e){const{api:t,configDispatcher:a}=e,[r]=Object(de.d)(),[s,l]=Object(n.useState)(!0),[c,p]=Object(n.useState)([]),d=/([~!@#;%^&*+=|\\<>"'\/,])/;return i.a.createElement(i.a.Fragment,{style:{marginTop:10}},i.a.createElement(St.a,{fullWidth:!0,variant:"outlined",label:i.a.createElement(q.a,{id:"Apis.Details.Configuration.components.Tags.title",defaultMessage:"Tags"}),disabled:Object(o.b)(["apim:api_create","apim:api_publish"],r),value:t.tags,error:!s,helperText:s?i.a.createElement(q.a,{id:"Apis.Details.Configuration.components.Tags.helper",defaultMessage:"Press `Enter` after typing the tag name to add a new tag"}):i.a.createElement(q.a,{id:"Apis.Details.Configuration.components.Tags.error",defaultMessage:"The tag contains one or more illegal characters ( ~ ! @ # ; % ^ & * + = { } | < > , ' \" \\\\ / ) ."}),onAdd:e=>{d.test(e)&&(l(!1),p([].concat(_t(c),[e]))),a({action:"tags",value:[].concat(_t(t.tags),[e.length>30?e.substring(0,30):e])})},chipRenderer:(e,n)=>{let{value:r}=e;return i.a.createElement(ue.a,{key:n,size:"small",label:r,onDelete:()=>{if(c.includes(r)){const e=c.filter(e=>e!==r);p(e),0===e.length&&l(!0)}a({action:"tags",value:t.tags.filter(e=>e!==r)})},style:{backgroundColor:d.test(r)?Mt.a[300]:null,margin:"0 8px 12px 0",float:"left"}})},style:{display:"flex"}}))}qt.propTypes={api:s.a.shape({}).isRequired,configDispatcher:s.a.func.isRequired},Wt.propTypes={api:s.a.shape({}).isRequired,configDispatcher:s.a.func.isRequired};var Ft=a(1217),zt=a(1600);const Bt=Object(Ue.a)(e=>({tooltip:{position:"absolute",right:e.spacing(-4),top:e.spacing(1)}}));function Ut(e){const[t,a]=Object(n.useState)({}),{api:r,configDispatcher:s}=e,o=Bt();return console.log(r.selectedCategories),Object(n.useEffect)(()=>{Q.a.apiCategories().then(e=>a(e.body))},[]),t.list?i.a.createElement(ge.a,{style:{position:"relative",marginTop:10}},i.a.createElement(vt.a,{fullWidth:!0,select:!0,label:i.a.createElement(i.a.Fragment,null,i.a.createElement(q.a,{id:"Apis.Details.Configurations.api.categories",defaultMessage:"API Categories"})),name:"categories",margin:"normal",variant:"outlined",value:r.categories,SelectProps:{multiple:!0,renderValue:e=>Array.isArray(e)?e.join(", "):e},onChange:e=>s({action:"categories",value:e.target.value}),InputProps:{id:"itest-id-categories-input"},helperText:"Select API Categories for the API"},0===t.list.length?i.a.createElement(At.a,{id:"no-category-notification"},i.a.createElement(Ft.a,{primary:"No API Categories defined yet. Please create an API Category first."})):t.list.map(e=>i.a.createElement(At.a,{dense:!0,disableGutters:!0,id:e.id,key:e.name,value:e.name},i.a.createElement(zt.a,{color:"primary",checked:r.categories.includes(e.name)}),i.a.createElement(Ft.a,{primary:e.name,secondary:e.description})))),i.a.createElement(ie.a,{title:i.a.createElement(i.a.Fragment,null,i.a.createElement("p",null,i.a.createElement(q.a,{id:"Api.category.dropdown.tooltip",defaultMessage:"API categories can be added via admin portal UI or admin REST API. There has to be pre-defined API categories in the environment in order to be attached to an API."}))),"aria-label":"API Categories",placement:"right-end",interactive:!0,className:o.tooltip},i.a.createElement(ke.a,null))):null}Ut.defaultProps={categories:[],api:s.a.shape({}).isRequired,configDispatcher:s.a.func.isRequired};var Vt=Object(de.e)(Ut);function Ht(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Gt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ht(a,!0).forEach(function(t){Kt(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ht(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function Kt(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Yt(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}const Jt=Object(Ue.a)(e=>({root:{padding:e.spacing(3,2)},titleWrapper:{display:"flex",flexDirection:"row",alignItems:"center",marginBottom:e.spacing(3)},mainTitle:{paddingLeft:0},paper:{padding:e.spacing(3)},paperCenter:{padding:e.spacing(3),display:"flex",alignItems:"center",justifyContent:"center"},heading:{fontSize:"1.1rem",fontWeight:400,marginBottom:e.spacing(0)},itemPadding:{marginBottom:e.spacing(3)},arrowForwardIcon:{fontSize:50,color:"#ccc",position:"absolute",top:90,right:-43},arrowBackIcon:{fontSize:50,color:"#ccc",position:"absolute",top:30,right:-71},expansionPanel:{marginBottom:e.spacing(1)},expansionPanelDetails:{flexDirection:"column"},subHeading:{fontSize:"1rem",fontWeight:400,margin:0,display:"inline-flex",lineHeight:"38px"},btnSpacing:{marginRight:e.spacing(1)}}));function Qt(e){return{id:e.id,name:e.name,description:e.description,lifeCycleStatus:e.lifeCycleStatus,accessControl:e.accessControl,authorizationHeader:e.authorizationHeader,responseCachingEnabled:e.responseCachingEnabled,cacheTimeout:e.cacheTimeout,visibility:e.visibility,isDefaultVersion:e.isDefaultVersion,enableSchemaValidation:e.enableSchemaValidation,accessControlRoles:Yt(e.accessControlRoles),visibleRoles:Yt(e.visibleRoles),tags:Yt(e.tags),maxTps:e.maxTps,transport:Yt(e.transport),wsdlUrl:e.wsdlUrl,securityScheme:Yt(e.securityScheme),categories:Yt(e.categories),corsConfiguration:{corsConfigurationEnabled:e.corsConfiguration.corsConfigurationEnabled,accessControlAllowCredentials:e.corsConfiguration.accessControlAllowCredentials,accessControlAllowOrigins:Yt(e.corsConfiguration.accessControlAllowOrigins),accessControlAllowHeaders:Yt(e.corsConfiguration.accessControlAllowHeaders),accessControlAllowMethods:Yt(e.corsConfiguration.accessControlAllowMethods)}}}function Zt(){const{api:e,updateAPI:t}=Object(n.useContext)(de.a),[a,r]=Object(n.useState)(!1),[s,l]=Object(n.useReducer)(function(e,t){const{action:a,value:n}=t,i=Qt(e);switch(a){case"description":case"isDefaultVersion":case"authorizationHeader":case"responseCachingEnabled":case"cacheTimeout":case"enableSchemaValidation":case"visibility":case"maxTps":case"categories":case"tags":return i[a]=n,i;case"accessControl":return i[a]=n,"NONE"===n&&(i.accessControlRoles=[]),i;case"accessControlRoles":case"visibleRoles":return Gt({},Qt(e),{[a]:n});default:return e}},Qt(e)),c=Jt(),p=s.tags.find(e=>/([~!@#;%^&*+=|\\<>"'\/,])/.test(e));return i.a.createElement(i.a.Fragment,null,i.a.createElement(mt.a,{maxWidth:"md"},i.a.createElement(pe.a,{container:!0,spacing:2},i.a.createElement(pe.a,{item:!0,md:12},i.a.createElement(K.a,{variant:"h5"},i.a.createElement(q.a,{id:"Apis.Details.Configuration.Configuration.Design.topic.header",defaultMessage:"Design Configurations"})),e.apiType===Q.a.CONSTS.APIProduct?i.a.createElement(K.a,{variant:"caption"},i.a.createElement(q.a,{id:"Apis.Details.Configuration.Configuration.Design.APIProduct.sub.heading",defaultMessage:"Configure API Product visibility."})):i.a.createElement(K.a,{variant:"caption"},i.a.createElement(q.a,{id:"Apis.Details.Configuration.Configuration.Design.sub.heading",defaultMessage:"Configure API visibility."}))),i.a.createElement(pe.a,{item:!0,md:12},i.a.createElement(ce.a,{elevation:0},i.a.createElement("div",null,i.a.createElement(ge.a,{px:8,py:5},i.a.createElement(ge.a,{py:1},i.a.createElement(pe.a,{container:!0,spacing:0},i.a.createElement(pe.a,{item:!0,xs:12,md:2},i.a.createElement(ut.a,{api:e,width:100,height:100,isEditable:!Object(o.b)(["apim:api_publish","apim:api_create"],e)})),i.a.createElement(pe.a,{item:!0,xs:12,md:10},i.a.createElement(Ct,{api:s,configDispatcher:l})))),i.a.createElement(ge.a,{py:1},i.a.createElement(jt,{api:s,configDispatcher:l})),i.a.createElement(ge.a,{py:1},i.a.createElement(qt,{api:s,configDispatcher:l})),i.a.createElement(ge.a,{py:1},i.a.createElement(Wt,{api:s,configDispatcher:l})),i.a.createElement(ge.a,{py:1},i.a.createElement(Vt,{api:s,configDispatcher:l,categories:e.categories})),i.a.createElement(ge.a,{py:1},"APIProduct"!==e.apiType&&i.a.createElement(yt,{api:s,configDispatcher:l})),i.a.createElement(ge.a,{pt:2},i.a.createElement(Ne.a,{disabled:a||p||"RESTRICTED"===s.visibility&&0===s.visibleRoles.length,type:"submit",variant:"contained",color:"primary",className:c.btnSpacing,onClick:function(){r(!0),t(s).catch(e=>{e.response&&$.a.error(e.response.body.description)}).finally(()=>r(!1))}},i.a.createElement(q.a,{id:"Apis.Details.Configuration.Configuration.save",defaultMessage:"Save"}),a&&i.a.createElement(Ze.a,{size:15})),i.a.createElement(W.b,{to:"/apis/"+e.id+"/overview"},i.a.createElement(Ne.a,null,i.a.createElement(q.a,{id:"Apis.Details.Configuration.Configuration.cancel",defaultMessage:"Cancel"})))),Object(o.b)(["apim:api_create"],e)&&i.a.createElement(ge.a,{py:1},i.a.createElement(K.a,{variant:"body2",color:"primary"},i.a.createElement(q.a,{id:"Apis.Details.Configuration.Configuration.update.not.allowed",defaultMessage:"* You are not authorized to update particular fields of the API due to insufficient permissions"}))))))))))}var Xt=a(2153),$t=a.n(Xt),ea=a(2154),ta=a.n(ea),aa=a(546),na=a.n(aa),ia=a(1275),ra=a(1610),sa=a(1274),oa=a(1273),la=a(554),ca=a.n(la);const pa=Object(Ue.a)(e=>({expansionPanel:{marginBottom:e.spacing(3)},expansionPanelDetails:{flexDirection:"column"},iconSpace:{marginLeft:e.spacing(.5)},actionSpace:{margin:"-7px auto"},subHeading:{fontSize:"1rem",fontWeight:400,margin:0,display:"inline-flex",lineHeight:1.5},paper:{padding:e.spacing(0,3)}}));function da(e){const{api:t,configDispatcher:a}=e,n=pa(),[r]=Object(de.d)(),s=t.responseCachingEnabled;return i.a.createElement(i.a.Fragment,null,i.a.createElement(ra.a,{className:n.expansionPanel},i.a.createElement(sa.a,{expandIcon:i.a.createElement(ca.a,null)},i.a.createElement(K.a,{className:n.subHeading,variant:"h6"},i.a.createElement(q.a,{id:"Apis.Details.Configuration.Configuration.response.caching",defaultMessage:"Response Caching"}),i.a.createElement(ie.a,{title:i.a.createElement(q.a,{id:"Apis.Details.Configuration.components.ResponseCaching.tooltip",defaultMessage:"If enabled, the API response will be cached at the gateway level to improve the response time and minimize the backend load"}),"aria-label":"Response cache",placement:"right-end",interactive:!0},i.a.createElement(ke.a,{className:n.iconSpace}))),i.a.createElement(Et.a,{className:n.actionSpace,control:i.a.createElement(ia.a,{disabled:Object(o.b)(["apim:api_create"],r),checked:t.responseCachingEnabled,onChange:e=>{let{target:{checked:t}}=e;return a({action:"responseCachingEnabled",value:t})},color:"primary"})})),i.a.createElement(oa.a,{className:n.expansionPanelDetails},i.a.createElement(pe.a,{container:!0,spacing:1,alignItems:"flex-start"},i.a.createElement(pe.a,{item:!0},s&&i.a.createElement(vt.a,{value:t.cacheTimeout,onChange:e=>{let{target:{value:t}}=e;return a({action:"cacheTimeout",value:t})},margin:"normal",helperText:i.a.createElement(q.a,{id:"Apis.Details.Configuration.Configuration.cache.timeout",defaultMessage:"Cache Timeout (seconds)"})}))))))}function ma(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}da.propTypes={api:s.a.shape({}).isRequired,configDispatcher:s.a.func.isRequired};const ua=Object(Ue.a)(e=>({expansionPanel:{marginBottom:e.spacing(3)},expansionPanelDetails:{flexDirection:"column"},iconSpace:{marginLeft:e.spacing(.5)},actionSpace:{margin:"-7px auto"},subHeading:{fontSize:"1rem",fontWeight:400,margin:0,display:"inline-flex",lineHeight:1.5}}));function ga(e){const[t]=Object(de.d)(),{configDispatcher:a,api:{corsConfiguration:n}}=e,r=n.corsConfigurationEnabled,s="*"===n.accessControlAllowOrigins[0]&&1===n.accessControlAllowOrigins.length,l=ua();return i.a.createElement(ra.a,{className:l.expansionPanel},i.a.createElement(sa.a,{expandIcon:i.a.createElement(ca.a,null)},i.a.createElement(K.a,{className:l.subHeading,variant:"h6"},i.a.createElement(q.a,{id:"Apis.Details.Configuration.components.CORSConfiguration.cors.configuration",defaultMessage:"CORS Configuration"}),i.a.createElement(ie.a,{title:i.a.createElement(q.a,{id:"Apis.Details.Configuration.components.CORSConfiguration.tooltip",defaultMessage:"If enabled, the CORS configuration for the API will be enabled."}),"aria-label":"Response cache",placement:"right-end",interactive:!0},i.a.createElement(ke.a,{className:l.iconSpace}))),i.a.createElement(Et.a,{className:l.actionSpace,control:i.a.createElement(ia.a,{disabled:Object(o.b)(["apim:api_create"],t),checked:n.corsConfigurationEnabled,onChange:e=>{let{target:{checked:t}}=e;return a({action:"corsConfigurationEnabled",value:t})},color:"primary"})})),i.a.createElement(oa.a,{className:l.expansionPanelDetails},i.a.createElement(pe.a,{container:!0},i.a.createElement(pe.a,{item:!0,md:12},r&&i.a.createElement(pe.a,{container:!0},i.a.createElement(pe.a,{item:!0,md:12},i.a.createElement(K.a,{variant:"subtitle1"},i.a.createElement(q.a,{id:"Apis.Details.Configuration.components.CORSConfiguration.allow. origins",defaultMessage:"Access Control Allow Origins"}))),i.a.createElement(pe.a,{item:!0,md:12},i.a.createElement(pe.a,{container:!0},i.a.createElement(pe.a,{item:!0,md:12},i.a.createElement(Et.a,{style:{display:"flex"},control:i.a.createElement(zt.a,{disabled:Object(o.b)(["apim:api_create"],t),checked:s,onChange:e=>{let{target:{checked:t,value:n}}=e;return a({action:"accessControlAllowOrigins",event:{checked:t,value:n}})},value:"*",color:"primary"}),label:"Allow All Origins"})),!s&&i.a.createElement(pe.a,{item:!0,md:12},i.a.createElement(St.a,{style:{marginBottom:40,display:"flex"},value:n.accessControlAllowOrigins,helperText:i.a.createElement(q.a,{id:"Apis.Details.Configuration.components.CORSConfigurations.origin.helper",defaultMessage:"Press `Enter` after typing the origin name,to add a new origin"}),onAdd:e=>{a({action:"accessControlAllowOrigins",event:{value:[].concat(ma(n.accessControlAllowOrigins),[e])}})},onDelete:e=>{a({action:"accessControlAllowOrigins",event:{value:n.accessControlAllowOrigins.filter(t=>t!==e)}})}})))),i.a.createElement(pe.a,{item:!0,md:12},i.a.createElement(K.a,{variant:"subtitle1"},i.a.createElement(q.a,{id:"Apis.Details.Configuration.components.CORSConfiguration.allow. headers",defaultMessage:"Access Control Allow Headers"}))),i.a.createElement(pe.a,{item:!0,md:12},i.a.createElement(St.a,{style:{marginBottom:40,display:"flex"},value:n.accessControlAllowHeaders,disabled:Object(o.b)(["apim:api_create"],t),helperText:i.a.createElement(q.a,{id:"Apis.Details.Configuration.components.CORSConfigurations.header.helper",defaultMessage:"Press `Enter` after typing the header name, to add a new header"}),onAdd:e=>{a({action:"accessControlAllowHeaders",value:[].concat(ma(n.accessControlAllowHeaders),[e])})},onDelete:e=>{a({action:"accessControlAllowHeaders",value:n.accessControlAllowHeaders.filter(t=>t!==e)})}})),i.a.createElement(pe.a,{item:!0,md:12},i.a.createElement(K.a,{variant:"subtitle1"},i.a.createElement(q.a,{id:"Apis.Details.Configuration.components.CORSConfiguration.allow. methods",defaultMessage:"Access Control Allow Methods"}))),i.a.createElement(pe.a,{item:!0,md:12},i.a.createElement(St.a,{style:{marginBottom:40,display:"flex"},value:n.accessControlAllowMethods,disabled:Object(o.b)(["apim:api_create"],t),helperText:i.a.createElement(q.a,{id:"Apis.Details.Configuration.components.CORSConfigurations.method.helper",defaultMessage:"Press `Enter` after typing the method name, to add a new method"}),onAdd:e=>{let t=[].concat(ma(n.accessControlAllowMethods),[e.toUpperCase()]);n.accessControlAllowMethods.find(t=>t===e.toUpperCase())&&(t=ma(n.accessControlAllowMethods)),a({action:"accessControlAllowMethods",value:t})},onDelete:e=>{a({action:"accessControlAllowMethods",value:n.accessControlAllowMethods.filter(t=>t!==e)})}})),i.a.createElement(pe.a,{item:!0},i.a.createElement(Et.a,{control:i.a.createElement(zt.a,{disabled:Object(o.b)(["apim:api_create"],t),checked:n.accessControlAllowCredentials,onChange:e=>{let{target:{checked:t}}=e;return a({action:"accessControlAllowCredentials",value:t})},color:"primary"}),label:i.a.createElement(q.a,{id:"Apis.Details.Configuration.components.CORSConfiguration.allow.credentials",defaultMessage:"Access Control Allow Credentials"})})))))))}ga.propTypes={api:s.a.shape({}).isRequired,configDispatcher:s.a.func.isRequired};var ha=a(1187),fa=a(1209),Ea=a(1192),ba=a(1194),ya=a(1191);class va extends i.a.Component{constructor(e){super(e),this.state={isOpen:!1},this.setIsOpen=this.setIsOpen.bind(this)}componentDidUpdate(e){const{api:t}=this.props;!e.api.enableSchemaValidation&&t.enableSchemaValidation&&this.setIsOpen(!0)}setIsOpen(e){this.setState({isOpen:e})}render(){const{api:e,configDispatcher:t,classes:a}=this.props,{isOpen:n}=this.state,{api:r}=this.context;return i.a.createElement(ce.a,{className:a.paper},i.a.createElement(pe.a,{container:!0,spacing:1,alignItems:"flex-start"},i.a.createElement(pe.a,{item:!0,md:12},i.a.createElement(K.a,{className:a.subHeading,variant:"h6"},i.a.createElement(q.a,{id:"Apis.Details.Configuration.Configuration.schema.validation",defaultMessage:"Schema Validation"}),i.a.createElement(ie.a,{title:i.a.createElement(q.a,{id:"Apis.Details.Configuration.components.schema.validation.tooltip",defaultMessage:"Enable the request and response validation against the OpenAPI definition"}),"aria-label":"Schema Validation",placement:"right-end",interactive:!0},i.a.createElement(ke.a,{className:a.iconSpace}))),i.a.createElement(Et.a,{className:a.actionSpace,control:i.a.createElement(ia.a,{disabled:Object(o.b)(["apim:api_create"],r),checked:void 0!==e.enableSchemaValidation&&e.enableSchemaValidation,onChange:e=>{let{target:{checked:a}}=e;return t({action:"enableSchemaValidation",value:a})},color:"primary"})}))),i.a.createElement(ha.a,{open:n,onClose:()=>this.setIsOpen(!1),"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},i.a.createElement(ya.a,{id:"alert-dialog-title"},i.a.createElement(q.a,{id:"Apis.Details.Configuration.components.SchemaValidation.title",defaultMessage:"Caution!"})),i.a.createElement(Ea.a,null,i.a.createElement(ba.a,{id:"alert-dialog-description"},i.a.createElement(K.a,{variant:"subtitle1",display:"block",gutterBottom:!0},i.a.createElement(q.a,{id:"Apis.Details.Configuration.components.SchemaValidation.description",defaultMessage:"Enabling JSON schema validation will cause to build the payload in every request and response. This will impact the round trip time of an API request!"})),i.a.createElement(K.a,{variant:"subtitle2",display:"block",gutterBottom:!0},i.a.createElement("b",null,i.a.createElement(q.a,{id:"Apis.Details.Configuration.components.SchemaValidation.description.question",defaultMessage:"Do you want to enable schema validation?"}))))),i.a.createElement(fa.a,null,i.a.createElement(Ne.a,{color:"primary",variant:"contained",onClick:()=>this.setIsOpen(!1)},"Yes"),i.a.createElement(Ne.a,{onClick:()=>{this.setIsOpen(!1),t({action:"enableSchemaValidation",value:!1})},color:"primary"},"No"))))}}va.propTypes={api:s.a.shape({enableSchemaValidation:s.a.bool}).isRequired,configDispatcher:s.a.func.isRequired,classes:s.a.shape({}).isRequired},va.contextType=de.c;var Ca=Object(L.a)(e=>({subHeading:{fontSize:"1rem",fontWeight:400,margin:0,display:"inline-flex",lineHeight:2.5},iconSpace:{marginLeft:e.spacing(.5)},actionSpace:{margin:e.spacing(0,-1),float:"right"},paper:{padding:e.spacing(0,3),marginBottom:e.spacing(3)}}))(va),Aa=a(1208),Da=a(1222);function Sa(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Oa(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Sa(a,!0).forEach(function(t){wa(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Sa(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function wa(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Pa=Object(Ue.a)(e=>({expansionPanel:{marginBottom:e.spacing(1)},expansionPanelDetails:{flexDirection:"column"},iconSpace:{marginLeft:e.spacing(.5)},subHeading:{fontSize:"1rem",fontWeight:400,margin:0,display:"inline-flex",lineHeight:1.5}}));function xa(e){const{api:t,configDispatcher:a}=e,n=Pa();return i.a.createElement(i.a.Fragment,null,i.a.createElement(pe.a,{item:!0,xs:12},i.a.createElement(ra.a,{className:n.expansionPanel,defaultExpanded:!0},i.a.createElement(sa.a,{expandIcon:i.a.createElement(ca.a,null)},i.a.createElement(K.a,{className:n.subHeading,variant:"h6"},i.a.createElement(q.a,{id:"Apis.Details.Configuration.Components.MaxBackendTps.maximum.backend.throughput",defaultMessage:"Backend Throughput"}),i.a.createElement(ie.a,{title:i.a.createElement(q.a,{id:"Apis.Details.Configuration.components.MaxBackendTps.tooltip",defaultMessage:"Limits the total number of calls the API Manager is allowed to make to the backend"}),"aria-label":"APISecurity",placement:"right-end",interactive:!0},i.a.createElement(ke.a,{className:n.iconSpace})))),i.a.createElement(oa.a,{className:n.expansionPanelDetails},i.a.createElement(ft.a,{component:"fieldset"},i.a.createElement(bt.a,{component:"legend"},"Maximum Throughput"),i.a.createElement(ht.a,{"aria-label":"change-max-TPS",value:null===t.maxTps?"unlimited":"specify",onChange:e=>{a({action:"maxTps",value:"specify"===e.target.value?{production:null,sandbox:null}:null})},row:!0},i.a.createElement(Et.a,{value:"unlimited",control:i.a.createElement(gt.a,{color:"primary",disabled:Object(o.b)(["apim:api_create"],t)}),label:"Unlimited",labelPlacement:"end"}),i.a.createElement(Et.a,{value:"specify",control:i.a.createElement(gt.a,{color:"primary",disabled:Object(o.b)(["apim:api_create"],t)}),label:"Specify",labelPlacement:"end",disabled:Object(o.b)(["apim:api_create"],t)}))),i.a.createElement(Da.a,{in:null!==t.maxTps},i.a.createElement(pe.a,{item:!0,xs:12,style:{marginBottom:10,position:"relative"}},i.a.createElement(vt.a,{label:"Max Production TPS",margin:"normal",variant:"outlined",onChange:e=>{a({action:"maxTps",value:Oa({},t.maxTps,{production:e.target.value})})},value:null!==t.maxTps?t.maxTps.production:"",disabled:Object(o.b)(["apim:api_create"],t),InputProps:{endAdornment:i.a.createElement(It.a,{position:"end"},"TPS")}})),i.a.createElement(pe.a,{item:!0,xs:12,style:{marginBottom:10,position:"relative"}},i.a.createElement(vt.a,{label:"Max Sandbox TPS",margin:"normal",variant:"outlined",onChange:e=>{a({action:"maxTps",value:Oa({},t.maxTps,{sandbox:e.target.value})})},value:null!==t.maxTps?t.maxTps.sandbox:"",disabled:Object(o.b)(["apim:api_create"],t),InputProps:{endAdornment:i.a.createElement(It.a,{position:"end"},"TPS")}}),i.a.createElement(Aa.a,null,i.a.createElement(q.a,{id:"Apis.Details.Configuration.components.MaxBackendTps.formattedMessage",defaultMessage:"Maximum backend transactions per second in integers"}))))))))}xa.propTypes={api:s.a.shape({}).isRequired,configDispatcher:s.a.func.isRequired};var Ta=a(1174),Ia=a(757),Ma=a(1211);function Ra(){return(Ra=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function Na(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}const ja={border:"1px dashed ",borderRadius:"5px",cursor:"pointer",height:75,padding:"8px 0px",position:"relative",textAlign:"center",width:"100%",margin:"10px 0"};function ka(e){const{classes:t,updateMediationPolicy:a,selectedMediationPolicy:r,setEditing:s,editing:o,type:l,intl:c}=e,{api:p}=Object(n.useContext)(de.c),[d,m]=Object(n.useState)(null),[u,g]=Object(n.useState)(null),[h,f]=Object(n.useState)(),{id:E}=p,b="none",[y,v]=Object(n.useState)(r);function C(){const e=Q.a.getGlobalMediationPolicies(),t=Q.a.getMediationPolicies(E);Promise.all([e,t]).then(e=>{m(Na(e[0].obj.list.filter(e=>e.type===l))),g(Na(e[1].obj.list.filter(e=>e.type===l)))}).catch(e=>{0})}function A(e){e.name!==b?(Object.assign(e,{content:""}),v(e)):(Object.assign(e,{content:"",id:b}),v(e))}Object(n.useEffect)(()=>{if(r){const{shared:e}=r;e?f("global"):r.name===b?f("none"):f("custom")}else f("none")},[r]),Object(n.useEffect)(()=>{C()},[]),Object(n.useEffect)(()=>{"custom"===h&&u&&u.length>0?A(u[0]):"global"===h&&d&&d.length>0&&A(d[0])},[h]);const D=e=>{const t=e[0];t&&(e=>{Q.a.addMediationPolicy(e,E,l).then(e=>{const{body:{id:t,type:a,name:n}}=e;C(),v({id:t,type:a,name:n,shared:!1,content:""}),$.a.info(c.formatMessage({id:"Apis.Details.MediationPolicies.Edit.EditMediationPolicy.success",defaultMessage:"Mediation policy added successfully"}))}).catch(e=>{console.error(e),null!==e.response.body.description?$.a.error(e.response.body.description):$.a.error(c.formatMessage({id:"Apis.Details.MediationPolicies.Edit.AddMediationPolicy.error",defaultMessage:"Error while adding mediation policy"}))})})(t)};function S(e){A({name:e.target.getAttribute("seq_name"),id:e.target.getAttribute("seq_id"),type:e.target.getAttribute("seq_type")})}const O=e=>{d.filter(t=>t.id===e).length>0?function(e){Q.a.getGlobalMediationPolicyContent(e).then(e=>{B.a.forceDownload(e)}).catch(e=>{})}(e):function(e){Q.a.getMediationPolicyContent(e,E).then(e=>{B.a.forceDownload(e,document)}).catch(e=>{})}(e)},w=e=>{d.filter(t=>t.id===e).length>0?$.a.error(i.a.createElement(q.a,{id:"Apis.Details.MediationPolicies.Edit.EditMediationPolicy.global.delete",defaultMessage:"Cannot delete Global mediation policies."})):function(e){Q.a.deleteMediationPolicy(e,p.id).then(()=>{g(u.filter(t=>t.id!==e)),$.a.info(i.a.createElement(q.a,{id:"Apis.Details.MediationPolicies.Edit.EditMediationPolicy.delete.success",defaultMessage:"Mediation policy deleted successfully."}))}).catch(e=>{})}(e)};return i.a.createElement(ha.a,{disableBackdropClick:!0,disableEscapeKeyDown:!0,maxWidth:"sm",fullWidth:!0,"aria-labelledby":"confirmation-dialog-title",open:o},i.a.createElement(ya.a,{id:"confirmation-dialog-title"},i.a.createElement(q.a,{id:"Apis.Details.MediationPolicies.Edit.EditMediationPolicy.select.policy",defaultMessage:"Select a Mediation Policy"})),d&&u&&i.a.createElement(Ea.a,{dividers:!0},i.a.createElement(ht.a,{value:h,onChange:function(e){const t=e.target.value;f(t),A({})},className:t.radioWrapper},i.a.createElement(Et.a,{value:"none",control:i.a.createElement(gt.a,{color:"primary"}),label:i.a.createElement(q.a,{id:"Apis.Details.MediationPolicies.Edit.EditMediationPolicy.none",defaultMessage:"None"})}),i.a.createElement(Et.a,{value:"global",control:i.a.createElement(gt.a,{color:"primary"}),label:i.a.createElement(q.a,{id:"Apis.Details.MediationPolicies.Edit.EditMediationPolicy.common.policies",defaultMessage:"Common Policies"})}),i.a.createElement(Et.a,{value:"custom",control:i.a.createElement(gt.a,{color:"primary"}),label:i.a.createElement(q.a,{id:"Apis.Details.MediationPolicies.Edit.EditMediationPolicy.custom.policies",defaultMessage:"Custom Policies"})})),"custom"===h&&i.a.createElement(i.a.Fragment,null,i.a.createElement(Ia.a,{multiple:!1,className:t.dropzone,activeClassName:t.acceptDrop,rejectClassName:t.rejectDrop,onDrop:e=>{D(e)}},e=>{let{getRootProps:a,getInputProps:n}=e;return i.a.createElement("div",a({style:ja}),i.a.createElement("input",Ra({},n(),{accept:"application/xml,text/xml"})),i.a.createElement("div",{className:t.dropZoneWrapper},i.a.createElement(Ma.a,{className:t.dropIcon},"cloud_upload"),i.a.createElement(K.a,null,i.a.createElement(q.a,{id:"Apis.Details.MediationPolicies.Edit.EditMediationPolicy.click.or.drop.to.upload.file",defaultMessage:"Click or drag the mediation file to upload."}))))}),i.a.createElement(ht.a,{"aria-label":"inflow",name:"inflow",className:t.radioGroup,value:y.name,onChange:S},i.a.createElement(bt.a,{component:"customPolicies"},i.a.createElement(q.a,{id:"Apis.Details.Edit.MediationPolicies.EditMediationPolicies.custom.mediation.policies",defaultMessage:"Custom Mediation Policies"})),u.map(e=>i.a.createElement("div",null,i.a.createElement(Ta.a,{onClick:()=>w(e.id)},i.a.createElement(Ma.a,null,"delete")),i.a.createElement(Ne.a,{onClick:()=>O(e.id)},i.a.createElement(Ma.a,null,"arrow_downward")),i.a.createElement(Et.a,{control:i.a.createElement(gt.a,{inputProps:{seq_id:e.id,seq_name:e.name,seq_type:e.type},color:"primary"}),label:e.name,value:e.name,checked:y.name===e.name}))))),"global"===h&&i.a.createElement(ht.a,{"aria-label":"inflow",name:"inflow",className:t.radioGroup,value:y.name,onChange:S},d.map(e=>i.a.createElement("div",null,i.a.createElement(Ne.a,{onClick:()=>O(e.id)},i.a.createElement(Ma.a,null,"arrow_downward")),i.a.createElement(Et.a,{control:i.a.createElement(gt.a,{inputProps:{seq_id:e.id,seq_name:e.name,seq_type:e.type},color:"primary"}),label:e.name,value:e.name,checked:y.name===e.name}))))),i.a.createElement(fa.a,null,i.a.createElement(Ne.a,{onClick:function(){s(!1)},color:"primary"},i.a.createElement(q.a,{id:"Apis.Details.MediationPolicies.Edit.EditMediationPolicy.cancel.btn",defaultMessage:"Cancel"})),i.a.createElement(Ne.a,{onClick:function(){a(y),s(!1)},color:"primary",variant:"contained",disabled:"custom"===h&&u&&0===u.length},i.a.createElement(q.a,{id:"Apis.Details.MediationPolicies.Edit.EditMediationPolicy.select.btn",defaultMessage:"Select"}))))}ka.propTypes={classes:s.a.shape({}).isRequired,selectedMediationPolicy:s.a.shape({}).isRequired,type:s.a.string.isRequired,updateMediationPolicy:s.a.func.isRequired,setEditing:s.a.func.isRequired,editing:s.a.bool.isRequired,intl:s.a.shape({formatMessage:s.a.func}).isRequired};var La=Object(q.d)(Object(L.a)(e=>({formControl:{display:"flex",flexDirection:"row",padding:"".concat(e.spacing(2),"px 2px")},dropzone:{border:"1px dashed "+e.palette.primary.main,borderRadius:"5px",cursor:"pointer",height:"calc(100vh - 50em)",padding:"".concat(e.spacing(2),"px ").concat(e.spacing(2),"px"),position:"relative",textAlign:"center",width:"100%",margin:"10px 0"},dropZoneWrapper:{height:"100%",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column","& span":{fontSize:64,color:e.palette.primary.main}},radioWrapper:{flexDirection:"row"}}))(ka)),qa=a(1442),_a=a.n(qa);function Wa(e){const{classes:t,updateMediationPolicy:a,selectedMediationPolicy:r,type:s,isRestricted:o}=e,[l,c]=Object(n.useState)(!1);return i.a.createElement(i.a.Fragment,null,i.a.createElement(ce.a,{className:t.paper},i.a.createElement(pe.a,{container:!0,spacing:2,alignItems:"flex-start"},i.a.createElement(pe.a,{item:!0,md:12,style:{position:"relative",display:"inline-flex"}},i.a.createElement(K.a,{className:t.subHeading,variant:"h6"},i.a.createElement(q.a,{id:"Apis.Details.MediationPolicies.Mediation",defaultMessage:"Message Mediation"})),i.a.createElement(K.a,{className:t.heading},r&&r.name?i.a.createElement("span",null,r.name):i.a.createElement("span",null,"none")),i.a.createElement(Ne.a,{className:t.editIcon,size:"small",onClick:function(){c(!0)},disabled:o},i.a.createElement(_a.a,null))))),i.a.createElement(La,{setEditing:c,editing:l,updateMediationPolicy:a,selectedMediationPolicy:r,type:s}))}Wa.propTypes={classes:s.a.shape({}).isRequired,updateMediationPolicy:s.a.func.isRequired,selectedMediationPolicy:s.a.shape({}).isRequired,type:s.a.string.isRequired,api:s.a.shape({}).isRequired};var Fa=Object(L.a)({content:{flexGrow:1},itemWrapper:{width:"auto",display:"flex"},FormControl:{padding:10,width:"100%",marginTop:0,display:"flex",flexDirection:"row"},subTitle:{marginTop:20},subTitleDescription:{marginBottom:10},flowWrapper:{display:"flex",flexDirection:"row",alignItems:"center",marginBottom:10},subHeading:{fontSize:"1rem",fontWeight:400,margin:0,display:"inline-flex",lineHeight:1.5},heading:{margin:"auto",color:"rgba(0, 0, 0, 0.40)"},paper:{padding:"10px 24px",width:"auto"},editIcon:{position:"absolute",top:8,right:0}})(Wa);const za=function(e,t){if(e.endpointConfig){if("prod"===t)return e.getProductionEndpoint();if("sand"===t)return e.getSandboxEndpoint()}return null},Ba=Object(Ue.a)(e=>({subtitle:{marginTop:e.spacing(0)},expansionPanel:{marginBottom:e.spacing(1)},expansionPanelDetails:{flexDirection:"column"},notConfigured:{color:"rgba(0, 0, 0, 0.40)"},subHeading:{fontSize:"1rem",fontWeight:400,margin:0,display:"inline-flex",lineHeight:1.5},textTrim:{overflow:"hidden",textOverflow:"ellipsis"}}));function Ua(e){const{api:t}=e,a=Ba(),n=null!==t.endpointConfig&&"prototyped"===t.endpointConfig.implementation_status;return i.a.createElement(i.a.Fragment,null,i.a.createElement(ra.a,{className:a.expansionPanel,defaultExpanded:!0},i.a.createElement(sa.a,{expandIcon:i.a.createElement(ca.a,null)},i.a.createElement(K.a,{className:a.subHeading,variant:"h6"},i.a.createElement(q.a,{id:"Apis.Details.Configuration.components.Endpoints.endpoints",defaultMessage:"Endpoints"}))),i.a.createElement(oa.a,{className:a.expansionPanelDetails},(e=>!(!e||!e.production_endpoints||Array.isArray(e.production_endpoints)||"default"!==e.production_endpoints.url))(t.endpointConfig)?i.a.createElement(ge.a,{pb:2},i.a.createElement(K.a,{component:"p",variant:"body1",className:a.subtitle},i.a.createElement(q.a,{id:"Apis.Details.Configuration.components.Endpoints.dynamic",defaultMessage:"Dynamic"}))):i.a.createElement(i.a.Fragment,null,i.a.createElement(ge.a,{pb:2},n?i.a.createElement(K.a,{component:"p",variant:"subtitle2",className:a.subtitle},i.a.createElement(q.a,{id:"Apis.Details.Configuration.components.Endpoints.prototype",defaultMessage:"Prototype"})):i.a.createElement(K.a,{component:"p",variant:"subtitle2",className:a.subtitle},i.a.createElement(q.a,{id:"Apis.Details.Configuration.components.Endpoints.production",defaultMessage:"Production"})),za(t,"prod")&&i.a.createElement(ie.a,{title:za(t,"prod"),interactive:!0},i.a.createElement(K.a,{component:"p",variant:"body1",className:a.textTrim},i.a.createElement(i.a.Fragment,null,za(t,"prod")))),i.a.createElement(K.a,{component:"p",variant:"body1",className:a.notConfigured},!za(t,"prod")&&i.a.createElement(i.a.Fragment,null,i.a.createElement(q.a,{id:"Apis.Details.Configuration.components.Endpoints.not.set",defaultMessage:"-"})))),!n&&i.a.createElement(ge.a,{pb:2},i.a.createElement(K.a,{component:"p",variant:"subtitle2",className:a.subtitle},i.a.createElement(q.a,{id:"Apis.Details.Configuration.components.Endpoints.sandbox",defaultMessage:"Sandbox"})),za(t,"sand")&&i.a.createElement(ie.a,{title:za(t,"sand"),interactive:!0},i.a.createElement(K.a,{component:"p",variant:"body1",className:a.textTrim},i.a.createElement(i.a.Fragment,null,za(t,"sand")))),i.a.createElement(K.a,{component:"p",variant:"body1",className:a.notConfigured},!za(t,"sand")&&i.a.createElement(i.a.Fragment,null,i.a.createElement(q.a,{id:"Apis.Details.Configuration.components.Endpoints.sandbox.not.set",defaultMessage:"-"}))))),i.a.createElement(ge.a,{width:"100%",textAlign:"right",m:1},i.a.createElement(W.b,{to:"/apis/"+t.id+"/endpoints"},i.a.createElement(K.a,{style:{marginLeft:"10px"},color:"primary",variant:"caption"},i.a.createElement(q.a,{id:"Apis.Details.Configuration.Configuration.Endpoints.edit.api.endpoints",defaultMessage:"Edit API Endpoints"}),i.a.createElement(fe.a,{style:{marginLeft:"2px"},fontSize:"small"})))))))}Ua.propTypes={api:s.a.shape({}).isRequired};var Va=Object(de.e)(Ua);const Ha="oauth2",Ga="basic_auth",Ka="api_key",Ya="mutualssl",Ja="oauth_basic_auth_api_key_mandatory",Qa="mutualssl_mandatory";var Za=a(1254);function Xa(e){const{api:t,configDispatcher:a}=e,[n]=Object(de.d)();return i.a.createElement(pe.a,{container:!0,spacing:1,alignItems:"center"},i.a.createElement(pe.a,{item:!0,xs:11},i.a.createElement(vt.a,{disabled:Object(o.b)(["apim:api_create"],n),id:"outlined-name",label:i.a.createElement(q.a,{id:"Apis.Details.Configuration.Configuration.auth.header.label",defaultMessage:"Authorization Header"}),value:t.authorizationHeader||" ",margin:"normal",variant:"outlined",onChange:e=>{let{target:{value:t}}=e;return a({action:"authorizationHeader",value:t})},style:{display:"flex"}})),i.a.createElement(pe.a,{item:!0,xs:1},i.a.createElement(ie.a,{title:i.a.createElement(q.a,{id:"Apis.Details.Configuration.Configuration.AuthHeader.tooltip",defaultMessage:' The header name that is used to send the authorization information. "Authorization" is the default header.'}),"aria-label":"Auth Header",placement:"right-end",interactive:!0},i.a.createElement(ke.a,null))))}Xa.propTypes={api:s.a.shape({}).isRequired,configDispatcher:s.a.func.isRequired};const $a=Object(Ue.a)(e=>({expansionPanel:{marginBottom:e.spacing(1)},expansionPanelDetails:{flexDirection:"column"},iconSpace:{marginLeft:e.spacing(.5)},bottomSpace:{marginBottom:e.spacing(4)},subHeading:{fontSize:"1rem",fontWeight:400,margin:0,display:"inline-flex",lineHeight:1.5}}));function en(e){const{haveMultiLevelSecurity:t,securityScheme:a,configDispatcher:n,api:r}=e,[s]=Object(de.d)(),l=$a();let c="optional";return a.includes(Ha)||a.includes(Ga)||a.includes(Ka)?a.includes(Ya)?a.includes(Ja)&&(c=Ja):c=Ja:c=null,i.a.createElement(i.a.Fragment,null,i.a.createElement(pe.a,{item:!0,xs:12},i.a.createElement(ra.a,{className:l.expansionPanel},i.a.createElement(sa.a,{expandIcon:i.a.createElement(ca.a,null)},i.a.createElement(K.a,{className:l.subHeading,variant:"h6"},i.a.createElement(q.a,{id:"Apis.Details.Configuration.Components.APISecurity.Components. ApplicationLevel.http",defaultMessage:"Application Level Security"}),i.a.createElement(ie.a,{title:i.a.createElement(q.a,{id:"Apis.Details.Configuration.components.APISecurity.tooltip",defaultMessage:"This option determines the type of security that will be used to secure this API. An API can be secured with either OAuth2/Basic/ApiKey or it can be secured with all of them. If OAuth2 option is selected, relevant API will require a valid OAuth2 token for successful invocation."}),"aria-label":"APISecurity",placement:"right-end",interactive:!0},i.a.createElement(ke.a,{className:l.iconSpace})))),i.a.createElement(oa.a,{className:l.expansionPanelDetails},i.a.createElement(Za.a,{style:{display:"flow-root"}},i.a.createElement(Et.a,{control:i.a.createElement(zt.a,{disabled:Object(o.b)(["apim:api_create"],s),checked:a.includes(Ha),onChange:e=>{let{target:{checked:t,value:a}}=e;return n({action:"securityScheme",event:{checked:t,value:a}})},value:Ha,color:"primary"}),label:"OAuth2"}),i.a.createElement(Et.a,{control:i.a.createElement(zt.a,{disabled:Object(o.b)(["apim:api_create"],s),checked:a.includes(Ga),onChange:e=>{let{target:{checked:t,value:a}}=e;return n({action:"securityScheme",event:{checked:t,value:a}})},value:Ga,color:"primary"}),label:"Basic"}),i.a.createElement(Et.a,{control:i.a.createElement(zt.a,{checked:a.includes(Ka),disabled:Object(o.b)(["apim:api_create"],s),onChange:e=>{let{target:{checked:t,value:a}}=e;return n({action:"securityScheme",event:{checked:t,value:a}})},value:Ka,color:"primary"}),label:"Api Key"})),i.a.createElement(ft.a,{className:l.bottomSpace,component:"fieldset"},i.a.createElement(ht.a,{"aria-label":"HTTP security HTTP mandatory selection",name:Ja,value:c,onChange:e=>{let{target:{name:t,value:a}}=e;return n({action:"securityScheme",event:{name:t,value:a}})},row:!0},i.a.createElement(Et.a,{value:Ja,control:i.a.createElement(gt.a,{disabled:!t||Object(o.b)(["apim:api_create"],s),color:"primary"}),label:"Mandatory",labelPlacement:"end"}),i.a.createElement(Et.a,{value:"optional",control:i.a.createElement(gt.a,{disabled:!t||Object(o.b)(["apim:api_create"],s),color:"primary"}),label:"Optional",labelPlacement:"end"})),i.a.createElement(Aa.a,null,i.a.createElement(q.a,{id:"Apis.Details.Configuration.components.APISecurity.application.mandatory",defaultMessage:"Choose whether Application level security is mandatory or optional"}))),i.a.createElement(Xa,{api:r,configDispatcher:n})))))}en.propTypes={configDispatcher:s.a.func.isRequired,haveMultiLevelSecurity:s.a.bool.isRequired,securityScheme:s.a.arrayOf(s.a.string).isRequired,api:s.a.shape({}).isRequired};var tn=a(1207),an=a(1213),nn=a(1257),rn=a(1230),sn=a(802),on=a.n(sn);function ln(e){const{onChange:t,endpoint:a,isEndpointEmpty:n,endpoints:r}=e;return i.a.createElement(vt.a,{autoFocus:!0,error:n||0===r.length,helperText:0===r.length?i.a.createElement(q.a,{id:"Apis.Details.Endpoints.GeneralConfiguration.UploadCertificate.endpoint.empty.error",defaultMessage:"Save endpoints before adding the Certificate"}):((e,t,a)=>e?t:a)(n,i.a.createElement(q.a,{id:"Apis.Details.Endpoints.GeneralConfiguration.UploadCertificate.endpoint.error",defaultMessage:"Endpoint should not be empty"}),i.a.createElement(q.a,{id:"Apis.Details.Endpoints.GeneralConfiguration.UploadCertificate.endpoint.helpertext",defaultMessage:"Endpoint for the Certificate"})),required:!0,id:"certificateEndpoint",label:i.a.createElement(q.a,{id:"Apis.Details.Endpoints.GeneralConfiguration.UploadCertificate.endpoint",defaultMessage:"Endpoint"}),value:a,placeholder:"Endpoint",onChange:e=>t(e.target.value),margin:"normal",variant:"outlined",fullWidth:!0,select:!0},null!==r&&r.map(e=>e?i.a.createElement(At.a,{value:e.url},e.url):null))}ln.propTypes={endpoints:s.a.shape({}).isRequired,onChange:s.a.func.isRequired,classes:s.a.shape({}).isRequired,endpoint:s.a.string.isRequired,isEndpointEmpty:s.a.string.isRequired};var cn=a(1247);const pn={border:"1px dashed #c4c4c4",borderRadius:"5px",cursor:"pointer",height:75,padding:"8px 0px",position:"relative",textAlign:"center",width:"100%",margin:"10px 0"},dn=Object(Ue.a)(e=>({fileinput:{display:"none"},dropZoneWrapper:{height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center","& span.material-icons":{color:e.palette.primary.main}},uploadedFile:{fontSize:11},certificatesHeader:{fontWeight:600,marginTop:20},addCertificateBtn:{borderColor:"#c4c4c4",borderRadius:"8px",borderStyle:"dashed",borderWidth:"thin"},certificateList:{maxHeight:"250px",overflow:"scroll"},certDetailsHeader:{fontWeight:"600"},uploadCertDialogHeader:{fontWeight:"600"}}));function mn(e){const{endpoints:t,uploadCertificate:a,isMutualSSLEnabled:r,uploadCertificateOpen:s,setUploadCertificateOpen:o,aliasList:l}=e,[c,p]=Object(n.useState)(""),[d,m]=Object(n.useState)(""),[u,g]=Object(n.useState)(""),[h,f]=Object(n.useState)(!1),[E,b]=Object(n.useState)({name:"",content:{}}),[y,v]=Object(n.useState)(!1),[C,A]=Object(n.useState)(!1),[D,S]=Object(n.useState)(),O=dn(),[w,P]=Object(n.useState)(!1),x=()=>{o(!1),S(),b({name:"",content:""}),p(""),g(""),m("")};return i.a.createElement(ha.a,{open:s},i.a.createElement(ya.a,null,i.a.createElement(K.a,{className:O.uploadCertDialogHeader},i.a.createElement(q.a,{id:"Apis.Details.Endpoints.GeneralConfiguration.UploadCertificate.uploadCertificate",defaultMessage:"Upload Certificate"}))),i.a.createElement(Ea.a,null,i.a.createElement(pe.a,null,i.a.createElement("div",null,r?i.a.createElement(cn.a,{multiple:!1,policies:d,helperText:"Select a throttling policy for the certificate",onChange:function(e){const{value:t}=e.target;m(t)},required:!0,validate:e=>{A(""===e)}}):i.a.createElement(ln,{endpoints:t,onChange:e=>{g(e),v(!e)},endpoint:u,isEndpointEmpty:y,required:!0}),i.a.createElement(vt.a,{required:!0,id:"certificateAlias",label:i.a.createElement(q.a,{id:"Apis.Details.Endpoints.GeneralConfiguration.UploadCertificate.alias",defaultMessage:"Alias"}),value:c,placeholder:"My Alias",onChange:e=>p(e.target.value),onBlur:()=>(()=>{const e=Ot.a.alias.required().validate(c).error;S(e?{isValid:!1,message:e.details[0].message}:{isValid:!0,message:""})})(),margin:"normal",variant:"outlined",error:D&&!D.isValid||l&&l.includes(c),helperText:(()=>D&&!D.isValid?D.message:l&&l.includes(c)?i.a.createElement(q.a,{id:"Apis.Details.Endpoints.GeneralConfiguration.UploadCertificate.alias.exist.error",defaultMessage:"Alias already exists"}):i.a.createElement(q.a,{id:"Apis.Details.Endpoints.GeneralConfiguration.UploadCertificate.alias.default.message",defaultMessage:"Alias for the Certificate"}))(),fullWidth:!0,inputProps:{maxLength:45}}),i.a.createElement(Ia.a,{multiple:!1,accept:"application/pkcs8,application/pkcs10, application/pkix-crl,application/pkcs7-mime,application/x-x509-ca-cert,application/x-x509-user-cert,application/x-pkcs7-crl,application/x-pkcs12,application/x-pkcs7-certificates,application/x-pkcs7-certreqresp,.p8, .p10, .cer, .cert, .p7c, .crt, .der, .p12, .pfx, .p7b, .spc, .p7r",className:O.dropzone,activeClassName:O.acceptDrop,rejectClassName:O.rejectDrop,onDrop:e=>{(e=>{const t=e[0],a=t.name.split(".");["pem","txt","jks","key","ca-bundle"].includes(a[1])?P(!0):P(!1),t&&b({name:t.name,content:t})})(e)}},e=>{let{getRootProps:t,getInputProps:a}=e;return i.a.createElement("div",t({style:pn}),i.a.createElement("input",a()),i.a.createElement("div",{className:O.dropZoneWrapper},""===E.name?i.a.createElement("div",null,i.a.createElement(Ma.a,{style:{fontSize:56}},"cloud_upload"),i.a.createElement(K.a,null,i.a.createElement(q.a,{id:"Apis.Details.Endpoints.GeneralConfiguration.UploadCertificate.click.or.drop.to.upload.file",defaultMessage:"Click or drag the certificate  file to upload."}))):((e,t,a)=>e?t:a)(w,i.a.createElement("div",{classNames:O.uploadedFile},i.a.createElement(on.a,{color:"error",fontSize:"large"}),i.a.createElement(ge.a,{fontSize:"h6.fontSize",color:"error",fontWeight:"fontWeightLight"},i.a.createElement(pe.a,{xs:12},E.name),i.a.createElement(pe.a,{xs:12},i.a.createElement(K.a,{variant:"caption",color:"error"},i.a.createElement(q.a,{id:"Apis.Details.Endpoints.GeneralConfiguration.UploadCertificate.invalid.file",defaultMessage:"Invalid file type"}))))),i.a.createElement("div",{className:O.uploadedFile},i.a.createElement(on.a,{color:"primary",fontSize:"large"}),i.a.createElement(ge.a,{fontSize:"h6.fontSize",fontWeight:"fontWeightLight"},i.a.createElement(K.a,null,E.name))))))})))),i.a.createElement(fa.a,null,i.a.createElement(Ne.a,{onClick:x},i.a.createElement(q.a,{id:"Apis.Details.Endpoints.GeneralConfiguration.UploadCertificate.cancel.button",defaultMessage:"Close"})),i.a.createElement(Ne.a,{onClick:()=>{f(!0),r?a(E.content,d,c).then(x).finally(()=>f(!1)):a(E.content,u,c).then(x).finally(()=>f(!1))},variant:"contained",color:"primary",autoFocus:!0,disabled:""===c||D&&!D.isValid||!r&&""===u||""===E.name||r&&C||h||l&&l.includes(c)||w},i.a.createElement(q.a,{id:"Apis.Details.Endpoints.GeneralConfiguration.UploadCertificate.config.save.button",defaultMessage:"Save"}),h&&i.a.createElement(Ze.a,{size:24}))))}mn.defaultProps={isMutualSSLEnabled:!1,endpoints:[]},mn.propTypes={certificates:s.a.shape({}).isRequired,uploadCertificate:s.a.func.isRequired,isMutualSSLEnabled:s.a.bool,setUploadCertificateOpen:s.a.func.isRequired,uploadCertificateOpen:s.a.bool.isRequired,endpoints:s.a.shape([]),aliasList:s.a.shape([]).isRequired};const un=Object(Ue.a)(e=>({fileinput:{display:"none"},dropZoneWrapper:{height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center","& span.material-icons":{color:e.palette.primary.main}},uploadedFile:{fontSize:11},certificatesHeader:{fontWeight:600,marginTop:e.spacing(1)},addCertificateBtn:{borderColor:"#c4c4c4",borderRadius:"8px",borderStyle:"dashed",borderWidth:"thin"},certificateList:{maxHeight:"250px",overflow:"auto"},certDetailsHeader:{fontWeight:"600"},uploadCertDialogHeader:{fontWeight:"600"},alertWrapper:{display:"flex",flexDirection:"row",alignItems:"center"},warningIcon:{marginRight:13,color:e.custom.warningColor,"& .material-icons":{fontSize:30}},deleteIcon:{color:e.palette.error.dark,cursor:"pointer"},deleteIconDisable:{color:e.palette.disabled}}));function gn(e){const{certificates:t,uploadCertificate:a,deleteCertificate:r,isMutualSSLEnabled:s,apiId:l,endpoints:c,aliasList:p}=e,[d,m]=Object(n.useState)([]),[u,g]=Object(n.useState)({open:!1,anchor:null,details:{}}),[h,f]=Object(n.useState)({open:!1,alias:""}),[E,b]=Object(n.useState)(!1),[y,v]=Object(n.useState)(!1),C=un(),[A]=Object(de.d)();return Object(n.useEffect)(()=>{m(t)},[t]),i.a.createElement(pe.a,{container:!0,direction:"column"},i.a.createElement(pe.a,null,i.a.createElement(K.a,{className:C.certificatesHeader},i.a.createElement(q.a,{id:"Apis.Details.Endpoints.GeneralConfiguration.Certificates.certificates",defaultMessage:"Certificates"}))),i.a.createElement(pe.a,{item:!0},i.a.createElement(tn.a,{className:C.certificateList},d.length>0?d.map(e=>i.a.createElement(an.a,null,i.a.createElement(nn.a,null,i.a.createElement(Ma.a,null,"lock")),s?i.a.createElement(Ft.a,{primary:e.alias,secondary:e.tier}):i.a.createElement(Ft.a,{primary:e.alias,secondary:e.endpoint}),i.a.createElement(rn.a,null,i.a.createElement(Ta.a,{edge:"end",onClick:t=>((e,t)=>{s?Q.a.getClientCertificateStatus(t,l).then(a=>{g({details:a.body,open:!0,alias:t,anchor:e.currentTarget})}).catch(e=>{console.error(e)}):Q.a.getCertificateStatus(t).then(a=>{g({details:a.body,open:!0,alias:t,anchor:e.currentTarget})}).catch(e=>{console.error(e)})})(t,e.alias)},i.a.createElement(Ma.a,null,"info")),i.a.createElement(Ta.a,{disabled:Object(o.b)(["apim:api_create"],A),onClick:()=>f({open:!0,alias:e.alias})},i.a.createElement(Ma.a,{className:Object(o.b)(["apim:api_create"],A)?C.deleteIconDisable:C.deleteIcon}," ","delete"))))):i.a.createElement(an.a,null,i.a.createElement(nn.a,null,i.a.createElement(Ma.a,{color:"primary"},"info")),i.a.createElement(Ft.a,null,"You do not have any certificates uploaded"))),i.a.createElement(tn.a,null,i.a.createElement(an.a,{button:!0,disabled:Object(o.b)(["apim:api_create"],A),className:C.addCertificateBtn,onClick:()=>v(!0)},i.a.createElement(nn.a,null,i.a.createElement(Ta.a,null,i.a.createElement(Ma.a,null,"add"))),i.a.createElement(Ft.a,{primary:"Add Certificate"})))),i.a.createElement(ha.a,{open:h.open},i.a.createElement(ya.a,null,i.a.createElement(K.a,{className:C.uploadCertDialogHeader},i.a.createElement(q.a,{id:"Apis.Details.Endpoints.GeneralConfiguration.Certificates.deleteCertificate",defaultMessage:"Delete Certificate"}))),i.a.createElement(Ea.a,{className:C.alertWrapper},i.a.createElement(K.a,null,i.a.createElement(q.a,{id:"Apis.Details.Endpoints.GeneralConfiguration.Certificates.confirm.certificate.delete",defaultMessage:"Do you want to delete "})," ",h.alias+"?")),i.a.createElement(fa.a,null,i.a.createElement(Ne.a,{onClick:()=>(e=>{b(!0),r(e).then(()=>f({open:!1,alias:""})).finally(()=>b(!1))})(h.alias),variant:"contained",color:"primary",disabled:E,autoFocus:!0},i.a.createElement(q.a,{id:"Apis.Details.Endpoints.GeneralConfiguration.Certificates.delete.ok.button",defaultMessage:"OK"}),E&&i.a.createElement(Ze.a,{size:24})),i.a.createElement(Ne.a,{onClick:()=>f({open:!1,alias:""})},i.a.createElement(q.a,{id:"Apis.Details.Endpoints.GeneralConfiguration.Certificates.delete.cancel.button",defaultMessage:"Cancel"})))),i.a.createElement(ha.a,{open:u.open},i.a.createElement(ya.a,null,i.a.createElement(K.a,{className:C.certDetailsHeader},i.a.createElement(q.a,{id:"Apis.Details.Endpoints.GeneralConfiguration.Certificates.certificate.details.of",defaultMessage:"Details of"})," "+u.alias)),i.a.createElement(Ea.a,null,i.a.createElement(K.a,null,i.a.createElement(q.a,{id:"Apis.Details.Endpoints.GeneralConfiguration.Certificates.status",defaultMessage:"Status"})," : "+u.details.status),i.a.createElement(K.a,null,i.a.createElement(q.a,{id:"Apis.Details.Endpoints.GeneralConfiguration.Certificates.subject",defaultMessage:"Subject"})," : "+u.details.subject)),i.a.createElement(fa.a,null,i.a.createElement(Ne.a,{onClick:()=>g({open:!1,anchor:null,details:{}}),color:"primary"},i.a.createElement(q.a,{id:"Apis.Details.Endpoints.GeneralConfiguration.Certificates.details.close.button",defaultMessage:"Close"})))),i.a.createElement(mn,{endpoints:c,certificates:t,uploadCertificate:a,isMutualSSLEnabled:s,setUploadCertificateOpen:v,uploadCertificateOpen:y,aliasList:p}))}gn.defaultProps={isMutualSSLEnabled:!1,apiId:""},gn.propTypes={classes:s.a.shape({fileinput:s.a.shape({}),button:s.a.shape({})}).isRequired,certificates:s.a.shape({}).isRequired,uploadCertificate:s.a.func.isRequired,deleteCertificate:s.a.func.isRequired,apiId:s.a.string,isMutualSSLEnabled:s.a.bool,endpoints:s.a.shape([]).isRequired,aliasList:s.a.shape([]).isRequired};var hn=Object(q.d)(gn);const fn=Object(Ue.a)(e=>({error:{color:e.palette.error.main}}));function En(e){const{api:t,configDispatcher:a,securityScheme:n}=e,[r]=Object(de.d)(),s=fn(),l=n.includes(Ya);return i.a.createElement(pe.a,{container:!0,spacing:1,alignItems:"flex-start"},i.a.createElement(pe.a,{item:!0},i.a.createElement(ft.a,{component:"fieldset"},i.a.createElement(bt.a,{component:"legend"},i.a.createElement(q.a,{id:"Apis.Details.Configuration.Configuration.transports",defaultMessage:"Transports"})),i.a.createElement(Za.a,{style:{display:"flow-root"}},i.a.createElement(Et.a,{control:i.a.createElement(zt.a,{disabled:Object(o.b)(["apim:api_create"],r),checked:t.transport?t.transport.includes("http"):null,onChange:e=>{let{target:{checked:t}}=e;return a({action:"transport",event:{checked:t,value:"http"}})},value:"http",color:"primary"}),label:"HTTP"}),i.a.createElement(Et.a,{control:i.a.createElement(zt.a,{disabled:Object(o.b)(["apim:api_create"],r),checked:t.transport?t.transport.includes("https"):null,onChange:e=>{let{target:{checked:t}}=e;return a({action:"transport",event:{checked:t,value:"https"}})},value:"https",color:"primary"}),label:"HTTPS"})))),i.a.createElement(pe.a,{item:!0},i.a.createElement(ie.a,{title:i.a.createElement(q.a,{id:"Apis.Details.Configuration.components.Transports.tooltip",defaultMessage:"API will be exposed in selected transport(s) in the gateway(s)If Mutual SSL option is selected, a trusted clientcertificate should be presented to access the API"}),"aria-label":"Transports",placement:"right-end",interactive:!0},i.a.createElement(ke.a,null))),i.a.createElement(pe.a,{item:!0},i.a.createElement("span",{className:s.error},i.a.createElement(()=>t.transport&&0===t.transport.length?i.a.createElement(K.a,null,i.a.createElement(q.a,{id:"Apis.Details.Configuration.components.transport.empty",defaultMessage:"Please select at least one transport!"})):l&&!t.transport.includes("https")?i.a.createElement(q.a,{id:"Apis.Details.Configuration.components.transport.sslHttps",defaultMessage:"Please select Https as transport with mutual SSL!"}):null,null))))}function bn(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}En.propTypes={api:s.a.shape({}).isRequired,configDispatcher:s.a.func.isRequired};const yn=Object(Ue.a)(e=>({expansionPanel:{marginBottom:e.spacing(1)},expansionPanelDetails:{flexDirection:"column"},bottomSpace:{marginBottom:e.spacing(4)},subHeading:{fontSize:"1rem",fontWeight:400,margin:0,display:"inline-flex",lineHeight:1.5}}));function vn(e){const{haveMultiLevelSecurity:t,securityScheme:a,configDispatcher:r,intl:s,id:l,api:c}=e,p=a.includes(Ya),[d]=Object(de.d)(),[m,u]=Object(n.useState)([]),g=yn();Object(n.useEffect)(()=>{Q.a.getAllClientCertificates(l).then(e=>{const{certificates:t}=e.obj;u(t)}).catch(e=>{console.error(e),u([])})},[]);let h="optional";return p?a.includes(Ha)||a.includes(Ga)||a.includes(Ka)?a.includes(Qa)&&(h=Qa):h=Qa:h="null",i.a.createElement(i.a.Fragment,null,i.a.createElement(pe.a,{item:!0,xs:12},i.a.createElement(ra.a,{className:g.expansionPanel},i.a.createElement(sa.a,{expandIcon:i.a.createElement(ca.a,null)},i.a.createElement(K.a,{className:g.subHeading,variant:"h6"},i.a.createElement(q.a,{id:"Apis.Details.Configuration.Components.APISecurity.Components. TransportLevel.transport.level.security",defaultMessage:"Transport Level Security"}))),i.a.createElement(oa.a,{className:g.expansionPanelDetails},i.a.createElement(En,{api:c,configDispatcher:r,securityScheme:a}),i.a.createElement(Et.a,{control:i.a.createElement(zt.a,{disabled:Object(o.b)(["apim:api_create"],d),checked:p,onChange:e=>{let{target:{checked:t,value:a}}=e;return r({action:"securityScheme",event:{checked:t,value:a}})},value:Ya,color:"primary"}),label:"Mutual SSL"}),p&&i.a.createElement(ft.a,{component:"fieldset"},i.a.createElement(ht.a,{"aria-label":"HTTP security SSL mandatory selection",name:Qa,value:h,onChange:e=>{let{target:{name:t,value:a}}=e;return r({action:"securityScheme",event:{name:t,value:a}})},row:!0},i.a.createElement(Et.a,{value:Qa,control:i.a.createElement(gt.a,{disabled:!t||Object(o.b)(["apim:api_create"],d),color:"primary"}),label:"Mandatory",labelPlacement:"end"}),i.a.createElement(Et.a,{value:"optional",control:i.a.createElement(gt.a,{disabled:!t||Object(o.b)(["apim:api_create"],d),color:"primary"}),label:"Optional",labelPlacement:"end"})),i.a.createElement(Aa.a,null,i.a.createElement(q.a,{id:"Apis.Details.Configuration.components.APISecurity.http.mandatory",defaultMessage:"Choose whether Transport level security is mandatory or optional"}))),p&&i.a.createElement(hn,{isMutualSSLEnabled:p,certificates:m,uploadCertificate:(e,t,a)=>Q.a.addClientCertificate(l,e,t,a).then(e=>{if(201===e.status){$.a.info(s.formatMessage({id:"Apis.Details.Configuration.components.APISecurity.TranportLevel.certificate.add.success",defaultMessage:"Certificate added successfully"}));const t=bn(m);t.push({apiId:e.obj.apiId,alias:e.obj.alias,tier:e.obj.tier}),u(t)}}).catch(e=>{e.response?$.a.error(e.response.body.description):$.a.error(s.formatMessage({id:"Apis.Details.Configuration.components.APISecurity.TranportLevel.certificate.alias.error",defaultMessage:"Something went wrong while adding the API certificate"}))}),deleteCertificate:e=>Q.a.deleteClientCertificate(e,l).then(t=>{u(()=>200===t.status?m.filter(t=>t.alias!==e):-1),$.a.info(s.formatMessage({id:"Apis.Details.Configuration.components.APISecurity.TranportLevel.certificate.delete.success",defaultMessage:"Certificate Deleted Successfully"}))}).catch(e=>{e.response?$.a.error(e.response.body.description):$.a.info(s.formatMessage({id:"Apis.Details.Configuration.components.APISecurity.TranportLevel.certificate.delete.error",defaultMessage:"Error while deleting certificate"}))}),apiId:l})))))}vn.propTypes={configDispatcher:s.a.func.isRequired,haveMultiLevelSecurity:s.a.bool.isRequired,securityScheme:s.a.arrayOf(s.a.string).isRequired,intl:s.a.shape({}).isRequired,id:s.a.string.isRequired,api:s.a.shape({}).isRequired};var Cn=Object(q.d)(vn);const An=Object(Ue.a)(e=>({error:{color:e.palette.error.main},bottomSpace:{marginBottom:e.spacing(4)}}));function Dn(e){const{api:{securityScheme:t,id:a},configDispatcher:r,api:s}=e,o=Object(n.useContext)(de.c),l="APIProduct"===o.api.apiType;let c,p;l?(c=!1,p=!1):(c=null!==o.api.endpointConfig,p=null!==o.api.endpointConfig&&"prototyped"===o.api.endpointConfig.implementation_status);const d=t.includes(Ya)&&(t.includes(Ga)||t.includes(Ha)||t.includes(Ka)),m=An();return i.a.createElement(i.a.Fragment,null,i.a.createElement(pe.a,{container:!0,spacing:2,alignItems:"flex-start"},(l||!c||c&&!p)&&i.a.createElement(i.a.Fragment,null,i.a.createElement(Cn,{haveMultiLevelSecurity:d,securityScheme:t,configDispatcher:r,api:s,id:a}),i.a.createElement(en,{haveMultiLevelSecurity:d,securityScheme:t,api:s,configDispatcher:r,id:a}),i.a.createElement(pe.a,{item:!0},i.a.createElement("span",{className:m.error},i.a.createElement(()=>t.includes(Ya)||t.includes(Ga)||t.includes(Ha)||t.includes(Ka)?!d||t.includes(Qa)||t.includes(Ja)?null:i.a.createElement(K.a,{className:m.bottomSpace},i.a.createElement(q.a,{id:"Apis.Details.Configuration.components.APISecurity.allOptional",defaultMessage:"Please select at least one API security level as 'Mandatory'!"})):i.a.createElement(K.a,{className:m.bottomSpace},i.a.createElement(q.a,{id:"Apis.Details.Configuration.components.APISecurity.emptySchemas",defaultMessage:"Please select at least one API security method!"})),null))))))}function Sn(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function On(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Sn(a,!0).forEach(function(t){wn(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Sn(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function wn(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Pn(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}Dn.propTypes={api:s.a.shape({}).isRequired,configDispatcher:s.a.func.isRequired};const xn=Object(Ue.a)(e=>({root:{padding:e.spacing(3,2)},titleWrapper:{display:"flex",flexDirection:"row",alignItems:"center",marginBottom:e.spacing(3)},mainTitle:{paddingLeft:0},paper:{padding:e.spacing(3)},paperCenter:{padding:e.spacing(3),display:"flex",alignItems:"center",justifyContent:"center"},heading:{fontSize:"1.1rem",fontWeight:400,marginBottom:e.spacing(0)},itemPadding:{marginBottom:e.spacing(3)},arrowForwardIcon:{fontSize:50,color:"#ccc",position:"absolute",top:90,right:-43},arrowBackIcon:{fontSize:50,color:"#ccc",position:"absolute",top:30,right:-71},expansionPanel:{marginBottom:e.spacing(1)},expansionPanelDetails:{flexDirection:"column"},subHeading:{fontSize:"1rem",fontWeight:400,margin:0,display:"inline-flex",lineHeight:"38px"},info:{display:"flex",height:"100%"}}));function Tn(e){return{id:e.id,name:e.name,description:e.description,lifeCycleStatus:e.lifeCycleStatus,accessControl:e.accessControl,authorizationHeader:e.authorizationHeader,responseCachingEnabled:e.responseCachingEnabled,cacheTimeout:e.cacheTimeout,visibility:e.visibility,isDefaultVersion:e.isDefaultVersion,enableSchemaValidation:e.enableSchemaValidation,accessControlRoles:Pn(e.accessControlRoles),visibleRoles:Pn(e.visibleRoles),tags:Pn(e.tags),maxTps:e.maxTps,wsdlUrl:e.wsdlUrl,transport:Pn(e.transport),securityScheme:Pn(e.securityScheme),corsConfiguration:{corsConfigurationEnabled:e.corsConfiguration.corsConfigurationEnabled,accessControlAllowCredentials:e.corsConfiguration.accessControlAllowCredentials,accessControlAllowOrigins:Pn(e.corsConfiguration.accessControlAllowOrigins),accessControlAllowHeaders:Pn(e.corsConfiguration.accessControlAllowHeaders),accessControlAllowMethods:Pn(e.corsConfiguration.accessControlAllowMethods)}}}function In(){const{api:e,updateAPI:t}=Object(n.useContext)(de.a),[a,r]=Object(n.useState)(!1),[s,l]=Object(n.useReducer)(function(e,t){const{action:a,value:n,event:i}=t,r=On({},Tn(e));switch(a){case"description":case"isDefaultVersion":case"authorizationHeader":case"responseCachingEnabled":case"cacheTimeout":case"enableSchemaValidation":case"accessControl":case"visibility":case"maxTps":case"tags":return r[a]=n,r;case"accessControlRoles":case"visibleRoles":return On({},Tn(e),{[a]:n});case"securityScheme":if([Qa,Ja].includes(i.name))return"optional"===i.value?On({},Tn(e),{[a]:e[a].filter(e=>e!==i.name)}):e[a].includes(i.name)?e:On({},Tn(e),{[a]:[].concat(Pn(e[a]),[i.name])});if(i.checked)return e[a].includes(i.value)?e:On({},Tn(e),{[a]:[].concat(Pn(e[a]),[i.value])});if(e[a].includes(i.value)){const t=On({},Tn(e),{[a]:e[a].filter(e=>e!==i.value)});if(!(t[a].includes(Ha)||t[a].includes(Ga)||t[a].includes(Ka))){const e=t[a].filter(e=>e!==Ja);return On({},t,{[a]:e})}if(!t[a].includes(Ya)){const e=t[a].filter(e=>e!==Qa);return On({},t,{[a]:e})}return t}return e;case"transport":return i.checked?On({},Tn(e),{transport:[].concat(Pn(e.transport),[i.value])}):On({},Tn(e),{transport:e.transport.filter(e=>e!==i.value)});case"accessControlAllowHeaders":case"accessControlAllowMethods":case"accessControlAllowCredentials":case"corsConfigurationEnabled":return r.corsConfiguration[a]=n,r;case"accessControlAllowOrigins":return i.checked?r.corsConfiguration[a]=[i.value]:r.corsConfiguration[a]=!1===i.checked?[]:i.value,r;default:return e}},Tn(e)),c=xn(),p=na()(e.mediationPolicies||[]),[d,m]=Object(n.useState)(p.filter(e=>"IN"===e.type)[0]),[u,g]=Object(n.useState)(p.filter(e=>"OUT"===e.type)[0]),[h,f]=Object(n.useState)(p.filter(e=>"FAULT"===e.type)[0]),E=()=>{const e=[];return z()(d)||"none"===d.name||e.push(d),z()(u)||"none"===u.name||e.push(u),z()(h)||"none"===h.name||e.push(h),e};return i.a.createElement(i.a.Fragment,null,i.a.createElement(ge.a,{pb:3},i.a.createElement(K.a,{variant:"h5"},i.a.createElement(q.a,{id:"Apis.Details.Configuration.RuntimeConfiguration.topic.header",defaultMessage:"Runtime Configurations"}))),i.a.createElement("div",{className:c.contentWrapper},i.a.createElement(pe.a,{container:!0,direction:"row",justify:"space-around",alignItems:"stretch",spacing:8},i.a.createElement(pe.a,{item:!0,xs:12,md:7},i.a.createElement(K.a,{className:c.heading,variant:"h6"},i.a.createElement(q.a,{id:"Apis.Details.Configuration.Configuration.section.request",defaultMessage:"Request"})),i.a.createElement(pe.a,{direction:" column",justify:"space-between",alignItems:"stretch",spacing:6},i.a.createElement(pe.a,{item:!0,xs:12,style:{marginBottom:30,position:"relative"}},i.a.createElement(ce.a,{className:c.paper,elevation:0},i.a.createElement(Dn,{api:s,configDispatcher:l}),i.a.createElement(ga,{api:s,configDispatcher:l}),"GRAPHQL"!==e.type&&i.a.createElement(Ca,{api:s,configDispatcher:l}),!e.isAPIProduct()&&i.a.createElement(Fa,{api:s,type:"IN",updateMediationPolicy:e=>{m({id:e.id,name:e.name,type:e.type})},selectedMediationPolicy:d,isRestricted:Object(o.b)(["apim:api_create"],e)})),i.a.createElement($t.a,{className:c.arrowForwardIcon})),i.a.createElement(K.a,{className:c.heading,variant:"h6"},i.a.createElement(q.a,{id:"Apis.Details.Configuration.Configuration.section.response",defaultMessage:"Response"})),i.a.createElement(pe.a,{item:!0,xs:12,style:{position:"relative"}},i.a.createElement(ge.a,{mb:3},i.a.createElement(ce.a,{className:c.paper,elevation:0},!e.isAPIProduct()&&i.a.createElement(ge.a,{mb:3},i.a.createElement(Fa,{api:s,type:"OUT",updateMediationPolicy:e=>{g({id:e.id,name:e.name,type:e.type})},selectedMediationPolicy:u,isRestricted:Object(o.b)(["apim:api_create"],e)})),i.a.createElement(da,{api:s,configDispatcher:l})),i.a.createElement(ta.a,{className:c.arrowBackIcon}))),!e.isAPIProduct()&&i.a.createElement(i.a.Fragment,null,i.a.createElement(K.a,{className:c.heading,variant:"h6"},i.a.createElement(q.a,{id:"Apis.Details.Configuration.RuntimeConfiguration.section.fault",defaultMessage:"Fault"})),i.a.createElement(pe.a,{item:!0,xs:12,style:{position:"relative"}},i.a.createElement(ce.a,{className:c.paper,elevation:0},i.a.createElement(Fa,{api:s,type:"FAULT",updateMediationPolicy:e=>{f({id:e.id,name:e.name,type:e.type})},selectedMediationPolicy:h,isRestricted:Object(o.b)(["apim:api_create"],e)})))))),i.a.createElement(pe.a,{item:!0,xs:12,md:5},i.a.createElement(K.a,{className:c.heading,variant:"h6"},i.a.createElement(q.a,{id:"Apis.Details.Configuration.Configuration.section.backend",defaultMessage:"Backend"})),i.a.createElement(ce.a,{className:c.paper,style:{height:"calc(100% - 75px)"},elevation:0},!e.isAPIProduct()&&i.a.createElement(i.a.Fragment,null,i.a.createElement(xa,{api:s,configDispatcher:l}),i.a.createElement(Va,{api:e})),e.isAPIProduct()&&i.a.createElement(ge.a,{alignItems:"center",justifyContent:"center",className:c.info},i.a.createElement(K.a,{variant:"body1"},i.a.createElement(q.a,{id:"Apis.Details.Configuration.RuntimeConfiguration.backend.api.product. endpoint",defaultMessage:"Please refer respective APIs for endpoint information"})))))),i.a.createElement(pe.a,{container:!0},i.a.createElement(pe.a,{container:!0,direction:"row",alignItems:"center",spacing:1,style:{marginTop:20}},i.a.createElement(pe.a,{item:!0},i.a.createElement(Ne.a,{disabled:a||"RESTRICTED"===s.visibility&&0===s.visibleRoles.length||Object(o.b)(["apim:api_create"],e),type:"submit",variant:"contained",color:"primary",onClick:function(){r(!0);const a=E();e.isAPIProduct()||(s.mediationPolicies=a),t(s).catch(e=>{e.response&&$.a.error(e.response.body.description)}).finally(()=>r(!1))}},i.a.createElement(q.a,{id:"Apis.Details.Configuration.Configuration.save",defaultMessage:"Save"}),a&&i.a.createElement(Ze.a,{size:15}))),i.a.createElement(pe.a,{item:!0},i.a.createElement(W.b,{to:"/apis/"+e.id+"/overview"},i.a.createElement(Ne.a,null,i.a.createElement(q.a,{id:"Apis.Details.Configuration.Configuration.cancel",defaultMessage:"Cancel"})))),Object(o.b)(["apim:api_create"],e)&&i.a.createElement(pe.a,{item:!0},i.a.createElement(K.a,{variant:"body2",color:"primary"},i.a.createElement(q.a,{id:"Apis.Details.Configuration.Configuration.update.not.allowed",defaultMessage:"* You are not authorized to update particular fields of the API due to insufficient permissions"})))))))}var Mn=a(732),Rn=a(583);class Nn extends i.a.Component{highLightMe(e){const t={};return e.startsWith(this.props.lifeCycleStatus.toLowerCase())||(t.opacity=.2),t}render(){const{classes:e}=this.props;return i.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"633",height:"244",viewBox:"0 0 743.09858 287.34519",id:"svg5953",className:e.root},i.a.createElement("defs",{id:"defs5955"},i.a.createElement("path",{transform:"scale(.26458)",id:"path5588",d:"m 1738.3694,290.45336 a 290.37688,290.37688 0 0 1 268.3994,-179.55952 290.37688,290.37688 0 0 1 5.8758,0.0595",style:{isolation:"auto",mixBlendMode:"normal"},color:"#000",overflow:"visible",fill:"none",strokeWidth:"6.633",strokeLinejoin:"round"}),i.a.createElement("path",{transform:"scale(.26458)",id:"path5578",d:"m 2103.6746,127.54094 a 290.37688,290.37688 0 0 1 193.3409,265.03704",style:{isolation:"auto",mixBlendMode:"normal"},color:"#000",overflow:"visible",fill:"none",strokeWidth:"6.633",strokeLinejoin:"round"}),i.a.createElement("path",{transform:"scale(.26458)",id:"path5547",d:"m 1748.9295,534.82816 a 290.37688,290.37688 0 0 0 257.8393,156.81941 290.37688,290.37688 0 0 0 5.8709,-0.0593",style:{isolation:"auto",mixBlendMode:"normal"},color:"#000",overflow:"visible",fill:"none",strokeWidth:"6.633",strokeLinejoin:"round"}),i.a.createElement("path",{transform:"scale(.26458)",id:"path4189",d:"m 1748.9295,534.82816 a 290.37688,290.37688 0 0 0 257.8393,156.81941 290.37688,290.37688 0 0 0 5.8709,-0.0593",style:{isolation:"auto",mixBlendMode:"normal"},color:"#000",overflow:"visible",fill:"none",strokeWidth:"6.633",strokeLinejoin:"round"})),i.a.createElement("g",{id:"layer1",transform:"translate(51.512 4.77)"},i.a.createElement("path",{d:"m 99,13.3622 24,0 0,24 -24,0 z",id:"path6746",fill:"none"}),i.a.createElement("g",{id:"prototyped",style:this.highLightMe("prototyped")},i.a.createElement("text",{id:"text6729",y:"6.362",x:"61",style:{lineHeight:"125%"},fontWeight:"400",fontSize:"15",fontFamily:"sans-serif",letterSpacing:"0",wordSpacing:"0",fill:"#2b2b2b"},i.a.createElement("tspan",{y:"6.362",x:"61",id:"tspan6731"},"PROTOTYPED")),i.a.createElement("path",{id:"path6748",d:"m 118,16.3622 -4.18,0 c -0.42,-1.16 -1.52,-2 -2.82,-2 -1.3,0 -2.4,0.84 -2.82,2 l -4.18,0 c -1.1,0 -2,0.9 -2,2 l 0,14 c 0,1.1 0.9,2 2,2 l 14,0 c 1.1,0 2,-0.9 2,-2 l 0,-14 c 0,-1.1 -0.9,-2 -2,-2 z m -7,0 c 0.55,0 1,0.45 1,1 0,0.55 -0.45,1 -1,1 -0.55,0 -1,-0.45 -1,-1 0,-0.55 0.45,-1 1,-1 z m -2,14 -4,-4 1.41,-1.41 2.59,2.58 6.59,-6.59 1.41,1.42 -8,8 z"})),i.a.createElement("path",{d:"m 224.5,133.8622 24,0 0,24 -24,0 z",id:"path6762",fill:"none"}),i.a.createElement("g",{id:"published",style:this.highLightMe("published")},i.a.createElement("text",{id:"text6524",y:"125.476",x:"207",style:{lineHeight:"125%"},fontWeight:"400",fontSize:"15",fontFamily:"sans-serif",letterSpacing:"0",wordSpacing:"0"},i.a.createElement("tspan",{y:"125.476",x:"207",id:"tspan6526"},"PUBLISHED")),i.a.createElement("path",{id:"path6764",d:"m 240.5,144.8622 c 1.66,0 2.99,-1.34 2.99,-3 0,-1.66 -1.33,-3 -2.99,-3 -1.66,0 -3,1.34 -3,3 0,1.66 1.34,3 3,3 z m -8,0 c 1.66,0 2.99,-1.34 2.99,-3 0,-1.66 -1.33,-3 -2.99,-3 -1.66,0 -3,1.34 -3,3 0,1.66 1.34,3 3,3 z m 0,2 c -2.33,0 -7,1.17 -7,3.5 l 0,2.5 14,0 0,-2.5 c 0,-2.33 -4.67,-3.5 -7,-3.5 z m 8,0 c -0.29,0 -0.62,0.02 -0.97,0.05 1.16,0.84 1.97,1.97 1.97,3.45 l 0,2.5 6,0 0,-2.5 c 0,-2.33 -4.67,-3.5 -7,-3.5 z"})),i.a.createElement("g",{id:"created",style:this.highLightMe("created")},i.a.createElement("text",{id:"text6520",y:"282.362",x:"68",style:{lineHeight:"125%"},fontWeight:"400",fontSize:"15",fontFamily:"sans-serif",letterSpacing:"0",wordSpacing:"0"},i.a.createElement("tspan",{y:"282.362",x:"68",id:"tspan6522"},"CREATED")),i.a.createElement("path",{id:"path6778",d:"m 97,238.8622 c -1.1,0 -1.99,0.9 -1.99,2 l -0.01,16 c 0,1.1 0.89,2 1.99,2 l 12.01,0 c 1.1,0 2,-0.9 2,-2 l 0,-12 -6,-6 -8,0 z m 7,7 0,-5.5 5.5,5.5 -5.5,0 z"})),i.a.createElement("path",{d:"m 91,236.8622 24,0 0,24 -24,0 z",id:"path6780",fill:"none"}),i.a.createElement("g",{id:"deprecated",style:this.highLightMe("deprecated")},i.a.createElement("text",{id:"text6536",y:"125.476",x:"397.858",style:{lineHeight:"125%"},fontWeight:"400",fontSize:"15",fontFamily:"sans-serif",letterSpacing:"0",wordSpacing:"0"},i.a.createElement("tspan",{y:"125.476",x:"397.858",id:"tspan6538"},"DEPRECATED")),i.a.createElement("path",{id:"path6794",d:"m 433.52944,97.811947 c 0,1.1 0.9,2 2,2 l 8,0 c 1.1,0 2,-0.9 2,-2 l 0,-12 -12,0 0,12 z m 13,-15 -3.5,0 -1,-1 -5,0 -1,1 -3.5,0 0,2 14,0 0,-2 z"}),i.a.createElement("path",{id:"path6796",d:"m 427.52944,78.811947 24,0 0,24.000003 -24,0 z",fill:"none"})),i.a.createElement("path",{d:"m 427.52944,236.8622 24,0 0,24 -24,0 z",id:"path6810",clipRule:"evenodd",fill:"none"}),i.a.createElement("g",{id:"blocked",style:this.highLightMe("blocked")},i.a.createElement("text",{id:"text6532",y:"282.362",x:"386.858",style:{lineHeight:"125%"},fontWeight:"400",fontSize:"15",fontFamily:"sans-serif",letterSpacing:"0",wordSpacing:"0"},i.a.createElement("tspan",{y:"282.362",x:"386.858",id:"tspan6534"},"BLOCKED")),i.a.createElement("path",{id:"path6812",d:"m 450.22944,255.8622 -9.1,-9.1 c 0.9,-2.3 0.4,-5 -1.5,-6.9 -2,-2 -5,-2.4 -7.4,-1.3 l 4.3,4.3 -3,3 -4.4,-4.3 c -1.2,2.4 -0.7,5.4 1.3,7.4 1.9,1.9 4.6,2.4 6.9,1.5 l 9.1,9.1 c 0.4,0.4 1,0.4 1.4,0 l 2.3,-2.3 c 0.5,-0.4 0.5,-1.1 0.1,-1.4 z"})),i.a.createElement("g",{id:"retired",style:this.highLightMe("retired")},i.a.createElement("text",{id:"text6540",y:"125.483",x:"627.485",style:{lineHeight:"125%"},fontWeight:"400",fontSize:"15",fontFamily:"sans-serif",letterSpacing:"0",wordSpacing:"0"},i.a.createElement("tspan",{y:"125.483",x:"627.485",id:"tspan6542"},"RETIRED")),i.a.createElement("path",{id:"path6826",d:"m 663.36667,89.811947 0,2 -13,0 0,-6 9,0 c 2.21,0 4,1.79 4,4 z m -20,3 0,2 6,0 0,2 8,0 0,-2 6,0 0,-2 -20,0 z m 5.14,-1.9 c 1.16,-1.19 1.14,-3.08 -0.04,-4.24 -1.19,-1.16 -3.08,-1.14 -4.24,0.04 -1.16,1.19 -1.14,3.08 0.04,4.24 1.19,1.16 3.08,1.14 4.24,-0.04 z"}),i.a.createElement("path",{id:"path6828",d:"m 641.36667,78.811947 24,0 0,24.000003 -24,0 z",fill:"none"})),i.a.createElement("g",{id:"published_to_created",style:this.highLightMe("published_to_created")},i.a.createElement("path",{id:"path6872",d:"m 235.84375,184.86133 c -11.86654,31.99459 -35.12697,58.48216 -65.32031,74.38281 l -5.4624,15.71344 14.85695,3.63617 c 35.16928,-17.95415 62.42125,-48.3249 76.47461,-85.22656 l -15.28708,7.18109 z",style:{isolation:"auto",mixBlendMode:"normal"},color:"#000",overflow:"visible",fill:"#065381"}),i.a.createElement("path",{id:"path6985",d:"m 178.61585,255.22337 -4.875,15.375 14.5,3.625",fill:"none",fillRule:"evenodd",stroke:"#fff"}),i.a.createElement("path",{d:"m 187.11585,249.22337 -4.875,15.375 14.5,3.625",id:"path6987",fill:"none",fillRule:"evenodd",stroke:"#fff"})),i.a.createElement("g",{id:"created_to_published",style:this.highLightMe("created_to_published")},i.a.createElement("path",{id:"path6850",d:"m 202.80469,171.18359 c -8.60566,23.79669 -25.78994,43.52064 -48.1836,55.30469 l 15.33148,4.4495 -5.74163,15.30245 c 27.19915,-14.16065 48.15744,-37.93366 58.79687,-66.69335 l -4.08764,-14.98782 z",style:{isolation:"auto",mixBlendMode:"normal"},color:"#000",overflow:"visible",fill:"#34b2e4"}),i.a.createElement("path",{d:"m 200.07828,178.47337 15.66836,-6.25318 3.78013,13.89858",id:"path6979",fill:"none",fillRule:"evenodd",stroke:"#fff"}),i.a.createElement("path",{id:"path6991",d:"m 195.3937,187.48898 15.66836,-6.25318 3.78013,13.89858",fill:"none",fillRule:"evenodd",stroke:"#fff"})),i.a.createElement("g",{id:"prototyped_to_published",style:this.highLightMe("prototyped_to_published")},i.a.createElement("path",{id:"path6874",d:"m 181.42383,-4.0683594 5.18392,15.3553234 -15.14681,3.480614 c 26.97521,14.497097 48.38501,37.525806 60.88086,65.484375 l 16.41911,5.795641 4.09261,-14.231188 C 238.22018,39.231643 213.06477,12.507292 181.42383,-4.0683594 Z",style:{isolation:"auto",mixBlendMode:"normal"},color:"#000",overflow:"visible",fill:"#fe912a"}),i.a.createElement("path",{id:"path6993",d:"m 228.26421,71.982698 16.39604,5.833631 3.93328,-14.097941",fill:"none",fillRule:"evenodd",stroke:"#fff"}),i.a.createElement("path",{d:"m 224.76421,65.357698 16.39604,5.833631 3.93328,-14.097941",id:"path6995",fill:"none",fillRule:"evenodd",stroke:"#fff"})),i.a.createElement("g",{id:"published_to_prototyped",style:this.highLightMe("published_to_prototyped")},i.a.createElement("path",{id:"path6855",d:"m 164.61328,27.712891 -16.76273,3.798407 6.57718,15.455499 c 19.64736,10.327117 35.3679,26.809879 44.75391,46.923828 l 6.94786,-12.105746 13.33339,3.763949 C 208.07457,60.73778 188.78631,40.399355 164.61328,27.712891 Z",style:{isolation:"auto",mixBlendMode:"normal"},color:"#000",overflow:"visible",fill:"#ffc95c"}),i.a.createElement("path",{id:"path6997",d:"m 163.43006,52.336437 -6.45235,-15.202795 16.61701,-3.535534",fill:"none",fillRule:"evenodd",stroke:"#fff"}),i.a.createElement("path",{d:"M 171.82695,57.993291 165.3746,42.790496 181.99161,39.254962",id:"path6999",fill:"none",fillRule:"evenodd",stroke:"#fff"})),i.a.createElement("g",{id:"created_to_prototyped",style:this.highLightMe("created_to_prototyped")},i.a.createElement("path",{id:"path6870",d:"M 35.433594,-4.7226562 C -17.800688,22.43674 -51.366944,77.095386 -51.511719,136.85742 c 0.08726,60.42038 34.333636,115.59607 88.439453,142.48828 l -5.963174,-14.43529 14.818643,-3.6858 C -1.8626488,238.10436 -32.152993,189.83798 -32.251953,136.87891 -32.191581,84.271252 -2.3316563,36.239603 44.818359,12.90625 l 7.576833,-14.3582512 z",style:{isolation:"auto",mixBlendMode:"normal"},color:"#000",overflow:"visible",fill:"#8b103e"}),i.a.createElement("path",{id:"path7001",d:"m 25.625,1.1122031 16.25,3 -7.125,13.7499999",fill:"none",fillRule:"evenodd",stroke:"#fff"}),i.a.createElement("path",{d:"m 16.375,7.1122031 16.25,2.9999999 -7.125,13.75",id:"path7003",fill:"none",fillRule:"evenodd",stroke:"#fff"})),i.a.createElement("g",{id:"prototyped_to_created",style:this.highLightMe("prototyped_to_created")},i.a.createElement("path",{id:"path6840",d:"M 52.171875,26.720703 C 10.473112,47.61586 -15.897048,90.22032 -16,136.86133 c 0.06835,46.84095 26.630186,89.61173 68.585938,110.43945 l 18.169686,-5.17409 -8.489999,-14.63841 C 27.868397,210.36444 6.0894455,175.28511 6,136.86133 6.0597413,98.328986 27.932967,63.153267 62.464844,46.056641 l -14.466177,-4.2932 z",style:{isolation:"auto",mixBlendMode:"normal"},color:"#000",overflow:"visible",fill:"#e34856"}),i.a.createElement("path",{id:"path7005",d:"m 39.421204,240.07329 17.677669,-4.94975 -7.778174,-14.49569",fill:"none",fillRule:"evenodd",stroke:"#fff"}),i.a.createElement("path",{d:"m 27.930719,230.8809 17.677669,-4.94975 -7.778174,-14.49569",id:"path7007",fill:"none",fillRule:"evenodd",stroke:"#fff"})),i.a.createElement("g",{id:"deprecated_to_retired",style:this.highLightMe("deprecated_to_retired")},i.a.createElement("path",{id:"rect7009",d:"m 530.25049,110.51652 68.24164,0 9.89949,9.52539 -9.89949,9.40863 -68.24164,0 9.54594,-9.76218 z",style:{isolation:"auto",mixBlendMode:"normal"},color:"#000",overflow:"visible",fill:"#5c5c5c",strokeWidth:"6.016",strokeLinecap:"round",strokeLinejoin:"round"}),i.a.createElement("path",{id:"path7016",d:"m 589.97554,111.03345 9.31051,8.95242 -9.42988,8.89273",fill:"none",fillRule:"evenodd",stroke:"#fff",strokeWidth:".955"}),i.a.createElement("path",{d:"m 581.28804,111.03345 9.31051,8.95242 -9.42988,8.89273",id:"path7018",fill:"none",fillRule:"evenodd",stroke:"#fff",strokeWidth:".955"})),i.a.createElement("g",{id:"published_to_deprecated",style:this.highLightMe("published_to_deprecated")},i.a.createElement("path",{style:{isolation:"auto",mixBlendMode:"normal"},d:"m 306.25049,110.51652 68.24164,0 9.89949,9.52539 -9.89949,9.40863 -68.24164,0 9.54594,-9.76218 z",id:"path7020",color:"#000",overflow:"visible",fill:"#5c5c5c",strokeWidth:"6.016",strokeLinecap:"round",strokeLinejoin:"round"}),i.a.createElement("path",{d:"m 365.97554,111.03345 9.31051,8.95242 -9.42988,8.89273",id:"path7022",fill:"none",fillRule:"evenodd",stroke:"#fff",strokeWidth:".955"}),i.a.createElement("path",{id:"path7024",d:"m 357.28804,111.03345 9.31051,8.95242 -9.42988,8.89273",fill:"none",fillRule:"evenodd",stroke:"#fff",strokeWidth:".955"})),i.a.createElement("g",{id:"published_to_blocked",style:this.highLightMe("published_to_blocked")},i.a.createElement("path",{style:{isolation:"auto",mixBlendMode:"normal"},d:"m 306.92162,149.0749 92.7941,75.49823 1.41692,13.66474 -13.63383,0.80053 -92.79411,-75.49822 13.59185,-1.29876 z",id:"path7026",color:"#000",overflow:"visible",fill:"#65daad",strokeWidth:"6.016",strokeLinecap:"round",strokeLinejoin:"round"}),i.a.createElement("path",{d:"m 392.87565,219.47284 1.33665,12.84698 -12.94218,0.70939",id:"path7028",fill:"none",fillRule:"evenodd",stroke:"#fff",strokeWidth:".955"}),i.a.createElement("path",{id:"path7030",d:"m 386.23855,213.86735 1.33664,12.84698 -12.94218,0.70939",fill:"none",fillRule:"evenodd",stroke:"#fff",strokeWidth:".955"})),i.a.createElement("g",{id:"blocked_to_published",transform:"rotate(180 338.919 207.057)",style:this.highLightMe("blocked_to_published")},i.a.createElement("path",{id:"path7039",d:"m 306.92162,149.0749 92.7941,75.49823 1.41692,13.66474 -13.63383,0.80053 -92.79411,-75.49822 13.59185,-1.29876 z",style:{isolation:"auto",mixBlendMode:"normal"},color:"#000",overflow:"visible",fill:"#64d0da",strokeWidth:"6.016",strokeLinecap:"round",strokeLinejoin:"round"}),i.a.createElement("path",{id:"path7041",d:"m 392.87565,219.47284 1.33665,12.84698 -12.94218,0.70939",fill:"none",fillRule:"evenodd",stroke:"#fff",strokeWidth:".955"}),i.a.createElement("path",{d:"m 386.23855,213.86735 1.33664,12.84698 -12.94218,0.70939",id:"path7043",fill:"none",fillRule:"evenodd",stroke:"#fff",strokeWidth:".955"})),i.a.createElement("g",{id:"blocked_to_deprecated",style:this.highLightMe("blocked_to_deprecated")},i.a.createElement("path",{style:{isolation:"auto",mixBlendMode:"normal"},d:"m 427.85405,225.05409 0,-68.24164 9.52539,-9.89949 9.40863,9.89949 0,68.24164 -9.76218,-9.54594 z",id:"path7045",color:"#000",overflow:"visible",fill:"#5c5c5c",strokeWidth:"6.016",strokeLinecap:"round",strokeLinejoin:"round"}),i.a.createElement("path",{d:"m 428.37098,165.32904 8.95242,-9.31051 8.89273,9.42988",id:"path7047",fill:"none",fillRule:"evenodd",stroke:"#fff",strokeWidth:".955"}),i.a.createElement("path",{id:"path7049",d:"m 428.37098,174.01654 8.95242,-9.31051 8.89273,9.42988",fill:"none",fillRule:"evenodd",stroke:"#fff",strokeWidth:".955"}))))}}Nn.propTypes={classes:s.a.shape({}).isRequired,lifeCycleStatus:s.a.string.isRequired};var jn=Object(L.a)(()=>({root:{marginTop:30}}))(Nn);const kn=Object(Ue.a)(e=>({stateButton:{marginRight:e.spacing()},paperCenter:{padding:e.spacing(2),display:"block",alignItems:"left",justifyContent:"center"},iconTrue:{color:le.a[500],marginRight:e.spacing(1),display:"block",justifyContent:"flex-start",alignItems:"center"},iconFalse:{color:e.palette.grey[500],marginRight:e.spacing(1),display:"block",justifyContent:"flex-start",alignItems:"center"},grid:{marginTop:e.spacing(2),display:"flex",flexDirection:"row",justifyContent:"left",alignItems:"left"},labelsGrid:{fontWeight:600,marginTop:e.spacing(3)}}));function Ln(e){const t=kn(),{api:a,isMutualSSLEnabled:n,isCertAvailable:r,isAppLayerSecurityMandatory:s,isBusinessPlanAvailable:o}=e,l=null!==a.endpointConfig&&!a.endpointConfig.implementation_status,c=null!==a.endpointConfig&&"prototyped"===a.endpointConfig.implementation_status||"INLINE"===a.endpointImplementationType;return i.a.createElement(ce.a,{className:t.paperCenter},i.a.createElement(pe.a,{xs:12},i.a.createElement(K.a,{variant:"h6"},i.a.createElement(q.a,{id:"Apis.Details.Configuration.Configuration.requirements",defaultMessage:"Requirements"})),i.a.createElement(K.a,{variant:"caption"},i.a.createElement(q.a,{id:"Apis.Details.Configuration.Configuration.requirements.state.transition",defaultMessage:"Requirements for next state transition"}))),("CREATED"===a.lifeCycleStatus||"PROTOTYPED"===a.lifeCycleStatus)&&i.a.createElement(i.a.Fragment,null,i.a.createElement(pe.a,{xs:12,className:t.labelsGrid},i.a.createElement(K.a,{variant:"subtitle2"},i.a.createElement(q.a,{id:"Apis.Details.Configuration.Configuration.publisher",defaultMessage:"Publish"}))),i.a.createElement(pe.a,{xs:12},i.a.createElement(pe.a,{xs:12,className:t.grid},l?i.a.createElement(Ye.a,{className:t.iconTrue}):i.a.createElement(Qe.a,{className:t.iconFalse}),i.a.createElement(K.a,null,i.a.createElement(q.a,{id:"Apis.Details.LifeCycle.CheckboxLabels.endpoints.provided",defaultMessage:"Endpoint provided"})),i.a.createElement(W.b,{to:"/apis/"+a.id+"/endpoints"},i.a.createElement(fe.a,{style:{marginLeft:"2px"},color:"primary",fontSize:"small"}))),i.a.createElement(i.a.Fragment,null,s&&i.a.createElement(pe.a,{xs:12,className:t.grid},o?i.a.createElement(Ye.a,{className:t.iconTrue}):i.a.createElement(Qe.a,{className:t.iconFalse}),i.a.createElement(K.a,null,i.a.createElement(q.a,{id:"Apis.Details.LifeCycle.CheckboxLabels.business.plans.selected",defaultMessage:"Business Plan(s) selected"})),i.a.createElement(W.b,{to:"/apis/"+a.id+"/subscriptions"},i.a.createElement(fe.a,{style:{marginLeft:"2px"},color:"primary",fontSize:"small"}))),n&&i.a.createElement(pe.a,{xs:12,className:t.grid},r?i.a.createElement(Ye.a,{className:t.iconTrue}):i.a.createElement(Qe.a,{className:t.iconFalse}),i.a.createElement(K.a,null,i.a.createElement(q.a,{id:"Apis.Details.LifeCycle.CheckboxLabels.cert.provided",defaultMessage:"Certificate provided"})),i.a.createElement(W.b,{to:"/apis/"+a.id+"/runtime-configuration"},i.a.createElement(fe.a,{style:{marginLeft:"2px"},color:"primary",fontSize:"small"}))))),"GRAPHQL"!==a.type&&i.a.createElement(i.a.Fragment,null,i.a.createElement(pe.a,{xs:12,className:t.labelsGrid},i.a.createElement(K.a,{variant:"subtitle2"},i.a.createElement(q.a,{id:"Apis.Details.Configuration.Configuration.prototype",defaultMessage:"Deploy as a Prototype"}))),i.a.createElement(pe.a,{xs:12},i.a.createElement(pe.a,{xs:12,className:t.grid},c?i.a.createElement(Ye.a,{className:t.iconTrue}):i.a.createElement(Qe.a,{className:t.iconFalse}),i.a.createElement(K.a,null,i.a.createElement(q.a,{id:"Apis.Details.Configuration.Configuration.prototype.endpoints.provided",defaultMessage:"Prototype Endpoint provided"})),i.a.createElement(W.b,{to:"/apis/"+a.id+"/endpoints"},i.a.createElement(fe.a,{style:{marginLeft:"2px"},color:"primary",fontSize:"small"})))))),"PUBLISHED"===a.lifeCycleStatus&&i.a.createElement(i.a.Fragment,null,i.a.createElement(pe.a,{xs:12,className:t.labelsGrid},i.a.createElement(K.a,{variant:"subtitle2"},i.a.createElement(q.a,{id:"Apis.Details.Configuration.Configuration.prototype",defaultMessage:"Deploy as a Prototype"}))),i.a.createElement(pe.a,{xs:12},i.a.createElement(pe.a,{xs:12,className:t.grid},c?i.a.createElement(Ye.a,{className:t.iconTrue}):i.a.createElement(Qe.a,{className:t.iconFalse}),i.a.createElement(K.a,null,i.a.createElement(q.a,{id:"Apis.Details.Configuration.Configuration.prototype.endpoints.provided",defaultMessage:"Prototype Endpoint provided"})),i.a.createElement(W.b,{to:"/apis/"+a.id+"/endpoints"},i.a.createElement(fe.a,{style:{marginLeft:"2px"},color:"primary",fontSize:"small"}))))))}Ln.propTypes={classes:s.a.shape({}).isRequired,api:s.a.shape({}).isRequired,intl:s.a.shape({formatMessage:s.a.func}).isRequired};var qn=a(1219);const _n=e=>{const{currentState:t}=e,a=Object(q.e)(),[r,s]=Object(n.useState)(!1),[o,l]=Object(de.d)();return i.a.createElement(ce.a,null,i.a.createElement(ge.a,{display:"block",p:2,mt:2},i.a.createElement(ge.a,{display:"block"},i.a.createElement(K.a,{variant:"h6"},i.a.createElement(q.a,{id:"Apis.Details.LifeCycle.LifeCycleUpdate.LifecyclePending.pending",defaultMessage:"Pending lifecycle state change."}))),i.a.createElement(ge.a,{display:"block",mt:.5},i.a.createElement(K.a,{variant:"subtitle2"},i.a.createElement(q.a,{id:"Apis.Details.LifeCycle.LifeCycleUpdate.LifecyclePending.current.state",defaultMessage:"Current state is"})," ",t)),i.a.createElement(ge.a,{display:"flex",mt:2},i.a.createElement(Ne.a,{size:"small",variant:"contained",color:"primary",onClick:()=>s(!0)},i.a.createElement(q.a,{id:"Apis.Details.LifeCycle.LifeCycleUpdate.LifecyclePending.delete.task",defaultMessage:"Delete Task"})))),i.a.createElement(ha.a,{open:r,transition:qn.a},i.a.createElement(ya.a,null,i.a.createElement(q.a,{id:"Apis.Details.LifeCycle.LifeCycleUpdate.LifecyclePending.dialog.title",defaultMessage:"Delete Task"})),i.a.createElement(Ea.a,null,i.a.createElement(ba.a,null,i.a.createElement(q.a,{id:"Apis.Details.LifeCycle.LifeCycleUpdate.LifecyclePending.dialog.text.description",defaultMessage:"The life cycle task will be removed"}))),i.a.createElement(fa.a,null,i.a.createElement(Ne.a,{dense:!0,onClick:()=>s(!1)},i.a.createElement(q.a,{id:"Apis.Details.LifeCycle.LifeCycleUpdate.LifecyclePending.dialog.cancel",defaultMessage:"Cancel"})),i.a.createElement(Ne.a,{size:"small",variant:"text",color:"primary",onClick:()=>{const{id:e}=o;o.cleanupPendingTask(e).then(()=>{$.a.info(a.formatMessage({id:"Apis.Details.LifeCycle.LifeCycleUpdate.LifecyclePending.success",defaultMessage:"Lifecycle task deleted successfully"})),l()}).catch(e=>{console.error(e),$.a.error(a.formatMessage({id:"Apis.Details.LifeCycle.LifeCycleUpdate.LifecyclePending.error",defaultMessage:"Error while deleting task"}))})}},i.a.createElement(q.a,{id:"Apis.Details.LifeCycle.LifeCycleUpdate.LifecyclePending.dialog,delete",defaultMessage:"Delete"})))))};_n.propTypes={currentState:s.a.string.isRequired};var Wn=_n;function Fn(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function zn(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Fn(a,!0).forEach(function(t){Bn(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Fn(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function Bn(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Un(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}class Vn extends n.Component{constructor(e){super(e),this.updateLifeCycleState=this.updateLifeCycleState.bind(this),this.api=new Q.a,this.WORKFLOW_STATUS={CREATED:"CREATED",APPROVED:"APPROVED"},this.state={newState:null,isUpdating:null,pageError:null}}updateLCStateOfAPI(e,t){let a;this.setState({isUpdating:t});const n=this.props.checkList.map(e=>e.value+":"+e.checked);(a=n.length>0?this.api.updateLcState(e,t,n):this.api.updateLcState(e,t)).then(e=>{this.props.handleUpdate(!0);const t=e.body.lifecycleState.state,{workflowStatus:a}=e.body;this.context.updateAPI(),this.setState({newState:t});const{intl:n}=this.props;a===this.WORKFLOW_STATUS.CREATED?$.a.info(n.formatMessage({id:"Apis.Details.LifeCycle.LifeCycleUpdate.success.createStatus",defaultMessage:"Lifecycle state change request has been sent"})):$.a.info(n.formatMessage({id:"Apis.Details.LifeCycle.LifeCycleUpdate.success.otherStatus",defaultMessage:"Lifecycle state updated successfully"}))}).catch(e=>{if(e.response)$.a.error(e.response.body.description),this.setState({pageError:e.response.body});else{const t="Something went wrong while updating the lifecycle";$.a.error(t),this.setState({pageError:e.response.body})}console.error(e)}).finally(()=>{this.setState({isUpdating:null})})}updateLifeCycleState(e){e.preventDefault();const t=e.currentTarget.getAttribute("data-value"),{api:{id:a}}=this.props;this.updateLCStateOfAPI(a,t)}render(){const{api:e,lcState:t,classes:a,theme:n,handleChangeCheckList:r,checkList:s,certList:o}=this.props,l=Un(t.availableTransitions),{newState:c,pageError:p}=this.state,d=e.workflowStatus&&e.workflowStatus===this.WORKFLOW_STATUS.CREATED,m=new Map;m.set("Published","Publish"),m.set("Prototyped","Deploy as a prototype"),m.set("Deprecated","Deprecate"),m.set("Blocked","Block"),m.set("Created","Create"),m.set("Retired","Retire");const u=e.endpointConfig&&"prototyped"===e.endpointConfig.implementation_status,g=e.securityScheme.includes(Qa),h=e.securityScheme.includes(Ja),f=0!==o.length,E=0!==e.policies.length,b=l.map(a=>{const n=zn({},a,{displayName:a.event});if("Deploy as a Prototype"===n.event){let{displayName:a}=n;return"Prototyped"===t.state&&(a="Redeploy"),zn({},n,{displayName:a,disabled:!u||null==e.endpointConfig})}if("Publish"===n.event){let{displayName:a}=n;return"Published"===t.state&&(a="Redeploy"),zn({},n,{displayName:a,disabled:null===e.endpointConfig||g&&!f||h&&!E||"prototyped"===e.endpointConfig.implementation_status})}return zn({},n,{disabled:!1})});return i.a.createElement(pe.a,{container:!0},d?i.a.createElement(pe.a,{item:!0,xs:12},i.a.createElement(Wn,{currentState:t.state})):i.a.createElement(pe.a,{item:!0,xs:12},n.custom.lifeCycleImage?i.a.createElement("img",{src:n.custom.lifeCycleImage,alt:"life cycles"}):i.a.createElement(pe.a,{container:!0,spacing:3},i.a.createElement(pe.a,{item:!0,xs:8},i.a.createElement(jn,{lifeCycleStatus:c||e.lifeCycleStatus})),("CREATED"===e.lifeCycleStatus||"PROTOTYPED"===e.lifeCycleStatus)&&i.a.createElement(pe.a,{item:!0,xs:3},i.a.createElement(Ln,{api:e,isMutualSSLEnabled:g,isAppLayerSecurityMandatory:h,isCertAvailable:f,isBusinessPlanAvailable:E})))),i.a.createElement(pe.a,{item:!0,xs:12},!d&&i.a.createElement(Za.a,{row:!0},s.map((e,t)=>i.a.createElement(Et.a,{key:s[t].value,control:i.a.createElement(zt.a,{checked:s[t].checked,onChange:r(t),value:s[t].value,color:"primary"}),label:s[t].label}))),i.a.createElement(Mn.a,{resourcePath:Mn.c.API_CHANGE_LC,resourceMethod:Mn.b.POST},i.a.createElement("div",{className:a.buttonsWrapper},!d&&b.map(e=>i.a.createElement(Ne.a,{disabled:e.disabled||this.state.isUpdating,variant:"contained",color:"primary",className:a.stateButton,key:e.event,"data-value":e.event,onClick:this.updateLifeCycleState},e.displayName,this.state.isUpdating===e.event&&i.a.createElement(Ze.a,{size:18})))))),p&&i.a.createElement(pe.a,{item:!0,xs:11},i.a.createElement(Rn.a,{onClose:()=>this.setState({pageError:null}),disableActions:!0,dense:!0,paperProps:{elevation:1},type:"error",message:p})))}}Vn.propTypes={classes:s.a.shape({}).isRequired,api:s.a.shape({}).isRequired,checkList:s.a.arrayOf(s.a.shape({})).isRequired,lcState:s.a.shape({}).isRequired,handleChangeCheckList:s.a.func.isRequired,handleUpdate:s.a.func.isRequired,theme:s.a.shape({}).isRequired,intl:s.a.shape({formatMessage:s.a.func}).isRequired},Vn.contextType=de.c;var Hn=Object(L.a)(e=>({buttonsWrapper:{marginTop:40},stateButton:{marginRight:e.spacing()},paperCenter:{padding:e.spacing(2),display:"flex",alignItems:"left",justifyContent:"left"},subHeading:{fontSize:"1rem",fontWeight:400,margin:0,display:"inline-flex",lineHeight:"38px"}}),{withTheme:!0})(Object(q.d)(Vn)),Gn=a(953),Kn=a(1443),Yn=a.n(Kn),Jn=a(1229),Qn=a(1226);const Zn=e=>{const{classes:t}=e;return i.a.createElement(ce.a,null,i.a.createElement(Ae.a,{className:t.table},i.a.createElement(Qn.a,null,i.a.createElement(Se.a,null,i.a.createElement(De.a,{className:t.firstCol},i.a.createElement(q.a,{id:"Apis.Details.LifeCycle.LifeCycleHistory.user",defaultMessage:"User"})),i.a.createElement(De.a,null,i.a.createElement(q.a,{id:"Apis.Details.LifeCycle.LifeCycleHistory.action",defaultMessage:"Action"})),i.a.createElement(De.a,null,i.a.createElement(q.a,{id:"Apis.Details.LifeCycle.LifeCycleHistory.time",defaultMessage:"Time"})))),i.a.createElement(Jn.a,null,e.lcHistory.reverse().map(e=>e.previousState&&i.a.createElement(Se.a,{key:e.postState},i.a.createElement(De.a,{component:"th",scope:"row"},i.a.createElement(Gn.a,{className:t.avatar},i.a.createElement(Yn.a,{className:t.personIcon})),i.a.createElement("div",null,e.user)),i.a.createElement(De.a,null,i.a.createElement(q.a,{id:"Apis.Details.LifeCycle.LifeCycleHistory.lifecycle.state.history",defaultMessage:"LC has changed from {previous} to {post}",values:{previous:e.previousState,post:e.postState}})),i.a.createElement(De.a,null,ne()(e.updatedTime).fromNow()))))))};Zn.propTypes={classes:s.a.shape({}).isRequired,lcHistory:s.a.arrayOf(s.a.shape({})).isRequired};var Xn=Object(L.a)(e=>({firstCol:{width:100},personIcon:{fontSize:e.typography.fontSize},avatar:{width:25,height:25}}))(Zn);function $n(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}class ei extends n.Component{constructor(e){var t,a,n;super(e),n=e=>(t,a)=>{const{checkList:n}=this.state;n[e].checked=a,this.setState({checkList:n})},(a="handleChangeCheckList")in(t=this)?Object.defineProperty(t,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[a]=n,this.api=new Q.a,this.state={lcHistory:null,checkList:[],certList:[]},this.updateData=this.updateData.bind(this),this.handleChangeCheckList=this.handleChangeCheckList.bind(this)}componentDidMount(){this.updateData()}updateData(){const{api:{id:e}}=this.props,t=Q.a.get(e),a=this.api.getLcState(e),n=this.api.getLcHistory(e),i=Q.a.getAllClientCertificates(e);Promise.all([t,a,n,i]).then(e=>{const t=e[0],a=e[1].body,n=e[2].body.list,i=e[3].body;const r=[];let s=0;for(const e of a.checkItems)r.push({index:s,label:e.name,value:e.name,checked:!1}),s++;this.setState({api:t,lcState:a,lcHistory:n,privateJetModeEnabled:!1,checkList:r,certList:$n(i.certificates)})}).catch(e=>{0})}render(){const{classes:e}=this.props,{api:t,lcState:a,privateJetModeEnabled:n,checkList:r,lcHistory:s,certList:l}=this.state,c=this.context.api;return c&&Object(o.b)(["apim:api_publish"],c)?i.a.createElement(pe.a,{container:!0,direction:"row",alignItems:"center",spacing:4,style:{marginTop:20}},i.a.createElement(pe.a,{item:!0},i.a.createElement(K.a,{variant:"body2",color:"primary"},i.a.createElement(q.a,{id:"Apis.Details.LifeCycle.LifeCycle.change.not.allowed",defaultMessage:"* You are not authorized to change the life cycle state of the API due to insufficient permissions"})))):a?i.a.createElement(i.a.Fragment,null,i.a.createElement(K.a,{variant:"h4",gutterBottom:!0},i.a.createElement(q.a,{id:"Apis.Details.LifeCycle.LifeCycle.lifecycle",defaultMessage:"Lifecycle"})),i.a.createElement("div",{className:e.contentWrapper},i.a.createElement(pe.a,{container:!0},i.a.createElement(pe.a,{item:!0,xs:12},i.a.createElement(Hn,{handleUpdate:this.updateData,lcState:a,checkList:r,handleChangeCheckList:this.handleChangeCheckList,api:t,privateJetModeEnabled:n,certList:l})),i.a.createElement(pe.a,{item:!0,xs:12},s.length>1&&i.a.createElement("div",null,i.a.createElement(K.a,{variant:"h6",gutterBottom:!0,className:e.historyHead},i.a.createElement(q.a,{id:"Apis.Details.LifeCycle.LifeCycle.history",defaultMessage:"History"})),i.a.createElement(Xn,{lcHistory:s})))))):i.a.createElement(X.a,null)}}ei.propTypes={classes:s.a.shape({}).isRequired,api:s.a.shape({}).isRequired},ei.contextType=de.c;var ti=Object(L.a)(e=>({root:{flexGrow:1,marginTop:10,maxWidth:e.custom.contentAreaWidth},titleWrapper:{display:"flex",flexDirection:"row",alignItems:"center"},historyHead:{marginTop:e.spacing(2),marginBottom:e.spacing(2)}}))(ei),ai=a(675),ni=a.n(ai),ii=a(830),ri=a.n(ii),si=a(524),oi=a(1218);function li(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class ci extends i.a.Component{constructor(e){super(e),li(this,"changeType",e=>{const{value:t}=e.target;"PUBLIC_FORUM"!==t&&"SUPPORT_FORUM"!==t||this.setState({type:"URL"}),this.setState({type:t})}),li(this,"changeSource",e=>{const{value:t}=e.target;this.validate(),this.setState({sourceType:t})}),li(this,"setDisable",e=>{const{type:t}=this.state;if(!("INLINE"!==e&&"MARKDOWN"!==e&&"FILE"!==e||"PUBLIC_FORUM"!==t&&"SUPPORT_FORUM"!==t))return!0}),li(this,"handleChange",e=>t=>{const{value:a}=t.target;"name"===e?this.setState({name:a}):"summary"===e?this.setState({summary:a}):"sourceUrl"===e?this.setState({sourceUrl:a}):"otherTypeName"===e&&this.setState({otherTypeName:a})}),li(this,"onDrop",e=>{this.setState({file:e})}),li(this,"addDocument",e=>{const{apiType:t}=this.props,a=t===Q.a.CONSTS.APIProduct?new Z.a:new Q.a,{name:n,type:i,summary:r,sourceType:s,sourceUrl:o,file:l,otherTypeName:c}=this.state;return{docPromise:a.addDocument(e,{name:n,type:i,summary:r,sourceType:s,visibility:"API_LEVEL",sourceUrl:o,otherTypeName:c,inlineContent:""}),file:l}}),li(this,"updateDocument",e=>{const{apiType:t}=this.props,a=t===Q.a.CONSTS.APIProduct?new Z.a:new Q.a,{name:n,type:i,summary:r,sourceType:s,sourceUrl:o,file:l,otherTypeName:c}=this.state,{docId:p}=this.props;return{docPromise:a.updateDocument(e,p,{name:n,type:i,summary:r,sourceType:s,visibility:"API_LEVEL",sourceUrl:o,otherTypeName:c,inlineContent:""}),file:l}}),this.state={type:"HOWTO",sourceType:"INLINE",name:"",summary:"",sourceUrl:"",file:null,disableName:!1,otherTypeName:null,nameNotDuplicate:!0,invalidUrl:!0,nameEmpty:!1,summeryEmpty:!1,urlEmpty:!1}}getDocument(){const{apiId:e,docId:t,apiType:a}=this.props,n=a===Q.a.CONSTS.APIProduct?new Z.a:new Q.a;if(t&&e){n.getDocument(e,t).then(e=>{const{name:t,type:a,summary:n,sourceType:i,sourceUrl:r,otherTypeName:s}=e.body;this.setState({name:t,type:a,summary:n,sourceType:i,sourceUrl:r,otherTypeName:s})}).catch(e=>{const{status:t}=e;404===t&&this.setState({apiNotFound:!0})})}}validate(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=!1;if("url"===e)a=!!t&&Ot.a.url.validate(t).error,this.setState({invalidUrl:a}),""===t?this.setState({urlEmpty:!0}):this.setState({urlEmpty:!1});else if("name"===e){if(t){Ot.a.apiDocument.validate({id:this.props.apiId,name:t}).then(e=>{this.setState({nameNotDuplicate:!e})}).catch(e=>{404===e.status?this.setState({nameNotDuplicate:!0}):$.a.error("Error when validating document name")})}else this.setState({nameNotDuplicate:!0});""===t?this.setState({nameEmpty:!0}):this.setState({nameEmpty:!1})}else"summary"===e&&(""===t?this.setState({summeryEmpty:!0}):this.setState({summeryEmpty:!1}))}componentDidMount(){this.getDocument();const{apiId:e,docId:t}=this.props;e&&t&&this.setState({disableName:!0})}showNameHelper(){const{nameEmpty:e,nameNotDuplicate:t}=this.state;return t&&!e?i.a.createElement(q.a,{id:"Apis.Details.Documents.CreateEditForm.document.name.helper.text",defaultMessage:"Provide the name for the document"}):e?i.a.createElement(q.a,{id:"Apis.Details.Documents.CreateEditForm.empty.document.name.helper.text",defaultMessage:"Document name cannot be empty"}):i.a.createElement(q.a,{id:"Apis.Details.Documents.CreateEditForm.duplicate.document.name.helper.text",defaultMessage:"Duplicate document name"})}getUrlHelperText(){const{invalidUrl:e,urlEmpty:t}=this.state;return e?i.a.createElement(q.a,{id:"Apis.Details.Documents.CreateEditForm.source.url.helper.text.error.invalid",defaultMessage:"Enter a valid URL to the source"}):t?i.a.createElement(q.a,{id:"Apis.Details.Documents.CreateEditForm.source.url.helper.text.error.empty",defaultMessage:"URL Field cannot be empty"}):i.a.createElement(q.a,{id:"Apis.Details.Documents.CreateEditForm.source.url.helper.text",defaultMessage:"Provide the URL to the source"})}render(){const{name:e,type:t,summary:a,sourceType:n,sourceUrl:r,file:s,disableName:o,otherTypeName:l,invalidUrl:c,nameNotDuplicate:p,nameEmpty:d,summeryEmpty:m,urlEmpty:u}=this.state,{classes:g,setSaveDisabled:h}=this.props;return h(!(""!==e&&""!==a&&p&&(!c&&""!==r||"URL"!==n))),i.a.createElement("div",{className:g.addNewOther},i.a.createElement(ft.a,{margin:"normal",className:g.FormControlOdd},i.a.createElement(vt.a,{fullWidth:!0,InputProps:{onBlur:e=>{let{target:{value:t}}=e;this.validate("name",t)}},label:i.a.createElement(q.a,{id:"Apis.Details.Documents.CreateEditForm.document.name",defaultMessage:"Name *"}),helperText:this.showNameHelper(),type:"text",variant:"outlined",name:"name",margin:"normal",value:e,onChange:this.handleChange("name"),InputLabelProps:{shrink:!0},autoFocus:!0,disabled:o,error:!p||d})),i.a.createElement(ft.a,{margin:"normal",className:g.FormControlOdd},i.a.createElement(vt.a,{fullWidth:!0,multiline:!0,InputProps:{onBlur:e=>{let{target:{value:t}}=e;this.validate("summary",t)},onKeyUp:e=>{let{target:{value:t}}=e;this.validate("summary",t)}},margin:"normal",variant:"outlined",label:i.a.createElement(q.a,{id:"Apis.Details.Documents.CreateEditForm.document.summary",defaultMessage:"Summary *"}),helperText:m?i.a.createElement(q.a,{id:"Apis.Details.Documents.CreateEditForm.document.summary.error.empty",defaultMessage:"Document summary can not be empty"}):i.a.createElement(q.a,{id:"Apis.Details.Documents.CreateEditForm.document.summary.helper.text",defaultMessage:"Provide a brief description for the document"}),type:"text",name:"summary",margin:"normal",value:a,onChange:this.handleChange("summary"),InputLabelProps:{shrink:!0},error:m})),i.a.createElement(ft.a,{component:"fieldset",className:g.formControlFirst},i.a.createElement(bt.a,{component:"legend"},i.a.createElement(q.a,{id:"Apis.Details.Documents.CreateEditForm.document.create.type",defaultMessage:"Type"})),i.a.createElement(ht.a,{"aria-label":"Type",name:"type",className:g.group,value:t,onChange:this.changeType},i.a.createElement(Et.a,{className:g.formControlLabel,value:"HOWTO",control:i.a.createElement(gt.a,null),label:i.a.createElement("div",{className:g.typeTextWrapper},i.a.createElement(Ma.a,null,"help_outline"),i.a.createElement("div",null,i.a.createElement(q.a,{id:"Apis.Details.Documents.CreateEditForm.document.create.type.how.to",defaultMessage:"How To"})))}),i.a.createElement(Et.a,{className:g.formControlLabel,value:"SAMPLES",control:i.a.createElement(gt.a,null),label:i.a.createElement("div",{className:g.typeTextWrapper},i.a.createElement(Ma.a,null,"code"),i.a.createElement("div",null,i.a.createElement(q.a,{id:"Apis.Details.Documents.CreateEditForm.document.create.type.sample",defaultMessage:"Sample & SDK"})))}),i.a.createElement(Et.a,{className:g.formControlLabel,value:"PUBLIC_FORUM",control:i.a.createElement(gt.a,null),label:i.a.createElement("div",{className:g.typeTextWrapper},i.a.createElement(Ma.a,null,"forum"),i.a.createElement("div",null,i.a.createElement(q.a,{id:"Apis.Details.Documents.CreateEditForm.document.create.type.public.forum",defaultMessage:"Public Forum"})))}),i.a.createElement(Et.a,{className:g.formControlLabel,value:"SUPPORT_FORUM",control:i.a.createElement(gt.a,null),label:i.a.createElement("div",{className:g.typeTextWrapper},i.a.createElement(Ma.a,null,"forum"),i.a.createElement("div",null,i.a.createElement(q.a,{id:"Apis.Details.Documents.CreateEditForm.document.create.type.support.forum",defaultMessage:"Support Forum"})))}),i.a.createElement(Et.a,{className:g.formControlLabel,value:"OTHER",control:i.a.createElement(gt.a,null),label:i.a.createElement("div",{className:g.typeTextWrapper},i.a.createElement(Ma.a,null,"video_label"),i.a.createElement("div",null,i.a.createElement(q.a,{id:"Apis.Details.Documents.CreateEditForm.document.create.type.other",defaultMessage:"Other"})))}))),"OTHER"===t&&i.a.createElement(ft.a,{margin:"normal",className:g.FormControlOdd},i.a.createElement(vt.a,{fullWidth:!0,label:i.a.createElement(q.a,{id:"Apis.Details.Documents.CreateEditForm.document.create.type.other.document.category",defaultMessage:"Other Document Type *"}),helperText:i.a.createElement(q.a,{id:"Apis.Details.Documents.CreateEditForm.document.create.type.other.document.category.helper.text",defaultMessage:"Provide the document type"}),type:"text",name:"otherTypeName",margin:"normal",value:l,variant:"outlined",onChange:this.handleChange("otherTypeName"),InputLabelProps:{shrink:!0}})),i.a.createElement(ft.a,{component:"fieldset",className:g.formControl},i.a.createElement(bt.a,{component:"legend"},i.a.createElement(q.a,{id:"Apis.Details.Documents.CreateEditForm.source",defaultMessage:"Source"})),i.a.createElement(ht.a,{"aria-label":"Source",name:"sourceType",className:g.group,value:n,onChange:this.changeSource},i.a.createElement(Et.a,{disabled:this.setDisable("INLINE"),value:"INLINE",control:i.a.createElement(gt.a,null),label:i.a.createElement(q.a,{id:"Apis.Details.Documents.CreateEditForm.source.inline",defaultMessage:"Inline"})}),i.a.createElement(Et.a,{disabled:this.setDisable("MARKDOWN"),value:"MARKDOWN",control:i.a.createElement(gt.a,null),label:i.a.createElement(q.a,{id:"Apis.Details.Documents.CreateEditForm.source.markdown",defaultMessage:"Markdown"})}),i.a.createElement(Et.a,{disabled:this.setDisable("URL"),value:"URL",control:i.a.createElement(gt.a,null),label:i.a.createElement(q.a,{id:"Apis.Details.Documents.CreateEditForm.source.url",defaultMessage:"URL"})}),i.a.createElement(Et.a,{disabled:this.setDisable("FILE"),value:"FILE",control:i.a.createElement(gt.a,null),label:i.a.createElement(q.a,{id:"Apis.Details.Documents.CreateEditForm.source.file",defaultMessage:"File"})}))),"URL"===n&&i.a.createElement(ft.a,{margin:"normal",className:g.FormControlOdd},i.a.createElement(vt.a,{fullWidth:!0,InputProps:{onBlur:e=>{let{target:{value:t}}=e;this.validate("url",t)},onKeyUp:e=>{let{target:{value:t}}=e;this.validate("url",t)}},margin:"normal",label:i.a.createElement(q.a,{id:"Apis.Details.Documents.CreateEditForm.source.url.url",defaultMessage:"URL"}),helperText:this.getUrlHelperText(),type:"text",name:"sourceUrl",margin:"normal",value:r,onChange:this.handleChange("sourceUrl"),InputLabelProps:{shrink:!0},error:c||u,variant:"outlined"})),"FILE"===n&&i.a.createElement(Ia.a,{multiple:!1,accept:"application/msword, application/vnd.openxmlformats-officedocument.wordprocessingml.document, application/pdf, text/plain",className:g.dropzone,activeClassName:g.acceptDrop,rejectClassName:g.rejectDrop,onDrop:e=>{this.onDrop(e)}},e=>{let{getRootProps:t,getInputProps:a}=e;return i.a.createElement("div",t(),i.a.createElement("input",a()),i.a.createElement("div",{className:g.dropZoneWrapper},i.a.createElement(Ma.a,{className:g.dropIcon,style:{fontSize:56}},"cloud_upload"),s&&s.length>0&&i.a.createElement("div",{className:g.uploadedFile},i.a.createElement(Ma.a,null,"file")," ",s[0].name)))}),("INLINE"===n||"MARKDOWN"===n)&&i.a.createElement(si.a,{type:"info",height:60},i.a.createElement("div",{className:g.contentWrapper},i.a.createElement(K.a,{component:"p",className:g.content},i.a.createElement(q.a,{id:"Apis.Details.Documents.CreateEditForm.document.content.info",defaultMessage:"Please save the document. The content can be edited in the next step."})))))}}ci.defaultProps={apiId:null,docId:null},ci.propTypes={classes:s.a.shape({}).isRequired,intl:s.a.shape({}).isRequired,docId:s.a.shape({}),apiId:s.a.shape({}),saveDisabled:s.a.bool.isRequired,setSaveDisabled:s.a.func.isRequired,apiType:s.a.oneOf([Q.a.CONSTS.API,Q.a.CONSTS.APIProduct]).isRequired};var pi=Object(q.d)(Object(L.a)(e=>({button:{marginLeft:e.spacing(2),color:e.palette.getContrastText(e.palette.primary.main)},contentWrapper:{maxWidth:e.custom.contentAreaWidth},addNewOther:{padding:e.spacing(2)},radioGroup:{display:"flex",flexDirection:"row",width:300},expansionPanel:{marginBottom:e.spacing(1)},group:{display:"flex",flexDirection:"row"},formControlFirst:{display:"block"},formControl:{display:"block",marginTop:20},formControlLabel:{background:"#efefef",borderRadius:5,paddingRight:10,marginLeft:0,marginTop:10},typeTextWrapper:{display:"flex",flexDirection:"column",alignItems:"center"},FormControlOdd:{padding:0,backgroundColor:e.palette.background.paper,width:"100%",marginTop:0},acceptDrop:{backgroundColor:le.a[50]},dropzone:{border:"1px dashed "+e.palette.primary.main,borderRadius:"5px",cursor:"pointer",height:75,padding:"".concat(e.spacing(2),"px 0px"),position:"relative",textAlign:"center",width:"100%",margin:"10px 0"},dropZoneWrapper:{height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center","& span.material-icons":{color:e.palette.primary.main}},uploadedFile:{fontSize:11}}))(ci));function di(e){const{doc:t}=e,[a,r]=i.a.useState(!0),{api:s,isAPIProduct:o}=Object(n.useContext)(de.c),l=o?"api-products":"apis",c="/".concat(l,"/").concat(s.id,"/documents");let p,d=null;return t&&t.body&&t.body.documentId&&(d="/".concat(l,"/").concat(s.id,"/documents/").concat(t.body.documentId,"/edit-content")),p="INLINE"===t.body.sourceType||"MARKDOWN"===t.body.sourceType,console.info("printing doc",t),i.a.createElement(ha.a,{open:a,onClose:function(){r(!1)},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},i.a.createElement(ya.a,{id:"alert-dialog-title"}," ",i.a.createElement(q.a,{id:"Apis.Details.Documents.GoToEdit.title",defaultMessage:"Document Created Successfully"})),i.a.createElement(Ea.a,null,i.a.createElement(ba.a,{id:"alert-dialog-description"},p?i.a.createElement(q.a,{id:"Apis.Details.Documents.GoToEdit.description.content",defaultMessage:"You can add content to the document or go back to the document listing page."}):i.a.createElement(q.a,{id:"Apis.Details.Documents.GoToEdit.description.file",defaultMessage:"You can go back to the document listing page and upload the file by editing the document."}))),i.a.createElement(fa.a,null,p&&i.a.createElement(W.b,{to:{pathname:d,state:{doc:t.body}}},i.a.createElement(Ne.a,{color:"primary"},i.a.createElement(q.a,{id:"Apis.Details.Documents.GoToEdit.add.content",defaultMessage:"Add Content"}))),i.a.createElement(W.b,{to:c},i.a.createElement(Ne.a,{color:"primary",autoFocus:!0},i.a.createElement(q.a,{id:"Apis.Details.Documents.GoToEdit.back.to.listing",defaultMessage:"Back to Listing"})))))}di.propTypes={doc:s.a.shape({}).isRequired};var mi=di;function ui(e){const{api:t,isAPIProduct:a}=Object(n.useContext)(de.c),[r,s]=Object(n.useState)(null),[o,l]=Object(n.useState)(!0),{classes:c,intl:p,history:d}=e,m="/".concat(a?"api-products":"apis","/").concat(t.id,"/documents"),u=t.apiType===Q.a.CONSTS.APIProduct?new Z.a:new Q.a;let g=Object(n.useRef)(null);return i.a.createElement(i.a.Fragment,null,i.a.createElement(pe.a,{container:!0,spacing:3},i.a.createElement(pe.a,{item:!0,sm:12,md:12}),i.a.createElement(pe.a,{item:!0,sm:0,md:0,lg:2}),i.a.createElement(pe.a,{item:!0,sm:12,md:12,lg:8},i.a.createElement(pe.a,{container:!0,spacing:5},i.a.createElement(pe.a,{item:!0,md:12},i.a.createElement("div",{className:c.titleWrapper},i.a.createElement(W.b,{to:m,className:c.titleLink},i.a.createElement(K.a,{variant:"h5",align:"left",className:c.mainTitle},i.a.createElement(q.a,{id:"Apis.Details.Documents.Create.heading",defaultMessage:"Documents"}))),i.a.createElement(Ma.a,null,"keyboard_arrow_right"),i.a.createElement(K.a,{variant:"h5"},i.a.createElement(q.a,{id:"Apis.Details.Documents.Create.title",defaultMessage:"Add New Document"})))),i.a.createElement(pe.a,{item:!0,md:12},i.a.createElement(ce.a,{elevation:0},i.a.createElement(pi,{innerRef:e=>{g=e},apiType:t.apiType,apiId:t.id,saveDisabled:o,setSaveDisabled:l}),i.a.createElement(oi.a,null),i.a.createElement("div",{className:c.addNewOther},i.a.createElement(Ne.a,{variant:"contained",color:"primary",onClick:()=>(t=>{const a=g.addDocument(t);a.docPromise.then(n=>{const{documentId:i,name:r}=n.body;a.file&&i?u.addFileToDocument(t,i,a.file[0]).then(t=>{$.a.info("".concat(r," ").concat(p.formatMessage({id:"Apis.Details.Documents.Create.successful.file.upload.message",defaultMessage:"File uploaded successfully."}))),d.push(m),e.getDocumentsList()}).catch(e=>{}):($.a.info("".concat(n.body.name," ").concat(p.formatMessage({id:"Apis.Details.Documents.Create.markdown.editor.success",defaultMessage:" added successfully."}))),s(n))}).catch(e=>{})})(t.id),disabled:o},i.a.createElement(q.a,{id:"Apis.Details.Documents.Create.markdown.editor.add.document.button",defaultMessage:"Add Document"})),i.a.createElement(Ne.a,{className:c.button,onClick:()=>d.push(m)},i.a.createElement(q.a,{id:"Apis.Details.Documents.Create.markdown.editor.add.document.cancel.button",defaultMessage:"Cancel"})))))))),r&&i.a.createElement(mi,{doc:r}))}ui.propTypes={classes:s.a.shape({}).isRequired,intl:s.a.func.isRequired,apiType:s.a.oneOf([Q.a.CONSTS.API,Q.a.CONSTS.APIProduct]).isRequired};var gi=Object(q.d)(Object(_.withRouter)(Object(L.a)(e=>({root:{flexGrow:1,marginTop:10},titleWrapper:{display:"flex",flexDirection:"row",alignItems:"center"},titleLink:{color:e.palette.primary.main},contentWrapper:{maxWidth:e.custom.contentAreaWidth},addNewWrapper:{backgroundColor:e.palette.background.paper,color:e.palette.getContrastText(e.palette.background.paper),border:"solid 1px "+e.palette.grey[300],borderRadius:e.shape.borderRadius,marginTop:e.spacing(2),marginBottom:e.spacing(3)},addNewHeader:{padding:e.spacing(2),backgroundColor:e.palette.grey[300],fontSize:e.typography.h6.fontSize,color:e.typography.h6.color,fontWeight:e.typography.h6.fontWeight},addNewOther:{padding:e.spacing(2)},button:{marginLeft:e.spacing(2),color:e.palette.getContrastText(e.palette.primary.main)}}))(ui)));function hi(){return(hi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}const fi=Object(n.lazy)(()=>Promise.resolve().then(a.t.bind(null,2319,7))),Ei=Object(n.lazy)(()=>a.e(3).then(a.t.bind(null,2867,7)));function bi(e){return i.a.createElement(qn.a,hi({direction:"up"},e))}function yi(e){const{intl:t,showAtOnce:a,history:r}=e,{api:s,isAPIProduct:o}=Object(n.useContext)(de.c),[l,c]=Object(n.useState)(a),[p,d]=Object(n.useState)(t.formatMessage({id:"documents.markdown.editor.default",defaultMessage:"#Enter your markdown content"})),m=()=>{if(l||u(),l&&a){const e="/".concat(o?"api-products":"apis","/").concat(s.id,"/documents");r.push(e)}c(!l)},u=()=>{(new Q.a).getInlineContentOfDocument(s.id,e.docId).then(e=>{d(e.text)}).catch(e=>{const{status:t}=e;404===t&&this.setState({apiNotFound:!0})})},{classes:g}=e;return i.a.createElement("div",null,i.a.createElement(Ne.a,{onClick:m},i.a.createElement(Ma.a,null,"code"),i.a.createElement(q.a,{id:"Apis.Details.Documents.MarkdownEditor.edit.content",defaultMessage:"Edit Content"})),i.a.createElement(ha.a,{fullScreen:!0,open:l,onClose:m,TransitionComponent:bi},i.a.createElement(ce.a,{square:!0,className:g.popupHeader},i.a.createElement(Ta.a,{color:"inherit",onClick:m,"aria-label":"Close"},i.a.createElement(Ma.a,null,"close")),i.a.createElement(K.a,{variant:"h4",className:g.docName},i.a.createElement(q.a,{id:"Apis.Details.Documents.MarkdownEditor.edit.content.of",defaultMessage:"Edit Content of"})," ",'"',e.docName,'"'),i.a.createElement(Ne.a,{className:g.button,variant:"contained",color:"primary",onClick:()=>{(new Q.a).addInlineContentToDocument(s.id,e.docId,"MARKDOWN",p).then(e=>{$.a.info("".concat(e.name," ").concat(t.formatMessage({id:"Apis.Details.Documents.MarkdownEditor.update.success.message",defaultMessage:"updated successfully."}))),m()}).catch(e=>{const{status:t}=e;404===t&&this.setState({apiNotFound:!0})})}},i.a.createElement(q.a,{id:"Apis.Details.Documents.MarkdownEditor.update.content.button",defaultMessage:"Update Content"})),i.a.createElement(Ne.a,{className:g.button,onClick:m},i.a.createElement(q.a,{id:"Apis.Details.Documents.MarkdownEditor.cancel.button",defaultMessage:"Cancel"}))),i.a.createElement("div",{className:g.splitWrapper},i.a.createElement(pe.a,{container:!0,spacing:7},i.a.createElement(pe.a,{item:!0,xs:6},i.a.createElement(n.Suspense,{fallback:i.a.createElement(Ze.a,null)},i.a.createElement(fi,{width:"100%",height:"100vh",language:"markdown",theme:"vs-dark",value:p,options:{selectOnLineNumbers:!0},onChange:e=>{d(e)},editorDidMount:(e,t)=>{e.focus()}}))),i.a.createElement(pe.a,{item:!0,xs:6},i.a.createElement("div",{className:g.markdownViewWrapper},i.a.createElement(n.Suspense,{fallback:i.a.createElement(Ze.a,null)},i.a.createElement(Ei,{source:p}))))))))}yi.propTypes={classes:s.a.shape({}).isRequired,intl:s.a.shape({}).isRequired};var vi=Object(q.d)(Object(_.withRouter)(Object(L.a)({appBar:{position:"relative"},flex:{flex:1},popupHeader:{display:"flex",flexDirection:"row",alignItems:"center"},splitWrapper:{padding:0},docName:{alignItems:"center",display:"flex"},markdownViewWrapper:{height:"100vh",overflowY:"auto"},button:{height:30,marginLeft:30}})(yi)));function Ci(){return(Ci=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function Ai(e){return i.a.createElement(qn.a,Ci({direction:"up"},e))}function Di(e){const t=new Q.a,{intl:a,apiType:r}=e,[s,l]=Object(n.useState)(!1),[c,p]=Object(n.useState)(!1);let d=Object(n.useRef)(null);const{api:m}=Object(n.useContext)(de.c),u=()=>{l(!s)},{classes:g,docId:h,apiId:f}=e;return i.a.createElement("div",null,i.a.createElement(Ne.a,{onClick:u,disabled:Object(o.b)(["apim:api_create","apim:api_publish"],m)},i.a.createElement(Ma.a,null,"edit"),i.a.createElement(q.a,{id:"Apis.Details.Documents.Edit.documents.text.editor.edit",defaultMessage:"Edit Meta Data"})),i.a.createElement(ha.a,{open:s,onClose:u,TransitionComponent:Ai,fullScreen:!0},i.a.createElement(ce.a,{square:!0,className:g.popupHeader},i.a.createElement(Ta.a,{color:"inherit",onClick:u,"aria-label":"Close"},i.a.createElement(Ma.a,null,"close")),i.a.createElement(K.a,{variant:"h4",className:g.docName},i.a.createElement(q.a,{id:"Apis.Details.Documents.Edit.documents.text.editor.edit.content",defaultMessage:"Edit "}),'"',e.docName,'"'),i.a.createElement(Ne.a,{className:g.button,variant:"contained",color:"primary",onClick:()=>{const{apiId:n}=e,i=d.updateDocument(n);i.docPromise.then(r=>{const{documentId:s,name:o}=r.body;i.file&&s?t.addFileToDocument(n,s,i.file[0]).then(t=>{$.a.info("".concat(o," ").concat(a.formatMessage({id:"Apis.Details.Documents.Edit.markdown.editor.upload.success.message",defaultMessage:"File uploaded successfully."}))),e.getDocumentsList(),u()}).catch(e=>{}):($.a.info("".concat(o," ").concat(a.formatMessage({id:"Apis.Details.Documents.Edit.markdown.editor.update.success.message",defaultMessage:"Updated successfully."}))),e.getDocumentsList(),u())}).catch(e=>{})},disabled:c},i.a.createElement(q.a,{id:"Apis.Details.Documents.Edit.documents.text.editor.update.content",defaultMessage:"Save"})),i.a.createElement(Ne.a,{className:g.button,onClick:u},i.a.createElement(q.a,{id:"Apis.Details.Documents.Edit.documents.text.editor.cancel",defaultMessage:"Cancel"}))),i.a.createElement("div",{className:g.splitWrapper},i.a.createElement(pi,{innerRef:e=>{d=e},docId:h,apiId:f,apiType:r,saveDisabled:c,setSaveDisabled:p}))))}Di.propTypes={classes:s.a.shape({}).isRequired,apiId:s.a.shape({}).isRequired,docId:s.a.shape({}).isRequired,getDocumentsList:s.a.shape({}).isRequired,intl:s.a.shape({}).isRequired,api:s.a.shape({id:s.a.string,apiType:s.a.oneOf([Q.a.CONSTS.API,Q.a.CONSTS.APIProduct])}).isRequired};var Si=Object(q.d)(Object(L.a)({appBar:{position:"relative"},flex:{flex:1},popupHeader:{display:"flex",flexDirection:"row",alignItems:"center"},splitWrapper:{padding:0},docName:{alignItems:"center",display:"flex"},button:{height:30,marginLeft:30}})(Di));function Oi(e){const{intl:t}=e,[a,r]=Object(n.useState)(!1),{api:s}=Object(n.useContext)(de.c),l=e=>{"yes"===e?p():r(!a)},c=()=>{r(!a)},p=()=>{const{apiId:n,docId:i,getDocumentsList:s,apiType:o}=e;(o===Q.a.CONSTS.APIProduct?new Z.a:new Q.a).deleteDocument(n,i).then(()=>{$.a.info("".concat(t.formatMessage({id:"Apis.Details.Documents.Delete.document.delete.successfully",defaultMessage:"deleted successfully."}))),r(!a),s()}).catch(e=>{const{status:t}=e;404===t&&this.setState({apiNotFound:!0})})},{apiName:d}=e;return i.a.createElement("div",null,i.a.createElement(Ne.a,{onClick:c,disabled:Object(o.b)(["apim:api_create","apim:api_publish"],s)},i.a.createElement(Ma.a,null,"delete_forever"),i.a.createElement(q.a,{id:"Apis.Details.Documents.Delete.document.delete",defaultMessage:"Delete"})),i.a.createElement(ha.a,{open:a,onClose:c,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},i.a.createElement(ya.a,{id:"alert-dialog-title"},i.a.createElement(q.a,{id:"Apis.Details.Documents.Delete.document.listing.delete.confirm.title",defaultMessage:"Delete Document"})),i.a.createElement(Ea.a,null,i.a.createElement(ba.a,{id:"alert-dialog-description"},i.a.createElement(q.a,{id:"Apis.Details.Documents.Delete.document.listing.delete.confirm.body",defaultMessage:"Selected document will be deleted from the API.You will not be able to undo this action."}))),i.a.createElement(fa.a,null,i.a.createElement(Ne.a,{onClick:()=>l("no"),color:"default"},i.a.createElement(q.a,{id:"Apis.Details.Documents.Delete.document.listing.delete.cancel",defaultMessage:"Cancel"})),i.a.createElement(Ne.a,{onClick:()=>l("yes"),color:"primary",autoFocus:!0},i.a.createElement(q.a,{id:"Apis.Details.Documents.Delete.document.listing.delete.yes",defaultMessage:"Yes. Delete"})))))}Oi.propTypes={apiId:s.a.shape({}).isRequired,apiType:s.a.string.isRequired,docId:s.a.shape({}).isRequired,getDocumentsList:s.a.shape({}).isRequired,intl:s.a.shape({}).isRequired,api:s.a.shape({id:s.a.string,apiType:s.a.oneOf([Q.a.CONSTS.API,Q.a.CONSTS.APIProduct])}).isRequired};var wi=Object(q.d)(Oi);function Pi(e){const{intl:t,docsToDelete:a,docs:r,getDocumentsList:s}=e,{api:o,isAPIProduct:l}=Object(n.useContext)(de.c),c=l?new Z.a:new Q.a,[p,d]=Object(n.useState)(!0),m=e=>{"yes"===e?u():d(!p)},u=()=>{const e=[];a.data.map(t=>{const a=r[t.index];e.push(c.deleteDocument(o.id,a.documentId))}),Promise.all(e).then(e=>{console.log(e),$.a.info("".concat(t.formatMessage({id:"Apis.Details.Documents.Delete.document.delete.successfully",defaultMessage:"deleted successfully."}))),d(!p),s()}).catch(e=>{0})};return Object(n.useEffect)(()=>{d(!0)},[a]),i.a.createElement(ha.a,{open:p,onClose:()=>{d(!p)},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},i.a.createElement(ya.a,{id:"alert-dialog-title"},i.a.createElement(q.a,{id:"Apis.Details.Documents.Delete.document.listing.delete.confirm.title",defaultMessage:"Delete Selected Documents"})),i.a.createElement(Ea.a,null,i.a.createElement(ba.a,{id:"alert-dialog-description"},i.a.createElement("strong",null,o.name),i.a.createElement(q.a,{id:"Apis.Details.Documents.Delete.document.listing.delete.confirm.body",defaultMessage:"Selected documents will be deleted from the API.You will not be able to undo this action."}))),i.a.createElement(fa.a,null,i.a.createElement(Ne.a,{onClick:()=>m("no"),color:"default"},i.a.createElement(q.a,{id:"Apis.Details.Documents.Delete.document.listing.delete.cancel",defaultMessage:"Cancel"})),i.a.createElement(Ne.a,{onClick:()=>m("yes"),color:"primary",autoFocus:!0},i.a.createElement(q.a,{id:"Apis.Details.Documents.Delete.document.listing.delete.yes",defaultMessage:"Delete"}))))}Pi.propTypes={docs:s.a.instanceOf(Array).isRequired,getDocumentsList:s.a.func.isRequired,docsToDelete:s.a.instanceOf(Array).isRequired,intl:s.a.shape({}).isRequired};var xi=Object(q.d)(Pi);function Ti(e){const{intl:t}=e,{docId:a,apiId:r}=e,[s,o]=Object(n.useState)(!1),[l,c]=Object(n.useState)(!1);Object(n.useEffect)(()=>{(new Q.a).getFileForDocument(r,a).then(e=>{c(!0),o(!0)}).catch(e=>{c(!0),o(!1)})},[]);return l&&i.a.createElement(Ne.a,{onClick:()=>{(new Q.a).getFileForDocument(r,a).then(e=>{B.a.forceDownload(e)}).catch(e=>{})},disabled:!s},i.a.createElement(Ma.a,null,"arrow_downward"),i.a.createElement(q.a,{id:"Apis.Details.Documents.Download.documents.listing.download",defaultMessage:"Download"}))}Ti.propTypes={apiId:s.a.shape({}).isRequired,docId:s.a.shape({}).isRequired,intl:s.a.shape({}).isRequired};var Ii=Object(q.d)(Ti);const Mi=Object(n.lazy)(()=>Promise.all([a.e(0),a.e(2),a.e(1)]).then(a.bind(null,2866)));function Ri(e){return"APIProduct"===e.apiType?i.a.createElement(W.b,{to:"/api-products/"+e.apiId+"/documents/"+e.docId+"/details"},e.docName):i.a.createElement(W.b,{to:"/apis/"+e.apiId+"/documents/"+e.docId+"/details"},e.docName)}class Ni extends i.a.Component{constructor(e){super(e),this.state={docs:null,showAddDocs:!1,docsToDelete:null},this.apiId=e.api.id,this.toggleAddDocs=this.toggleAddDocs.bind(this),this.getDocumentsList=this.getDocumentsList.bind(this)}componentDidMount(){this.getDocumentsList()}getDocumentsList(){const{api:e,intl:t}=this.props;if(e.apiType===Q.a.CONSTS.APIProduct){(new Z.a).getDocuments(e.id).then(e=>{this.setState({docs:e.obj.list})}).catch(e=>{const a=JSON.parse(e.message),n="Error["+a.code+"]: "+a.description+" | "+a.message+".";console.error(n),$.a.error(t.formatMessage({id:"Apis.Details.Documents.Listing.documents.listing.fetching.error.message.api.product",defaultMessage:"Error in fetching documents list of the API Product"}))})}else{(new Q.a).getDocuments(this.props.api.id).then(e=>{this.setState({docs:e.obj.list})}).catch(e=>{const a=JSON.parse(e.message),n="Error["+a.code+"]: "+a.description+" | "+a.message+".";console.error(n),$.a.error(t.formatMessage({id:"Apis.Details.Documents.Listing.documents.listing.fetching.error.message",defaultMessage:"Error in fetching documents list of the API"}))})}}toggleAddDocs(){this.setState(e=>({showAddDocs:!e.showAddDocs}))}setFoo(){this.setState({foo:"test"})}render(){var e=this;const{classes:t,api:a,isAPIProduct:r}=this.props,{docs:s,showAddDocs:l,docsToDelete:c}=this.state,p="/".concat(r?"api-products":"apis","/").concat(a.id,"/documents/create"),d=!Object(o.b)(["apim:api_publish","apim:api_create"],a)||"excluded",m={title:!1,filter:!1,print:!1,download:!1,viewColumns:!1,customToolbar:!1,search:!1,onRowsDelete:function(t,a){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;return n.setState({docsToDelete:t}),!1}},u=[{name:"documentId",options:{display:"excluded",filter:!1}},{name:"name",options:{customBodyRender:(e,t)=>{if(t.rowData){const e=t.rowData[1],n=t.rowData[0];return i.a.createElement(Ri,{docName:e,docId:n,apiId:this.apiId,apiType:a.apiType})}return null},filter:!1,label:i.a.createElement(q.a,{id:"Apis.Details.Documents.Listing.column.header.name",defaultMessage:"name"})}},{name:"sourceType",label:i.a.createElement(q.a,{id:"Apis.Details.Documents.Listing.column.header.source.type",defaultMessage:"sourceType"})},{name:"type",label:i.a.createElement(q.a,{id:"Apis.Details.Documents.Listing.column.header.type",defaultMessage:"type"})},{name:"sourceUrl",options:{display:"excluded",filter:!1}},{name:"action",label:i.a.createElement(q.a,{id:"Apis.Details.Documents.Listing.column.header.action",defaultMessage:"action"}),options:{display:d,customBodyRender:(e,r)=>{if(r.rowData){const e=r.rowData[1],s=r.rowData[0],o=r.rowData[2],l=r.rowData[4];return"MARKDOWN"===o?i.a.createElement("table",{className:t.actionTable},i.a.createElement("tr",null,i.a.createElement("td",null,i.a.createElement(vi,{docName:e,docId:s,apiId:this.apiId})),i.a.createElement("td",null,i.a.createElement(Si,{apiType:a.apiType,docName:e,docId:s,apiId:this.apiId,getDocumentsList:this.getDocumentsList,api:!0})),i.a.createElement("td",null,i.a.createElement(wi,{docName:e,docId:s,apiId:this.apiId,getDocumentsList:this.getDocumentsList,apiType:a.apiType,api:!0})))):"INLINE"===o?i.a.createElement("table",{className:t.actionTable},i.a.createElement("tr",null,i.a.createElement("td",null,i.a.createElement(n.Suspense,{fallback:i.a.createElement(q.a,{id:"Apis.Details.Documents.Listing.loading",defaultMessage:"Loading..."})},i.a.createElement(Mi,{docName:e,docId:s,apiId:this.apiId,apiType:a.apiType}))),i.a.createElement("td",null,i.a.createElement(Si,{apiType:a.apiType,docName:e,docId:s,apiId:this.apiId,getDocumentsList:this.getDocumentsList,api:!0})),i.a.createElement("td",null,i.a.createElement(wi,{docName:e,docId:s,apiId:this.apiId,getDocumentsList:this.getDocumentsList,apiType:a.apiType,api:!0})))):"URL"===o?i.a.createElement("table",{className:t.actionTable},i.a.createElement("tr",null,i.a.createElement("td",null,i.a.createElement("a",{href:l},i.a.createElement(Ne.a,null,i.a.createElement(Ma.a,null,"open_in_new"),i.a.createElement(q.a,{id:"Apis.Details.Documents.Listing.documents.open",defaultMessage:"Open"})))),i.a.createElement("td",null,i.a.createElement(Si,{apiType:a.apiType,docName:e,docId:s,apiId:this.apiId,getDocumentsList:this.getDocumentsList,api:!0})),i.a.createElement("td",null,i.a.createElement(wi,{docName:e,docId:s,apiId:this.apiId,getDocumentsList:this.getDocumentsList,apiType:a.apiType,api:!0})))):"FILE"===o?i.a.createElement("table",{className:t.actionTable},i.a.createElement("tr",null,i.a.createElement("td",null,i.a.createElement(Ii,{docId:s,apiId:this.apiId})),i.a.createElement("td",null,i.a.createElement(Si,{apiType:a.apiType,docName:e,docId:s,apiId:this.apiId,getDocumentsList:this.getDocumentsList,api:!0})),i.a.createElement("td",null,i.a.createElement(wi,{docName:e,docId:s,apiId:this.apiId,getDocumentsList:this.getDocumentsList,apiType:a.apiType,api:!0})))):i.a.createElement("span",null)}return null},filter:!1}}];return i.a.createElement(i.a.Fragment,null,c&&i.a.createElement(xi,{getDocumentsList:this.getDocumentsList,docsToDelete:c,docs:s}),i.a.createElement("div",{className:t.titleWrapper},i.a.createElement(K.a,{variant:"h4",className:t.mainTitle},i.a.createElement(q.a,{id:"Apis.Details.Documents.Listing.documents.listing.title",defaultMessage:"Documents"})),s&&s.length>0&&i.a.createElement(Mn.a,{resourcePath:r?Mn.c.API_PRODUCTS:Mn.c.API_CHANGE_LC,resourceMethod:Mn.b.POST},i.a.createElement(W.b,{to:!Object(o.b)(["apim:api_create","apim:api_publish"],a)&&p},i.a.createElement(Ne.a,{size:"small",className:t.button,disabled:Object(o.b)(["apim:api_create","apim:api_publish"],a)},i.a.createElement(ri.a,{className:t.buttonIcon}),i.a.createElement(q.a,{id:"Apis.Details.Documents.Listing.add.new.document.button",defaultMessage:"Add New Document"}))))),i.a.createElement("div",null,l&&i.a.createElement(gi,{toggleAddDocs:this.toggleAddDocs,getDocumentsList:this.getDocumentsList,apiType:a.apiType}),s&&s.length>0?i.a.createElement(ni.a,{title:"",data:s,columns:u,options:m}):i.a.createElement(si.a,{type:"info",height:140},i.a.createElement("div",{className:t.contentWrapper},i.a.createElement(K.a,{variant:"h5",component:"h3",className:t.head},i.a.createElement(q.a,{id:"Apis.Details.Documents.Listing.add.new.msg.title",defaultMessage:"Create Documents"})),a.apiType===Q.a.CONSTS.APIProduct?i.a.createElement(K.a,{component:"p",className:t.content},i.a.createElement(q.a,{id:"Apis.Details.Documents.Listing.APIProduct.add.new.msg.content",defaultMessage:"You can add different types of documents to an API. Proper documentation helps API publishers to market their  APIs better and sustain competition. "})):i.a.createElement(K.a,{component:"p",className:t.content},i.a.createElement(q.a,{id:"Apis.Details.Documents.Listing.add.new.msg.content",defaultMessage:"You can add different types of documents to an API. Proper documentation helps API publishers to market their  APIs better and sustain competition. "})),i.a.createElement("div",{className:t.actions},i.a.createElement(W.b,{to:!Object(o.b)(["apim:api_create","apim:api_publish"],a)&&p},i.a.createElement(Ne.a,{variant:"contained",color:"primary",className:t.button,disabled:Object(o.b)(["apim:api_create","apim:api_publish"],a)},i.a.createElement(q.a,{id:"Apis.Details.Documents.Listing.add.new.msg.button",defaultMessage:"Add New Document"}))))))))}}Ni.propTypes={classes:s.a.shape({}).isRequired,intl:s.a.shape({}).isRequired,api:s.a.shape({id:s.a.string,apiType:s.a.oneOf([Q.a.CONSTS.API,Q.a.CONSTS.APIProduct])}).isRequired};var ji=Object(q.d)(Object(de.e)(Object(L.a)(e=>({root:{flexGrow:1,marginTop:10},contentWrapper:{maxWidth:e.custom.contentAreaWidth},addNewWrapper:{backgroundColor:e.palette.background.paper,color:e.palette.getContrastText(e.palette.background.paper),border:"solid 1px "+e.palette.grey[300],borderRadius:e.shape.borderRadius,marginTop:e.spacing(2),marginBottom:e.spacing(2)},addNewHeader:{padding:e.spacing(2),backgroundColor:e.palette.grey[300],fontSize:e.typography.h6.fontSize,color:e.typography.h6.color,fontWeight:e.typography.h6.fontWeight},addNewOther:{padding:e.spacing(2)},titleWrapper:{display:"flex",flexDirection:"row",alignItems:"center",marginBottom:e.spacing(2)},mainTitle:{paddingRight:10},actionTable:{"& td":{width:50},"& td:first-child":{width:130}},messageBox:{marginTop:20},actions:{padding:"20px 0","& button":{marginLeft:0}},head:{fontWeight:200,marginBottom:20},buttonIcon:{marginRight:e.spacing(1)}}))(Ni))),ki=a(2155),Li=a.n(ki);const qi=Object(n.lazy)(()=>a.e(3).then(a.t.bind(null,2867,7)));function _i(e){const{classes:t,fullScreen:a,intl:r,match:{params:{documentId:s}}}=e,{api:o,isAPIProduct:l}=Object(n.useContext)(de.c),[c,p]=Object(n.useState)(""),[d,m]=Object(n.useState)(null),u=l?new Z.a:new Q.a;Object(n.useEffect)(()=>{u.getDocument(o.id,s).then(e=>{const{body:t}=e;m(t),"MARKDOWN"!==t.sourceType&&"INLINE"!==t.sourceType||g()}).catch(e=>{0})},[s]);const g=()=>{u.getInlineContentOfDocument(o.id,s).then(e=>{p(e.text)}).catch(e=>{0})},h="/".concat(l?"api-products":"apis","/").concat(o.id,"/documents");return d&&i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:t.root},i.a.createElement("div",{className:t.titleWrapper},i.a.createElement(W.b,{to:h,className:t.titleLink},i.a.createElement(K.a,{variant:"h5",align:"left",className:t.mainTitle},i.a.createElement(q.a,{id:"Apis.Details.Documents.View.heading",defaultMessage:"Documents"}))),i.a.createElement(Ma.a,null,"keyboard_arrow_right"),i.a.createElement(K.a,{variant:"h5"},d.name)),i.a.createElement(ce.a,{className:t.paper},i.a.createElement(Ae.a,{className:t.table},i.a.createElement(Jn.a,null,i.a.createElement(Se.a,null,i.a.createElement(De.a,{className:t.leftCell},i.a.createElement(K.a,{variant:"body1"},i.a.createElement(q.a,{id:"Apis.Details.Documents.View.meta.name",defaultMessage:"Name"}))),i.a.createElement(De.a,null,i.a.createElement(K.a,{variant:"body1"},d.name))),i.a.createElement(Se.a,null,i.a.createElement(De.a,null,i.a.createElement(K.a,{variant:"body1"},i.a.createElement(q.a,{id:"Apis.Details.Documents.View.meta.summary",defaultMessage:"Summary"}))),i.a.createElement(De.a,null,i.a.createElement(K.a,{variant:"body1"},d.summary))),i.a.createElement(Se.a,null,i.a.createElement(De.a,null,i.a.createElement(K.a,{variant:"body1"},i.a.createElement(q.a,{id:"Apis.Details.Documents.View.meta.catogery",defaultMessage:"Categorized as"}))),i.a.createElement(De.a,null,i.a.createElement(K.a,{variant:"body1"},"OTHER"===d.type?d.otherTypeName:d.type)," ")),i.a.createElement(Se.a,null,i.a.createElement(De.a,null,i.a.createElement(K.a,{variant:"body1"},i.a.createElement(q.a,{id:"Apis.Details.Documents.View.meta.source",defaultMessage:"Source Type"}))),i.a.createElement(De.a,null,i.a.createElement(K.a,{variant:"body1"},d.sourceType)," "))))),i.a.createElement(ce.a,{className:t.paper},"MARKDOWN"===d.sourceType&&i.a.createElement(n.Suspense,{fallback:i.a.createElement(Ze.a,null)},i.a.createElement(qi,{source:c})),"INLINE"===d.sourceType&&i.a.createElement(Li.a,{html:c}),"URL"===d.sourceType&&i.a.createElement("a",{className:t.displayURL,href:d.sourceUrl,target:"_blank"},d.sourceUrl,i.a.createElement(Ma.a,{className:t.displayURLLink},"open_in_new")),"FILE"===d.sourceType&&i.a.createElement(Ne.a,{variant:"contained",color:"default",className:t.button,onClick:()=>{u.getFileForDocument(o.id,s).then(e=>{B.a.forceDownload(e)}).catch(e=>{})}},i.a.createElement(q.a,{id:"Apis.Details.Documents.View.btn.download",defaultMessage:"Download"}),i.a.createElement(Ma.a,null,"arrow_downward")))))}_i.propTypes={classes:s.a.shape({}).isRequired,doc:s.a.shape({}).isRequired,apiId:s.a.shape({}).isRequired,intl:s.a.shape({formatMessage:s.a.func}).isRequired,fullScreen:s.a.shape({}).isRequired};var Wi=Object(q.d)(Object(L.a)(e=>({root:{flexGrow:1,marginTop:10},titleWrapper:{display:"flex",flexDirection:"row",alignItems:"center"},titleLink:{color:e.palette.primary.main},docTitle:{fontWeight:100,fontSize:50,color:e.palette.grey[500]},docBadge:{padding:e.spacing(1),background:e.palette.primary.main,position:"absolute",top:0,marginTop:-22,color:e.palette.getContrastText(e.palette.primary.main)},button:{padding:e.spacing(2),marginTop:e.spacing(2)},displayURL:{padding:e.spacing(2),marginTop:e.spacing(2),background:e.palette.grey[200],color:e.palette.getContrastText(e.palette.grey[200]),display:"flex"},displayURLLink:{paddingLeft:e.spacing(2)},paper:{marginTop:20,padding:e.spacing(2),height:"100%"},leftCell:{width:150}}))(_i)),Fi=a(988),zi=a.n(Fi);const Bi=Object(n.lazy)(()=>Promise.all([a.e(0),a.e(2),a.e(1)]).then(a.bind(null,2866)));var Ui=Object(_.withRouter)(function(e){const[t,a]=Object(n.useState)(null),{history:{location:{state:r,pathname:s},replace:o}}=e;return Object(n.useEffect)(()=>{if(!zi()(r)){const{doc:e}=r;e&&a(e)}},[]),i.a.createElement(i.a.Fragment,null,t&&"MARKDOWN"===t.sourceType&&i.a.createElement(vi,{docName:t.name,docId:t.documentId,showAtOnce:!0}),t&&"INLINE"===t.sourceType&&i.a.createElement(n.Suspense,{fallback:i.a.createElement(q.a,{id:"Apis.Details.Documents.EditContent.loading",defaultMessage:"Loading..."})},i.a.createElement(Bi,{docName:t.name,docId:t.documentId,showAtOnce:!0})))});const Vi=e=>{const{isAPIProduct:t}=Object(n.useContext)(de.c),a=t?"api-products":"apis";return i.a.createElement("div",null,i.a.createElement(_.Switch,null,i.a.createElement(_.Route,{exact:!0,path:"/"+a+"/:apiUUID/documents",component:ji}),"} />",i.a.createElement(_.Route,{exact:!0,path:"/"+a+"/:apiUUID/documents/:documentId/details",component:Wi}),"} />",i.a.createElement(_.Route,{exact:!0,path:"/"+a+"/:apiUUID/documents/:documentId/edit",component:Si}),"} />",i.a.createElement(_.Route,{exact:!0,path:"/"+a+"/:apiUUID/documents/:documentId/edit-content",component:Ui}),"} />",i.a.createElement(_.Route,{exact:!0,path:"/"+a+"/:apiUUID/documents/create",component:gi}),i.a.createElement(_.Route,{component:U.a})))};Vi.propTypes={api:s.a.shape({}).isRequired};var Hi=Vi;const Gi={API:"api",RESOURCE:"resource"};function Ki(e){const{updateAPI:t,operationRateLimits:a,onChange:r,value:s,isAPIProduct:l}=e,[c,p]=Object(n.useState)(s),[d,m]=Object(n.useState)(!1),u=null===c,g=u?Gi.RESOURCE:Gi.API,[h]=Object(de.d)();Object(n.useEffect)(()=>{r&&(""===s&&h.apiThrottlingPolicy?p(h.apiThrottlingPolicy):p(s))},[r,s]);let f=i.a.createElement(K.a,{variant:"body1",gutterBottom:!0},"You may change the rate limiting policies per operation",i.a.createElement(K.a,{variant:"caption",display:"block",gutterBottom:!0},"Expand an operation below to select a rate limiting policy for an operation"));return l&&(f=i.a.createElement(K.a,{variant:"body1",gutterBottom:!0},"Rate limiting polices of the source operation will be applied",i.a.createElement(K.a,{variant:"caption",display:"block",gutterBottom:!0},"Rate limiting policy of an individual operation will be govern by the policy specified in the source operation"))),i.a.createElement(ce.a,null,i.a.createElement(pe.a,{container:!0,direction:"row",spacing:3,justify:"flex-start",alignItems:"flex-start"},i.a.createElement(pe.a,{item:!0,md:12,xs:12},i.a.createElement(ge.a,{ml:1},i.a.createElement(K.a,{variant:"subtitle1",gutterBottom:!0},"Operations Configuration",i.a.createElement(ie.a,{fontSize:"small",title:"Configurations that affects on all the resources","aria-label":"common configurations",placement:"right-end",interactive:!0},i.a.createElement(ke.a,null)))),i.a.createElement(oi.a,{light:!0,variant:"middle"})),i.a.createElement(pe.a,{item:!0,md:1,xs:1}),i.a.createElement(pe.a,{item:!0,md:5,xs:11},i.a.createElement(ft.a,{component:"fieldset"},i.a.createElement(bt.a,{component:"legend"},"Rate limiting level"),i.a.createElement(ht.a,{"aria-label":"Apply rate limiting in",value:g,onChange:function(e){const t=e.target.value===Gi.RESOURCE?null:"";r?r(t):p(t)},row:!0},i.a.createElement(Et.a,{value:Gi.API,control:i.a.createElement(gt.a,{color:"primary",disabled:Object(o.b)(["apim:api_create"],h)}),label:"API Level",labelPlacement:"end"}),i.a.createElement(Et.a,{value:Gi.RESOURCE,control:i.a.createElement(gt.a,{color:"primary",disabled:Object(o.b)(["apim:api_create"],h)}),label:"Operation Level",labelPlacement:"end"})))),i.a.createElement(pe.a,{item:!0,md:6,xs:12},i.a.createElement(ge.a,{minHeight:70,borderLeft:1,pl:10},u?f:i.a.createElement(vt.a,{disabled:Object(o.b)(["apim:api_create"],h),id:"operation_throttling_policy",select:!0,label:"Rate limiting policies",value:c,onChange:e=>{let{target:{value:t}}=e;return r?r(t):p(t)},helperText:"Selected rate limiting policy will be applied to whole API",margin:"dense",variant:"outlined"},a.map(e=>i.a.createElement(At.a,{key:e.name,value:e.name},e.displayName))))),!r&&i.a.createElement(i.a.Fragment,null,i.a.createElement(pe.a,{item:!0,md:12},i.a.createElement(oi.a,null)),i.a.createElement(pe.a,{item:!0},i.a.createElement(ge.a,{ml:1},i.a.createElement(Ne.a,{onClick:function(){m(!0),t({apiThrottlingPolicy:c}).finally(()=>m(!1))},disabled:!1,variant:"outlined",size:"small",color:"primary"},"Save",d&&i.a.createElement(Ze.a,{size:24})),i.a.createElement(ge.a,{display:"inline",ml:1},i.a.createElement(Ne.a,{size:"small",onClick:function(){p(s)}},"Reset")))))))}Ki.defaultProps={onChange:null,isAPIProduct:!1},Ki.propTypes={updateAPI:s.a.func.isRequired,onChange:s.a.oneOf([null,s.a.func]),operationRateLimits:s.a.arrayOf(s.a.shape({})).isRequired,disabledAction:s.a.shape({}).isRequired,value:s.a.string.isRequired,isAPIProduct:s.a.bool};var Yi=i.a.memo(Ki),Ji=a(1608);function Qi(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Zi(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Xi(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Zi(a,!0).forEach(function(t){$i(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Zi(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function $i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class er extends i.a.Component{constructor(e){super(e),this.state={isSecurity:!1},this.handleScopeChange=this.handleScopeChange.bind(this),this.handlePolicyChange=this.handlePolicyChange.bind(this),this.handleChange=this.handleChange.bind(this)}handleScopeChange(e){const{operation:t}=this.props,a=Xi({},t,{scopes:Qi(t.scopes)}),n="none"===e.target.value?"":e.target.value;a.scopes=[n],this.props.handleUpdateList(a)}handlePolicyChange(e){const{operation:t}=this.props,a=Xi({},t);a.throttlingPolicy=e.target.value,this.props.handleUpdateList(a)}handleChange(e){const{operation:t}=this.props,a=Xi({},t),{checked:n}=e.target;a.authType=n?"Any":"None",this.setState({isSecurity:n}),this.props.handleUpdateList(a)}render(){const{operation:e,theme:t,classes:a,apiPolicies:n,scopes:r,isOperationRateLimiting:s}=this.props,o=[].concat(Qi(r),[{name:"none",description:"",bindings:null}]),{isSecurity:l}=this.state;let c=t.custom.operationChipColor?t.custom.operationChipColor[e.verb.toLowerCase()]:null,p="#000000";return c?p=t.palette.getContrastText(t.custom.operationChipColor[e.verb.toLowerCase()]):(console.log("Check the theme settings. The resourceChipColors is not populated properlly"),c="#cccccc"),i.a.createElement(Se.a,{style:{borderStyle:"hidden"}},i.a.createElement(De.a,null,i.a.createElement(K.a,{variant:"body1"},e.target)),i.a.createElement(De.a,null,i.a.createElement(ue.a,{label:e.verb,style:{backgroundColor:c,color:p,height:20,width:40,fontSize:9},className:a.chipActive})),i.a.createElement(De.a,null,i.a.createElement(Ji.a,{className:a.dropDown,value:s?e.throttlingPolicy:"",disabled:!s,onChange:this.handlePolicyChange,fieldName:"Throttling Policy"},n.map(e=>i.a.createElement(At.a,{key:e.name,value:e.name},e.displayName)))),i.a.createElement(De.a,null,i.a.createElement(Ji.a,{className:a.dropDown,value:0===e.scopes.length?["none"]:e.scopes,onChange:this.handleScopeChange,inputProps:{name:"scopes",id:"age-simple"}},o.map(e=>i.a.createElement(At.a,{key:e.name,value:e.name},e.name)))),i.a.createElement(De.a,null,i.a.createElement(ia.a,{checked:(()=>"None"!==e.authType)(),onChange:this.handleChange,value:l,color:"primary"})))}}er.propTypes={classes:s.a.shape({}).isRequired,operation:s.a.shape({target:s.a.string,verb:s.a.string,throttlingPolicy:s.a.string,auth:s.a.string}).isRequired,apiPolicies:s.a.shape({}).isRequired,isOperationRateLimiting:s.a.shape({}).isRequired,scopes:s.a.shape({}).isRequired,handleUpdateList:s.a.shape({}).isRequired,theme:s.a.shape({}).isRequired,intl:s.a.shape({formatMessage:s.a.func}).isRequired};var tr=Object(q.d)(Object(L.a)(e=>({root:{flexGrow:1,marginTop:10},container:{display:"flex",flexWrap:"wrap"},textField:{marginLeft:e.spacing(),marginRight:e.spacing(),width:400},mainTitle:{paddingLeft:20},scopes:{width:400},dropDown:{width:e.spacing(11.25)},divider:{marginTop:20,marginBottom:20},chip:{margin:e.spacing(),color:e.palette.text.secondary,minWidth:100},chipActive:{margin:e.spacing(),color:e.palette.text.secondary,background:e.palette.background.active,minWidth:100,borderRadius:e.shape.borderRadius},paper:{padding:20},link:{cursor:"pointer"},listItem:{paddingLeft:0,display:"flex",alignItems:"center"},formControl:{paddingRight:0,marginRight:0},resourceRoot:{background:e.palette.grey[100],paddingLeft:e.spacing(),paddingRight:e.spacing(),borderRadius:e.shape.borderRadius,marginBottom:e.spacing()},deleteButton:{marginLeft:"auto"},pathDisplay:{marginRight:e.spacing(2),marginLeft:e.spacing(2)},descriptionWrapper:{paddingTop:e.spacing(),paddingBottom:e.spacing()},scopeSelect:{width:"100%"},descriptionWrapperUp:{paddingBottom:"0 !important"},addParamRow:{display:"flex",flexDirection:"row",alignItems:"center"},propsForm:{display:"flex",alignItems:"center"},deleteLink:{cursor:"pointer"},row:{"& td":{borderBottom:"none",verticalAlign:"bottom",width:"33%",paddingLeft:0}}}),{withTheme:!0})(er));class ar extends i.a.Component{constructor(e){super(e);const{api:t}=e;this.state={notFound:!1,apiPolicies:[],operations:t.operations,apiThrottlingPolicy:t.apiThrottlingPolicy,filterKeyWord:"",isSaving:!1},this.newApi=new Q.a,this.handleUpdateList=this.handleUpdateList.bind(this),this.handleApiThrottlePolicy=this.handleApiThrottlePolicy.bind(this),this.updateOperations=this.updateOperations.bind(this)}componentDidMount(){Q.a.policies("api").then(e=>{this.setState({apiPolicies:e.obj.list})}).catch(e=>{const{status:t}=e.status;404===t?this.setState({notFound:!0}):401===t&&Object(ee.b)()})}setFilterByKeyWord(e){this.setState({filterKeyWord:e.target.value.toLowerCase()})}handleApiThrottlePolicy(e){this.setState({apiThrottlingPolicy:e})}handleUpdateList(e){const{operations:t}=this.state,a=t.map(t=>t.target===e.target&&t.verb===e.verb?e:t);this.setState({operations:a})}updateOperations(){const{operations:e,apiThrottlingPolicy:t}=this.state,{updateAPI:a}=this.props;this.setState({isSaving:!0}),a({operations:e,apiThrottlingPolicy:t}).finally(()=>this.setState({isSaving:!1}))}render(){const{api:e,resourceNotFoundMessage:t}=this.props,{operations:a,apiPolicies:n,apiThrottlingPolicy:r,isSaving:s,filterKeyWord:o,notFound:l}=this.state;if(l)return i.a.createElement(U.a,{message:t});if(!a&&0===n.length)return i.a.createElement(X.a,null);const{classes:c}=this.props;return i.a.createElement(i.a.Fragment,null,i.a.createElement(ge.a,{pb:3},i.a.createElement(K.a,{variant:"h5"},i.a.createElement(q.a,{id:"Apis.Details.Operations.Operations.title",defaultMessage:"Operations"}))),i.a.createElement(pe.a,{container:!0,spacing:2},i.a.createElement(pe.a,{item:!0,md:12},i.a.createElement(Yi,{operationRateLimits:n,api:e,value:r,onChange:this.handleApiThrottlePolicy})),i.a.createElement(pe.a,{item:!0,md:2},i.a.createElement(ge.a,{mt:4,pb:2},i.a.createElement("div",{className:c.searchWrapper},i.a.createElement(vt.a,{id:"outlined-full-width",label:"Operation",placeholder:"Filter Operations",onChange:t=>this.setFilterByKeyWord(t,e.operations),fullWidth:!0,variant:"outlined",InputLabelProps:{shrink:!0}})))),i.a.createElement(pe.a,{item:!0,md:12},i.a.createElement(Ae.a,null,i.a.createElement(Se.a,null,i.a.createElement(De.a,null,i.a.createElement(K.a,{variant:"subtitle2"},i.a.createElement(q.a,{id:"Apis.Details.Operations.operation.operationName",defaultMessage:"Operation"}))),i.a.createElement(De.a,null,i.a.createElement(K.a,{variant:"subtitle2"},i.a.createElement(q.a,{id:"Apis.Details.Operations.Operation.OperationType",defaultMessage:"Operation Type"}))),i.a.createElement(De.a,null,i.a.createElement(K.a,{variant:"subtitle2"},i.a.createElement(q.a,{id:"Apis.Details.Operations.Operation.throttling.policy",defaultMessage:"Rate Limiting"}))),i.a.createElement(De.a,null,i.a.createElement(K.a,{variant:"subtitle2"},i.a.createElement(q.a,{id:"Apis.Details.Operations.Operation.scopes",defaultMessage:"Scope"}))),i.a.createElement(De.a,null,i.a.createElement(K.a,{variant:"subtitle2"},i.a.createElement(q.a,{id:"Apis.Details.Operations.Operation.authType",defaultMessage:"Security Enabled"})))),a.filter(e=>e.target.toLowerCase().includes(o)).map(t=>i.a.createElement(tr,{operation:t,handleUpdateList:this.handleUpdateList,scopes:e.scopes,isOperationRateLimiting:!r,apiPolicies:n})))),i.a.createElement(pe.a,{item:!0},i.a.createElement(Ne.a,{variant:"contained",color:"primary",disabled:s,className:c.buttonMain,onClick:this.updateOperations},s&&i.a.createElement(Ze.a,{size:20}),i.a.createElement(q.a,{id:"Apis.Details.Operations.Operation.save",defaultMessage:"Save"})),i.a.createElement(W.b,{to:"/apis/"+e.id+"/overview"},i.a.createElement(Ne.a,null,i.a.createElement(q.a,{id:"Apis.Details.Operations.Operation.cancel",defaultMessage:"Cancel"}))))))}}ar.propTypes={classes:s.a.shape({}).isRequired,api:s.a.shape({operations:s.a.array,scopes:s.a.array,updateOperations:s.a.func,policies:s.a.func,id:s.a.string}).isRequired,resourceNotFoundMessage:s.a.shape({}).isRequired,theme:s.a.shape({}).isRequired,intl:s.a.shape({formatMessage:s.a.func}).isRequired,updateAPI:s.a.func.isRequired};var nr=Object(q.d)(Object(L.a)(e=>({root:{flexGrow:1,marginTop:10},container:{display:"flex",flexWrap:"wrap"},textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),width:400},mainTitle:{paddingLeft:0},scopes:{width:400},titleWrapper:{display:"flex",flexDirection:"row",alignItems:"center"},button:{marginLeft:e.spacing(2),color:e.palette.getContrastText(e.palette.primary.main)},buttonMain:{color:e.palette.getContrastText(e.palette.primary.main),marginRight:e.spacing(1)},addNewWrapper:{backgroundColor:e.palette.background.paper,color:e.palette.getContrastText(e.palette.background.paper),border:"solid 1px "+e.palette.grey[300],borderRadius:e.shape.borderRadius,marginTop:e.spacing(2)},contentWrapper:{maxWidth:e.custom.contentAreaWidth},addNewHeader:{padding:e.spacing(2),backgroundColor:e.palette.grey[300],fontSize:e.typography.h6.fontSize,color:e.typography.h6.color,fontWeight:e.typography.h6.fontWeight},addNewOther:{padding:e.spacing(2)},radioGroup:{display:"flex",flexDirection:"row",width:300},addResource:{width:600,marginTop:0},buttonIcon:{marginRight:10},expansionPanel:{marginBottom:e.spacing(1)},expansionPanelDetails:{flexDirection:"column"}}))(ar)),ir=a(2207),rr=a.n(ir),sr=a(609),or=a.n(sr),lr=a(1268),cr=a(2302),pr=a.n(cr);function dr(e){const{operation:t,operationsDispatcher:a,disableUpdate:n,target:r,verb:s}=e;return i.a.createElement(i.a.Fragment,null,i.a.createElement(pe.a,{item:!0,xs:12,md:12},i.a.createElement(K.a,{variant:"subtitle1"},"Summary"," ","&"," ","Description",i.a.createElement(oi.a,{variant:"middle"}))),i.a.createElement(pe.a,{item:!0,md:1}),i.a.createElement(pe.a,{item:!0,md:5},i.a.createElement(vt.a,{margin:"dense",fullWidth:!0,label:"Description",multiline:!0,disabled:n,rows:"4",value:t.description,variant:"outlined",onChange:e=>{let{target:{value:t}}=e;return a({action:"description",data:{target:r,verb:s,value:t}})}})),i.a.createElement(pe.a,{item:!0,md:5},i.a.createElement(vt.a,{id:"operation_summary",label:"Summary",margin:"dense",variant:"outlined",fullWidth:!0,disabled:n,multiline:!0,rows:"4",value:t.summary,onChange:e=>{let{target:{value:t}}=e;return a({action:"summary",data:{target:r,verb:s,value:t}})}})),i.a.createElement(pe.a,{item:!0,md:1}))}dr.propTypes={disableUpdate:s.a.bool,operation:s.a.shape({target:s.a.string.isRequired,verb:s.a.string.isRequired,spec:s.a.shape({}).isRequired}).isRequired,operationsDispatcher:s.a.func.isRequired,target:s.a.string.isRequired,verb:s.a.string.isRequired},dr.defaultProps={disableUpdate:!1};var mr=a(1494),ur=a.n(mr);function gr(e,t){if(null==e)return{};var a,n,i=function(e,t){if(null==e)return{};var a,n,i={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(i[a]=e[a]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}const hr={V3:["3.0.0","3.0.1","3.0.2"],V2:["2.0"]};function fr(e){return e.openapi||e.swagger}function Er(e,t){const a=fr(t);let n=[];return hr.V3.includes(a)?Array.isArray(e.security)&&e.security.find(e=>e.default)&&(n=e.security.find(e=>e.default).default):hr.V2.includes(a)&&Array.isArray(e.security)&&e.security.find(e=>e.default)&&(n=e.security.find(e=>e.default).default),n}function br(e){const t={};for(const a of e){const{target:e,verb:n}=a,i=gr(a,["target","verb"]);t[e]?t[e][n]=i:t[e]={[n]:i}}return t}function yr(e){let t=!1;return"object"==typeof e&&Object.keys(e).map(e=>(t="$ref"===e,e)),t}function vr(e){const{operation:t,operationsDispatcher:a,operationRateLimits:n,api:r,disableUpdate:s,spec:o,target:l,verb:c}=e,p=null===r.apiThrottlingPolicy,d=Object(q.e)();return i.a.createElement(i.a.Fragment,null,i.a.createElement(pe.a,{item:!0,xs:12,md:12},i.a.createElement(K.a,{gutterBottom:!0,variant:"subtitle1"},i.a.createElement(q.a,{id:"Apis.Details.Resources.components.operationComponents.OperationGovernance.title",defaultMessage:"Operation Governance"}),i.a.createElement(K.a,{style:{marginLeft:"10px"},gutterBottom:!0,variant:"caption"},i.a.createElement(q.a,{id:"Apis.Details.Resources.components.operationComponents.OperationGovernance.subTitle",defaultMessage:"(Security, Rate Limiting & Scopes)"})),i.a.createElement(oi.a,{variant:"middle"}))),i.a.createElement(pe.a,{item:!0,xs:1}),i.a.createElement(pe.a,{item:!0,xs:11},i.a.createElement(ft.a,{disabled:s,component:"fieldset"},i.a.createElement(Et.a,{control:i.a.createElement(ia.a,{checked:t["x-auth-type"]&&"none"!==t["x-auth-type"].toLowerCase(),onChange:e=>{let{target:{checked:t}}=e;return a({action:"authType",data:{target:l,verb:c,value:t}})},size:"small",color:"primary"}),label:"Security",labelPlacement:"start"})),i.a.createElement("sup",{style:{marginLeft:"10px"}},i.a.createElement(ie.a,{title:i.a.createElement(q.a,{id:"Apis.Details.Resources.components.operationComponents.OperationGovernance.Security.tooltip",defaultMessage:"This will enable/disable Application Level securities defined in the Runtime Configurations page."}),fontSize:"small","aria-label":"Operation security",placement:"right-end",interactive:!0},i.a.createElement(ke.a,null)))),i.a.createElement(pe.a,{item:!0,md:1}),i.a.createElement(pe.a,{item:!0,md:5},i.a.createElement(vt.a,{id:"operation_rate_limiting_policy",select:!0,fullWidth:!p,SelectProps:{autoWidth:!0,IconComponent:p?ur.a:"span"},disabled:s||!p,label:p?d.formatMessage({id:"Apis.Details.Resources.components.operationComponents.OperationGovernance.rate.limiting.policy",defaultMessage:"Rate limiting policy"}):i.a.createElement("div",null,i.a.createElement(q.a,{id:"Apis.Details.Resources.components.operationComponents.OperationGovernance.rate.limiting.governed.by",defaultMessage:"Rate limiting is governed by "}),i.a.createElement(ge.a,{fontWeight:"fontWeightBold",display:"inline",color:"primary.main"},i.a.createElement(q.a,{id:"Apis.Details.Resources.components.operationComponents.OperationGovernance.rate.limiting.API.level",defaultMessage:"API Level"}))),value:p&&t["x-throttling-tier"]?t["x-throttling-tier"]:"",onChange:e=>{let{target:{value:t}}=e;return a({action:"throttlingPolicy",data:{target:l,verb:c,value:t}})},helperText:p?d.formatMessage({id:"Apis.Details.Resources.components.operationComponents.OperationGovernance.rate.limiting.policy.select",defaultMessage:"Select a rate limit policy for this operation"}):i.a.createElement("span",null,i.a.createElement(q.a,{id:"Apis.Details.Resources.components.operationComponents.OperationGovernance.rate.limiting.helperText.section1",defaultMessage:"Use "}),i.a.createElement(ge.a,{fontWeight:"fontWeightBold",display:"inline",color:"primary.main"},i.a.createElement(q.a,{id:"Apis.Details.Resources.components.operationComponents.OperationGovernance.rate.limiting.helperText.section2",defaultMessage:"Operation Level"})),i.a.createElement(q.a,{id:"Apis.Details.Resources.components.operationComponents.OperationGovernance.rate.limiting.helperText.section3",defaultMessage:" rate limiting to "}),i.a.createElement("b",null,i.a.createElement(q.a,{id:"Apis.Details.Resources.components.operationComponents.OperationGovernance.rate.limiting.helperText.section4",defaultMessage:"enable"})),i.a.createElement(q.a,{id:"Apis.Details.Resources.components.operationComponents.OperationGovernance.rate.limiting.helperText.section5",defaultMessage:" rate limiting per operation"})),margin:"dense",variant:"outlined"},n.map(e=>i.a.createElement(At.a,{key:e.name,value:e.name},e.displayName)))),i.a.createElement(pe.a,{item:!0,md:6}),i.a.createElement(pe.a,{item:!0,md:1}),i.a.createElement(pe.a,{item:!0,md:5},t["x-auth-type"]&&"none"!==t["x-auth-type"].toLowerCase()?i.a.createElement(vt.a,{id:"operation_scope",select:!0,disabled:s,fullWidth:!0,label:0!==r.scopes.length?d.formatMessage({id:"Apis.Details.Resources.components.operationComponents.OperationGovernance.operation.scope.label.default",defaultMessage:"Operation scope"}):d.formatMessage({id:"Apis.Details.Resources.components.operationComponents.OperationGovernance.operation.scope.label.notAvailable",defaultMessage:"No scope available"}),value:Er(t,o)[0],onChange:e=>{let{target:{value:t}}=e;return a({action:"scopes",data:{target:l,verb:c,value:t?[t]:[]}})},helperText:i.a.createElement(q.a,{id:"Apis.Details.Resources.components.operationComponents.OperationGovernance.operation.scope.helperText",defaultMessage:"Select a scope to control permissions to this operation"}),margin:"dense",variant:"outlined"},i.a.createElement(At.a,{value:"",dense:!0},i.a.createElement(q.a,{id:"Apis.Details.Resources.components.operationComponents.OperationGovernance.operation.scope.select.none",defaultMessage:"None"})),0!==r.scopes.length?r.scopes.map(e=>i.a.createElement(At.a,{key:e.name,value:e.name,dense:!0},e.name)):i.a.createElement(W.b,{to:"/apis/".concat(r.id,"/scopes/create"),target:"_blank"},i.a.createElement(At.a,{key:"Create New Scope",value:"Create New Scope",dense:!0},i.a.createElement(q.a,{id:"Apis.Details.Resources.components.operationComponents.OperationGovernance.operation.scope.create.new.scope",defaultMessage:"Create New Scope"})))):null),i.a.createElement(pe.a,{item:!0,md:5,style:{marginTop:"14px"}},t["x-auth-type"]&&"none"!==t["x-auth-type"].toLowerCase()?!s&&i.a.createElement(W.b,{to:"/apis/".concat(r.id,"/scopes/create"),target:"_blank"},i.a.createElement(K.a,{style:{marginLeft:"10px"},color:"primary",display:"inline",variant:"caption"},i.a.createElement(q.a,{id:"Apis.Details.Resources.components.operationComponents.OperationGovernance.operation.scope.create.new.scope",defaultMessage:"Create New Scope"}),i.a.createElement(fe.a,{style:{marginLeft:"2px"},fontSize:"small"}))):null),i.a.createElement(pe.a,{item:!0,md:1}))}vr.propTypes={disableUpdate:s.a.bool,operation:s.a.shape({target:s.a.string.isRequired,verb:s.a.string.isRequired}).isRequired,spec:s.a.shape({}).isRequired,operationsDispatcher:s.a.func.isRequired,operationRateLimits:s.a.arrayOf(s.a.shape({})),api:s.a.shape({scopes:s.a.arrayOf(s.a.shape({}))}),target:s.a.string.isRequired,verb:s.a.string.isRequired},vr.defaultProps={operationRateLimits:[],api:{scopes:[]},disableUpdate:!1};var Cr=a(997),Ar=a.n(Cr),Dr=a(1062);function Sr(){return(Sr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function Or(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function wr(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Or(a,!0).forEach(function(t){Pr(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Or(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function Pr(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function xr(e,t){if(null==e)return{};var a,n,i=function(e,t){if(null==e)return{};var a,n,i={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(i[a]=e[a]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function Tr(e){const{InputProps:t,classes:a,ref:n}=e,r=xr(e,["InputProps","classes","ref"]);return i.a.createElement(vt.a,Sr({InputProps:wr({inputRef:n,classes:{root:a.inputRoot,input:a.inputInput}},t)},r))}function Ir(e){const{suggestion:t,index:a,itemProps:n,highlightedIndex:r,selectedItem:s}=e,o=r===a,l=(s||"").indexOf(t)>-1;return i.a.createElement(At.a,Sr({},n,{key:t,selected:o,component:"div",style:{fontWeight:l?500:400}}),t)}Tr.propTypes={classes:s.a.object.isRequired,InputProps:s.a.object},Ir.propTypes={highlightedIndex:s.a.oneOfType([s.a.oneOf([null]),s.a.number]).isRequired,index:s.a.number.isRequired,itemProps:s.a.object.isRequired,selectedItem:s.a.string.isRequired,suggestion:s.a.shape("").isRequired};const Mr=Object(Ue.a)(e=>({root:{flexGrow:1},container:{flexGrow:1,position:"relative"},paper:{position:"absolute",zIndex:1e3,marginTop:e.spacing(-2),left:0,right:0},chip:{margin:e.spacing(.5,.25)},inputRoot:{flexWrap:"wrap"},inputInput:{width:"auto",flexGrow:1}}));function Rr(e){const t=Mr(),{operation:a,operationsDispatcher:r,target:s,verb:o,arns:l}=e,[c,p]=Object(n.useState)(5e4);Object(n.useEffect)(()=>{a["x-amzn-resource-timeout"]&&p(a["x-amzn-resource-timeout"])},[]);return i.a.createElement(i.a.Fragment,null,i.a.createElement(pe.a,{item:!0,md:12,xs:12},i.a.createElement(K.a,{variant:"subtitle1"},i.a.createElement(q.a,{id:"Apis.Details.Resources.components.operationComponents.AWSLambdaSettings.Title",defaultMessage:"AWS Lambda Settings"}),i.a.createElement(oi.a,{variant:"middle"}))),i.a.createElement(pe.a,{item:!0,md:1,xs:1}),i.a.createElement(pe.a,{item:!0,md:7,xs:7},i.a.createElement(Dr.a,{id:"downshift-options",onSelect:e=>{null!==e&&r({action:"amznResourceName",data:{target:s,verb:o,value:e}})}},e=>{let{clearSelection:n,getInputProps:c,getItemProps:p,getLabelProps:d,getMenuProps:m,highlightedIndex:u,inputValue:g,isOpen:h,openMenu:f,selectedItem:E}=e;const b=c({onChange:e=>{r({action:"amznResourceName",data:{target:s,verb:o,value:e.target.value}}),""===e.target.value&&n()},onBlur:()=>{n()},value:a["x-amzn-resource-name"],onFocus:f,placeholder:"Select or type an ARN"}),{onBlur:y,onChange:v,onFocus:C}=b,A=xr(b,["onBlur","onChange","onFocus"]);return i.a.createElement("div",{className:t.container},Tr({variant:"outlined",required:!0,fullWidth:!0,classes:t,InputLabelProps:d({shrink:!0}),label:"Amazon Resource Name (ARN)",helperText:"Select or type an ARN",InputProps:{onBlur:y,onChange:v,onFocus:C,endAdornment:i.a.createElement(It.a,{position:"end"},i.a.createElement(Ma.a,{className:t.helpIcon},"keyboard_arrow_down"))},inputProps:A}),i.a.createElement("div",m(),h?i.a.createElement(ce.a,{className:t.paper,square:!0},function(e){let{showEmpty:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0;const n=Ar()(e.trim()).toLowerCase(),i=n.length;let r=0;return 0!==i||t?a.filter(e=>{const t=r<5&&e.slice(0,i).toLowerCase()===n;return t&&(r+=1),t}):[]}(g,{showEmpty:!0},l).map((e,t)=>Ir({suggestion:e,index:t,itemProps:p({item:e}),highlightedIndex:u,selectedItem:E}))):null))})),i.a.createElement(pe.a,{item:!0,md:1,xs:1}),i.a.createElement(pe.a,{item:!0,md:1,xs:1},i.a.createElement(vt.a,{id:"timeout-min",label:"min",variant:"outlined",helperText:"Set Timeout",type:"number",inputProps:{min:0,max:15,step:1},value:Math.floor(c/1e3/60),onChange:e=>{(e=>{if(""!==e.target.value){const t=1e3*(60*parseInt(e.target.value,10)+c/1e3%60);let a=0;p(a=t>9e5?9e5:t<1e3?1e3:t),r({action:"amznResourceTimeout",data:{target:s,verb:o,value:a}})}})(e)}})),i.a.createElement(pe.a,{item:!0,md:1,xs:1},i.a.createElement(vt.a,{id:"timeout-sec",label:"sec",variant:"outlined",type:"number",inputProps:{min:0,max:59,step:1},value:c/1e3%60,onChange:e=>{(e=>{if(""!==e.target.value){const t=1e3*(60*Math.floor(c/1e3/60)+parseInt(e.target.value,10));let a=0;p(a=t>9e5?9e5:t<1e3?1e3:t),r({action:"amznResourceTimeout",data:{target:s,verb:o,value:a}})}})(e)}})),i.a.createElement(pe.a,{item:!0,md:1,xs:1}))}Rr.propTypes={operation:s.a.isRequired,operationsDispatcher:s.a.func.isRequired,target:s.a.string.isRequired,verb:s.a.string.isRequired,arns:s.a.shape([]).isRequired};var Nr=a(1201),jr=a(965),kr=a.n(jr);const Lr={"2.0":{body:["integer","number","string","boolean","object"],formData:["integer","number","string","boolean","file"],query:["integer","number","string","boolean"],path:["integer","number","string","boolean"],header:["integer","number","string","boolean"]},"3.x":{body:["integer","number","string","boolean","object"],query:["integer","number","string","boolean"],path:["integer","number","string","boolean"],header:["integer","number","string","boolean"],cookie:["integer","number","string","boolean"]}};function qr(e,t,a){return e?t:a}function _r(e,t){return t?Lr["2.0"===e?"2.0":"3.x"][t]:[]}function Wr(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Fr(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Wr(a,!0).forEach(function(t){zr(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Wr(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function zr(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Br=Object(Ue.a)(()=>({formControl:{minWidth:120},parameterContainer:{alignItems:"center",justifyContent:"space-between"},checkBox:{color:"#7c7c7c"}}));function Ur(e){const{operation:t,operationsDispatcher:a,target:r,verb:s,specVersion:o,intl:l}=e,c=Object(n.useRef)(null),[p,d]=Object(n.useState)(0),m=function(e){return"2.0"===e?{in:"",name:"",type:"",required:""}:{in:"",name:"",schema:{type:""},required:""}}(o);const[u,g]=Object(n.useReducer)(function(e,t){const{type:a,value:n}=t;switch(a){case"in":case"name":case"required":return Fr({},e,{[a]:n});case"type":return Fr({},e,"2.0"===o?{[a]:n}:{schema:{[a]:n}});case"clear":return m;default:return e}},m);i.a.useEffect(()=>{d(c.current.offsetWidth)},[]);let h=!1;const f=t.parameters&&t.parameters.map(e=>e.in===u.in&&e.name===u.name);h=!(!f||!f.includes(!0));const E=Br();function b(){g({type:"clear"})}function y(){"body"===u.in?a("2.0"===o?{action:"parameter",data:{target:r,verb:s,value:{name:u.name,description:"",required:u.required,in:u.in,schema:{type:u.type}}}}:{action:"requestBody",data:{target:r,verb:s,value:{description:"",required:u.required,content:{[u.name]:{schema:{type:"object"}}}}}}):a({action:"parameter",data:{target:r,verb:s,value:u}}),b()}return i.a.createElement(pe.a,{container:!0,direction:"row",spacing:1,className:E.parameterContainer},i.a.createElement(pe.a,{item:!0,xs:2,md:2},i.a.createElement(ft.a,{margin:"dense",variant:"outlined",className:E.formControl},i.a.createElement(Nr.a,{ref:c,htmlFor:"param-in",error:h},"Parameter Type"),i.a.createElement(Ji.a,{value:u.in,onChange:e=>{let{target:{name:t,value:a}}=e;return g({type:t,value:a})},labelWidth:p,inputProps:{name:"in",id:"param-in"},MenuProps:{getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"left"}},error:h},function(e){return"2.0"===e?["query","header","body","formData"]:["query","header","cookie","body"]}(o).map(e=>"body"!==e&&"formData"!==e||["post","put","patch"].includes(s)?i.a.createElement(At.a,{value:e,dense:!0},Le(e)):null)),h?i.a.createElement(Aa.a,{id:"my-helper-text",error:!0},i.a.createElement(q.a,{id:"Apis.Details.Resources.components.operationComponents.parameter.name.exists",defaultMessage:"Parameter type already exists"})):i.a.createElement(Aa.a,{id:"my-helper-text"},i.a.createElement(q.a,{id:"Apis.Details.Resources.components.operationComponents.select.parameter.type",defaultMessage:"Select the parameter type"})))),i.a.createElement(pe.a,{item:!0,xs:2,md:2},i.a.createElement(vt.a,{id:"parameter-name",label:"body"===u.in?qr("2.0"===o,i.a.createElement(q.a,{id:"Apis.Details.Resources.components.operationComponents.parameter.name",defaultMessage:"Parameter Name"}),i.a.createElement(q.a,{id:"Apis.Details.Resources.components.operationComponents.content.type",defaultMessage:"Content Type"})):i.a.createElement(q.a,{id:"Apis.Details.Resources.components.operationComponents.parameter.name",defaultMessage:"Parameter Name"}),name:"name",value:u.name,onChange:e=>{let{target:{name:t,value:a}}=e;return g({type:t,value:a})},helperText:(v=u.in,h?l.formatMessage({id:"Apis.Details.Resources.components.operationComponents.AddParameter.parameter.name.already.exists",defaultMessage:"Parameter name already exists"}):"body"===v&&"2.0"!==o?l.formatMessage({id:"Apis.Details.Resources.components.operationComponents.AddParameter.enter.content.type",defaultMessage:"Enter Content Type"}):l.formatMessage({id:"Apis.Details.Resources.components.operationComponents.AddParameter.enter.parameter.name",defaultMessage:"Enter Parameter Name"})),margin:"dense",variant:"outlined",onKeyPress:e=>{"Enter"===e.key&&(e.preventDefault(),y())},error:h})),i.a.createElement(pe.a,{item:!0,xs:2,md:2},i.a.createElement(ft.a,{margin:"dense",variant:"outlined",className:E.formControl},i.a.createElement(Nr.a,{ref:c,htmlFor:"data-type",error:h},i.a.createElement(q.a,{id:"Apis.Details.Resources.components.operationComponents.data.type",defaultMessage:"Data Type"})),i.a.createElement(Ji.a,{value:void 0!==u.schema?u.schema.type:u.type,onChange:e=>{let{target:{name:t,value:a}}=e;return g({type:t,value:a})},labelWidth:p,inputProps:{name:"type",id:"data-type"},MenuProps:{getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"left"}},error:h},_r(o,u.in).map(e=>i.a.createElement(At.a,{value:e,dense:!0},Le(e)))),i.a.createElement(Aa.a,{id:"my-helper-text"},"Select the data type"))),i.a.createElement(pe.a,{item:!0,xs:2,md:2},i.a.createElement(ft.a,{component:"fieldset",className:E.formControl},i.a.createElement(Et.a,{className:E.checkBox,control:i.a.createElement(zt.a,{checked:u.required,onChange:e=>{let{target:{name:t,value:a}}=e;return g({type:t,value:!a})},value:u.required,inputProps:{name:"required"}}),label:i.a.createElement(q.a,{id:"Apis.Details.Resources.components.operationComponents.required",defaultMessage:"Required"})}),i.a.createElement(Aa.a,null,i.a.createElement(q.a,{id:"Apis.Details.Resources.components.operationComponents.required.helper.text",defaultMessage:"Check whether the parameter is required."})))),i.a.createElement(pe.a,{item:!0,xs:2,md:2},i.a.createElement(ie.a,{title:i.a.createElement(q.a,{id:"Apis.Details.Resources.components.operationComponents.AddParameter.add.tooltip",defaultMessage:"Add new parameter"}),"aria-label":"AddParameter",placement:"bottom",interactive:!0},i.a.createElement("span",null,i.a.createElement(Ne.a,{style:{marginLeft:"20px",marginBottom:"15px",marginRight:"20px"},disabled:"2.0"===o?!u.name||!u.type||!u.in||h:!u.name||!u.schema.type||!u.in||h,size:"small",variant:"outlined","aria-label":"add",color:"primary",onClick:y},i.a.createElement(q.a,{id:"Apis.Details.Resources.components.operationComponents.AddParameter.add",defaultMessage:"Add"})))),i.a.createElement("sup",null,i.a.createElement(ie.a,{title:i.a.createElement(q.a,{id:"Apis.Details.Resources.components.AddParameter.clear.inputs.tooltip",defaultMessage:"Clear inputs"}),"aria-label":"clear-inputs",placement:"bottom",interactive:!0},i.a.createElement("span",null,i.a.createElement(Ta.a,{onClick:b,size:"small"},i.a.createElement(kr.a,null)))))));var v}Ur.propTypes={operation:s.a.shape({}).isRequired,operationsDispatcher:s.a.func.isRequired,target:s.a.string.isRequired,verb:s.a.string.isRequired,specVersion:s.a.string.isRequired,intl:s.a.shape({}).isRequired};var Vr=i.a.memo(Object(q.d)(Ur)),Hr=a(682),Gr=a.n(Hr);function Kr(e){const{contentType:t,content:a,operation:n,disableUpdate:r,hideParameterEdit:s,operationsDispatcher:o,target:l,verb:c}=e;return i.a.createElement(Se.a,{key:t},i.a.createElement(De.a,{align:"left"},i.a.createElement(q.a,{id:"Apis.Details.Resources.components.operationComponents.ListParameter.body",defaultMessage:"Body"})),i.a.createElement(De.a,null,t),i.a.createElement(De.a,{align:"left"},a.schema.type),i.a.createElement(De.a,{align:"left"},n.requestBody.required?i.a.createElement(q.a,{id:"Apis.Details.Resources.components.operationComponents.ListParameter.yes",defaultMessage:"Yes"}):i.a.createElement(q.a,{id:"Apis.Details.Resources.components.operationComponents.ListParameter.no",defaultMessage:"No"})),!r&&i.a.createElement(De.a,{align:"left"},s&&i.a.createElement(ie.a,{title:"Edit"},i.a.createElement(Ta.a,{onClick:()=>{},fontSize:"small"},i.a.createElement(Gr.a,{fontSize:"small"}))),i.a.createElement(ie.a,{title:i.a.createElement(q.a,{id:"Apis.Details.Resources.components.operationComponents.ListParameter.delete",defaultMessage:"Delete"})},i.a.createElement(Ta.a,{disabled:r,onClick:()=>{o({action:"requestBody",data:{target:l,verb:c,value:{description:"",required:!1,content:{}}}})},fontSize:"small"},i.a.createElement(or.a,{fontSize:"small"})))))}Kr.propTypes={contentType:s.a.string.isRequired,content:s.a.shape({}).isRequired,operation:s.a.shape({}).isRequired,disableUpdate:s.a.bool.isRequired,hideParameterEdit:s.a.bool.isRequired,operationsDispatcher:s.a.func.isRequired,target:s.a.string.isRequired,verb:s.a.string.isRequired};var Yr=Kr;function Jr(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Qr(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Jr(a,!0).forEach(function(t){Zr(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Jr(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function Zr(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Xr=Object(Ue.a)(e=>({form:{display:"flex",flexDirection:"column",margin:"auto",width:"fit-content"},formControl:{marginTop:e.spacing(2),minWidth:120},formControlLabel:{marginTop:e.spacing(1)}}));function $r(e){const{operationsDispatcher:t,target:a,verb:r,editingParameter:s,setEditingParameter:o,version:l}=e;const[c,p]=Object(n.useReducer)(function(e,t){const{action:a,value:n}=t,i=e.schema?Qr({},e,{schema:Qr({},e.schema)}):Qr({},e);switch(a){case"description":case"required":i[a]=n;break;case"type":case"format":i.schema?i.schema[a]=n:i[a]=n}return i},s),d=Xr(),m=()=>{o(null)};const u=null!==c;return u?i.a.createElement(ha.a,{fullWidth:!0,maxWidth:"md",open:u,onClose:m,"aria-labelledby":"edit-parameter"},i.a.createElement(ya.a,{disableTypography:!0,id:"edit-parameter"},i.a.createElement(K.a,{variant:"h6"},i.a.createElement(q.a,{id:"Apis.Details.Resources.components.operationComponents.EditParameter.title",defaultMessage:"Edit"})," ",i.a.createElement(K.a,{display:"inline",variant:"subtitle1"},Le(c.in)," ",":",c.name))),i.a.createElement(Ea.a,null,i.a.createElement(pe.a,{container:!0,direction:"row",spacing:2,justify:"flex-start",alignItems:"center"},i.a.createElement(pe.a,{item:!0,md:6},i.a.createElement(vt.a,{value:Le(c.in),disabled:!0,fullWidth:!0,label:i.a.createElement(q.a,{id:"Apis.Details.Resources.components.operationComponents.EditParameter.type",defaultMessage:"Parameter Type"}),margin:"dense",variant:"outlined"})),i.a.createElement(pe.a,{item:!0,md:6},i.a.createElement(vt.a,{value:c.name,disabled:!0,fullWidth:!0,label:i.a.createElement(q.a,{id:"Apis.Details.Resources.components.operationComponents.EditParameter.name",defaultMessage:"Name"}),margin:"dense",variant:"outlined"})),i.a.createElement(pe.a,{item:!0,md:12},i.a.createElement(vt.a,{value:c.description,fullWidth:!0,label:i.a.createElement(q.a,{id:"Apis.Details.Resources.components.operationComponents.EditParameter.description",defaultMessage:"Description"}),multiline:!0,rows:"4",name:"description",margin:"normal",variant:"outlined",onChange:e=>{let{target:{name:t,value:a}}=e;p({action:t,value:a})}})),i.a.createElement(pe.a,{item:!0,md:6},i.a.createElement(ft.a,{required:!0,fullWidth:!0,margin:"dense",variant:"outlined",className:d.formControl},i.a.createElement(Nr.a,{required:!0,id:"edit-parameter-type"},i.a.createElement(q.a,{id:"Apis.Details.Resources.components.operationComponents.EditParameter.data.type",defaultMessage:"Data Type"})),i.a.createElement(Ji.a,{value:c.schema?c.schema.type:c.type,onChange:e=>{let{target:{name:t,value:a}}=e;return p({action:t,value:a})},inputProps:{name:"type",id:"edit-parameter-type"},MenuProps:{getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"left"}}},_r(l,c.in).map(e=>i.a.createElement(At.a,{value:e,dense:!0},Le(e)))),i.a.createElement(Aa.a,null,i.a.createElement(q.a,{id:"Apis.Details.Resources.components.operationComponents.EditParameter.select.schema.data.type",defaultMessage:"Select the Schema Type"})))),i.a.createElement(pe.a,{item:!0,md:6},i.a.createElement(ft.a,{fullWidth:!0,margin:"dense",variant:"outlined",className:d.formControl,disabled:c.schema?qr("boolean"===c.schema.type||"object"===c.schema.type,!0,!1):qr("boolean"===c.type||"object"===c.type,!0,!1)},i.a.createElement(Nr.a,{id:"edit-parameter-format"},i.a.createElement(q.a,{id:"Apis.Details.Resources.components.operationComponents.EditParameter.data.format",defaultMessage:"Data Format"})),i.a.createElement(Ji.a,{value:c.schema?c.schema.format:c.format,onChange:e=>{let{target:{name:t,value:a}}=e;return p({action:t,value:a})},inputProps:{name:"format",id:"edit-parameter-format"},MenuProps:{getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"left"}}},function(e){switch(e){case"integer":return["int64","int32"];case"number":return["float","double"];case"string":return["date","date-time","byte","binary","password"];default:return[]}}(c.schema?c.schema.type:c.type).map(e=>i.a.createElement(At.a,{value:e,dense:!0},Le(e)))),i.a.createElement(Aa.a,null,i.a.createElement(q.a,{id:"Apis.Details.Resources.components.operationComponents.EditParameter.select.format.of.data.type",defaultMessage:"Select the Format of Data Type"})))),i.a.createElement(pe.a,{item:!0},i.a.createElement(ft.a,{component:"fieldset"},i.a.createElement(Et.a,{control:i.a.createElement(zt.a,{checked:c.required,onChange:e=>{let{target:{name:t,value:a}}=e;return p({action:t,value:!a})},value:c.required,inputProps:{name:"required"}}),label:i.a.createElement(q.a,{id:"Apis.Details.Resources.components.operationComponents.EditParameter.required",defaultMessage:"Required"})}))),i.a.createElement(pe.a,{container:!0,direction:"row",justify:"flex-end",alignItems:"center"},i.a.createElement(ba.a,null,i.a.createElement(q.a,{id:"Apis.Details.Resources.components.operationComponents.EditParameter.use.done.button.to.persist.changes",defaultMessage:"Use DONE button in the page to persist changes"}))))),i.a.createElement(fa.a,null,i.a.createElement(Ne.a,{size:"small",onClick:m,color:"primary"},i.a.createElement(q.a,{id:"Apis.Details.Resources.components.operationComponents.EditParameter.close",defaultMessage:"Close"})),i.a.createElement(Ne.a,{size:"small",onClick:function(){t({action:"parameter",data:{target:a,verb:r,value:c}})},variant:"contained",color:"primary"},i.a.createElement(q.a,{id:"Apis.Details.Resources.components.operationComponents.EditParameter.done",defaultMessage:"Done"})))):null}$r.propTypes={operationsDispatcher:s.a.func.isRequired,target:s.a.string.isRequired,verb:s.a.string.isRequired,editingParameter:s.a.shape({}).isRequired,setEditingParameter:s.a.func.isRequired,version:s.a.string.isRequired};const es=Object(Ue.a)({root:{width:"100%",overflowX:"auto"},table:{minWidth:650}});function ts(e){const{operation:t,operationsDispatcher:a,target:r,verb:s,disableUpdate:o,hideParameterEdit:l,specVersion:c,resolvedSpec:p}=e,d=es(),[m,u]=Object(n.useState)(null);return i.a.createElement(i.a.Fragment,null,null!==m&&i.a.createElement($r,{operationsDispatcher:a,target:r,verb:s,editingParameter:m,setEditingParameter:u,version:c}),i.a.createElement(Ae.a,{className:d.table,"aria-label":"parameters list"},i.a.createElement(Qn.a,null,i.a.createElement(Se.a,null,i.a.createElement(De.a,{align:"left"},i.a.createElement(q.a,{id:"Apis.Details.Resources.components.operationComponents.ListParameter.parameter.type",defaultMessage:"Parameter Type"})),i.a.createElement(De.a,null,i.a.createElement(q.a,{id:"Apis.Details.Resources.components.operationComponents.ListParameter.parameter.name",defaultMessage:"Name"})),i.a.createElement(De.a,{align:"left"},i.a.createElement(q.a,{id:"Apis.Details.Resources.components.operationComponents.ListParameter.data.type",defaultMessage:"Data Type"})),i.a.createElement(De.a,{align:"left"},i.a.createElement(q.a,{id:"Apis.Details.Resources.components.operationComponents.ListParameter.required",defaultMessage:"Required"})),!o&&i.a.createElement(De.a,{align:"left"},i.a.createElement(q.a,{id:"Apis.Details.Resources.components.operationComponents.ListParameter.actions",defaultMessage:"Actions"})))),i.a.createElement(Jn.a,null,t.parameters&&t.parameters.map((e,t)=>{const n=yr(e),l=n?p.paths[r][s].parameters[t]:e;return i.a.createElement(Se.a,{key:l.name},i.a.createElement(De.a,{align:"left"},Le(l.in)),i.a.createElement(De.a,{align:"left"},l.name),i.a.createElement(De.a,{align:"left"},Le(l.schema?l.schema.type:l.type)),i.a.createElement(De.a,{align:"left"},l.required?i.a.createElement(q.a,{id:"Apis.Details.Resources.components.operationComponents.ListParameter.yes",defaultMessage:"Yes"}):i.a.createElement(q.a,{id:"Apis.Details.Resources.components.operationComponents.ListParameter.no",defaultMessage:"No"})),!o&&i.a.createElement(De.a,{align:"left"},!n&&i.a.createElement(ie.a,{title:i.a.createElement(q.a,{id:"Apis.Details.Resources.components.operationComponents.ListParameter.edit",defaultMessage:"Edit"})},i.a.createElement(Ta.a,{onClick:()=>u(e),fontSize:"small"},i.a.createElement(Gr.a,{fontSize:"small"}))),i.a.createElement(ie.a,{title:i.a.createElement(q.a,{id:"Apis.Details.Resources.components.operationComponents.ListParameter.delete",defaultMessage:"Delete"})},i.a.createElement(Ta.a,{disabled:o,onClick:()=>a({action:"deleteParameter",data:{target:r,verb:s,value:l}}),fontSize:"small"},i.a.createElement(or.a,{fontSize:"small"})))))}),t.requestBody&&(yr(t.requestBody)?Object.entries(p.paths[r][s].requestBody.content).map(e=>{let[n,c]=e;return i.a.createElement(Yr,{contentType:n,content:c,operation:t,disableUpdate:o,hideParameterEdit:l,operationsDispatcher:a,target:r,verb:s})}):Object.entries(t.requestBody.content).map(e=>{let[n,c]=e;return i.a.createElement(Yr,{contentType:n,content:c,operation:t,disableUpdate:o,hideParameterEdit:l,operationsDispatcher:a,target:r,verb:s})})))))}function as(e){const{operation:t,spec:a,target:n,verb:r,operationsDispatcher:s,disableUpdate:o,resolvedSpec:l}=e,c=fr(a),p=t.parameters&&0!==t.parameters.length||t.requestBody;return i.a.createElement(i.a.Fragment,null,i.a.createElement(pe.a,{item:!0,xs:12,md:12},i.a.createElement(K.a,{variant:"subtitle1"},"Parameters",i.a.createElement(oi.a,{variant:"middle"}))),i.a.createElement(pe.a,{item:!0,xs:1}),i.a.createElement(pe.a,{item:!0,xs:11},!o&&i.a.createElement(Vr,{target:n,verb:r,operationsDispatcher:s,operation:t,specVersion:c})),i.a.createElement(pe.a,{item:!0,md:1}),i.a.createElement(pe.a,{item:!0,md:11},p&&i.a.createElement(ts,{disableUpdate:o,target:n,verb:r,operationsDispatcher:s,operation:t,spec:a,specVersion:c,resolvedSpec:l})))}ts.defaultProps={hideParameterEdit:!1,disableUpdate:!1},ts.propTypes={operation:s.a.shape({}).isRequired,spec:s.a.shape({}).isRequired,hideParameterEdit:s.a.bool,operationsDispatcher:s.a.func.isRequired,target:s.a.string.isRequired,verb:s.a.string.isRequired,disableUpdate:s.a.bool,specVersion:s.a.string.isRequired,resolvedSpec:s.a.shape({}).isRequired},as.propTypes={target:s.a.string.isRequired,verb:s.a.string.isRequired,spec:s.a.shape({}).isRequired,operationsDispatcher:s.a.func.isRequired,operation:s.a.shape({}).isRequired,disableUpdate:s.a.bool,resolvedSpec:s.a.shape({}).isRequired},as.defaultProps={disableUpdate:!1};var ns=a(1183),is=a(1597),rs=a(1276),ss=a(1220),os=a(1221),ls=a(1188);function cs(e){const{open:t,onClose:a,closeEditor:n}=e;return i.a.createElement(ha.a,{open:t,onClose:a,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},i.a.createElement(ya.a,{id:"alert-dialog-title"},"Discard changes and Close"),i.a.createElement(Ea.a,null,i.a.createElement(ba.a,{id:"alert-dialog-description"},"All the unsaved changes will be lost")),i.a.createElement(fa.a,null,i.a.createElement(Ne.a,{onClick:a,color:"primary"},"Cancel"),i.a.createElement(Ne.a,{onClick:()=>{a(),n()},color:"primary",autoFocus:!0},"Close")))}function ps(){return(ps=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}cs.propTypes={open:s.a.bool.isRequired,onClose:s.a.func.isRequired,closeEditor:s.a.func.isRequired};const ds=Object(n.lazy)(()=>Promise.resolve().then(a.t.bind(null,2319,7))),ms=Object(Ue.a)(e=>({appBar:{top:"auto",bottom:0},title:{marginLeft:e.spacing(2),flex:1}})),us=i.a.forwardRef((e,t)=>i.a.createElement(ls.a,ps({in:!0,ref:t},e)));function gs(e){const t=ms(),[a]=Object(de.d)(),{open:r,onClose:s,prefersDarkMode:o,originalResourcePolicy:l,selectedPolicy:c,setPolicyContent:p,resourcePoliciesDispatcher:d,direction:m}=e,[u,g]=Object(n.useState)(null),[h,f]=Object(n.useState)(!1),[E,b]=Object(n.useState)(!1),y={selectOnLineNumbers:!0,readOnly:E,smoothScrolling:!0,wordWrap:"on"},v={language:"xml",height:"calc(100vh)",theme:o?"vs-dark":"vs",value:c.content,options:y,onChange:p};return i.a.createElement(ha.a,{fullScreen:!0,open:r,onClose:s,TransitionComponent:us},i.a.createElement(ss.a,{position:"fixed",color:"default",className:t.appBar},i.a.createElement(os.a,{variant:"dense"},i.a.createElement(pe.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"flex-start"},i.a.createElement(pe.a,{item:!0},i.a.createElement(Ne.a,{disabled:E,variant:"outlined",color:"primary",className:t.title,onClick:function(){b(!0),a.updateResourcePolicy(c).then(e=>{$.a.success("Resource policy updated successfully"),d({action:"update",data:{value:e.body,direction:m}}),s()}).catch(e=>{if(e.response)$.a.error(e.response.body.description),g(e.response.body);else{const t=e.message||"Something went wrong while updating resource policy!";$.a.error(t),g(t)}console.error(e)}).finally(()=>b(!1))}},"save & close",E&&i.a.createElement(Ze.a,{size:18}))),i.a.createElement(pe.a,{item:!0},i.a.createElement(Ne.a,{color:"inherit",className:t.title,onClick:function(){c.content!==l.content?f(!0):s()}},"close"))))),i.a.createElement(pe.a,{container:!0,direction:"row",justify:"center",alignItems:"center"},u&&i.a.createElement(pe.a,{item:!0,xs:12},i.a.createElement(Rn.a,{onClose:()=>g(null),disableActions:!0,dense:!0,paperProps:{elevation:1},type:"error",message:u}))),i.a.createElement(pe.a,{item:!0,xs:12},i.a.createElement(n.Suspense,{fallback:i.a.createElement(Ze.a,{disableShrink:!0})},i.a.createElement(ds,v))),i.a.createElement(cs,{open:h,onClose:()=>{p(l.content),f(!1)},closeEditor:s}))}function hs(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function fs(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?hs(a,!0).forEach(function(t){Es(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):hs(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function Es(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}gs.defaultProps={open:!1,onClose:()=>{},prefersDarkMode:!1},gs.propTypes={open:s.a.bool,onClose:s.a.func,prefersDarkMode:s.a.bool,originalResourcePolicy:s.a.shape({}).isRequired,selectedPolicy:s.a.shape({}).isRequired,setPolicyContent:s.a.func.isRequired,resourcePoliciesDispatcher:s.a.func.isRequired,direction:s.a.oneOf(["in","out"]).isRequired};const bs=Object(n.lazy)(()=>Promise.resolve().then(a.t.bind(null,2319,7)));function ys(e){const{resourcePolicy:t,resourcePoliciesDispatcher:a}=e,[r,s]=Object(n.useState)(t.in),[o,l]=Object(n.useState)(t.out);Object(n.useEffect)(()=>{s(t.in),l(t.out)},[t]);const c=Object(ns.a)("(prefers-color-scheme: dark)"),[p,d]=Object(n.useState)(!1),[m,u]=Object(n.useState)("in"),g="in"===m?r:o,h={language:"xml",height:"calc(50vh)",theme:c?"vs-dark":"vs",value:g.content,options:{selectOnLineNumbers:!0,readOnly:!0,smoothScrolling:!0,wordWrap:"on"}};return i.a.createElement(i.a.Fragment,null,i.a.createElement(pe.a,{item:!0,xs:12,md:12},i.a.createElement(K.a,{variant:"subtitle1"},"Mediation",i.a.createElement(oi.a,{variant:"middle"}))),i.a.createElement(pe.a,{item:!0,xs:12},i.a.createElement(is.a,{value:m,indicatorColor:"primary",textColor:"primary",onChange:(e,t)=>u(t),"aria-label":"Resource mediation in/out tabs"},i.a.createElement(rs.a,{value:"in",label:"In"}),i.a.createElement(rs.a,{value:"out",label:"Out"})),i.a.createElement(ge.a,{p:1},i.a.createElement(Ne.a,{onClick:()=>d(!0),variant:"outlined",size:"small",color:"primary"},"Edit"," ",i.a.createElement(Gr.a,null)),!p&&i.a.createElement(ce.a,{elevation:4},i.a.createElement(n.Suspense,{fallback:i.a.createElement(Ze.a,{disableShrink:!0})},i.a.createElement(bs,h))))),i.a.createElement(gs,{resourcePoliciesDispatcher:a,setPolicyContent:function(e){"in"===m?s(fs({},r,{content:e})):l(fs({},o,{content:e}))},selectedPolicy:g,originalResourcePolicy:t[m],direction:m,prefersDarkMode:c,onClose:()=>d(!1),open:p}))}function vs(e){const{operation:t,operationsDispatcher:a,highlight:r,operationRateLimits:s,api:o,disableDelete:l,disableUpdate:c,onMarkAsDelete:p,markAsDelete:d,hideParameters:m,spec:u,resourcePolicy:g,resourcePoliciesDispatcher:h,target:f,verb:E,arns:b,resolvedSpec:y}=e,[v,C]=Object(n.useState)(!1),A=Object(Ue.a)(e=>{const t=e.custom.resourceChipColors[E];return{customButton:{"&:hover":{backgroundColor:t},backgroundColor:t,width:e.spacing(12)},paperStyles:{border:"1px solid ".concat(t),borderBottom:""},customDivider:{backgroundColor:t},linearProgress:{height:"2px"},highlightSelected:{backgroundColor:B.a.hexToRGBA(t,.1)},contentNoMargin:{margin:e.spacing(0)},overlayUnmarkDelete:{position:"absolute",zIndex:e.zIndex.operationDeleteUndo,right:"10%"}}}),D=o.operations[f]&&o.operations[f][E.toUpperCase()],S=D&&Array.isArray(D.usedProductIds)&&D.usedProductIds.length;function O(e){e.stopPropagation(),e.preventDefault(),C(!1),p({verb:E,target:f},!d)}const w=A();return i.a.createElement(i.a.Fragment,null,d&&i.a.createElement(ge.a,{className:w.overlayUnmarkDelete},i.a.createElement(ie.a,{title:"Marked for delete","aria-label":"Marked for delete"},i.a.createElement(Ne.a,{onClick:O,variant:"outlined",style:{marginTop:"10px"}},i.a.createElement(q.a,{id:"Apis.Details.Resources.components.Operation.undo.delete",defaultMessage:"Undo Delete"})))),i.a.createElement(ra.a,{expanded:v,onChange:function(e,t){C(t)},disabled:d,className:w.paperStyles},i.a.createElement(sa.a,{className:r?w.highlightSelected:"",disableRipple:!0,disableTouchRipple:!0,expandIcon:i.a.createElement(ca.a,null),"aria-controls":"panel2a-content",id:"panel2a-header",classes:{content:w.contentNoMargin}},i.a.createElement(pe.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center",spacing:0},i.a.createElement(pe.a,{item:!0,md:6},i.a.createElement(lr.a,{invisible:!t["x-wso2-new"],color:"error",variant:"dot"},i.a.createElement(Ne.a,{disableFocusRipple:!0,variant:"contained",size:"small",className:w.customButton},E)),i.a.createElement(K.a,{display:"inline",style:{margin:"0px 30px"},variant:"h6",gutterBottom:!0},f,i.a.createElement(K.a,{display:"inline",style:{margin:"0px 30px"},variant:"caption",gutterBottom:!0},t.summary))),S?i.a.createElement(pe.a,{item:!0,md:3},i.a.createElement(ge.a,{display:"flex",justifyContent:"center"},i.a.createElement(pr.a,{fontSize:"small"}),i.a.createElement(ge.a,{display:"flex",ml:1,mt:.25,fontSize:"caption.fontSize"},i.a.createElement(q.a,{id:"Apis.Details.Resources.components.Operation.this.operation.used.in.products",defaultMessage:"This operation is used in {isUsedInAPIProduct} API product(s)",values:{isUsedInAPIProduct:S}})))):i.a.createElement(pe.a,{item:!0,md:3}),i.a.createElement(pe.a,{item:!0,md:2},i.a.createElement(K.a,{display:"inline",style:{margin:"0px 30px"},variant:"caption",gutterBottom:!0},i.a.createElement("b",null,null!=Er(t,u)[0]&&"Scope : "),null!=Er(t,u)[0]&&Er(t,u)[0])),!(l||d)&&i.a.createElement(pe.a,{item:!0,md:1,justify:"flex-end",container:!0},i.a.createElement(ie.a,{title:S?i.a.createElement(q.a,{id:"Apis.Details.Resources.components.Operation.cannot.delete.when.used.in.api.products",defaultMessage:"Cannot delete operation when used in an API product"}):i.a.createElement(q.a,{id:"Apis.Details.Resources.components.Operation.Delete",defaultMessage:"Delete"}),"aria-label":i.a.createElement(q.a,{id:"Apis.Details.Resources.components.Operation.delete.operation",defaultMessage:"Delete operation"})},i.a.createElement("div",null,i.a.createElement(Ta.a,{disabled:Boolean(S)||c,onClick:O,"aria-label":"delete"},i.a.createElement(or.a,{fontSize:"small"}))))))),i.a.createElement(oi.a,{light:!0,className:w.customDivider}),i.a.createElement(oa.a,null,i.a.createElement(pe.a,{spacing:2,container:!0,direction:"row",justify:"flex-start",alignItems:"flex-start"},i.a.createElement(dr,{operation:t,operationsDispatcher:a,disableUpdate:c,target:f,verb:E}),i.a.createElement(vr,{operation:t,operationsDispatcher:a,operationRateLimits:s,api:o,disableUpdate:c,spec:u,target:f,verb:E}),!m&&i.a.createElement(as,{operation:t,operationsDispatcher:a,operationRateLimits:s,api:o,disableUpdate:c,spec:u,target:f,verb:E,resolvedSpec:y}),g&&i.a.createElement(ys,{operation:t,operationsDispatcher:a,operationRateLimits:s,resourcePolicy:g,resourcePoliciesDispatcher:h,disableUpdate:c,spec:u,target:f,verb:E}),o.endpointConfig&&o.endpointConfig.endpoint_type&&"awslambda"===o.endpointConfig.endpoint_type&&i.a.createElement(Rr,{operation:t,operationsDispatcher:a,target:f,verb:E,arns:b})))))}ys.defaultProps={disableUpdate:!1},ys.propTypes={resourcePoliciesDispatcher:s.a.func.isRequired,resourcePolicy:s.a.shape({}).isRequired,operationsDispatcher:s.a.func.isRequired,target:s.a.string.isRequired,verb:s.a.string.isRequired,disableUpdate:s.a.bool},vs.defaultProps={highlight:!1,disableUpdate:!1,hideParameters:!1,disableDelete:!1,onMarkAsDelete:()=>{},markAsDelete:!1,operationRateLimits:[]},vs.propTypes={api:s.a.shape({scopes:s.a.arrayOf(s.a.shape({})),resourcePolicies:s.a.shape({})}).isRequired,operationsDispatcher:s.a.func.isRequired,onMarkAsDelete:s.a.func,resourcePoliciesDispatcher:s.a.func.isRequired,markAsDelete:s.a.bool,disableDelete:s.a.bool,disableUpdate:s.a.bool,hideParameters:s.a.bool,resourcePolicy:s.a.shape({}).isRequired,operation:s.a.shape({"x-wso2-new":s.a.bool,summary:s.a.string}).isRequired,target:s.a.string.isRequired,verb:s.a.string.isRequired,spec:s.a.shape({}).isRequired,highlight:s.a.bool,operationRateLimits:s.a.arrayOf(s.a.shape({})),arns:s.a.shape([]).isRequired,resolvedSpec:s.a.shape({}).isRequired};var Cs=i.a.memo(vs);function As(e){const{openAPI:t,children:a,tag:n}=e,r=t.tags&&t.tags.find(e=>e.name===n);return i.a.createElement(ra.a,{defaultExpanded:!0},i.a.createElement(sa.a,{expandIcon:i.a.createElement(ca.a,null),"aria-controls":"panel1a-content",id:"panel1a-header"},i.a.createElement(K.a,{variant:"h4"},n,r&&i.a.createElement(K.a,{style:{margin:"0px 30px"},variant:"caption"},r.description))),i.a.createElement(oa.a,null,a))}As.propTypes={children:s.a.element.isRequired,openAPI:s.a.shape({tags:s.a.arrayOf(s.a.string)}).isRequired,tag:s.a.string.isRequired};var Ds=a(952),Ss=a.n(Ds);function Os(e){const{specErrors:t}=e,[a,r]=Object(n.useState)(!1);return 0===t.length?null:i.a.createElement(i.a.Fragment,null,i.a.createElement("sup",null,i.a.createElement(ie.a,{title:"Show errors"},i.a.createElement(Ta.a,{onClick:()=>r(!0),color:"secondary","aria-label":"Errors in spec"},i.a.createElement(Ss.a,{color:"error"})))),i.a.createElement(ha.a,{maxWidth:"md","aria-labelledby":"confirmation-dialog-title",open:a},i.a.createElement(ya.a,{id:"confirmation-dialog-title"},i.a.createElement(K.a,{display:"inline",color:"textPrimary",variant:"h6"},"Errors",i.a.createElement(K.a,{display:"inline",variant:"subtitle2"}," ","in OpenAPI definition"))),i.a.createElement(Ea.a,{dividers:!0},i.a.createElement(tn.a,null,t.map((e,t)=>i.a.createElement(i.a.Fragment,null,t%2!=0&&i.a.createElement(oi.a,{light:!0,variant:"inset"}),i.a.createElement(an.a,null,i.a.createElement(Ft.a,{primary:e.message,primaryTypographyProps:{color:"error"},inset:!0})))))),i.a.createElement(fa.a,null,i.a.createElement(Ne.a,{onClick:()=>r(!1),color:"primary"},"Ok"))))}Os.propTypes={specErrors:s.a.arrayOf(s.a.shape({})).isRequired};var ws=a(2303),Ps=a.n(ws),xs=a(1223);function Ts(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Is(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ts(a,!0).forEach(function(t){Ms(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ts(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function Ms(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Rs=Object(Ue.a)(e=>({formControl:{minWidth:120},paper:{paddingLeft:e.spacing(4),paddingTop:e.spacing(1.5),paddingBottom:e.spacing(.5),marginTop:"12px"}}));function Ns(e){const{verb:t,onClick:a,isButton:n,checked:r}=e,s=Object(Ue.a)(e=>{const a=e.custom.resourceChipColors[t.toLowerCase()];return{customMenu:{"&:hover":{backgroundColor:a},backgroundColor:a,color:e.palette.getContrastText(a)},customButton:{"&:hover":{backgroundColor:a},backgroundColor:a,width:e.spacing(12),marginLeft:e.spacing(1),color:e.palette.getContrastText(a)}}})();return n?i.a.createElement(Ne.a,{disableFocusRipple:!0,variant:"contained",className:s.customButton,size:"small"},t):i.a.createElement(At.a,{dense:!0,className:s.customMenu,onClick:a},i.a.createElement(zt.a,{checked:r}),t)}const js=["GET","POST","PUT","PATCH","DELETE","HEAD","OPTIONS"];function ks(e){const{operationsDispatcher:t}=e,a=Object(n.useRef)(null),[r,s]=Object(n.useState)(0),o=Object(q.e)();const[l,c]=Object(n.useReducer)(function(e,t){const{type:a,value:n}=t;switch(a){case"target":case"verbs":return Is({},e,{[a]:n});case"clear":return{verbs:[],target:""};case"error":return Is({},e,{error:n});default:return e}},{verbs:[]});i.a.useEffect(()=>{s(a.current.offsetWidth)},[]);const p=Rs();function d(){c({type:"clear"})}function m(){null===Ot.a.operationTarget.validate(l.target).error&&null===Ot.a.operationVerbs.validate(l.verbs).error?(t({action:"add",data:l}),d()):$.a.warning(o.formatMessage({id:"Apis.Details.Resources.components.AddOperation.operation.target.or.verb.cannot.be.empty.warning",defaultMessage:"Operation target or operation verb(s) can't be empty"}))}return i.a.createElement(ce.a,{className:p.paper},i.a.createElement(pe.a,{container:!0,direction:"row",spacing:0,justify:"center",alignItems:"center"},i.a.createElement(pe.a,{item:!0,md:5,xs:12},i.a.createElement(ft.a,{margin:"dense",variant:"outlined",className:p.formControl},i.a.createElement(Nr.a,{ref:a,htmlFor:"outlined-age-simple"},i.a.createElement(q.a,{id:"Apis.Details.Resources.components.AddOperation.http.verb",defaultMessage:"HTTP Verb"})),i.a.createElement(Ji.a,{multiple:!0,renderValue:e=>{const t=[],a=e.map((e,a)=>a<2?i.a.createElement(Ns,{isButton:!0,verb:e}):(t.push(e.toUpperCase()),null)),n=e.length===js.length;return i.a.createElement(i.a.Fragment,null,a,t.length>0&&i.a.createElement(ie.a,{title:t.join(", "),placement:"top"},i.a.createElement(ge.a,{display:"inline",color:"text.hint",m:1,fontSize:"subtitle1"},n?"All selected":"".concat(e.length-2," more"))))},value:l.verbs,onChange:e=>{let{target:{name:t,value:a}}=e;return c({type:t,value:a})},labelWidth:r,inputProps:{name:"verbs",id:"operation-verb"},MenuProps:{getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"left"}}},js.map(e=>i.a.createElement(Ns,{checked:l.verbs.includes(e.toLowerCase()),value:e.toLowerCase(),verb:e}))),i.a.createElement(Aa.a,{id:"my-helper-text"},l.verbs.includes("option")&&i.a.createElement(ie.a,{title:"Select the OPTION method to send OPTIONS calls to the backend. If the OPTIONS method is not selected, OPTIONS calls will be returned from the Gateway with allowed methods.",placement:"bottom"},i.a.createElement(lr.a,{color:"error",variant:"dot"},i.a.createElement(q.a,{id:"Apis.Details.Resources.components.AddOperation.option",defaultMessage:"OPTION"})))))),i.a.createElement(pe.a,{item:!0,md:5,xs:8},i.a.createElement(vt.a,{id:"operation-target",label:"URI Pattern",error:Boolean(l.error),autoFocus:!0,name:"target",value:l.target,onChange:e=>{let{target:{name:t,value:a}}=e;return c({type:t,value:a.startsWith("/")?a:"/".concat(a)})},placeholder:"Enter URI pattern",helperText:l.error||"Enter URI pattern",fullWidth:!0,margin:"dense",variant:"outlined",InputLabelProps:{shrink:!0},onKeyPress:e=>{"Enter"===e.key&&(e.preventDefault(),m())}})),i.a.createElement(pe.a,{item:!0,md:2,xs:4},i.a.createElement(ie.a,{title:i.a.createElement(q.a,{id:"Apis.Details.Resources.components.AddOperation.add.tooltip",defaultMessage:"Add new operation"}),"aria-label":"AddOperation",placement:"bottom",interactive:!0},i.a.createElement("span",null,i.a.createElement(xs.a,{style:{marginLeft:"20px",marginBottom:"15px",marginRight:"20px"},size:"small",color:"primary","aria-label":"add",onClick:m},i.a.createElement(Ps.a,null)))),i.a.createElement("sup",null,i.a.createElement(ie.a,{title:i.a.createElement(q.a,{id:"Apis.Details.Resources.components.AddOperation.clear.inputs.tooltip",defaultMessage:"Clear inputs"}),"aria-label":"clear-inputs",placement:"bottom",interactive:!0},i.a.createElement("span",null,i.a.createElement(Ta.a,{onClick:d,size:"small"},i.a.createElement(kr.a,null))))))))}ks.propTypes={operationsDispatcher:s.a.func.isRequired};var Ls=i.a.memo(ks);function qs(e){const{api:t,message:a}=e;return i.a.createElement(ge.a,{m:1},i.a.createElement(W.b,{to:"/apis/".concat(t.id,"/api definition")},i.a.createElement(K.a,{style:{marginLeft:"10px"},color:"primary",display:"inline",variant:"caption"},a,i.a.createElement(fe.a,{style:{marginLeft:"2px"},fontSize:"small"}))))}qs.defaultProps={message:"Edit API Definition"},qs.propTypes={api:s.a.shape({id:s.a.string}).isRequired,message:s.a.string};var _s=a(2305),Ws=a.n(_s),Fs=a(2304),zs=a.n(Fs);function Bs(e){const{selectedOperations:t,setSelectedOperation:a,operations:n}=e,[r]=Object(de.d)(),s=!zi()(t);return i.a.createElement(pe.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center"},i.a.createElement(pe.a,{item:!0}),i.a.createElement(pe.a,{item:!0},i.a.createElement(ge.a,{mr:17.25},i.a.createElement(ie.a,{title:s?"Clear selections":"Mark all for delete"},i.a.createElement("div",null,i.a.createElement(Ta.a,{disabled:Object(o.b)(["apim:api_create"],r),onClick:function(){a(s?{}:n)},"aria-label":"delete all",size:"large"},s?i.a.createElement(zs.a,null):i.a.createElement(Ws.a,null)))))))}function Us(e){const{updateOpenAPI:t,operationsDispatcher:a,api:r}=e,[s,l]=Object(n.useState)(!1),[c,p]=Object(n.useState)(!1);return i.a.createElement(i.a.Fragment,null,i.a.createElement(ge.a,null,i.a.createElement(Ne.a,{disabled:s||Object(o.b)(["apim:api_create"],r),onClick:function(){l(!0),t("save").finally(()=>l(!1))},variant:"contained",color:"primary"},"Save",s&&i.a.createElement(Ze.a,{size:24})),i.a.createElement(ge.a,{display:"inline",ml:1},i.a.createElement(Ne.a,{onClick:()=>p(!0)},"Reset"))),i.a.createElement(ha.a,{open:c,"aria-labelledby":"bulk-delete-dialog-title","aria-describedby":"bulk-delete-dialog-description",onBackdropClick:()=>p(!1)},i.a.createElement(ya.a,{id:"bulk-delete-dialog-title"},"Discard changes"),i.a.createElement(Ea.a,null,i.a.createElement(ba.a,{id:"bulk-delete-dialog-description"},"Please confirm the discard all changes action")),i.a.createElement(fa.a,null,i.a.createElement(Ne.a,{onClick:()=>p(!1)},"CLOSE"),i.a.createElement(ge.a,{ml:1},i.a.createElement(Ne.a,{onClick:()=>{a({action:"init"}),p(!1)},color:"error"},"RESET")))))}function Vs(){return(Vs=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function Hs(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Gs(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Hs(a,!0).forEach(function(t){Ks(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Hs(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function Ks(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Ys(e){const{operationProps:t,disableRateLimiting:a,hideAPIDefinitionLink:r,disableMultiSelect:s,disableUpdate:l,disableAddOperation:c}=e,[p,d]=Object(de.d)(),[m,u]=Object(n.useState)(!1),[g,h]=Object(n.useState)([]),[f,E]=Object(n.useState)({}),[b,y]=Object(n.useState)({}),[v,C]=Object(n.useState)(p.apiThrottlingPolicy),[A,D]=Object(n.useState)([]),[S,O]=Object(n.useState)({spec:{},errors:[]});const[w,P]=Object(n.useReducer)(function(e,t){const{action:a,data:n}=t,{value:i}=n||{};let r=Gs({},e);switch(a){case"init":r=i;break;case"update":r[i.resourcePath][i.httpVerb][n.direction]=i}return r},null);const[x,T]=Object(n.useReducer)(function(e,t){const{action:a,data:n}=t,{target:i,verb:r,value:s}=n||{};let o,l;switch(i&&r?o=na()(e[i][r]):l=na()(e),a){case"init":return E({}),n||b.paths;case"description":case"summary":o[a]=s;break;case"authType":o["x-auth-type"]=s?"Any":"None";break;case"parameter":if(o.parameters){const e=o.parameters.findIndex(e=>e.in===s.in&&e.name===s.name);if(-1===e)if("body"===s.in){const e=o.parameters.findIndex(e=>"body"===e.in);-1!==e?o.parameters[e]=s:o.parameters.push(s)}else o.parameters.push(s);else o.parameters[e]=s}else o.parameters=[s];break;case"requestBody":o[a]=s;break;case"deleteParameter":o.parameters=o.parameters.filter(e=>!(e.in===s.in&&e.name===s.name));break;case"throttlingPolicy":o["x-throttling-tier"]=s;break;case"amznResourceName":o["x-amzn-resource-name"]=s;break;case"amznResourceTimeout":o["x-amzn-resource-timeout"]=s;break;case"scopes":o.security?o.security.find(e=>e.default)||o.security.push({default:[]}):o.security=[{default:[]}],o.security.find(e=>e.default).default=s;break;case"add":{const t=function(e,t){const a=e.match(/[^{}]+(?=})/g)||[];let n=[];const i=fr(t);return hr.V3.includes(i)?n=a.map(e=>{const t={};return t.name=e,t.in="path",t.required=!0,t.schema={type:"string",format:"string"},t}):hr.V2.includes(i)&&(n=a.map(e=>{const t={};return t.name=e,t.in="path",t.required=!0,t.type="string",t.format="string",t})),n}(n.target,b);l[n.target]||(l[n.target]={});let a=0;for(const e of n.verbs)if(l[n.target][e]){const t="Operation already exist with ".concat(n.target," and ").concat(e);$.a.warning(t),console.warn(t),a++}else l[n.target][e]={"x-wso2-new":!0,"x-auth-type":"Application & Application User",responses:{200:{description:"ok"}},parameters:t};return a===n.verbs.length?($.a.error("Operation(s) already exist!"),e):l}default:return e}return Gs({},e,{[i]:Gs({},e[i],{[r]:o})})},{});const I=Object(n.useCallback)(function(e,t){const{target:a,verb:n}=e;E(e=>{const i=na()(e);return i[a]||(i[a]={}),t?i[a][n]=t:delete i[a][n],z()(i[a])&&delete i[a],i})},[E]),M=Object(n.useMemo)(()=>({id:p.id,apiThrottlingPolicy:v,scopes:p.scopes,operations:p.isAPIProduct()?{}:br(p.operations),endpointConfig:p.endpointConfig}),[p,v]);function R(e){const t=na()(e);rr.a.validate(t,(e,t)=>{O(()=>{return{spec:t,errors:e?[e]:[]}})}),T({action:"init",data:e.paths}),y(e)}function N(e){return p.updateSwagger(e).then(e=>R(e.body)).then(d).catch(e=>{console.error(e),e.response?u(e.response.body):$.a.error("Error while updating the definition")})}return Object(n.useEffect)(()=>{Q.a.getAmznResourceNames(p.id).then(e=>{e.body&&e.body.list&&D(e.body.list)})},[]),Object(n.useEffect)(()=>{if(p.getSwagger().then(e=>{R(e.body)}).catch(e=>{e.response&&($.a.error(e.response.body.description),u(e.response.body)),console.error(e)}),p.isSOAPToREST()){const e=p.getResourcePolicies("in"),t=p.getResourcePolicies("out");Promise.all([e,t]).then(e=>{let[t,a]=e;const n={};for(const e of t.body.list){const{resourcePath:t,httpVerb:a}=e;n[t]?n[t][a]={in:e}:n[t]={[a]:{in:e}}}for(const e of a.body.list){const{resourcePath:t,httpVerb:a}=e;n[t]?n[t][a].out=e:n[t]={[a]:{out:e}}}P({action:"init",data:{value:n}})}).catch(e=>{e.response&&($.a.error(e.response.body.description),u(e.response.body)),u(e.message),console.error(e)})}Q.a.policies("api").then(e=>{h(e.body.list)})},[p.id]),!m&&z()(b)||0===S.errors.length&&z()(S.spec)?i.a.createElement(pe.a,{container:!0,direction:"row",justify:"center",alignItems:"center"},i.a.createElement(pe.a,{item:!0},i.a.createElement(Ze.a,{disableShrink:!0}))):i.a.createElement(pe.a,{container:!0,direction:"row",justify:"flex-start",spacing:2,alignItems:"stretch"},m&&i.a.createElement(pe.a,{item:!0,md:12},i.a.createElement(Rn.a,{onClose:()=>u(null),disableActions:!0,type:"error",message:m})),!a&&i.a.createElement(pe.a,{item:!0,md:12},i.a.createElement(Yi,{operationRateLimits:g,value:v,onChange:C,isAPIProduct:p.isAPIProduct()})),!Object(o.b)(["apim:api_create"],p)&&!c&&i.a.createElement(pe.a,{item:!0,md:12,xs:12},i.a.createElement(Ls,{operationsDispatcher:T})),S.errors.length>0&&i.a.createElement(Os,{specErrors:S.errors}),i.a.createElement(pe.a,{item:!0,md:12},i.a.createElement(ce.a,null,!s&&i.a.createElement(Bs,{operations:x,selectedOperations:f,setSelectedOperation:E}),Object.entries(x).map(e=>{let[a,n]=e;return i.a.createElement(pe.a,{key:a,item:!0,md:12},i.a.createElement(As,{openAPI:b,tag:a},i.a.createElement(pe.a,{container:!0,direction:"column",justify:"flex-start",spacing:1,alignItems:"stretch"},Object.entries(n).map(e=>{let[n,r]=e;return Ee.a.HTTP_METHODS.includes(n)?i.a.createElement(pe.a,{key:"".concat(a,"/").concat(n),item:!0},i.a.createElement(Cs,Vs({target:a,verb:n,highlight:!0,resourcePoliciesDispatcher:P,resourcePolicy:w&&w[a.slice(1)]&&w[a.slice(1)][n],operationsDispatcher:T,spec:b,operation:r,operationRateLimits:g,api:M,markAsDelete:Boolean(f[a]&&f[a][n]),onMarkAsDelete:I,disableUpdate:l||Object(o.b)(["apim:api_create"],p),disableMultiSelect:s,arns:A},t,{resolvedSpec:S.spec}))):null}))))})),i.a.createElement(pe.a,{style:{marginTop:"25px"},container:!0,direction:"row",justify:"space-between",alignItems:"center"},!l&&i.a.createElement(Us,{operationsDispatcher:T,updateOpenAPI:function(e){const t=na()(x);switch(e){case"save":if(function(e,t){for(const a in t)if(Object.prototype.hasOwnProperty.call(t,a)){const n=t[a];if(!e[a]||Object.keys(e[a]).length!==Object.keys(n).length)return!1}return!0}(f,t)){const e="At least one operation is required for the API";return $.a.warning(e),Promise.reject(new Error(e))}for(const[e,a]of Object.entries(f))for(const n of Object.keys(a))delete t[e][n],z()(t[e])&&delete t[e];for(const[,e]of Object.entries(t))for(const[,t]of Object.entries(e))t["x-wso2-new"]&&delete t["x-wso2-new"];break;default:return Promise.reject(new Error("Unsupported resource operation!"))}return v!==p.apiThrottlingPolicy?d({apiThrottlingPolicy:v}).catch(e=>{console.error(e),$.a.error("Error while updating the API")}).then(()=>N(Gs({},b,{paths:t}))):N(Gs({},b,{paths:t}))},api:p}),!r&&i.a.createElement(qs,{api:p}))))}function Js(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(ge.a,{mb:4},i.a.createElement(K.a,{variant:"h4",gutterBottom:!0},i.a.createElement(q.a,{id:"Apis.Details.Resources.APIOperations.title",defaultMessage:"Resources"}))),i.a.createElement(Ys,null))}function Qs(){const[e,t]=Object(de.d)(),[a,r]=Object(n.useState)(e.apiThrottlingPolicy),[s,l]=Object(n.useState)([]),[c,p]=Object(n.useState)(!1);return Object(n.useEffect)(()=>{Q.a.policies("api").then(e=>{l(e.body.list)})},[]),i.a.createElement(pe.a,{container:!0,spacing:3},i.a.createElement(pe.a,{item:!0,md:12},i.a.createElement(K.a,{variant:"h4",gutterBottom:!0},"Product Resources",i.a.createElement(ge.a,{component:"div",display:"inline"},i.a.createElement(W.b,{to:"/api-products/"+e.id+"/resources/edit"},i.a.createElement(Ne.a,{size:"small"},i.a.createElement(Gr.a,null),i.a.createElement(q.a,{id:"Apis.Details.Resources.Resources.edit.resources.button",defaultMessage:"Edit Resources"})))))),i.a.createElement(pe.a,{item:!0,md:12},i.a.createElement(Yi,{operationRateLimits:s,api:e,isAPIProduct:!0,value:a,onChange:r})),!Object(o.b)(["apim:api_create"],e)&&i.a.createElement(pe.a,{item:!0,md:12},i.a.createElement(ge.a,{ml:1},i.a.createElement(Ne.a,{onClick:function(){p(!0),t({apiThrottlingPolicy:a}).finally(()=>p(!1))},disabled:!1,variant:"contained",size:"small",color:"primary"},"Save",c&&i.a.createElement(Ze.a,{size:24})),i.a.createElement(ge.a,{display:"inline",ml:1},i.a.createElement(Ne.a,{size:"small",variant:"outlined",onClick:()=>r(e.apiThrottlingPolicy)},"Reset")))),i.a.createElement(pe.a,{item:!0,md:12},i.a.createElement(Ys,{hideAPIDefinitionLink:!0,disableUpdate:!0,disableRateLimiting:!0,operationProps:{disableDelete:!0},disableMultiSelect:!0,disableAddOperation:!0})))}Bs.defaultProps={},Bs.propTypes={selectedOperations:s.a.shape({}).isRequired,setSelectedOperation:s.a.func.isRequired,operations:s.a.shape({}).isRequired},Us.propTypes={updateOpenAPI:s.a.func.isRequired,operationsDispatcher:s.a.func.isRequired},Ys.defaultProps={operationProps:{disableDelete:!1},disableUpdate:!1,disableRateLimiting:!1,disableMultiSelect:!1,hideAPIDefinitionLink:!1,disableAddOperation:!1},Ys.propTypes={disableRateLimiting:s.a.bool,hideAPIDefinitionLink:s.a.bool,disableMultiSelect:s.a.bool,disableAddOperation:s.a.bool,disableUpdate:s.a.bool,operationProps:s.a.shape({disableDelete:s.a.bool})};var Zs=a(1605);const Xs=Object(Ue.a)(e=>({root:{flexGrow:1,marginTop:10},titleWrapper:{display:"flex",flexDirection:"row",alignItems:"center",paddingBottom:e.spacing(2)},buttonWrapper:{marginTop:e.spacing(4)}}));var $s=function(){const e=Xs(),{api:t,updateAPI:a}=Object(n.useContext)(de.c),r=na()(t),{apis:s}=r,[o,l]=Object(n.useState)(s),[c,p]=Object(n.useState)(!1);return i.a.createElement("div",{className:e.root},i.a.createElement("div",{className:e.titleWrapper},i.a.createElement(K.a,{variant:"h4",align:"left",className:e.mainTitle},i.a.createElement(q.a,{id:"Apis.Details.ProductResources.ProductResourcesEdit.title",defaultMessage:"Manage Resources"}))),i.a.createElement("div",{className:e.contentWrapper},i.a.createElement(Zs.a,{apiResources:o,setApiResources:l,api:t}),i.a.createElement("div",{className:e.buttonWrapper},i.a.createElement(pe.a,{container:!0,direction:"row",alignItems:"flex-start",spacing:4},i.a.createElement(pe.a,{item:!0},i.a.createElement("div",null,i.a.createElement(Ne.a,{variant:"contained",color:"primary",onClick:()=>{p(!0),a({apis:o},!0).then(()=>{p(!1)}).catch(e=>{p(!1);const{status:t}=e;401===t&&Object(ee.b)()})},disabled:c},c&&i.a.createElement(q.a,{id:"Apis.Details.ProductResources.ProductResourcesEdit.updating",defaultMessage:"Updating ..."}),!c&&i.a.createElement(q.a,{id:"Apis.Details.ProductResources.ProductResourcesEdit.save",defaultMessage:"Save"})))),i.a.createElement(pe.a,{item:!0},i.a.createElement(W.b,{to:"/apis/"+t.id+"/overview"},i.a.createElement(Ne.a,null,i.a.createElement(q.a,{id:"Apis.Details.ProductResources.ProductResourcesEdit.cancel",defaultMessage:"Cancel"}))))))))},eo=a(1269),to=a(1271),ao=a(1270);function no(e){const{classes:t,intl:a,generateEndpointConfig:r,apiType:s}=e,[o,l]=Object(n.useState)("mock"),c=[{type:"http",name:a.formatMessage({id:"Apis.Details.Endpoints.NewEndpointCreate.create.http.endpoint",defaultMessage:"HTTP/ REST Endpoint"}),description:a.formatMessage({id:"Apis.Details.Endpoints.NewEndpointCreate.create.http.endpoint.description",defaultMessage:"A REST API endpoint based on a URI template."}),options:null,disabled:["SOAPTOREST"]},{type:"address",name:a.formatMessage({id:"Apis.Details.Endpoints.NewEndpointCreate.create.soap.endpoint",defaultMessage:"HTTP/ SOAP Endpoint"}),description:a.formatMessage({id:"Apis.Details.Endpoints.NewEndpointCreate.create.soap.endpoint.description",defaultMessage:"The direct URI of the web service."}),options:null,disabled:["GRAPHQL"]},{type:"prototyped",name:a.formatMessage({id:"Apis.Details.Endpoints.NewEndpointCreate.create.prototype.endpoint",defaultMessage:"Prototype Endpoint"}),description:a.formatMessage({id:"Apis.Details.Endpoints.NewEndpointCreate.create.prototype.endpoint.description",defaultMessage:"Use the inbuilt JavaScript engine to prototype the API or provide an endpoint to a prototype API. The inbuilt JavaScript engine does support prototype SOAP APIs"}),options:[{type:"mock",name:a.formatMessage({id:"Apis.Details.Endpoints.NewEndpointCreate.prototype.implementation",defaultMessage:"Prototype Implementation"}),disabled:["SOAP","SOAPTOREST"]},{type:"prototyped",name:a.formatMessage({id:"Apis.Details.Endpoints.NewEndpointCreate.default.prototype.endpoints",defaultMessage:"Prototype Endpoint"}),disabled:[]}],disabled:["GRAPHQL"]},{type:"dynamic",name:a.formatMessage({id:"Apis.Details.Endpoints.NewEndpointCreate.create.dynamic.endpoint",defaultMessage:"Dynamic Endpoint"}),description:a.formatMessage({id:"Apis.Details.Endpoints.NewEndpointCreate.create.dynamic.endpoint.description",defaultMessage:"If you need to send the request to the URI specified in the TO header."}),options:null,disabled:[]},{type:"awslambda",name:a.formatMessage({id:"Apis.Details.Endpoints.NewEndpointCreate.create.awslambda.endpoint",defaultMessage:"AWS Lambda Endpoint"}),description:a.formatMessage({id:"Apis.Details.Endpoints.NewEndpointCreate.create.awslambda.endpoint.description",defaultMessage:"If you need to invoke AWS Lambda functions through API gateway."}),options:null,disabled:["SOAPTOREST","GRAPHQL"]}];return i.a.createElement(i.a.Fragment,null,i.a.createElement(K.a,{variant:"h4",align:"left",className:t.titleWrapper},i.a.createElement(q.a,{id:"Apis.Details.Endpoints.NewEndpointCreate.add.endpoints.header",defaultMessage:"Select an Endpoint Type to Add"})),i.a.createElement(pe.a,{container:!0,justify:"flex-start",spacing:2},c.filter(e=>!e.disabled.includes(s)).map(e=>i.a.createElement(pe.a,{item:!0,className:t.inlineMessageContainer},i.a.createElement(eo.a,{className:t.endpointTypeCard},i.a.createElement(to.a,{className:t.cardContent},i.a.createElement(K.a,{variant:"h5",component:"h3",className:t.head},e.name),i.a.createElement(oi.a,null),i.a.createElement(K.a,{component:"p",className:t.content},e.description),e.options?i.a.createElement("div",null,i.a.createElement(ft.a,{component:"fieldset",className:t.formControl},i.a.createElement(ht.a,{"aria-label":"EndpointType",name:"endpointType",className:t.radioGroup,value:o,onChange:e=>{l(e.target.value)}},e.options.filter(e=>!e.disabled.includes(s)).map(e=>i.a.createElement(Et.a,{value:e.type,control:i.a.createElement(gt.a,{color:"primary"}),label:e.name}))))):i.a.createElement("div",null)),i.a.createElement(ao.a,{className:t.cardActions},i.a.createElement(Ne.a,{color:"primary",className:t.button,onClick:()=>r(e.type,o)},i.a.createElement(q.a,{id:"Apis.Details.Endpoints.NewEndpointCreate.create.button",defaultMessage:"Add"}))))))))}no.propTypes={classes:s.a.shape({}).isRequired,intl:s.a.shape({}).isRequired,generateEndpointConfig:s.a.func.isRequired,apiType:s.a.string.isRequired};var io=Object(L.a)(e=>({inlineMessageContainer:{marginBottom:e.spacing(1)},endpointTypeCard:{margin:e.spacing(1),maxWidth:e.spacing(32),transition:"box-shadow 0.3s ease-in-out",height:e.spacing(40),display:"flex",flexDirection:"column"},cardContent:{height:e.spacing(40)},content:{marginTop:e.spacing(1)},cardActions:{justifyContent:"flex-end",borderTop:"solid #e0e0e0 thin"}}))(Object(q.d)(no));function ro(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function so(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ro(a,!0).forEach(function(t){oo(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ro(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function oo(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const lo=Object(n.lazy)(()=>Promise.resolve().then(a.t.bind(null,2319,7)));function co(e){const{resourcePath:t,resourceMethod:a,scriptContent:r,onChange:s,originalScript:l}=e,{api:c}=Object(n.useContext)(de.a),[p,d]=Object(n.useState)(!1),m=Object(Ue.a)(e=>{let t=e.custom.resourceChipColors?e.custom.resourceChipColors[a]:null,n="#000000";return t?n=e.palette.getContrastText(e.custom.resourceChipColors[a]):(console.log("Check the theme settings. The resourceChipColors is not populated properlly"),t="#cccccc"),{editor:{width:"100%",height:"500px"},chipActive:so({borderRadius:"5px",width:"80%",backgroundColor:t,color:n},e.typography.button),resourcePathContainer:{paddingTop:e.spacing(1)},prototypeResourceHeader:{borderBottom:"".concat(t," 1px solid")},chipExpansionPanel:{backgroundColor:B.a.hexToRGBA(t,.1),border:"".concat(t," 1px solid")},scriptResetButton:{display:"flex",justifyContent:"space-between",marginBottom:"10px"}}})();return i.a.createElement(pe.a,{item:!0},i.a.createElement(ra.a,{className:m.chipExpansionPanel},i.a.createElement(sa.a,{className:m.prototypeResourceHeader,expandIcon:i.a.createElement(ca.a,null)},i.a.createElement(pe.a,{container:!0,spacing:12},i.a.createElement(pe.a,{xs:1},i.a.createElement(ue.a,{label:a,className:m.chipActive})),i.a.createElement(pe.a,{xs:!0,className:m.resourcePathContainer},i.a.createElement(K.a,null,t)))),i.a.createElement(oa.a,{className:m.genericResourceContent},i.a.createElement(pe.a,{container:!0,direction:"column"},i.a.createElement(pe.a,{item:!0,className:m.scriptResetButton},i.a.createElement(K.a,{variant:"subtitle2"},i.a.createElement(q.a,{id:"Apis.Details.Endpoints.Prototype.InlineEndpoints.script",defaultMessage:"Script"})),p&&i.a.createElement(Ne.a,{variant:"contained",color:"primary",onClick:()=>{s(l,t,a)}},"Reset")),i.a.createElement(pe.a,{item:!0},i.a.createElement(n.Suspense,{fallback:i.a.createElement(Ze.a,null)},i.a.createElement(lo,{height:"50vh",width:"100%",theme:"vs-dark",value:r,options:{selectOnLineNumbers:!0,readOnly:"".concat(Object(o.b)(["apim:api_create"],c))},language:"javascript",onChange:e=>{d(!0),s(e,t,a)}})))))))}co.propTypes={resourcePath:s.a.string.isRequired,resourceMethod:s.a.string.isRequired,scriptContent:s.a.string.isRequired,classes:s.a.shape({}).isRequired,theme:s.a.shape({}).isRequired,onChange:s.a.func.isRequired};var po=co;const mo="x-mediation-script",uo="/* mc.setProperty('CONTENT_TYPE', 'application/json');\n\tmc.setPayloadJSON('{ \"data\" : \"sample JSON\"}');*/\n/*Uncomment the above comment block to send a sample response.*/";function go(e){const{api:t}=Object(n.useContext)(de.a),{paths:a,updatePaths:r}=e,s=(e,t,n)=>{const i=JSON.parse(JSON.stringify(a));i[t][n][mo]=e.trim(),r(i)},[o,l]=Object(n.useState)([]);return Object(n.useEffect)(()=>{t.getGeneratedMockScriptsOfAPI(t.id).then(e=>{l(e.obj.list)})},[]),i.a.createElement(i.a.Fragment,null,i.a.createElement(pe.a,{container:!0,spacing:1,direction:"column"},Object.keys(a).map(e=>Object.keys(a[e]).map(t=>{const n=a[e][t][mo],r=void 0===n?uo:n,l=function(e,t){for(let a=0;a<o.length;a++)if(o[a].verb.toLowerCase()===t.toLowerCase()&&o[a].path===e)return o[a].content;return null}(e,t);return i.a.createElement(po,{resourcePath:e,resourceMethod:t,onChange:s,scriptContent:r,originalScript:l})}))))}go.propTypes={paths:s.a.shape({}).isRequired,updatePaths:s.a.func.isRequired};var ho=go;function fo(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Eo(e,t){return"failover"!==e?t:"sandbox_endpoints"===t?"sandbox_failovers":"production_failovers"}function bo(e){const t=na()(e),a=[];return Array.isArray(t.production_endpoints)?a.push.apply(a,fo(t.production_endpoints)):a.push(t.production_endpoints),Array.isArray(t.sandbox_endpoints)?a.push.apply(a,fo(t.sandbox_endpoints)):a.push(t.sandbox_endpoints),"failover"===t.endpoint_type&&(t.sandbox_failovers&&a.push.apply(a,fo(t.sandbox_failovers)),t.production_failovers&&a.push.apply(a,fo(t.production_failovers))),a}function yo(e){const t={};switch(e){case"http":t.endpoint_type="http",t.failOver="False";break;case"address":t.endpoint_type="address",t.failOver="False";break;case"prototyped":t.implementation_status="prototyped",t.endpoint_type="http",t.production_endpoints={config:null,url:"http://localhost"},t.sandbox_endpoints={config:null,url:"http://localhost"};break;case"awslambda":t.endpoint_type="awslambda",t.access_method="role-supplied",t.amznAccessKey="",t.amznSecretKey="",t.amznRegion="";break;default:t.endpoint_type="default",t.production_endpoints={url:"default"},t.sandbox_endpoints={url:"default"},t.failOver="False"}return t}function vo(e){return"address"===e?{url:"",endpoint_type:"address",template_not_supported:!1}:{url:"",template_not_supported:!1}}function Co(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Ao(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Co(a,!0).forEach(function(t){Do(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Co(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function Do(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function So(e){const{api:t}=Object(n.useContext)(de.c),{intl:a,securityInfo:r,onChangeEndpointAuth:s}=e,[l,c]=Object(n.useState)({type:"BASIC",username:"",password:""}),[p,d]=Object(n.useState)(),m=[{key:"BASIC",value:a.formatMessage({id:"Apis.Details.Endpoints.GeneralConfiguration.EndpointSecurity.basic",defaultMessage:"Basic Auth"})},{key:"DIGEST",value:a.formatMessage({id:"Apis.Details.Endpoints.GeneralConfiguration.EndpointSecurity.digest.auth",defaultMessage:"Digest Auth"})}];Object(n.useEffect)(()=>{const e={};if(null!==r){const{type:t,username:a,password:n}=r;e.type=t,e.username=a,e.password=""===n?"**********":n}c(e)},[e]);const u=e=>{l[e]?d(Ao({},p,{[e]:!0})):d(Ao({},p,{[e]:!1})),s(l[e],e)};return i.a.createElement(pe.a,{container:!0,direction:"row",spacing:2},i.a.createElement(pe.a,{item:!0,xs:6},i.a.createElement(vt.a,{disabled:Object(o.b)(["apim:api_create"],t),fullWidth:!0,select:!0,value:l.type,variant:"outlined",onChange:e=>{s(e.target.value,"type")},inputProps:{name:"key",id:"auth-type-select"}},m.map(e=>i.a.createElement(At.a,{value:e.key},e.value)))),i.a.createElement(pe.a,{item:!0,xs:6}),i.a.createElement(pe.a,{item:!0,xs:6},i.a.createElement(vt.a,{disabled:Object(o.b)(["apim:api_create"],t),required:!0,fullWidth:!0,error:p&&!1===p.username,helperText:p&&!1===p.username?i.a.createElement(q.a,{id:"Apis.Details.Endpoints.GeneralConfiguration.EndpointSecurity.no.username.error",defaultMessage:"Username should not be empty"}):i.a.createElement(q.a,{id:"Apis.Details.Endpoints.GeneralConfiguration.EndpointSecurity.username.message",defaultMessage:"Enter Username"}),variant:"outlined",id:"auth-userName",label:i.a.createElement(q.a,{id:"Apis.Details.Endpoints.GeneralConfiguration.EndpointSecurity.user.name.input",defaultMessage:"Username"}),onChange:e=>c(Ao({},l,{username:e.target.value})),value:l.username,onBlur:()=>u("username")})),i.a.createElement(pe.a,{item:!0,xs:6},i.a.createElement(vt.a,{disabled:Object(o.b)(["apim:api_create"],t),required:!0,fullWidth:!0,error:p&&!1===p.password,helperText:p&&!1===p.password?i.a.createElement(q.a,{id:"Apis.Details.Endpoints.GeneralConfiguration.EndpointSecurity.no.password.error",defaultMessage:"Password should not be empty"}):i.a.createElement(q.a,{id:"Apis.Details.Endpoints.GeneralConfiguration.EndpointSecurity.password.message",defaultMessage:"Enter Password"}),variant:"outlined",type:"password",id:"auth-password",label:i.a.createElement(q.a,{id:"Apis.Details.Endpoints.GeneralConfiguration.EndpointSecurity.password.input",defaultMessage:"Password"}),value:l.password,onChange:e=>c(Ao({},l,{password:e.target.value})),onBlur:()=>u("password")})))}So.propTypes={intl:s.a.func.isRequired,securityInfo:s.a.shape({}).isRequired,onChangeEndpointAuth:s.a.func.isRequired};var Oo=Object(q.d)(So);function wo(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Po(e){const{intl:t,epConfig:a,endpointSecurityInfo:r,handleToggleEndpointSecurity:s,handleEndpointSecurityChange:l,endpointType:c,classes:p}=e,[d,m]=Object(n.useState)(!1),[u,g]=Object(n.useState)([]),{api:h}=Object(n.useContext)(de.c),[f,E]=Object(n.useState)([]);return Object(n.useEffect)(()=>{Q.a.getEndpointCertificates().then(e=>{const{certificates:t}=e.obj,n=bo(a),i=[],r=t.filter(e=>{i.push(e.alias);for(const t of n)if(t&&-1!==t.url.indexOf(e.endpoint))return!0;return!1});g(r),E(i)}).catch(e=>{console.error(e),g([])})},[]),i.a.createElement(i.a.Fragment,null,i.a.createElement(ra.a,{expanded:d,onChange:()=>m(!d),className:p.generalConfigPanel},i.a.createElement(sa.a,{expandIcon:i.a.createElement(ca.a,null),"aria-controls":"panel1bh-content",id:"panel1bh-header",className:p.configHeaderContainer},"awslambda"===c.key?i.a.createElement("div",null):i.a.createElement(K.a,{className:p.secondaryHeading,hidden:"default"===c.key||"awslambda"===c.key},i.a.createElement(q.a,{id:"Apis.Details.Endpoints.GeneralConfiguration.endpoint.security.sub.heading",defaultMessage:"Endpoint Security"})," ",":",null!==r?r.type:"NONE"),"default"===c.key||"awslambda"===c.key?i.a.createElement("div",null):i.a.createElement(K.a,{className:p.secondaryHeading,hidden:"default"===c.key||"awslambda"===c.key},"|",i.a.createElement(q.a,{id:"Apis.Details.Endpoints.GeneralConfiguration.certificates.sub.heading",defaultMessage:"Certificates"}),":"," ",u.length)),i.a.createElement(oa.a,{className:p.generalConfigContent},i.a.createElement(pe.a,{container:!0,direction:"row",xs:12},"awslambda"===c.key?i.a.createElement("div",null):i.a.createElement(pe.a,{container:!0,item:!0,xs:6},"awslambda"===c.key?i.a.createElement("div",null):i.a.createElement(pe.a,{item:!0,xs:!0,className:p.endpointConfigSection,hidden:"awslambda"===c.key},i.a.createElement(Et.a,{value:"start",checked:null!==r,control:i.a.createElement(ia.a,{color:"primary",disabled:Object(o.b)(["apim:api_create"],h)}),label:i.a.createElement(K.a,{className:p.securityHeading},i.a.createElement(q.a,{id:"Apis.Details.Endpoints.EndpointOverview.endpoint.security.enable.switch",defaultMessage:"Endpoint Security"})),labelPlacement:"start",onChange:s}),i.a.createElement(Da.a,{in:null!==r},i.a.createElement(Oo,{securityInfo:r,onChangeEndpointAuth:l})))),i.a.createElement(pe.a,{item:!0,xs:6,className:p.endpointConfigSection,hidden:"default"===c.key||"awslambda"===c.key},i.a.createElement(hn,{endpoints:bo(a),certificates:u,uploadCertificate:(e,a,n)=>Q.a.addCertificate(e,a,n).then(e=>{if(201===e.status){$.a.info(t.formatMessage({id:"Apis.Details.Endpoints.GeneralConfiguration.Certificates.certificate.add.success",defaultMessage:"Certificate added successfully"}));const a=wo(u);a.push({alias:e.obj.alias,endpoint:e.obj.endpoint}),g(a)}}).catch(e=>{console.error(e.message),"Conflict"===e.message?$.a.error(t.formatMessage({id:"Apis.Details.Endpoints.GeneralConfiguration.Certificates.certificate.alias.exist",defaultMessage:"Adding Certificate Failed. Certificate Alias Exists."})):e.response?$.a.error(e.response.body.description):$.a.error(t.formatMessage({id:"Apis.Details.Endpoints.GeneralConfiguration.Certificates.certificate.error",defaultMessage:"Something went wrong while adding the certificate."}))}),deleteCertificate:e=>Q.a.deleteEndpointCertificate(e).then(a=>{g(()=>200===a.status?u.filter(t=>t.alias!==e):-1),$.a.info(t.formatMessage({id:"Apis.Details.Endpoints.GeneralConfiguration.Certificates.certificate.delete.success",defaultMessage:"Certificate Deleted Successfully"}))}).catch(e=>{console.log(e),$.a.info(t.formatMessage({id:"Apis.Details.Endpoints.GeneralConfiguration.Certificates.certificate.delete.error",defaultMessage:"Error Deleting Certificate"}))}),aliasList:f}))))))}Po.propTypes={epConfig:s.a.shape({}).isRequired,endpointSecurityInfo:s.a.shape({}).isRequired,handleToggleEndpointSecurity:s.a.func.isRequired,handleEndpointSecurityChange:s.a.func.isRequired,endpointType:s.a.shape({}).isRequired,classes:s.a.shape({}).isRequired,intl:s.a.shape({}).isRequired};var xo=Object(q.d)(Object(L.a)(e=>({endpointTypeSelect:{width:"50%"},configHeaderContainer:{display:"flex",justifyContent:"space-between"},generalConfigContent:{boxShadow:"inset -1px 2px 3px 0px #c3c3c3"},secondaryHeading:{fontSize:e.typography.pxToRem(15),color:e.palette.text.secondary,display:"flex"},heading:{fontSize:e.typography.pxToRem(15),flexBasis:"33.33%",flexShrink:0,fontWeight:"900"},endpointConfigSection:{padding:"10px"},generalConfigPanel:{width:"100%"},securityHeading:{fontWeight:600}}))(Po));function To(e){const{category:t,endpointURL:a,editEndpoint:r,classes:s,type:l,setAdvancedConfigOpen:c,deleteEndpoint:p,index:d,readOnly:m,autoFocus:u,name:g,apiId:h}=e,[f,E]=Object(n.useState)(a),{api:b}=Object(n.useContext)(de.c),[y,v]=Object(n.useState)(),[C,A]=Object(n.useState)(""),[D,S]=Object(n.useState)(!1),[O,w]=Object(n.useState)(!1);return Object(n.useEffect)(()=>{E(a)},[a]),i.a.createElement("div",{className:s.endpointInputWrapper},i.a.createElement(vt.a,{disabled:Object(o.b)(["apim:api_create"],b),label:g,className:s.textField,value:f,placeholder:f?"":"http://appserver/resource",onChange:e=>E(e.target.value),onBlur:()=>r(d,t,f),error:!f,helperText:f?"":i.a.createElement(q.a,{id:"Apis.Details.Endpoints.GenericEndpoint.no.ep.error",defaultMessage:"Endpoint URL should not be empty"}),variant:"outlined",margin:"normal",required:!0,InputProps:{readOnly:m,autoFocus:u,endAdornment:i.a.createElement(It.a,{position:"end"},C&&i.a.createElement(ue.a,{label:C,className:y?s.endpointValidChip:((e,t,a)=>e?t:a)(O,s.endpointErrorChip,s.endpointInvalidChip),variant:"outlined"}),!b.isWebSocket()&&i.a.createElement(Ta.a,{className:y?s.iconButtonValid:s.iconButton,"aria-label":"TestEndpoint",onClick:()=>(function(e,t){S(!0),(new Q.a).testEndpoint(e,t).then(e=>{null!==e.body.error?(A(e.body.error),w(!0)):(A(e.body.statusCode+" "+e.body.statusMessage),w(!1)),e.body.statusCode>=200&&e.body.statusCode<300?(v(!0),w(!1)):v(!1)}).finally(()=>{S(!1)})})(f,h),disabled:Object(o.b)(["apim:api_create"],b)||D},D?i.a.createElement(Ze.a,{size:20}):i.a.createElement(Ma.a,null,"check_circle")),"prototyped"===l?i.a.createElement("div",null):i.a.createElement(Ta.a,{className:s.iconButton,"aria-label":"Settings",onClick:()=>c(d,l,t),disabled:Object(o.b)(["apim:api_create"],b)},i.a.createElement(Ma.a,null,"settings")),d>0?i.a.createElement(oi.a,{className:s.divider}):i.a.createElement("div",null),"load_balance"===l||"failover"===l?i.a.createElement(Ta.a,{className:s.iconButton,"aria-label":"Delete",color:"secondary",onClick:()=>p(d,l,t),disabled:Object(o.b)(["apim:api_create"],b)},i.a.createElement(Ma.a,null,"delete")):i.a.createElement("div",null))}}))}To.defaultProps={readOnly:!1,autoFocus:!1,name:"Service URL"},To.propTypes={endpointURL:s.a.string.isRequired,deleteEndpoint:s.a.func.isRequired,classes:s.a.shape({}).isRequired,type:s.a.string.isRequired,setAdvancedConfigOpen:s.a.func.isRequired,index:s.a.number.isRequired,editEndpoint:s.a.func.isRequired,category:s.a.string.isRequired,readOnly:s.a.bool,autoFocus:s.a.bool,name:s.a.string,apiId:s.a.string.isRequired};var Io=Object(L.a)(e=>({endpointInputWrapper:{width:"100%",display:"flex",justifyContent:"space-between"},textField:{width:"100%"},input:{marginLeft:e.spacing(1),flex:1},iconButton:{padding:e.spacing(1)},iconButtonValid:{padding:e.spacing(1),color:le.a[500]},divider:{width:1,height:28,margin:4},endpointValidChip:{color:"green",border:"1px solid green"},endpointInvalidChip:{color:"#ffd53a",border:"1px solid #ffd53a"},endpointErrorChip:{color:"red",border:"1px solid red"}}))(To);function Mo(e){const{classes:t,addEndpoint:a}=e,[r,s]=Object(n.useState)(""),{api:l}=Object(n.useContext)(de.c);return i.a.createElement("div",{className:t.endpointInputWrapper},i.a.createElement(vt.a,{label:i.a.createElement(q.a,{id:"Apis.Details.Endpoints.GenericEndpoint.service.url.input",defaultMessage:"Service URL"}),disabled:Object(o.b)(["apim:api_create"],l),className:t.textField,value:r,fullWidth:!0,onChange:e=>s(e.target.value),variant:"outlined",margin:"normal",placeholder:"Enter the Endpoint URL and press + button",InputProps:{endAdornment:i.a.createElement(It.a,{position:"end"},i.a.createElement(Ta.a,{onClick:()=>{s(""),a(r)},color:"green",className:t.iconButton,"aria-label":"Search",disabled:""===r},i.a.createElement(Ma.a,null,"add")))}}))}Mo.propTypes={classes:s.a.shape({}).isRequired,addEndpoint:s.a.func.isRequired};var Ro=Object(L.a)(e=>({endpointInputWrapper:{width:"100%",display:"flex",justifyContent:"space-between"},textField:{width:"100%"},input:{marginLeft:e.spacing(1),flex:1},iconButton:{padding:e.spacing(1)}}))(Mo);function No(e){const{classes:t,category:a,apiEndpoints:r,epType:s,failOvers:o,editEndpoint:l,addNewEndpoint:c,removeEndpoint:p,setAdvancedConfigOpen:d,apiId:m}=e,[u,g]=Object(n.useState)(s),[h,f]=Object(n.useState)([{url:"http://myservice/endpoint"}]),E=Object(n.useRef)(null);return Object(n.useEffect)(()=>{g(s),f(()=>null!==r&&"failover"===s?[r].concat(o):void 0!==r?Array.isArray(r)?r:[r]:[{url:"http://myservice/"}])},[e]),i.a.createElement("div",{className:t.listingWrapper,ref:E},i.a.createElement(pe.a,{container:!0,xs:12},i.a.createElement(pe.a,{xs:12},"failover"===u||"load_balance"===u?i.a.createElement(Ro,{addEndpoint:e=>{c(a,s,e)}}):i.a.createElement("div",null)),i.a.createElement(pe.a,{xs:12},h.map((e,t)=>t>0?i.a.createElement(Io,{readOnly:!0,endpointURL:h[t]?h[t].url:"",type:u,index:t,category:a,editEndpoint:l,deleteEndpoint:p,setAdvancedConfigOpen:d,apiId:m}):i.a.createElement("div",null)))))}No.propTypes={classes:s.a.shape({epTypeWrapper:s.a.shape({}),epTypeName:s.a.shape({}),listingWrapper:s.a.shape({}),epConfig:s.a.shape({})}).isRequired,epType:s.a.string.isRequired,category:s.a.string.isRequired,apiEndpoints:s.a.shape({}).isRequired,failOvers:s.a.shape({}).isRequired,addNewEndpoint:s.a.func.isRequired,removeEndpoint:s.a.func.isRequired,editEndpoint:s.a.func.isRequired,setAdvancedConfigOpen:s.a.func.isRequired,apiId:s.a.string.isRequired};var jo=Object(q.d)(Object(L.a)(e=>({endpointInputWrapper:{display:"flex"},epInput:{width:"100%"},epTypeWrapper:{display:"flex",padding:"5px"},epTypeName:{paddingTop:"10px",fontWeight:600},epConfig:{justifyContent:"flex-end"},leftArrow:{paddingTop:"6px"},leftArrowLight:{color:"#c5c5c5",paddingTop:"6px"},dialogHeader:{fontWeight:600},listItemOdd:{background:"#ececec",borderRadius:"5px","&:hover":{backgroundColor:e.palette.grey[300]},"&:focus":{backgroundColor:e.palette.grey[400]}},listItem:{borderRadius:"5px","&:hover":{backgroundColor:e.palette.grey[300]},"&:focus":{backgroundColor:e.palette.grey[400]}}}))(No));function ko(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Lo(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ko(a,!0).forEach(function(t){qo(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ko(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function qo(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const _o=[{key:"org.apache.synapse.endpoints.algorithms.RoundRobin",value:"Round-Robin"},{key:"other",value:"Other"}],Wo=[{key:"http",value:"Transport"},{key:"soap",value:"SOAP"},{key:"simpleClientSession",value:"Client Id"},{key:"none",value:"None"}],Fo={algoClassName:_o[0].key,algoCombo:_o[0].key,sessionManagement:Wo[0].key,sessionTimeOut:300};function zo(e){const{algoClassName:t,algoCombo:a,sessionManagement:r,sessionTimeOut:s,handleLBConfigChange:l,closeLBConfigDialog:c,classes:p}=e,[d,m]=Object(n.useState)(Fo),[u,g]=Object(n.useState)(!1),{api:h}=Object(n.useContext)(de.c);Object(n.useEffect)(()=>{m(()=>{const e=Lo({},Fo);return a&&(e.algoCombo=a),r&&(e.sessionManagement=r),t&&(e.algoClassName=t),s&&(e.sessionTimeOut=s),e})},[e]);const f=(e,t)=>{m(Lo({},d,{[t]:e.target.value}))};return i.a.createElement(i.a.Fragment,null,i.a.createElement(pe.a,{container:!0,direction:"column"},i.a.createElement(vt.a,{id:"algorithmSelect",select:!0,label:i.a.createElement(q.a,{id:"Apis.Details.Endpoints.LoadBalanceConfig.algorithm",defaultMessage:"Algorithm"}),value:d.algoCombo,onChange:e=>{const{value:t}=e.target;m(Lo({},d,{algoCombo:t,algoClassName:"other"===t?"":Fo.algoClassName}))},helperText:"Please select the Loadbalance Algorithm.",margin:"normal",disabled:Object(o.b)(["apim:api_create"],h)},_o.map(e=>i.a.createElement(At.a,{key:e.key,value:e.key,selected:d.algoCombo},e.value))),"other"===d.algoCombo?i.a.createElement(vt.a,{id:"customAlgoInput",label:i.a.createElement(q.a,{id:"Apis.Details.Endpoints.LoadBalanceConfig.class.name.for.algorithm",defaultMessage:"Class Name for Algorithm"}),required:!0,error:u,value:d.algoClassName,onChange:e=>f(e,"algoClassName"),onBlur:()=>g(""===d.algoClassName),helperText:"Enter the class name of the loadbalance algorithm",disabled:Object(o.b)(["apim:api_create"],h),margin:"normal"}):i.a.createElement("div",null),i.a.createElement(vt.a,{id:"sessionMgtSelect",select:!0,label:i.a.createElement(q.a,{id:"Apis.Details.Endpoints.LoadBalanceConfig.session.management",defaultMessage:"Session Management"}),value:d.sessionManagement,onChange:e=>f(e,"sessionManagement"),helperText:"Please select the Session Management mechanism.",margin:"normal",disabled:Object(o.b)(["apim:api_create"],h)},Wo.map(e=>i.a.createElement(At.a,{key:e.key,value:e.key},e.value))),i.a.createElement(vt.a,{id:"sessionTimeout",label:i.a.createElement(q.a,{id:"Apis.Details.Endpoints.LoadBalanceConfig.session.timeout",defaultMessage:"Session Timeout (Millis)"}),value:d.sessionTimeOut,onChange:e=>f(e,"sessionTimeOut"),type:"number",placeholder:"300",margin:"normal",disabled:Object(o.b)(["apim:api_create"],h)})),i.a.createElement(pe.a,{className:p.configButtonContainer},i.a.createElement(Ne.a,{color:"primary",variant:"contained",autoFocus:!0,onClick:()=>{l(d)},disabled:""===d.algoClassName||Object(o.b)(["apim:api_create"],h),style:{marginRight:"10px"}},i.a.createElement(q.a,{id:"Apis.Details.Endpoints.EndpointOverview.loadbalance.config.save.button",defaultMessage:"Save"})),i.a.createElement(Ne.a,{onClick:c},i.a.createElement(q.a,{id:"Apis.Details.Endpoints.EndpointOverview.loadbalance.config.cancel.button",defaultMessage:"Close"}))))}zo.propTypes={api:s.a.shape({}).isRequired,classes:s.a.shape({}).isRequired,algoClassName:s.a.string.isRequired,algoCombo:s.a.string.isRequired,sessionManagement:s.a.string.isRequired,sessionTimeOut:s.a.string.isRequired,handleLBConfigChange:s.a.func.isRequired,closeLBConfigDialog:s.a.func.isRequired};var Bo=Object(q.d)(Object(L.a)(e=>({configButtonContainer:{display:"flex",justifyContent:"flex-end",paddingTop:e.spacing(1)}}))(zo));function Uo(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Vo(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Uo(a,!0).forEach(function(t){Ho(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Uo(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function Ho(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Go=[{key:"none",value:"None"},{key:"failover",value:"Failover"},{key:"load_balance",value:"Load Balanced"}];function Ko(e){const{epConfig:t,classes:a,endpointsDispatcher:r,toggleAdvanceConfig:s,globalEpType:l,handleEndpointCategorySelect:c}=e,{api:p}=Object(n.useContext)(de.c),[d,m]=Object(n.useState)(!1),[u,g]=Object(n.useState)(e),[h,f]=Object(n.useState)(!1);Object(n.useEffect)(()=>{const e=t.endpoint_type;g("http"===e||"address"===e?"none":e)},[e]);const E=(e,a,n)=>{const i=na()(t),s={endpoint_type:l.key,template_not_supported:!1,url:n},o=Eo(a,e);let c=i[o];c=c?Array.isArray(c)?c.concat(s):[c].concat(s):[s],i[o]=c,r({action:"add_endpoint",value:i})},b=(e,a,n)=>{const i=na()(t),s=Eo(a,n),o="failover"===a?e-1:e,l=i[s];l.splice(o,1),r({action:"remove_endpoint",value:Vo({},t,{[s]:l})})},y=()=>{};return i.a.createElement(i.a.Fragment,null,i.a.createElement(ra.a,{expanded:d||"load_balance"===u||"failover"===u,onChange:()=>m(!d),className:a.generalConfigPanel},i.a.createElement(sa.a,{expandIcon:i.a.createElement(ca.a,null),"aria-controls":"panel1bh-content",id:"panel1bh-header",className:a.configHeaderContainer},i.a.createElement(K.a,{className:a.secondaryHeading},(()=>{switch(u){case"none":return i.a.createElement(q.a,{id:"Apis.Details.Endpoints.LoadbalanceFailoverConfig.none.heading",defaultMessage:"Not Configured"});case"failover":return i.a.createElement(q.a,{id:"Apis.Details.Endpoints.LoadbalanceFailoverConfig.failover.heading",defaultMessage:"Failover Endpoints"});default:return i.a.createElement(q.a,{id:"Apis.Details.Endpoints.LoadbalanceFailoverConfig.loadbalance.heading",defaultMessage:"Load Balanced Endpoints"})}})())),i.a.createElement(oa.a,{className:a.generalConfigContent},t.production_endpoints||t.sandbox_endpoints?i.a.createElement(pe.a,{container:!0,item:!0,xs:12},i.a.createElement(pe.a,{xs:12,className:a.endpointsTypeSelectWrapper},i.a.createElement(vt.a,{disabled:Object(o.b)(["apim:api_create"],p),id:"certificateEndpoint",label:i.a.createElement(q.a,{id:"Apis.Details.Endpoints.LoadbalanceFailoverConfig.endpoint.type",defaultMessage:"Endpoint Type"}),value:u,placeholder:"Endpoint",onChange:e=>{g(e.target.value),c(e)},margin:"normal",variant:"outlined",select:!0,className:a.endpointTypeSelect},Go.map(e=>i.a.createElement(At.a,{value:e.key},e.value))),i.a.createElement("div",{className:a.lpConfigWrapper},i.a.createElement(Ta.a,{className:a.lbConfigBtn,disabled:"load_balance"!==t.endpoint_type,"aria-label":"Delete",onClick:()=>f(!0)},i.a.createElement(Ma.a,null,"settings")))),i.a.createElement(pe.a,{xs:12,container:!0,spacing:2},i.a.createElement(Da.a,{className:a.wrapper,in:"none"!==u},t.production_endpoints&&i.a.createElement(pe.a,{xs:12,className:a.endpointsWrapperLeft},i.a.createElement(K.a,{className:a.endpointName},"failover"===t.endpoint_type?i.a.createElement(q.a,{id:"Apis.Details.Endpoints.LoadbalanceFailoverConfig.production.failover.endpoint",defaultMessage:"Production Failover Endpoints"}):i.a.createElement(q.a,{id:"Apis.Details.Endpoints.LoadbalanceFailoverConfig.production.loadbalance.endpoint",defaultMessage:"Production Loadbalanced Endpoints"})),i.a.createElement(jo,{apiEndpoints:t.production_endpoints,failOvers:t.production_failovers,epType:t.endpoint_type,addNewEndpoint:E,removeEndpoint:b,editEndpoint:y,setAdvancedConfigOpen:s,category:"production_endpoints",apiId:p.id})),t.sandbox_endpoints&&i.a.createElement(pe.a,{xs:12,className:a.endpointsWrapperRight},i.a.createElement(K.a,{className:a.endpointName},"failover"===t.endpoint_type?i.a.createElement(q.a,{id:"Apis.Details.Endpoints.LoadbalanceFailoverConfig.sandbox.failover.endpoint",defaultMessage:"Sandbox Failover Endpoints"}):i.a.createElement(q.a,{id:"Apis.Details.Endpoints.LoadbalanceFailoverConfig.sandbox.loadbalance.endpoint",defaultMessage:"Sandbox Loadbalanced Endpoints"})),i.a.createElement(jo,{apiEndpoints:t.sandbox_endpoints,failOvers:t.sandbox_failovers,epType:t.endpoint_type,addNewEndpoint:E,removeEndpoint:b,editEndpoint:y,setAdvancedConfigOpen:s,category:"sandbox_endpoints",apiId:p.id}))))):i.a.createElement(si.a,null,i.a.createElement("div",{className:a.contentWrapper},i.a.createElement(K.a,{component:"p",className:a.content},i.a.createElement(q.a,{id:"Apis.Details.Endpoints.LoadbalanceFailoverConfig.no.endpoints.message",defaultMessage:"Add Production/ Sandbox endpoints to configure."})))))),i.a.createElement(ha.a,{open:h},i.a.createElement(ya.a,null,i.a.createElement(K.a,{className:a.configDialogHeader},i.a.createElement(q.a,{id:"Apis.Details.Endpoints.LoadbalanceFailoverConfig.load.balance.configuration.title",defaultMessage:"Load Balance Configurations"}))),i.a.createElement(Ea.a,null,i.a.createElement(Bo,{handleLBConfigChange:e=>{r({action:"set_lb_config",value:Vo({},t,{},e)}),f(!1)},closeLBConfigDialog:()=>f(!1),algoCombo:t.algoCombo,algoClassName:t.algoClassName,sessionTimeOut:t.sessionTimeOut,sessionManagement:t.sessionManagement}))))}Ko.propTypes={epConfig:s.a.shape({}).isRequired,endpointSecurityInfo:s.a.shape({}).isRequired,endpointType:s.a.shape({}).isRequired,classes:s.a.shape({}).isRequired,endpointsDispatcher:s.a.func.isRequired,toggleAdvanceConfig:s.a.func.isRequired,handleEndpointCategorySelect:s.a.func.isRequired,globalEpType:s.a.shape({}).isRequired,intl:s.a.shape({}).isRequired};var Yo=Object(q.d)(Object(L.a)(e=>({endpointTypeSelect:{width:"50%",marginTop:e.spacing(1)},configHeaderContainer:{display:"flex",justifyContent:"space-between"},generalConfigContent:{boxShadow:"inset -1px 2px 3px 0px #c3c3c3"},secondaryHeading:{fontSize:e.typography.pxToRem(15),color:e.palette.text.secondary,display:"flex"},heading:{fontSize:e.typography.pxToRem(15),flexBasis:"33.33%",flexShrink:0,fontWeight:"900"},endpointConfigSection:{padding:"10px"},generalConfigPanel:{width:"100%"},endpointsTypeSelectWrapper:{display:"flex",marginTop:e.spacing(2),marginBottom:e.spacing(2)},lbConfigBtn:{position:"relative",top:"10px"},endpointName:{fontWeight:600},wrapper:{width:"100%"}}))(Ko)),Jo=a(1196);function Qo(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Zo(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Qo(a,!0).forEach(function(t){Xo(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Qo(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function Xo(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const $o={PaperProps:{style:{maxHeight:224,width:250}}};function el(e){const{api:t}=Object(n.useContext)(de.c),{classes:a,intl:r,advanceConfig:s,isSOAPEndpoint:l,onSaveAdvanceConfig:c,onCancel:p}=e,[d,m]=Object(n.useState)(()=>{const e={};return l&&(e.format="soap11",e.optimize="SWA"),e.actionDuration="300",e.actionSelect="fault",e.factor="",e.retryDelay="",e.retryErroCode=[],e.retryTimeOut="",e.suspendDuration="",e.suspendErrorCode=[],e.suspendMaxDuration="",e}),u=[{key:"101001",value:"101001 : "+r.formatMessage({id:"Apis.Details.Endpoints.AdvancedConfig.AdvanceEndpointConfig.receiver.io.error.receiving",defaultMessage:"Receiver IO error Receiving"})},{key:"101500",value:"101500 : "+r.formatMessage({id:"Apis.Details.Endpoints.AdvancedConfig.AdvanceEndpointConfig.sender.io.error.sending",defaultMessage:"Sender IO Error Sending"})},{key:"101000",value:"101000 : "+r.formatMessage({id:"Apis.Details.Endpoints.AdvancedConfig.AdvanceEndpointConfig.receiver.io.error.sending",defaultMessage:"Retriever IO Error Sending"})},{key:"101501",value:"101501 : "+r.formatMessage({id:"Apis.Details.Endpoints.AdvancedConfig.AdvanceEndpointConfig.sender.io.error.receiving",defaultMessage:"Sender IO Error Receiving"})},{key:"101503",value:"101503 : "+r.formatMessage({id:"Apis.Details.Endpoints.AdvancedConfig.AdvanceEndpointConfig.connection.failed",defaultMessage:"Connection Failed"})},{key:"101504",value:"101504 : "+r.formatMessage({id:"Apis.Details.Endpoints.AdvancedConfig.AdvanceEndpointConfig.connection.timed.out",defaultMessage:"Connection Timed Out"})},{key:"101505",value:"101505 : "+r.formatMessage({id:"Apis.Details.Endpoints.AdvancedConfig.AdvanceEndpointConfig.connection.closed",defaultMessage:"Connection Closed"})},{key:"101506",value:"101506 : "+r.formatMessage({id:"Apis.Details.Endpoints.AdvancedConfig.AdvanceEndpointConfig.tpp.protocol.violation",defaultMessage:"TTP Protocol Violation"})},{key:"101507",value:"101507 : "+r.formatMessage({id:"Apis.Details.Endpoints.AdvancedConfig.AdvanceEndpointConfig.connect.cancel",defaultMessage:"Connect Cancel"})},{key:"101508",value:"101508 : "+r.formatMessage({id:"Apis.Details.Endpoints.AdvancedConfig.AdvanceEndpointConfig.connect.timeout",defaultMessage:"Connect Timeout"})},{key:"101509",value:"101509 : "+r.formatMessage({id:"Apis.Details.Endpoints.AdvancedConfig.AdvanceEndpointConfig.send.abort",defaultMessage:"Send Abort"})},{key:"101510",value:"101510 : "+r.formatMessage({id:"Apis.Details.Endpoints.AdvancedConfig.AdvanceEndpointConfig.response.processing.failure",defaultMessage:"Response Processing Failure"})}],g=[{key:"fault",value:r.formatMessage({id:"Apis.Details.Endpoints.AdvancedConfig.AdvanceEndpointConfig.execute.fault.sequence",defaultMessage:"Execute Fault Sequence"})},{key:"discard",value:r.formatMessage({id:"Apis.Details.Endpoints.AdvancedConfig.AdvanceEndpointConfig.discard.message",defaultMessage:"Discard Message"})}],h=[{key:"soap11",value:"SOAP 1.1"},{key:"soap12",value:"SOAP 1.2"},{key:"POX",value:r.formatMessage({id:"Apis.Details.Endpoints.AdvancedConfig.AdvanceEndpointConfig.plain.old.xml",defaultMessage:"Plain Old XML (POX)"})},{key:"REST",value:r.formatMessage({id:"Apis.Details.Endpoints.AdvancedConfig.AdvanceEndpointConfig.representational.state.transfer",defaultMessage:"Representational State Transfer (REST)"})},{key:"GET",value:"GET"},{key:"leave-as-is",value:r.formatMessage({id:"Apis.Details.Endpoints.AdvancedConfig.AdvanceEndpointConfig.leave.as.is",defaultMessage:"Leave As-Is"})}],f=[{key:"SWA",value:"SWA"},{key:"MTOM",value:"MTOM"},{key:"leave-as-is",value:r.formatMessage({id:"Apis.Details.Endpoints.AdvancedConfig.AdvanceEndpointConfig.leave.as.is",defaultMessage:"Leave As-Is"})}];Object(n.useEffect)(()=>{m(()=>s==={}?Zo({},d):Zo({},d,{},s))},[e]);const E=(e,t)=>{const a=Zo({},d,{[t]:e.target.value});m(a)};return i.a.createElement(pe.a,{container:!0,direction:"column",className:a.configContainer},l?i.a.createElement(pe.a,{item:!0,container:!0,className:a.configSubContainer},i.a.createElement(K.a,{className:a.subTitle},i.a.createElement(q.a,{id:"Apis.Details.Endpoints.AdvancedConfig.AdvanceEndpointConfig.message.content",defaultMessage:"Message Content"})),i.a.createElement(ft.a,{className:a.formControl},i.a.createElement(Nr.a,{htmlFor:"err-code-select"},i.a.createElement(q.a,{id:"Apis.Details.Endpoints.AdvancedConfig.AdvanceEndpointConfig.format.select",defaultMessage:"Format"})),i.a.createElement(Ji.a,{autoWidth:!1,value:d.format,onChange:e=>E(e,"format"),input:i.a.createElement(Jo.a,{id:"err-code-select"}),MenuProps:$o},h.map(e=>i.a.createElement(At.a,{key:e.key,value:e.key},e.value)))),i.a.createElement(ft.a,{className:a.formControl},i.a.createElement(Nr.a,{htmlFor:"err-code-select"},i.a.createElement(q.a,{id:"Apis.Details.Endpoints.AdvancedConfig.AdvanceEndpointConfig.optimize.select",defaultMessage:"Optimize"})),i.a.createElement(Ji.a,{autoWidth:!1,value:d.optimize,onChange:e=>E(e,"optimize"),input:i.a.createElement(Jo.a,{id:"err-code-select"}),MenuProps:$o},f.map(e=>i.a.createElement(At.a,{key:e.key,value:e.key},e.value)))),i.a.createElement(oi.a,null)):i.a.createElement("div",null),i.a.createElement(pe.a,{item:!0,container:!0,className:a.configSubContainer},i.a.createElement(K.a,{className:a.subTitle},i.a.createElement(q.a,{id:"Endpoint.Suspension.State",defaultMessage:"Endpoint Suspension State"})),i.a.createElement(ft.a,{className:a.formControl},i.a.createElement(Nr.a,{htmlFor:"err-code-select"},i.a.createElement(q.a,{id:"Apis.Details.Endpoints.AdvancedConfig.AdvanceEndpointConfig.error.code",defaultMessage:"Error Code"})),i.a.createElement(Ji.a,{multiple:!0,autoWidth:!1,value:d.suspendErrorCode,onChange:e=>E(e,"suspendErrorCode"),input:i.a.createElement(Jo.a,{id:"err-code-select"}),MenuProps:$o,variant:"outlined"},u.map(e=>i.a.createElement(At.a,{key:e.key,value:e.key},e.value)))),i.a.createElement(vt.a,{className:a.textField,id:"initial-duration-input",value:d.suspendDuration,onChange:e=>E(e,"suspendDuration"),label:i.a.createElement(q.a,{id:"Apis.Details.Endpoints.AdvancedConfig.AdvanceEndpointConfig.initial.duration.ms",defaultMessage:"Initial Duration (ms)"}),margin:"normal",type:"number"}),i.a.createElement(vt.a,{className:a.textField,id:"max-duration-input",value:d.suspendMaxDuration,onChange:e=>E(e,"suspendMaxDuration"),label:i.a.createElement(q.a,{id:"Apis.Details.Endpoints.AdvancedConfig.AdvanceEndpointConfig.max.duration.ms",defaultMessage:"Max Duration (ms)"}),margin:"normal",type:"number"}),i.a.createElement(vt.a,{className:a.textField,value:d.factor,onChange:e=>E(e,"factor"),id:"factor-input",label:i.a.createElement(q.a,{id:"Apis.Details.Endpoints.AdvancedConfig.AdvanceEndpointConfig.factor",defaultMessage:"Factor"}),margin:"normal"})),i.a.createElement(oi.a,null),i.a.createElement(pe.a,{item:!0,container:!0,className:a.configSubContainer},i.a.createElement(K.a,{className:a.subTitle},i.a.createElement(q.a,{id:"Apis.Details.Endpoints.AdvancedConfig.AdvanceEndpointConfig.endpoint.timeout.state",defaultMessage:"Endpoint Timeout State"})),i.a.createElement(ft.a,{className:a.formControl},i.a.createElement(Nr.a,{htmlFor:"err-code-select"},i.a.createElement(q.a,{id:"Apis.Details.Endpoints.AdvancedConfig.AdvanceEndpointConfig.error.code",defaultMessage:"Error Code"})),i.a.createElement(Ji.a,{multiple:!0,autoWidth:!1,value:d.retryErroCode,onChange:e=>E(e,"retryErroCode"),input:i.a.createElement(Jo.a,{id:"err-code-select"}),MenuProps:$o},u.map(e=>i.a.createElement(At.a,{key:e.key,value:e.key},e.value)))),i.a.createElement(vt.a,{className:a.textField,id:"retries-input",value:d.retryTimeOut,onChange:e=>E(e,"retryTimeOut"),label:i.a.createElement(q.a,{id:"Apis.Details.Endpoints.AdvancedConfig.AdvanceEndpointConfig.retries.before.suspension",defaultMessage:"Retries Before Suspension"}),type:"number",margin:"normal"}),i.a.createElement(vt.a,{className:a.textField,id:"retry-delay-input",value:d.retryDelay,onChange:e=>E(e,"retryDelay"),label:i.a.createElement(q.a,{id:"Apis.Details.Endpoints.AdvancedConfig.AdvanceEndpointConfig.retry.delay.ms",defaultMessage:"Retry Delay (ms)"}),type:"number",margin:"normal"})),i.a.createElement(oi.a,null),i.a.createElement(pe.a,{item:!0,container:!0,className:a.configSubContainer},i.a.createElement(K.a,{className:a.subTitle},i.a.createElement(q.a,{id:"Connection.Timeout",defaultMessage:"Connection Timeout"})),i.a.createElement(ft.a,{className:a.formControl},i.a.createElement(Nr.a,{htmlFor:"err-code-select"},i.a.createElement(q.a,{id:"Apis.Details.Endpoints.AdvancedConfig.AdvanceEndpointConfig.action",defaultMessage:"Action"})),i.a.createElement(Ji.a,{autoWidth:!1,value:d.actionSelect,onChange:e=>E(e,"actionSelect"),input:i.a.createElement(Jo.a,{id:"err-code-select"}),MenuProps:$o},g.map(e=>i.a.createElement(At.a,{key:e.key,value:e.key},e.value)))),i.a.createElement(vt.a,{className:a.textField,id:"duration-input",value:d.actionDuration,onChange:e=>E(e,"actionDuration"),label:i.a.createElement(q.a,{id:"Apis.Details.Endpoints.AdvancedConfig.AdvanceEndpointConfig.duration.ms",defaultMessage:"Duration (ms)"}),type:"number",margin:"normal"})),i.a.createElement(pe.a,{className:a.advanceDialogActions},i.a.createElement(Ne.a,{onClick:()=>c(d),color:"primary",autoFocus:!0,disabled:Object(o.b)(["apim:api_create"],t),variant:"contained",style:{marginRight:"10px"}},i.a.createElement(q.a,{id:"Apis.Details.Endpoints.AdvancedConfig.AdvanceEndpointConfig.config.save.button",defaultMessage:"Save"})),i.a.createElement(Ne.a,{onClick:p},i.a.createElement(q.a,{id:"Apis.Details.Endpoints.AdvancedConfig.AdvanceEndpointConfig.cancel.button",defaultMessage:"Close"}))))}el.propTypes={classes:s.a.shape({configContainer:s.a.shape({}),configSubContainer:s.a.shape({}),subTitle:s.a.shape({}),formControl:s.a.shape({})}).isRequired,intl:s.a.shape({formatMessage:s.a.func}).isRequired,advanceConfig:s.a.shape({}).isRequired,isSOAPEndpoint:s.a.bool.isRequired,onSaveAdvanceConfig:s.a.func.isRequired,onCancel:s.a.func.isRequired};var tl=Object(q.d)(Object(L.a)(e=>({formControl:{width:"500px"},subTitle:{fontSize:"1rem",paddingTop:e.spacing(1),paddingBottom:e.spacing(1),marginBottom:e.spacing(1)},configContainer:{paddingTop:"10px"},configSubContainer:{paddingBottom:"10px",marginTop:"5px",padding:"5px"},textField:{marginRight:e.spacing(1),width:"45%"},advanceDialogActions:{display:"flex",justifyContent:"flex-end"}}),{withTheme:!0})(el));function al(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function nl(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?al(a,!0).forEach(function(t){il(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):al(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function il(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const rl=Object(Ue.a)(e=>({typography:{display:"inline-block"},textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),width:300},selectField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),width:300},helpIcon:{fontSize:20},banner:{marginLeft:e.spacing(1),marginRight:e.spacing(1),marginTop:e.spacing(1),marginBottom:e.spacing(1)}}));function sl(e){const{apiId:t,endpointConfig:a,endpointsDispatcher:r}=e,s=rl(),[o,l]=Object(n.useState)(null),c=Object(n.useRef)(null);return Object(n.useEffect)(()=>{Q.a.getAmznResourceNames(t).catch(e=>{l(e.response.body.error)})},[]),i.a.createElement(i.a.Fragment,null,i.a.createElement(K.a,{className:s.typography},i.a.createElement(q.a,{id:"Apis.Details.Endpoints.EndpointOverview.awslambda.endpoint.accessMethod",defaultMessage:"Access Method"})),i.a.createElement(ht.a,{"aria-label":"accessMethod",name:"accessMethod",value:a.access_method,onChange:e=>{const t=nl({},a);t.access_method=e.target.value,t.amznAccessKey="",t.amznSecretKey="",t.amznRegion="",r({action:"set_awsCredentials",value:t}),l(null)}},i.a.createElement("div",null,i.a.createElement(Et.a,{value:"role-supplied",control:i.a.createElement(gt.a,{color:"primary"}),label:i.a.createElement(q.a,{id:"Apis.Details.Endpoints.EndpointOverview.awslambda.endpoint.accessMethod.roleSupplied",defaultMessage:"Using IAM role-supplied temporary AWS credentials"})}),i.a.createElement(ie.a,{title:i.a.createElement(q.a,{id:"Apis.Details.Endpoints.EndpointOverview.awslambda.endpoint.tooltip",defaultMessage:"You can and should use an IAM role to manage temporary credentials for applications that run on an EC2 instance"})},i.a.createElement(Ma.a,{className:s.helpIcon},"help_outline"))),i.a.createElement("div",null,i.a.createElement(Et.a,{value:"stored",control:i.a.createElement(gt.a,{color:"primary"}),label:i.a.createElement(q.a,{id:"Apis.Details.Endpoints.EndpointOverview.awslambda.endpoint.accessMethod.stored",defaultMessage:"Using stored AWS credentials"})}))),i.a.createElement(pe.a,{item:!0},i.a.createElement(vt.a,{required:!0,disabled:"role-supplied"===a.access_method,id:"outlined-required",label:i.a.createElement(q.a,{id:"Apis.Details.Endpoints.EndpointOverview.awslambda.endpoint.accessKey",defaultMessage:"Access Key"}),margin:"normal",variant:"outlined",className:s.textField,value:a.amznAccessKey,onChange:e=>{const t=nl({},a);t.amznAccessKey=e.target.value,r({action:"set_awsCredentials",value:t})}}),i.a.createElement(vt.a,{required:!0,disabled:"role-supplied"===a.access_method,id:"outlined-password-input-required",label:i.a.createElement(q.a,{id:"Apis.Details.Endpoints.EndpointOverview.awslambda.endpoint.secretKey",defaultMessage:"Secret Key"}),type:"password",margin:"normal",variant:"outlined",className:s.textField,value:a.amznSecretKey,onChange:e=>{const t=nl({},a);t.amznSecretKey=e.target.value,r({action:"set_awsCredentials",value:t})}}),i.a.createElement(ft.a,{required:!0,margin:"normal",variant:"outlined",disabled:"role-supplied"===a.access_method},i.a.createElement(Nr.a,{ref:c,id:"region-label"},i.a.createElement(q.a,{id:"Apis.Details.Endpoints.EndpointOverview.awslambda.endpoint.region",defaultMessage:"Region"})),i.a.createElement(Ji.a,{labelId:"region-label",autoWidth:!1,className:s.selectField,onChange:e=>{const t=nl({},a);t.amznRegion=e.target.value,r({action:"set_awsCredentials",value:t})},value:a.amznRegion},[{key:"us-east-1",value:"us-east-1: US East (N. Virginia)"},{key:"us-east-2",value:"us-east-2: US East (Ohio)"},{key:"us-west-1",value:"us-west-1: US West (N. California)"},{key:"us-west-2",value:"us-west-2: US West (Oregon)"},{key:"ap-east-1",value:"ap-east-1: Asia Pacific (Hong Kong)"},{key:"ap-south-1",value:"ap-south-1: Asia Pacific (Mumbai)"},{key:"ap-northeast-1",value:"ap-northeast-1: Asia Pacific (Tokyo)"},{key:"ap-northeast-2",value:"ap-northeast-2: Asia Pacific (Seoul)"},{key:"ap-northeast-3",value:"ap-northeast-3: Asia Pacific (Osaka-Local)"},{key:"ap-southeast-1",value:"ap-southeast-1: Asia Pacific (Singapore)"},{key:"ap-southeast-2",value:"ap-southeast-2: Asia Pacific (Sydney)"},{key:"ca-central-1",value:"ca-central-1: Canada (Central)"},{key:"eu-central-1",value:"eu-central-1: Europe (Frankfurt)"},{key:"eu-west-1",value:"eu-west-1: Europe (Ireland)"},{key:"eu-west-2",value:"eu-west-2: Europe (London)"},{key:"eu-west-3",value:"eu-west-3: Europe (Paris)"},{key:"eu-north-1",value:"eu-north-1: Europe (Stockholm)"},{key:"me-south-1",value:"me-south-1: Middle East (Bahrain)"},{key:"sa-east-1",value:"sa-east-1: South America (São Paulo)"}].map(e=>i.a.createElement(At.a,{key:e.key,value:e.key},e.value))))),i.a.createElement(pe.a,{item:!0},i.a.createElement(W.b,{to:"/apis/".concat(t,"/resources")},i.a.createElement(K.a,{style:{marginLeft:"10px"},color:"primary",display:"inline",variant:"caption"},i.a.createElement(q.a,{id:"Apis.Details.Endpoints.EndpointOverview.awslambda.endpoint.linkToResources",defaultMessage:"Goto Resources to map ARNs"}),i.a.createElement(fe.a,{style:{marginLeft:"2px"},fontSize:"small"})))),o&&i.a.createElement(pe.a,{item:!0,className:s.banner},i.a.createElement(Rn.a,{disableActions:!0,dense:!0,paperProps:{elevation:1},type:"warning",message:o})))}function ol(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function ll(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ol(a,!0).forEach(function(t){cl(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ol(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function cl(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}sl.propTypes={apiId:s.a.shape("").isRequired,endpointConfig:s.a.shape({}).isRequired,endpointsDispatcher:s.a.func.isRequired};const pl=[{key:"http",value:"HTTP/REST Endpoint"},{key:"default",value:"Dynamic Endpoints"},{key:"address",value:"HTTP/SOAP Endpoint"},{key:"prototyped",value:"Prototype Endpoint"},{key:"INLINE",value:"Prototype Implementation"},{key:"awslambda",value:"AWS Lambda"}];function dl(e){const{classes:t,api:a,endpointsDispatcher:r,swaggerDef:s,updateSwagger:l,saveAndRedirect:c}=e,{endpointConfig:p,endpointSecurity:d}=a,[m,u]=Object(n.useState)(pl[0]),[g,h]=Object(n.useState)([]),[f,E]=Object(n.useState)(p),[b,y]=Object(n.useState)(null),[v,C]=Object(n.useState)({open:!1,index:0,type:"",category:"",config:void 0}),[A,D]=Object(n.useState)({sandbox:!1,prod:!1}),[S,O]=Object(n.useState)({openDialog:!1});Object(n.useEffect)(()=>{const e=(e=>{const{type:t}=e;let a=[];return a="GRAPHQL"===t?[{key:"http",value:"HTTP/REST Endpoint"},{key:"default",value:"Dynamic Endpoints"}]:"SOAP"===t||"SOAPTOREST"===t?[{key:"http",value:"HTTP/REST Endpoint"},{key:"address",value:"HTTP/SOAP Endpoint"},{key:"default",value:"Dynamic Endpoints"},{key:"prototyped",value:"Prototype Endpoint"}]:[{key:"http",value:"HTTP/REST Endpoint"},{key:"address",value:"HTTP/SOAP Endpoint"},{key:"default",value:"Dynamic Endpoints"},{key:"prototyped",value:"Prototype Endpoint"},{key:"INLINE",value:"Prototype Implementation"},{key:"awslambda",value:"AWS Lambda"}]})(a),t=(e=>{const t=e.endpointConfig&&e.endpointConfig.endpoint_type;if("INLINE"===e.endpointImplementationType)return pl[4];if("ENDPOINT"===e.endpointImplementationType&&"prototyped"===e.endpointConfig.implementation_status)return pl[3];if("http"===t)return pl[0];if("default"===t)return pl[1];if("address"===t)return pl[2];if("awslambda"===t)return pl[5];{const e=p.production_endpoints&&p.production_endpoints||p.sandbox_endpoints&&p.sandbox_endpoints;return e?Array.isArray(e)?void 0!==e[0].endpoint_type?pl[2]:pl[0]:void 0!==e.endpoint_type?pl[2]:pl[0]:pl[0]}})(a);"INLINE"!==t.key&&D({prod:!!p.production_endpoints,sandbox:!!p.sandbox_endpoints}),h(e),E(p),u(t),y(d)},[e]);const w=e=>f[e]?f[e].length>0?f[e][0].url:f[e].url:"",P=e=>{let t=na()(p);if("prod"===e){const a="production_endpoints";A[e]?(delete t[a],"failover"===t.endpointType&&delete t.production_failovers):"load_balance"===t.endpointType?t[a]=[vo(m.key)]:"failover"===t.endpointType?(t[a]=vo(m.key),t.production_failovers=[]):t[a]=vo(m.key)}else{const a="sandbox_endpoints";A[e]?(delete t[a],"failover"===t.endpointType&&delete t.sandbox_failovers):"load_balance"===t.endpointType?t[a]=[vo(m.key)]:"failover"===t.endpointType?(t[a]=vo(m.key),t.sandbox_failovers=[]):t[a]=vo(m.key)}t.production_endpoints||t.sandbox_endpoints||(t=yo("http")),r({action:"select_endpoint_category",value:t})},x=(e,t,a)=>{let n=null;const i=na()(f);if(e>0){const r=Eo(i.endpoint_type,t);n=i[r],"failover"===i.endpoint_type?n[e-1].url=a.trim():n[e].url=a.trim(),i[r]=n}else""!==a?((n=i[t])?Array.isArray(n)?""===a?n.splice(0,1):n[0].url=a.trim():n.url=a.trim():(n=vo(i.endpoint_type)).url=a.trim(),i[t]=n):delete i[t];r({action:t,value:n})},T=e=>{O({openDialog:!1});const t=S.type||e;if("INLINE"===t){const e=yo("prototyped");r({action:"set_inline",value:{endpointConfig:e,endpointImplementationType:"INLINE"}})}else if("prototyped"===t){const e=yo(t);r({action:"set_prototyped",value:{endpointImplementationType:"ENDPOINT",endpointConfig:e}})}else if("awslambda"===t){const e=yo(t);r({action:"select_endpoint_type",value:{endpointImplementationType:"ENDPOINT",endpointConfig:ll({},e)}})}else{const e=yo(t);r({action:"select_endpoint_type",value:{endpointImplementationType:"ENDPOINT",endpointConfig:ll({},e)}})}},I=e=>{f.production_endpoints||f.sandbox_endpoints?O({type:e.target.value,openDialog:!0}):T(e.target.value)},M=(e,t,a)=>{const n=((e,t,a)=>{const n=Eo(t,a);let i={};if(e>0)i="failover"===f.endpoint_type?f[n][e-1].config:f[n][e].config;else{const e=f[n];i=Array.isArray(e)?e[0].config:e.config}return i})(e,t,a);C(()=>({open:!v.open,index:e,type:t,category:a,config:void 0===n?{}:n}))};return i.a.createElement("div",{className:t.overviewWrapper},i.a.createElement(pe.a,{container:!0,spacing:2},i.a.createElement(pe.a,{item:!0,xs:12},"WS"===a.type?i.a.createElement("div",null):i.a.createElement(ft.a,{component:"fieldset",className:t.formControl},i.a.createElement(ht.a,{"aria-label":"EndpointType",name:"endpointType",className:t.radioGroup,value:m.key,onChange:I},g.map(e=>{if("CREATED"===a.lifeCycleStatus)return i.a.createElement(Et.a,{value:e.key,control:i.a.createElement(gt.a,{disabled:Object(o.b)(["apim:api_create"],a),color:"primary"}),label:e.value});if("PROTOTYPED"===a.lifeCycleStatus){if("prototyped"===e.key||"INLINE"===e.key)return i.a.createElement(Et.a,{value:e.key,control:i.a.createElement(gt.a,{disabled:Object(o.b)(["apim:api_create"],a),color:"primary"}),label:e.value})}else if("prototyped"!==e.key&&"INLINE"!==e.key)return i.a.createElement(Et.a,{value:e.key,control:i.a.createElement(gt.a,{disabled:Object(o.b)(["apim:api_create"],a),color:"primary"}),label:e.value});return i.a.createElement("div",null)})))),i.a.createElement(pe.a,{item:!0,xs:12},"INLINE"===m.key?i.a.createElement(ho,{paths:s.paths,updatePaths:e=>{l(ll({},s,{paths:e}))}}):i.a.createElement(ce.a,{className:t.endpointContainer},"awslambda"===m.key?i.a.createElement(sl,{apiId:a.id,endpointConfig:p,endpointsDispatcher:r}):i.a.createElement(i.a.Fragment,null,"prototyped"===m.key?i.a.createElement(K.a,null,i.a.createElement(q.a,{id:"Apis.Details.Endpoints.EndpointOverview.prototype.endpoint.prototype.label",defaultMessage:"Prototype Endpoint"})):i.a.createElement(Et.a,{control:i.a.createElement(zt.a,{checked:A.prod,value:"prod",color:"primary",onChange:function(e){P("prod",e)}}),label:i.a.createElement(K.a,null,i.a.createElement(q.a,{id:"Apis.Details.Endpoints.EndpointOverview.production.endpoint.production.label",defaultMessage:"Production Endpoint"}))}),i.a.createElement(Da.a,{in:A.prod},"default"===m.key?i.a.createElement(si.a,null,i.a.createElement("div",{className:t.contentWrapper},i.a.createElement(K.a,{component:"p",className:t.content},i.a.createElement(q.a,{id:"Apis.Details.Endpoints.EndpointOverview.upload.mediation.message",defaultMessage:"Please upload a mediation sequence file to Message Mediation Policies, which sets the endpoints."}),i.a.createElement(Ta.a,{onClick:c},i.a.createElement(fe.a,{style:{marginLeft:"2px"},fontSize:"small",color:"primary"})))),i.a.createElement(Ne.a,{className:t.button,"aria-label":"Settings",onClick:()=>M(0,"","production_endpoints"),disabled:Object(o.b)(["apim:api_create"],a),variant:"outlined"},i.a.createElement(Ma.a,{className:t.buttonIcon},"settings"),i.a.createElement(K.a,null,i.a.createElement(q.a,{id:"Apis.Details.Endpoints.EndpointOverview.advance.endpoint.configuration",defaultMessage:"Advanced Configurations"})))):i.a.createElement(Io,{autoFocus:!0,name:"prototyped"===m.key?i.a.createElement(q.a,{id:"Apis.Details.Endpoints.EndpointOverview.prototype.endpoint.prototype.header",defaultMessage:"Prototype Endpoint"}):i.a.createElement(q.a,{id:"Apis.Details.Endpoints.EndpointOverview.production.endpoint.production.header",defaultMessage:"Production Endpoint"}),className:t.defaultEndpointWrapper,endpointURL:w("production_endpoints"),type:"",index:0,category:"production_endpoints",editEndpoint:x,setAdvancedConfigOpen:M,apiId:a.id})),"prototyped"===m.key?i.a.createElement("div",null):i.a.createElement("div",null,i.a.createElement(Et.a,{control:i.a.createElement(zt.a,{checked:A.sandbox,value:"sandbox",color:"primary",onChange:e=>P("sandbox",e)}),label:i.a.createElement(q.a,{id:"Apis.Details.Endpoints.EndpointOverview.sandbox.endpoint",defaultMessage:"Sandbox Endpoint"})}),i.a.createElement(Da.a,{in:A.sandbox},"default"===m.key?i.a.createElement(si.a,null,i.a.createElement("div",{className:t.contentWrapper},i.a.createElement(K.a,{component:"p",className:t.content},i.a.createElement(q.a,{id:"Apis.Details.Endpoints.EndpointOverview.upload.mediation.message",defaultMessage:"Please upload a mediation sequence file to Message Mediation Policies, which sets the endpoints."}),i.a.createElement(Ta.a,{onClick:c},i.a.createElement(fe.a,{style:{marginLeft:"2px"},fontSize:"small",color:"primary"})))),i.a.createElement(Ne.a,{className:t.button,"aria-label":"Settings",onClick:()=>M(0,"","sandbox_endpoints"),disabled:Object(o.b)(["apim:api_create"],a),variant:"outlined"},i.a.createElement(Ma.a,{className:t.buttonIcon},"settings"),i.a.createElement(K.a,null,i.a.createElement(q.a,{id:"Apis.Details.Endpoints.EndpointOverview.advance.endpoint.configuration",defaultMessage:"Advanced Configurations"})))):i.a.createElement(Io,{autoFocus:!0,name:"Sandbox Endpoint",className:t.defaultEndpointWrapper,endpointURL:w("sandbox_endpoints"),type:"",index:0,category:"sandbox_endpoints",editEndpoint:x,setAdvancedConfigOpen:M,apiId:a.id})))))),"INLINE"===m.key||"prototyped"===m.key||"awslambda"===m.key||"WS"===a.type?i.a.createElement("div",null):i.a.createElement(pe.a,{item:!0,xs:12},i.a.createElement(K.a,{variant:"h4",align:"left",className:t.titleWrapper,gutterBottom:!0},i.a.createElement(q.a,{id:"Apis.Details.Endpoints.EndpointOverview.general.config.header",defaultMessage:"General Endpoint Configurations"})),i.a.createElement(xo,{epConfig:na()(f),endpointSecurityInfo:b,handleToggleEndpointSecurity:()=>{const e=null===b?{type:"BASIC",username:null,password:null}:null;y(e),r({action:"endpointSecurity",value:e})},handleEndpointSecurityChange:(e,t)=>{r({action:"endpointSecurity",value:ll({},b,{[t]:e})})},endpointType:m})),"INLINE"===m.key||"default"===m.key||"prototyped"===m.key||"WS"===a.type||"awslambda"===m.key?i.a.createElement("div",null):i.a.createElement(pe.a,{item:!0,xs:12},i.a.createElement(K.a,{variant:"h4",align:"left",className:t.titleWrapper,gutterBottom:!0},i.a.createElement(q.a,{id:"Apis.Details.Endpoints.EndpointOverview.lb.failover.endpoints.header",defaultMessage:"Load balance and Failover Configurations"})),i.a.createElement(Yo,{handleEndpointCategorySelect:e=>{r({action:"endpoint_type",value:{category:e.target.value,endpointType:m.key}})},toggleAdvanceConfig:M,endpointsDispatcher:r,epConfig:na()(f),endpointSecurityInfo:b,handleEndpointTypeSelect:I,globalEpType:m,apiType:a.type}))),i.a.createElement(ha.a,{open:v.open},i.a.createElement(ya.a,null,i.a.createElement(K.a,{className:t.configDialogHeader},i.a.createElement(q.a,{id:"Apis.Details.Endpoints.EndpointOverview.advance.endpoint.configuration",defaultMessage:"Advanced Configurations"}))),i.a.createElement(Ea.a,null,i.a.createElement(tl,{isSOAPEndpoint:"address"===m.key,advanceConfig:v.config,onSaveAdvanceConfig:e=>{const t=na()(f),a=Eo(v.type,v.category),n=t[a];Array.isArray(n)?"failover"===v.type?n[v.index-1].config=e:n[v.index].config=e:n.config=e,C({open:!1}),r({action:"set_advance_config",value:ll({},t,{[a]:n})})},onCancel:()=>{C({open:!1})}}))),i.a.createElement(ha.a,{open:S.openDialog},i.a.createElement(ya.a,null,i.a.createElement(K.a,{className:t.configDialogHeader},i.a.createElement(q.a,{id:"Apis.Details.Endpoints.EndpointOverview.endpoint.type.change.confirmation",defaultMessage:"Change Endpoint Type"}))),i.a.createElement(Ea.a,null,i.a.createElement(K.a,null,i.a.createElement(q.a,{id:"Apis.Details.Endpoints.EndpointOverview.endpoint.type.change.confirmation.message",defaultMessage:"Your current endpoint configuration will be lost."}))),i.a.createElement(fa.a,null,i.a.createElement(Ne.a,{onClick:()=>{O({openDialog:!1})},color:"primary"},i.a.createElement(q.a,{id:"Apis.Details.Endpoints.EndpointOverview.change.type.cancel",defaultMessage:"Cancel"})),i.a.createElement(Ne.a,{onClick:()=>{T(S.type)},color:"primary"},i.a.createElement(q.a,{id:"Apis.Details.Endpoints..EndpointOverview.change.type.proceed",defaultMessage:"Proceed"})))))}dl.propTypes={classes:s.a.shape({overviewWrapper:s.a.shape({}),endpointTypesWrapper:s.a.shape({}),endpointName:s.a.shape({})}).isRequired,api:s.a.shape({}).isRequired,endpointsDispatcher:s.a.func.isRequired,swaggerDef:s.a.shape({}).isRequired,updateSwagger:s.a.func.isRequired,saveAndRedirect:s.a.func.isRequired};var ml=Object(q.d)(Object(L.a)(e=>({listing:{margin:e.spacing(1),padding:e.spacing(1)},endpointContainer:{paddingLeft:e.spacing(2),padding:e.spacing(1)},endpointName:{paddingLeft:e.spacing(1),fontSize:"1rem",paddingTop:e.spacing(1),paddingBottom:e.spacing(1)},endpointTypesWrapper:{padding:e.spacing(3),marginTop:e.spacing(2)},sandboxHeading:{display:"flex",alignItems:"center"},radioGroup:{display:"flex",flexDirection:"row"},endpointsWrapperLeft:{padding:e.spacing(1),borderRight:"#c4c4c4",borderRightStyle:"solid",borderRightWidth:"thin"},endpointsWrapperRight:{padding:e.spacing(1)},endpointsTypeSelectWrapper:{marginLeft:e.spacing(2),marginRight:e.spacing(2),padding:e.spacing(1),display:"flex",justifyContent:"space-between"},endpointTypesSelectWrapper:{display:"flex"},defaultEndpointWrapper:{paddingLeft:e.spacing(1),paddingRight:e.spacing(1),marginRight:e.spacing(1)},configDialogHeader:{fontWeight:"600"},addLabel:{padding:e.spacing(2)},buttonIcon:{marginRight:e.spacing(1)},button:{textTransform:"none"}}))(dl));function ul(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function gl(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ul(a,!0).forEach(function(t){hl(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ul(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function hl(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const fl={paths:{}};function El(e){const{classes:t,intl:a,history:r}=e,{api:s,updateAPI:l}=Object(n.useContext)(de.a),[c,p]=Object(n.useState)(fl),[d,m]=Object(n.useState)({isValid:!0,message:""}),[u,g]=Object(n.useState)(!1),[h,f]=Object(n.useReducer)((e,t)=>{const a=na()(e.endpointConfig),{action:n,value:i}=t;switch(n){case"production_endpoints":case"sandbox_endpoints":return gl({},e,i?{endpointConfig:gl({},a,{[n]:i})}:{endpointConfig:gl({},a)});case"select_endpoint_category":case"set_lb_config":case"add_endpoint":case"set_advance_config":case"remove_endpoint":return gl({},e,{endpointConfig:gl({},i)});case"endpointImplementationType":{const{endpointType:t,implementationType:a}=i,n=yo(t);return"prototyped"===t?"mock"===a?(s.generateMockScripts(s.id).then(e=>{p(e.obj)}),gl({},e,{endpointConfig:n,endpointImplementationType:"INLINE"})):gl({},e,{endpointConfig:n,endpointImplementationType:"ENDPOINT"}):gl({},e,{endpointConfig:n})}case"endpointSecurity":{const t=na()(i);return i&&"**********"===t.password&&(t.password=""),gl({},e,{endpointSecurity:t})}case"endpoint_type":return gl({},e,{endpointConfig:gl({},function(e,t,a){const n={};return"failover"===e?(n.endpoint_type=e,n.production_failovers=a.production_failovers?a.production_failovers:[],n.sandbox_failovers=a.sandbox_failovers?a.sandbox_failovers:[],n.production_endpoints=Array.isArray(a.production_endpoints)?a.production_endpoints[0]:a.production_endpoints,n.sandbox_endpoints=Array.isArray(a.sandbox_endpoints)?a.sandbox_endpoints[0]:a.sandbox_endpoints,n.failOver="True"):"load_balance"===e?(n.endpoint_type=e,n.algoClassName="org.apache.synapse.endpoints.algorithms.RoundRobin",n.algoCombo="org.apache.synapse.endpoints.algorithms.RoundRobin",n.sessionManagement="",n.sessionTimeOut="",a.production_endpoints&&(n.production_endpoints=Array.isArray(a.production_endpoints)?a.production_endpoints:[a.production_endpoints]),a.sandbox_endpoints&&(n.sandbox_endpoints=Array.isArray(a.sandbox_endpoints)?a.sandbox_endpoints:[a.sandbox_endpoints]),n.failOver="False"):(n.endpoint_type=!0===t?"address":"http",n.production_endpoints=Array.isArray(a.production_endpoints)?a.production_endpoints[0]:a.production_endpoints,n.sandbox_endpoints=Array.isArray(a.sandbox_endpoints)?a.sandbox_endpoints[0]:a.sandbox_endpoints,n.failOver="False"),n}(i.category,"address"===i.endpointType,a))});case"set_inline":{const{endpointImplementationType:t,endpointConfig:a}=i;return gl({},e,{endpointConfig:a,endpointImplementationType:t})}case"set_prototyped":{const{endpointImplementationType:t,endpointConfig:a}=i;return gl({},e,{endpointImplementationType:t,endpointConfig:a})}case"set_awsCredentials":return gl({},e,{endpointConfig:gl({},i)});case"select_endpoint_type":{const{endpointImplementationType:t,endpointConfig:a}=i;let{endpointSecurity:n}=e;return n&&""===n.username&&(n=null),gl({},e,{endpointConfig:a,endpointImplementationType:t,endpointSecurity:null})}default:return e}},s.toJSON()),E=e=>{const{endpointConfig:t,endpointImplementationType:a,endpointSecurity:n}=h;g(!0),"INLINE"===a?s.updateSwagger(c).then(e=>{p(e.obj)}).then(()=>{l({endpointConfig:t,endpointImplementationType:a,endpointSecurity:n})}).finally(()=>{g(!1),e&&r.push("/apis/"+s.id+"/runtime-configuration")}):l(h).finally(()=>{g(!1),e&&r.push("/apis/"+s.id+"/runtime-configuration")})};Object(n.useEffect)(()=>{"WS"!==s.type&&s.getSwagger(h.id).then(e=>{p(e.obj)}).catch(e=>{console.err(e)})},[]),Object(n.useEffect)(()=>{m((e=>{const{endpointConfig:t,endpointSecurity:n}=h;if(n&&(""===n.username||null===n.password))return{isValid:!1,message:a.formatMessage({id:"Apis.Details.Endpoints.Endpoints.missing.security.username.error",defaultMessage:"Endpoint Security User Name/ Password should not be empty"})};if(null===t)return{isValid:!0,message:""};const i=t.endpoint_type;if("awslambda"===i){if("stored"===t.access_method&&(""===t.amznAccessKey||""===t.amznSecretKey||""===t.amznRegion))return{isValid:!1,message:a.formatMessage({id:"Apis.Details.Endpoints.Endpoints.missing.accessKey.secretKey.error",defaultMessage:"Access Key, Secret Key and Region should not be empty"})};if(""!==t.amznAccessKey&&"AWS_SECRET_KEY"===t.amznSecretKey)return{isValid:!1,message:""}}else{if("load_balance"!==i){let n=!1;if("prototyped"===t.implementation_status){if("ENDPOINT"===e&&t.production_endpoints&&""===t.production_endpoints.url)return{isValid:!1,message:a.formatMessage({id:"Apis.Details.Endpoints.Endpoints.missing.prototype.url",defaultMessage:"Prototype Endpoint URL should not be empty"})};n=!0}else n=t.production_endpoints&&!t.sandbox_endpoints?""!==t.production_endpoints.url:t.sandbox_endpoints&&!t.production_endpoints?""!==t.sandbox_endpoints.url:!(!t.sandbox_endpoints&&!t.production_endpoints||""===t.sandbox_endpoints.url&&""===t.production_endpoints.url);return n?{isValid:!0,message:""}:{isValid:!1,message:a.formatMessage({id:"Apis.Details.Endpoints.Endpoints.missing.endpoint.error",defaultMessage:"Either one of Production or Sandbox Endpoints should be added."})}}if(t.production_endpoints&&t.production_endpoints.length>0&&(!t.production_endpoints[0].url||t.production_endpoints[0].url&&""===t.production_endpoints[0].url))return{isValid:!1,message:a.formatMessage({id:"Apis.Details.Endpoints.Endpoints.missing.prod.endpoint.loadbalance",defaultMessage:"Default Production Endpoint should not be empty"})};if(t.sandbox_endpoints&&t.sandbox_endpoints.length>0&&(!t.sandbox_endpoints[0].url||t.sandbox_endpoints[0].url&&""===t.sandbox_endpoints[0].url))return{isValid:!1,message:a.formatMessage({id:"Apis.Details.Endpoints.Endpoints.missing.sandbox.endpoint.loadbalance",defaultMessage:"Default Sandbox Endpoint should not be empty"})}}return{isValid:!0,message:""}})(h.endpointImplementationType))},[h]);return i.a.createElement(i.a.Fragment,null,null===s.endpointConfig&&null===h.endpointConfig?i.a.createElement(io,{generateEndpointConfig:(e,t)=>{f({action:"endpointImplementationType",value:{endpointType:e,implementationType:t}})},apiType:h.type}):i.a.createElement("div",{className:t.root},i.a.createElement(K.a,{variant:"h4",align:"left",gutterBottom:!0},i.a.createElement(q.a,{id:"Apis.Details.Endpoints.Endpoints.endpoints.header",defaultMessage:"Endpoints"})),i.a.createElement("div",null,i.a.createElement(pe.a,{container:!0},i.a.createElement(pe.a,{item:!0,xs:12,className:t.endpointsContainer},i.a.createElement(ml,{swaggerDef:c,updateSwagger:e=>{p(e)},api:h,onChangeAPI:f,endpointsDispatcher:f,saveAndRedirect:()=>{E(!0)}}))),d.isValid?i.a.createElement("div",null):i.a.createElement(pe.a,{item:!0,className:t.errorMessageContainer},i.a.createElement(K.a,{className:t.endpointValidityMessage},d.message)),i.a.createElement(pe.a,{container:!0,direction:"row",alignItems:"flex-start",spacing:1,className:t.buttonSection},i.a.createElement(pe.a,{item:!0},i.a.createElement(Ne.a,{disabled:u||!d.isValid||Object(o.b)(["apim:api_create"],s),type:"submit",variant:"contained",color:"primary",onClick:()=>E()},i.a.createElement(q.a,{id:"Apis.Details.Endpoints.Endpoints.save",defaultMessage:"Save"}),u&&i.a.createElement(Ze.a,{size:24}))),i.a.createElement(pe.a,{item:!0},i.a.createElement(W.b,{to:"/apis/"+s.id+"/overview"},i.a.createElement(Ne.a,null,i.a.createElement(q.a,{id:"Apis.Details.Endpoints.Endpoints.cancel",defaultMessage:"Cancel"})))),Object(o.b)(["apim:api_create"],s)&&i.a.createElement(pe.a,{item:!0},i.a.createElement(K.a,{variant:"body2",color:"primary"},i.a.createElement(q.a,{id:"Apis.Details.Endpoints.Endpoints.update.not.allowed",defaultMessage:"*You are not authorized to update endpoints of the API due to insufficient permissions"})))))))}El.propTypes={classes:s.a.shape({root:s.a.shape({}),buttonSection:s.a.shape({}),endpointTypesWrapper:s.a.shape({}),mainTitle:s.a.shape({})}).isRequired,api:s.a.shape({}).isRequired,intl:s.a.shape({}).isRequired,history:s.a.shape({}).isRequired};var bl=Object(_.withRouter)(Object(q.d)(Object(L.a)(e=>({endpointTypesWrapper:{display:"flex",alignItems:"center",flexDirection:"row",margin:"2px"},root:{flexGrow:1,paddingRight:"10px"},buttonSection:{marginTop:e.spacing(2)},radioGroup:{display:"flex",flexDirection:"row",marginLeft:e.spacing(2)},endpointValidityMessage:{color:e.palette.error.main},errorMessageContainer:{marginTop:e.spacing(1)},implSelectRadio:{padding:e.spacing(1)/2}}))(El)));a(838);function yl(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}const vl=Object(Ue.a)(e=>({root:{display:"flex",flexWrap:"wrap"},mainTitle:{paddingTop:e.spacing(3)},gatewayPaper:{marginTop:e.spacing(2)},content:{marginTop:e.spacing(2),margin:"".concat(e.spacing(2),"px 0 ").concat(e.spacing(2),"px 0")},emptyBox:{marginTop:e.spacing(2)},contentWrapper:{maxWidth:e.custom.contentAreaWidth,paddingLeft:e.spacing(3)}}));function Cl(e){const t=vl(),{selectedMgLabel:a,setSelectedMgLabel:r,api:s}=e,l=new Q.a,[c,p]=Object(n.useState)([]);return Object(n.useEffect)(()=>{l.microgatewayLabelsGet().then(e=>{p(e.body.list)})},[]),i.a.createElement(i.a.Fragment,null,i.a.createElement(K.a,{variant:"h4",align:"left",className:t.mainTitle},i.a.createElement(q.a,{id:"Apis.Details.Environments.Environments.Microgateways",defaultMessage:"Microgateways"})),c.length>0?i.a.createElement(ce.a,{className:t.gatewayPaper},i.a.createElement(Ae.a,null,i.a.createElement(Qn.a,null,i.a.createElement(Se.a,null,i.a.createElement(De.a,null),i.a.createElement(De.a,{align:"left"},"Label"),i.a.createElement(De.a,{align:"left"},"Description"),i.a.createElement(De.a,{align:"left"},"Access URL"))),i.a.createElement(Jn.a,null,c.map(e=>i.a.createElement(Se.a,{key:e.name},i.a.createElement(De.a,{padding:"checkbox"},i.a.createElement(zt.a,{disabled:Object(o.b)(["apim:api_create","apim:api_publish"],s),checked:a.includes(e.name),onChange:e=>{const{checked:t,name:n}=e.target;r(t?[].concat(yl(a),[n]):a.filter(e=>e!==n))},name:e.name,color:"primary"})),i.a.createElement(De.a,{component:"th",scope:"row",align:"left"},e.name),i.a.createElement(De.a,{align:"left"},e.description),i.a.createElement(De.a,{align:"left"},e.access_urls.join(", "))))))):i.a.createElement(si.a,{type:"info",height:100,className:t.emptyBox},i.a.createElement("div",{className:t.contentWrapper},i.a.createElement(K.a,{component:"p",className:t.content},i.a.createElement(q.a,{id:"Apis.Details.Environments.microgateway.labels.emptym1",defaultMessage:"Microgateway labels are not available."}),i.a.createElement(q.a,{id:"Apis.Details.Environments.microgateway.labels.emptym2",defaultMessage:" You can request the administrator to add labels."})))))}function Al(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}Cl.defaultProps={api:{}},Cl.propTypes={selectedMgLabel:s.a.arrayOf(s.a.string).isRequired,setSelectedMgLabel:s.a.func.isRequired,api:s.a.shape({})};const Dl=Object(Ue.a)(e=>({root:{display:"flex",flexWrap:"wrap"},saveButton:{marginTop:e.spacing(3)}}));function Sl(){const e=Dl(),{api:t,updateAPI:a}=Object(n.useContext)(de.a),{settings:r}=Object(te.c)(),[s,l]=Object(n.useState)(Al(t.gatewayEnvironments)),[c,p]=Object(n.useState)(Al(t.labels)),[d,m]=Object(n.useState)(!1);return i.a.createElement(i.a.Fragment,null,i.a.createElement(K.a,{variant:"h4",gutterBottom:!0},i.a.createElement(q.a,{id:"Apis.Details.Environments.Environments.APIGateways",defaultMessage:"API Gateways"})),i.a.createElement(ce.a,{className:e.saveButton},i.a.createElement(Ae.a,null,i.a.createElement(Qn.a,null,i.a.createElement(Se.a,null,i.a.createElement(De.a,null),i.a.createElement(De.a,{align:"left"},"Name"),i.a.createElement(De.a,{align:"left"},"Type"),i.a.createElement(De.a,{align:"left"},"Server URL"),t.isWebSocket()?i.a.createElement(i.a.Fragment,null,i.a.createElement(De.a,{align:"left"},"WS Endpoint"),i.a.createElement(De.a,{align:"left"},"WSS Endpoint")):i.a.createElement(i.a.Fragment,null,i.a.createElement(De.a,{align:"left"},"HTTP Endpoint"),i.a.createElement(De.a,{align:"left"},"HTTPS Endpoint")))),i.a.createElement(Jn.a,null,r.environment.map(e=>i.a.createElement(Se.a,{key:e.name},i.a.createElement(De.a,{padding:"checkbox"},i.a.createElement(zt.a,{disabled:Object(o.b)(["apim:api_create","apim:api_publish"],t),checked:s.includes(e.name),onChange:e=>{const{checked:t,name:a}=e.target;l(t?[].concat(Al(s),[a]):s.filter(e=>e!==a))},name:e.name,color:"primary"})),i.a.createElement(De.a,{component:"th",scope:"row"},e.name),i.a.createElement(De.a,{align:"left"},e.type),i.a.createElement(De.a,{align:"left"},e.serverUrl),t.isWebSocket()?i.a.createElement(i.a.Fragment,null,i.a.createElement(De.a,{align:"left"},e.endpoints.ws),i.a.createElement(De.a,{align:"left"},e.endpoints.wss)):i.a.createElement(i.a.Fragment,null,i.a.createElement(De.a,{align:"left"},e.endpoints.http),i.a.createElement(De.a,{align:"left"},e.endpoints.https))))))),!t.isWebSocket()&&i.a.createElement(Cl,{selectedMgLabel:c,setSelectedMgLabel:p,api:t}),i.a.createElement(pe.a,{container:!0,direction:"row",alignItems:"flex-start",spacing:1},i.a.createElement(pe.a,{item:!0},i.a.createElement(Ne.a,{className:e.saveButton,disabled:Object(o.b)(["apim:api_create","apim:api_publish"],t)||d,type:"submit",variant:"contained",color:"primary",onClick:function(){m(!0),a({gatewayEnvironments:s,labels:c}).then(()=>$.a.info("API Update Successfully")).catch(e=>{e.response?$.a.error(e.response.body.description):$.a.error("Something went wrong while updating the environments"),console.error(e)}).finally(()=>m(!1))}},i.a.createElement(q.a,{id:"Apis.Details.Environments.Environments.save",defaultMessage:"Save"}),d&&i.a.createElement(Ze.a,{size:20}))),i.a.createElement(pe.a,{item:!0},i.a.createElement(W.b,{to:"/apis/"+t.id+"/overview"},i.a.createElement(Ne.a,{className:e.saveButton},i.a.createElement(q.a,{id:"Apis.Details.Environments.Environments.cancel",defaultMessage:"Cancel"}))))),Object(o.b)(["apim:api_create"],t)&&i.a.createElement(pe.a,{item:!0},i.a.createElement(K.a,{variant:"body2",color:"primary"},i.a.createElement(q.a,{id:"Apis.Details.Environments.Environments.update.not.allowed",defaultMessage:"* You are not authorized to update particular fields of the API due to insufficient permissions"}))))}var Ol=a(582),wl=a.n(Ol),Pl=a(98),xl=a(2307),Tl=a.n(xl),Il=a(1495),Ml=a.n(Il),Rl=a(1265),Nl=a.n(Rl),jl=a(2308),kl=a.n(jl),Ll=a(1607),ql=a(932),_l=a.n(ql);const Wl=["Name","Value"],Fl={filterType:"checkbox",sort:!1,search:!1,viewColumns:!1,filter:!1,selectableRowsHeader:!1,selectableRows:"none",pagination:!1,download:!1};function zl(e){const{subscriptionId:t,isMonetizedUsagePolicy:a,isNotAuthorized:r,api:s}=e,[o,l]=Object(n.useState)(!1),[c,p]=Object(n.useState)(!1),[d,m]=Object(n.useState)(null),u=()=>{p(!1)};return i.a.createElement(i.a.Fragment,null,i.a.createElement(Ne.a,{variant:"outlined",size:"small",color:"primary",disabled:!a||r,onClick:()=>{l(!0),m(null),"APIProduct"===s.apiType?new Z.a(s.name,s.context,s.policies).getMonetizationInvoice(t).then(e=>{const t=[];Object.keys(e.properties).map(a=>{const n=[];return n.push(a),n.push(e.properties[a]),t.push(n),!0}),m(t)}).catch(e=>{console.error(e),p(!0)}):s.getMonetizationInvoice(t).then(e=>{const t=[];Object.keys(e.properties).map(a=>{const n=[];return n.push(a),n.push(e.properties[a]),t.push(n),!0}),m(t)}).catch(e=>{console.error(e),p(!0)})}},i.a.createElement(q.a,{id:"Applications.Details.Invoice.view.btn",defaultMessage:"View Invoice"})),i.a.createElement(ha.a,{open:o,onClose:()=>{l(!1)},fullWidth:"true"},d&&i.a.createElement(ni.a,{title:"Upcoming Invoice",data:d,columns:Wl,options:Fl})),i.a.createElement(ha.a,{open:c,onClose:u,fullWidth:"true"},i.a.createElement(ya.a,null,"No Data Available"),i.a.createElement(Ea.a,null,i.a.createElement(ba.a,{id:"invoice-dialog-description"},"Pending invoice data not found for this subscription.")),i.a.createElement(fa.a,null,i.a.createElement(Ne.a,{onClick:u,color:"primary"},"Close"))))}zl.propTypes={subscriptionId:s.a.string.isRequired,isMonetizedUsagePolicy:s.a.string.isRequired,isNotAuthorized:s.a.string.isRequired,api:s.a.instanceOf(Q.a).isRequired};var Bl=zl;function Ul(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Vl(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ul(a,!0).forEach(function(t){Hl(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ul(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function Hl(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Gl={BLOCKED:"BLOCKED",PROD_BLOCKED:"PROD_ONLY_BLOCKED"};function Kl(e){const{count:t,page:a,rowsPerPage:n,onChangePage:r}=e;return i.a.createElement("div",{style:{display:"flex"}},i.a.createElement(Ta.a,{onClick:function(){r&&r(0)},disabled:0===a},i.a.createElement(Tl.a,null)),i.a.createElement(Ta.a,{onClick:function(){r&&r(a-1)},disabled:0===a},i.a.createElement(Ml.a,null)),i.a.createElement(Ta.a,{onClick:function(){r&&r(a+1)},disabled:a>=Math.ceil(t/n)-1},i.a.createElement(Nl.a,null)),i.a.createElement(Ta.a,{onClick:function(){r&&r(Math.max(0,Math.ceil(t/n)-1))},disabled:a>=Math.ceil(t/n)-1},i.a.createElement(kl.a,null)))}Kl.propTypes={count:s.a.number.isRequired,page:s.a.number.isRequired,rowsPerPage:s.a.number.isRequired,onChangePage:s.a.func.isRequired};class Yl extends n.Component{constructor(e){super(e),this.api=e.api,this.state={subscriptions:null,totalSubscription:0,page:0,rowsPerPage:5,searchQuery:null,rowsPerPageOptions:[5,10,25,50,100],emptyColumnHeight:60,policies:[],subscriberClaims:null},this.formatSubscriptionStateString=this.formatSubscriptionStateString.bind(this),this.blockSubscription=this.blockSubscription.bind(this),this.blockProductionOnly=this.blockProductionOnly.bind(this),this.unblockSubscription=this.unblockSubscription.bind(this),this.handleChangePage=this.handleChangePage.bind(this),this.handleChangeRowsPerPage=this.handleChangeRowsPerPage.bind(this),this.filterSubscriptions=this.filterSubscriptions.bind(this),this.isMonetizedPolicy=this.isMonetizedPolicy.bind(this),this.renderClaims=this.renderClaims.bind(this),this.isNotCreator=o.a.isNotCreator(),this.isNotPublisher=o.a.isNotPublisher()}componentDidMount(){this.fetchSubscriptionData()}getSubscriptionBlockingButtons(e,t){const{classes:a}=this.props;return e===Gl.PROD_BLOCKED?i.a.createElement("dev",null,i.a.createElement(Ne.a,{size:"small",variant:"outlined",color:"primary",onClick:()=>this.blockProductionOnly(t),className:a.button,disabled:"true"},i.a.createElement(q.a,{id:"block.production.only",defaultMessage:"Block Production Only"})),i.a.createElement(Ne.a,{size:"small",variant:"outlined",color:"primary",onClick:()=>this.blockSubscription(t),className:a.button},i.a.createElement(q.a,{id:"block.all",defaultMessage:"Block All"})),i.a.createElement(Ne.a,{size:"small",variant:"outlined",color:"primary",onClick:()=>this.unblockSubscription(t),className:a.button},i.a.createElement(q.a,{id:"unblock",defaultMessage:"Unblock"}))):e===Gl.BLOCKED?i.a.createElement("dev",null,i.a.createElement(Ne.a,{size:"small",variant:"outlined",color:"primary",onClick:()=>this.blockProductionOnly(t),className:a.button},i.a.createElement(q.a,{id:"block.production.only",defaultMessage:"Block Production Only"})),i.a.createElement(Ne.a,{size:"small",variant:"outlined",color:"primary",onClick:()=>this.blockSubscription(t),className:a.button,disabled:"true"},i.a.createElement(q.a,{id:"block.all",defaultMessage:"Block All"})),i.a.createElement(Ne.a,{size:"small",variant:"outlined",color:"primary",onClick:()=>this.unblockSubscription(t),className:a.button},i.a.createElement(q.a,{id:"unblock",defaultMessage:"Unblock"}))):i.a.createElement("dev",null,i.a.createElement(Ne.a,{size:"small",variant:"outlined",color:"primary",onClick:()=>this.blockProductionOnly(t),className:a.button},i.a.createElement(q.a,{id:"block.production.only",defaultMessage:"Block Production Only"})),i.a.createElement(Ne.a,{size:"small",variant:"outlined",color:"primary",onClick:()=>this.blockSubscription(t),className:a.button},i.a.createElement(q.a,{id:"block.all",defaultMessage:"Block All"})),i.a.createElement(Ne.a,{size:"small",variant:"outlined",color:"primary",onClick:()=>this.unblockSubscription(t),className:a.button,disabled:"true"},i.a.createElement(q.a,{id:"unblock",defaultMessage:"Unblock"})))}formatSubscriptionStateString(e){return e===Gl.PROD_BLOCKED?i.a.createElement(q.a,{id:"Apis.Details.Subscriptions.SubscriptionsTable.blocked.production.only.subs.state",defaultMessage:"Blocked Production Only"}):e===Gl.BLOCKED?i.a.createElement(q.a,{id:"Apis.Details.Subscriptions.SubscriptionsTable.blocked.subs.state",defaultMessage:"Blocked"}):i.a.createElement(q.a,{id:"Apis.Details.Subscriptions.SubscriptionsTable.active.subs.state",defaultMessage:"Active"})}blockSubscription(e){const{intl:t}=this.props;(new Q.a).blockSubscriptions(e,Gl.BLOCKED).then(()=>{$.a.success(t.formatMessage({id:"Apis.Details.Subscriptions.SubscriptionsTable.subscription.blocked",defaultMessage:"Subscription was blocked."})),this.fetchSubscriptionData()}).catch(e=>{console.error(e);const{message:a}=e.response.body,n=Object(q.c)({errorMessage:{id:"Apis.Details.Subscriptions.SubscriptionsTable.error.subscription.block",defaultMessage:"Error: Unable to block subscription. (Reason: {message})"}});$.a.error(t.formatMessage(n.errorMessage,{message:a}))})}blockProductionOnly(e){const{intl:t}=this.props;(new Q.a).blockSubscriptions(e,Gl.PROD_BLOCKED).then(()=>{$.a.success(t.formatMessage({id:"Apis.Details.Subscriptions.SubscriptionsTable.subscription.blocked.prod.only",defaultMessage:"Subscription was blocked for production only."})),this.fetchSubscriptionData()}).catch(e=>{console.error(e);const{message:a}=e.response.body,n=Object(q.c)({errorMessage:{id:"Apis.Details.Subscriptions.SubscriptionsTable.error.subscription.block.prod.only",defaultMessage:"Error: Unable to block subscription. (Reason: {message})"}});$.a.error(t.formatMessage(n.errorMessage,{message:a}))})}unblockSubscription(e){const{intl:t}=this.props;(new Q.a).unblockSubscriptions(e).then(()=>{$.a.success(t.formatMessage({id:"Apis.Details.Subscriptions.SubscriptionsTable.subscription.unblocked",defaultMessage:"Subscription was unblocked."})),this.fetchSubscriptionData()}).catch(e=>{console.error(e);const{message:a}=e.response.body,n=Object(q.c)({errorMessage:{id:"Apis.Details.Subscriptions.SubscriptionsTable.error.subscription.unblock",defaultMessage:"Error: Unable to unblock subscription. (Reason: {message})"}});$.a.error(t.formatMessage(n.errorMessage,{message:a}))})}fetchSubscriptionData(){const e=new Q.a,{page:t,rowsPerPage:a,searchQuery:n}=this.state;e.subscriptions(this.api.id,t*a,a,n).then(t=>{this.setState({subscriptions:t.body.list,totalSubscription:t.body.pagination.total});for(let a=0;a<t.body.list.length;a++){const{subscriptionId:n}=t.body.list[a];e.getSubscriberInfo(n).then(e=>{this.setState(t=>({subscriberClaims:Vl({},t.subscriberClaims,{[n]:e.body})}))}).catch(e=>{console.error(e),$.a.error(JSON.stringify(e))})}}).catch(e=>{console.error(e),$.a.error(JSON.stringify(e))}),e.getMonetization(this.props.api.id).then(e=>{this.setState({monetizationStatus:e.enabled})}),e.getSubscriptionPolicies(this.api.id).then(e=>{const t=e.filter(e=>"COMMERCIAL"===e.tierPlan);this.setState({policies:t})})}handleChangePage(e){this.setState({page:e},this.fetchSubscriptionData)}isMonetizedPolicy(e){const{policies:t,monetizationStatus:a}=this.state;if(t.length>0){return t.filter(t=>t.name===e&&null!=t.monetizationAttributes.pricePerRequest).length>0&&a}return!1}handleChangeRowsPerPage(e){this.setState({rowsPerPage:e.target.value,page:0},this.fetchSubscriptionData)}filterSubscriptions(e){this.setState({searchQuery:e.target.value},this.fetchSubscriptionData)}renderClaims(e){const{classes:t}=this.props;return e?i.a.createElement("div",{className:t.root},i.a.createElement(pe.a,{container:!0,spacing:1,className:t.subscriberHeader},i.a.createElement(pe.a,{item:!0},i.a.createElement(Yn.a,{color:"primary"})),i.a.createElement(pe.a,{item:!0},e.name)),e.claims&&i.a.createElement("div",null,i.a.createElement(Ae.a,{className:t.table},i.a.createElement(Jn.a,null,e.claims.map(e=>i.a.createElement(Se.a,{hover:!0},i.a.createElement(De.a,null,e.name),e.value?i.a.createElement(De.a,null,e.value):i.a.createElement(De.a,null,"Not Available"))))))):i.a.createElement("div",{className:t.noDataMessage},i.a.createElement(q.a,{id:"Apis.Details.Subscriptions.Subscriber.no.claims",defaultMessage:"No subscriber claims data available"}))}render(){const{subscriptions:e,page:t,rowsPerPage:a,totalSubscription:n,rowsPerPageOptions:r,emptyColumnHeight:s,subscriberClaims:o}=this.state,{classes:l,api:c}=this.props;if(!e)return i.a.createElement(pe.a,{container:!0,direction:"row",justify:"center",alignItems:"center"},i.a.createElement(pe.a,{item:!0},i.a.createElement(Ze.a,null)));const p=[{name:"subscriptionId",options:{display:"excluded",filter:!1}},{name:"applicationInfo.applicationId",options:{display:"excluded",filter:!1}},{name:"applicationInfo.subscriber",label:i.a.createElement(q.a,{id:"Apis.Details.Subscriptions.Listing.column.header.subscriber",defaultMessage:"Subscriber"}),options:{sort:!1,customBodyRender:(e,t)=>t.rowData?i.a.createElement("div",null,i.a.createElement(ie.a,{interactive:!0,placement:"top",classes:{tooltip:l.InfoToolTip},title:i.a.createElement(i.a.Fragment,null,o&&i.a.createElement("div",null,this.renderClaims(o[t.rowData[0]])))},i.a.createElement(pe.a,{container:!0,direction:"row",alignItems:"center",spacing:1},i.a.createElement(pe.a,{item:!0},i.a.createElement(K.a,null,i.a.createElement(_l.a,{color:"action"}))),i.a.createElement(pe.a,{item:!0},e)))):null}},{name:"applicationInfo.name",label:i.a.createElement(q.a,{id:"Apis.Details.Subscriptions.Listing.column.header.application",defaultMessage:"Application"}),options:{sort:!1}},{name:"applicationInfo.description",options:{display:"excluded",filter:!1}},{name:"applicationInfo.subscriptionCount",options:{display:"excluded",filter:!1}},{name:"throttlingPolicy",label:i.a.createElement(q.a,{id:"Apis.Details.Subscriptions.Listing.column.header.throttling.tier",defaultMessage:"Tier"}),options:{sort:!1}},{name:"subscriptionStatus",label:i.a.createElement(q.a,{id:"Apis.Details.Subscriptions.Listing.column.header.subscription.status",defaultMessage:"Status"}),options:{sort:!1}},{name:"actions",label:i.a.createElement(q.a,{id:"Apis.Details.Subscriptions.Listing.column.header.subscription.actions",defaultMessage:"Actions"}),options:{sort:!1,customBodyRender:(e,t)=>{if(t.rowData){const e=t.rowData[7],a=t.rowData[0];return i.a.createElement(Mn.a,{resourceMethod:Mn.b.POST,resourcePath:Mn.c.BLOCK_SUBSCRIPTION},this.getSubscriptionBlockingButtons(e,a))}return null}}},{name:"invoice",label:i.a.createElement(q.a,{id:"Apis.Details.Subscriptions.Listing.column.header.subscription.invoice",defaultMessage:"Invoice"}),options:{sort:!1,customBodyRender:(e,t)=>{if(t.rowData){const e=t.rowData[6],a=t.rowData[0];return i.a.createElement(Bl,{subscriptionId:a,isNotAuthorized:this.isNotCreator&&this.isNotPublisher,isMonetizedUsagePolicy:this.isMonetizedPolicy(e),api:c})}return null}}}],d={title:!1,print:!1,download:!1,viewColumns:!1,elevation:1,customToolbar:!1,search:!1,selectableRows:"none",rowsPerPageOptions:[5,10,25,50,100],customFooter:()=>i.a.createElement(Ll.a,{rowsPerPageOptions:r,colSpan:6,count:n,rowsPerPage:a,page:t,onChangePage:this.handleChangePage,onChangeRowsPerPage:this.handleChangeRowsPerPage,ActionsComponent:Kl})},m={},u=o&&Object.entries(o).map(e=>{let[,t]=e,a=null;return m[t.name]||(a=t.claims.find(e=>"http://wso2.org/claims/emailaddress"===e.URI).value,m[t.name]=a),a}).reduce((e,t)=>null!==t?"".concat(e||"",",").concat(t):e);let g=null;m&&Object.entries(m).map(e=>{let[t,a]=e;return a&&(g=null===g?t:"".concat(g,", ").concat(t)),null});const h=g?i.a.Fragment:ie.a;return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:l.heading},i.a.createElement(K.a,{variant:"h4"},i.a.createElement(q.a,{id:"Apis.Details.Subscriptions.SubscriptionsTable.manage.subscriptions",defaultMessage:"Manage Subscriptions"}),"   ",e.length&&i.a.createElement(h,{title:"No contact details",placement:"top"},i.a.createElement("span",null,i.a.createElement(Ne.a,{target:"_blank",rel:"noopener",href:"mailto:?subject=Message from the API Publisher&cc=".concat(u)+"&body=Hi ".concat(g,","),size:"small",disabled:!g,variant:"outlined"},"Contact Subscribers")))),i.a.createElement(K.a,{variant:"caption",gutterBottom:!0},i.a.createElement(q.a,{id:"Apis.Details.Subscriptions.SubscriptionsTable.sub.heading",defaultMessage:"Manage subscriptions of the API"}))),i.a.createElement(ce.a,{elevation:0},e.length>0?i.a.createElement("div",null,i.a.createElement(ni.a,{title:"",data:e,columns:p,options:d})):i.a.createElement("div",{className:l.noDataMessage,style:{height:a*s}},i.a.createElement(q.a,{id:"Apis.Details.Subscriptions.SubscriptionsTable.no.subscriptions",defaultMessage:"No subscriptions data available"}))))}}Yl.propTypes={classes:s.a.shape({}).isRequired,api:s.a.shape({id:s.a.string}).isRequired,intl:s.a.shape({}).isRequired};var Jl=Object(q.d)(wl()(e=>({heading:{marginTop:e.spacing(3),marginBottom:e.spacing(2)},button:{margin:e.spacing(1)},headline:{paddingTop:e.spacing(1.25),paddingLeft:e.spacing(2.5)},popupHeadline:{alignItems:"center",borderBottom:"2px solid #40E0D0",textAlign:"center"},table:{"& td":{fontSize:e.typography.fontSize},"& th":{fontSize:1.2*e.typography.fontSize}},searchDiv:{float:"right",paddingTop:e.spacing(1.25),paddingRight:e.spacing(1.25)},searchRoot:{paddingTop:e.spacing(.25),paddingBottom:e.spacing(.25),paddingRight:e.spacing(.5),paddingLeft:e.spacing(.5),display:"flex",alignItems:"right",width:e.spacing(50),borderBottom:"1px solid #E8E8E8"},searchInput:{marginLeft:e.spacing(1),flex:1},searchIconButton:{padding:e.spacing(1.25)},noDataMessage:{display:"flex",alignItems:"center",justifyContent:"center",color:"#888888",width:"100%"},tableColumnSize:{width:"14%"},tableColumnSize2:{width:"30%"},dialogColumnSize:{width:"50%"},dialog:{float:"center",alignItems:"center"},invoiceTable:{"& td":{fontSize:1.5*e.typography.fontSize}},uniqueCell:{borderTop:"1px solid #000000",fontWeight:"bold"},mainTitle:{paddingLeft:0,marginTop:e.spacing(3)},titleWrapper:{marginBottom:e.spacing(3)},typography:{padding:e.spacing(2)},root:{flexGrow:1},InfoToolTip:{backgroundColor:e.custom.disableColor,color:e.palette.getContrastText(e.custom.disableColor),fontSize:e.typography.fontSize,fontWeight:e.typography.h6.fontWeight,border:"solid 1px "+e.palette.grey,borderRadius:e.shape.borderRadius,padding:e.spacing(2)},subscriberHeader:{fontSize:e.typography.h6.fontSize,color:e.typography.h6.color,fontWeight:e.typography.h6.fontWeight}}))(Yl));function Ql(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}class Zl extends n.Component{constructor(e){super(e),this.state={subscriptionPolicies:{}},this.handleChange=this.handleChange.bind(this)}componentDidMount(){Q.a.policies("subscription").then(e=>{this.setState({subscriptionPolicies:e.body.list})}).catch(e=>{0})}handleChange(e){const{name:t,checked:a}=e.target,{setPolices:n,policies:i}=this.props;let r=Ql(i);a?r.push(t):r=i.filter(e=>e!==t),n(r)}render(){const{classes:e,api:t,policies:a}=this.props,{subscriptionPolicies:n}=this.state;return i.a.createElement(i.a.Fragment,null,i.a.createElement(K.a,{variant:"h4"},i.a.createElement(q.a,{id:"Apis.Details.Subscriptions.SubscriptionPoliciesManage.business.plans",defaultMessage:"Business Plans"})),t.apiType===Q.a.CONSTS.APIProduct?i.a.createElement(K.a,{variant:"caption",gutterBottom:!0},i.a.createElement(q.a,{id:"Apis.Details.Subscriptions.SubscriptionPoliciesManage.APIProduct.sub.heading",defaultMessage:"Attach business plans to API"})):i.a.createElement(K.a,{variant:"caption",gutterBottom:!0},i.a.createElement(q.a,{id:"Apis.Details.Subscriptions.SubscriptionPoliciesManage.sub.heading",defaultMessage:"Attach business plans to API"})),i.a.createElement(ce.a,{className:e.subscriptionPoliciesPaper},i.a.createElement(ft.a,{className:e.formControl},i.a.createElement(Za.a,null,n&&Object.entries(n).map(e=>i.a.createElement(Et.a,{key:e[1].name,control:i.a.createElement(zt.a,{disabled:Object(o.b)(["apim:api_publish","apim:api_create"],t),color:"primary",checked:a.includes(e[1].name),onChange:e=>this.handleChange(e),name:e[1].name}),label:e[1].name+" : "+e[1].description}))))))}}Zl.propTypes={classes:s.a.shape({}).isRequired,intl:s.a.shape({formatMessage:s.a.func}).isRequired,api:s.a.shape({policies:s.a.array}).isRequired,setPolices:s.a.func.isRequired,policies:s.a.shape({}).isRequired};var Xl=Object(q.d)(wl()(e=>({subscriptionPoliciesPaper:{marginTop:e.spacing(2),padding:e.spacing(2)},grid:{margin:e.spacing(1.25)},gridLabel:{marginTop:e.spacing(1.5)},mainTitle:{paddingLeft:0}}))(Zl));function $l(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function ec(){return(ec=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function tc(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function ac(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?tc(a,!0).forEach(function(t){nc(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):tc(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function nc(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function ic(e,t){if(null==e)return{};var a,n,i=function(e,t){if(null==e)return{};var a,n,i={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(i[a]=e[a]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}const rc=Object(Ue.a)(e=>({root:{flexGrow:1,height:250},container:{flexGrow:1,position:"relative"},paper:{position:"absolute",zIndex:1,marginTop:e.spacing(1),left:0,right:0},chip:{margin:e.spacing(.5,.25)},inputRoot:{flexWrap:"wrap"},inputInput:{width:"auto",flexGrow:1},divider:{height:e.spacing(2)}}));function sc(e){const{InputProps:t,classes:a,ref:n}=e,r=ic(e,["InputProps","classes","ref"]);return i.a.createElement(vt.a,ec({InputProps:ac({inputRef:n,classes:{root:a.inputRoot,input:a.inputInput}},t)},r))}function oc(e){const{suggestion:t,index:a,itemProps:n,highlightedIndex:r,tenantList:s}=e,o=r===a,l=(s||"").indexOf(t)>-1;return i.a.createElement(At.a,ec({},n,{key:t,selected:o,component:"div",style:{fontWeight:l?500:400}}),t)}function lc(e){const{tenantList:t,setTenantList:a}=e,{classes:n,suggestions:r}=e,[s,o]=i.a.useState("");function l(e){t.length&&!s.length&&"Backspace"===e.key&&a(t.slice(0,t.length-1))}const c=e=>()=>{const n=$l(t);n.splice(n.indexOf(e),1),a(n)};return i.a.createElement(Dr.a,{id:"downshift-multiple",inputValue:s,onChange:function(e){let n=$l(t);-1===n.indexOf(e)&&(n=[].concat($l(n),[e])),o(""),a(n)},tenantList:t},e=>{let{getInputProps:a,getItemProps:s,getLabelProps:p,isOpen:d,inputValue:m,tenantList:u,highlightedIndex:g}=e;const h=a({onKeyDown:l,placeholder:"Type and select tenants from the suggested list"}),{onBlur:f,onChange:E,onFocus:b}=h,y=ic(h,["onBlur","onChange","onFocus"]);return i.a.createElement("div",{className:n.container},sc({fullWidth:!0,classes:n,label:"Tenants",InputLabelProps:p(),InputProps:{startAdornment:t.map(e=>i.a.createElement(ue.a,{key:e,tabIndex:-1,label:e,className:n.chip,onDelete:c(e)})),onBlur:f,onChange:e=>{!function(e){o(e.target.value)}(e),E(e)},onFocus:b},inputProps:y}),d?i.a.createElement(ce.a,{className:n.paper,square:!0},function(e,t){let{showEmpty:a=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const n=Ar()(e.trim()).toLowerCase(),i=n.length;let r=0;return 0!==i||a?t.filter(e=>{const t=r<15&&e.slice(0,i).toLowerCase()===n;return t&&(r+=1),t}):[]}(m,r).map((e,t)=>oc({suggestion:e,index:t,itemProps:s({item:e}),highlightedIndex:g,tenantList:u}))):null)})}function cc(e){const t=rc(),[a,r]=Object(n.useState)({}),{setTenantList:s,api:o,tenantList:l}=e,c=new Q.a;return Object(n.useEffect)(()=>{c.getTenantsByState(Ee.a.TENANT_STATE_ACTIVE).then(e=>{const t=e.body.list.map(e=>e.domain);r(t)})},[]),i.a.createElement("div",{className:t.root},i.a.createElement("div",{className:t.divider}),i.a.createElement(lc,{classes:t,suggestions:a,tenantList:l,setTenantList:s,api:o}),i.a.createElement("div",{className:t.divider}))}function pc(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function dc(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}sc.propTypes={classes:s.a.shape({type:s.a.string,inputType:s.a.string}).isRequired,InputProps:s.a.shape({type:s.a.string,inputType:s.a.string}).isRequired},oc.propTypes={highlightedIndex:s.a.oneOfType([s.a.oneOf([null]),s.a.number]).isRequired,index:s.a.number.isRequired,itemProps:s.a.shape({type:s.a.string,inputType:s.a.string}).isRequired,tenantList:s.a.shape([]).isRequired,suggestion:s.a.string.isRequired},lc.propTypes={classes:s.a.shape({type:s.a.string,inputType:s.a.string}).isRequired,setTenantList:s.a.shape({type:s.a.string,inputType:s.a.string}).isRequired,suggestions:s.a.shape({type:s.a.string,inputType:s.a.string}).isRequired,api:s.a.shape({policies:s.a.array}).isRequired,tenantList:s.a.shape([]).isRequired},cc.propTypes={setTenantList:s.a.shape({type:s.a.string,inputType:s.a.string}).isRequired,api:s.a.shape({policies:s.a.array}).isRequired,tenantList:s.a.shape([]).isRequired};const mc=Object(Ue.a)(e=>({root:{display:"flex",flexWrap:"wrap"},formControl:{margin:e.spacing(1),minWidth:400},textControl:{margin:e.spacing(1),minWidth:300},selectEmpty:{marginTop:e.spacing(2)},subscriptionAvailabilityPaper:{marginTop:e.spacing(2),paddingLeft:e.spacing(2),paddingBottom:e.spacing(2)},grid:{display:"flex",margin:e.spacing(1.25)},gridLabel:{marginTop:e.spacing(3.5)},saveButton:{marginTop:e.spacing(2)},heading:{marginTop:e.spacing(3)},tenantsList:{height:e.spacing(12)}}));function uc(e){const t=mc(),{api:a,setAvailability:n,tenantList:r,setTenantList:s}=e;let l;null===a.subscriptionAvailability||"CURRENT_TENANT"===a.subscriptionAvailability?l="currentTenant":"ALL_TENANTS"===a.subscriptionAvailability?l="allTenants":"SPECIFIC_TENANTS"===a.subscriptionAvailability&&(l="specificTenants");const[c,p]=i.a.useState({availability:l}),d=i.a.useRef(null),[m,u]=i.a.useState(0),g="specificTenants"===c.availability,h=Object(o.b)(["apim:api_publish","apim:api_create"],a);function f(e){let t;p(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?pc(a,!0).forEach(function(t){dc(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):pc(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},c,{availability:e})),"currentTenant"===e?(t="CURRENT_TENANT",s([])):"allTenants"===e?(t="ALL_TENANTS",s([])):"specificTenants"===e&&(t="SPECIFIC_TENANTS"),n({subscriptionAvailability:t})}return i.a.useEffect(()=>{u(d.current.offsetWidth)},[]),i.a.createElement(pe.a,{item:!0,xs:12,md:12,lg:12},i.a.createElement(K.a,{variant:"h4",className:t.heading},i.a.createElement(q.a,{id:"Apis.Details.Subscriptions.SubscriptionAvailability.subscription.availability",defaultMessage:"Subscription Availability"})),i.a.createElement(K.a,{variant:"caption",gutterBottom:!0},i.a.createElement(q.a,{id:"Apis.Details.Subscriptions.SubscriptionAvailability.sub.heading",defaultMessage:"Make subscriptions available to tenants"})),i.a.createElement(ce.a,{className:t.subscriptionAvailabilityPaper},i.a.createElement("form",{className:t.root,autoComplete:"off",onSubmit:e=>{e.preventDefault()}},i.a.createElement(pe.a,{container:!0,xs:12,spacing:1,className:t.grid},i.a.createElement(pe.a,{item:!0,xs:10},i.a.createElement(ft.a,{variant:"outlined",className:t.formControl,disabled:h},i.a.createElement(Nr.a,{ref:d,htmlFor:"outlined-age-simple"}),i.a.createElement(Ji.a,{value:c.availability,onChange:e=>{let{target:{value:t}}=e;f(t)},labelWidth:m,displayEmpty:!0,name:"availability",inputProps:{name:"availability",id:"outlined-availabi;ity-simple"}},i.a.createElement(At.a,{value:"currentTenant"},i.a.createElement(q.a,{id:"Apis.Details.Subscriptions.SubscriptionAvailability.current.tenant.only",defaultMessage:"Available to current tenant only"})),i.a.createElement(At.a,{value:"allTenants"},i.a.createElement(q.a,{id:"Apis.Details.Subscriptions.SubscriptionAvailability.all.tenants",defaultMessage:"Available to all the tenants"})),i.a.createElement(At.a,{value:"specificTenants"},i.a.createElement(q.a,{id:"Apis.Details.Subscriptions.SubscriptionAvailability.specific.tenants",defaultMessage:"Available to specific tenants"}))))),g?i.a.createElement(pe.a,{item:!0,xs:8,className:t.tenantsList},i.a.createElement(cc,{setTenantList:s,tenantList:r,api:a})):i.a.createElement(pe.a,{item:!0,xs:8})))))}function gc(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}uc.propTypes={classes:s.a.shape({}).isRequired,intl:s.a.shape({formatMessage:s.a.func}).isRequired,api:s.a.shape({policies:s.a.array}).isRequired,setAvailability:s.a.func.isRequired,setTenantList:s.a.func.isRequired,tenantList:s.a.shape([]).isRequired};const hc=Object(Ue.a)(e=>({buttonSection:{marginTop:e.spacing(2)},emptyBox:{marginTop:e.spacing(2)}}));function fc(e){const t=hc(),[a]=Object(de.d)(),{updateAPI:r}=e,s=new Q.a,[o,l]=Object(n.useState)(null),[c,p]=Object(n.useState)({}),[d,m]=Object(n.useState)({subscriptionAvailability:a.subscriptionAvailability}),[u,g]=Object(n.useState)(a.subscriptionAvailableTenants),[h,f]=Object(n.useState)(null),[E,b]=Object(n.useState)(!1);return Object(n.useEffect)(()=>{s.getTenantsByState(Ee.a.TENANT_STATE_ACTIVE).then(e=>{l(e.body.count)}),s.subscriptions(a.id).then(e=>{f(e.body.count)}),p(gc(a.policies))},[]),"number"!=typeof o||"number"!=typeof h?i.a.createElement(pe.a,{container:!0,direction:"row",justify:"center",alignItems:"center"},i.a.createElement(pe.a,{item:!0},i.a.createElement(Ze.a,null))):i.a.createElement(i.a.Fragment,null,i.a.createElement(Xl,{api:a,policies:c,setPolices:p}),0!==o&&i.a.createElement(uc,{api:a,availability:d,setAvailability:m,tenantList:u,setTenantList:g}),E&&i.a.createElement(Pl.a,null),i.a.createElement(pe.a,{container:!0,direction:"row",alignItems:"flex-start",spacing:1,className:t.buttonSection},i.a.createElement(pe.a,{item:!0},i.a.createElement(Ne.a,{type:"submit",variant:"contained",color:"primary",onClick:()=>(function(){b(!0);const{subscriptionAvailability:e}=d;r({policies:c,subscriptionAvailability:e,subscriptionAvailableTenants:u}).then(()=>{$.a.info("Subscription configurations updated successfully")}).catch(e=>{console.error(e),$.a.error("Error occurred while updating subscription configurations")}).finally(()=>{b(!1)})})()},i.a.createElement(q.a,{id:"Apis.Details.Subscriptions.Subscriptions.save",defaultMessage:"Save"}))),i.a.createElement(pe.a,{item:!0},i.a.createElement(W.b,{to:"/apis/"+a.id+"/overview"},i.a.createElement(Ne.a,null,i.a.createElement(q.a,{id:"Apis.Details.Subscriptions.Subscriptions.cancel",defaultMessage:"Cancel"}))))),i.a.createElement(Jl,{api:a}))}fc.propTypes={updateAPI:s.a.func.isRequired};var Ec=wl()(Ue.a)(fc),bc=a(2310),yc=a.n(bc),vc=a(1496),Cc=a.n(vc),Ac=a(1497),Dc=a.n(Ac),Sc=a(739);class Oc extends i.a.Component{constructor(e){super(e),this.state={commentText:"",category:"General",currentLength:0},this.inputChange=this.inputChange.bind(this),this.handleClickAddComment=this.handleClickAddComment.bind(this),this.handleClickCancel=this.handleClickCancel.bind(this),this.handleCategoryChange=this.handleCategoryChange.bind(this),this.filterCommentToAddReply=this.filterCommentToAddReply.bind(this)}inputChange(e){let{target:t}=e;this.setState({commentText:t.value,currentLength:t.value.length})}handleClickCancel(){const{toggleShowReply:e}=this.props;e()}handleCategoryChange(e){this.setState({category:e.target.value})}filterCommentToAddReply(e){const{parentCommentId:t}=this.props;return e.commentId===t}handleClickAddComment(){const{api:e,parentCommentId:t,allComments:a,toggleShowReply:n,commentsUpdate:i}=this.props,{category:r,commentText:s}=this.state,o=new Q.a,l=e.id,c={apiId:e.id,category:r,commentText:s.trim(),parentCommentId:t};c.commentText.replace(/\s/g,"").length?o.addComment(l,c).then(e=>{this.setState({commentText:"",category:"General"});const r=e.body;if(null===t)a.push(r);else{const e=a.findIndex(this.filterCommentToAddReply);a[e].replies.push(r),n()}i(a)}).catch(e=>{console.error(e),e.response?$.a.error(e.response.body.message):$.a.error("Something went wrong while adding the comment")}):$.a.error("You cannot enter a blank comment"),this.setState({currentLength:0})}render(){const{classes:e,cancelButton:t,theme:a}=this.props,{category:n,commentText:r,currentLength:s}=this.state;return i.a.createElement(pe.a,{container:!0,spacing:7,className:e.contentWrapper},i.a.createElement(pe.a,{item:!0,xs:!0,zeroMinWidth:!0},i.a.createElement(ft.a,{className:e.category},i.a.createElement(Ji.a,{value:n,onChange:this.handleCategoryChange},i.a.createElement(At.a,{value:"General"},"General"),i.a.createElement(At.a,{value:"Feature Request"},"Feature Request"),i.a.createElement(At.a,{value:"Bug Report"},"Bug Report"))),i.a.createElement(vt.a,{id:"standard-multiline-flexible",autoFocus:!0,multiline:!0,className:e.textField,margin:"normal",placeholder:"Write a comment",inputProps:{maxLength:a.custom.maxCommentLength},value:r,onChange:this.inputChange}),i.a.createElement(K.a,{className:e.commentText,align:"right"},s+"/"+a.custom.maxCommentLength),i.a.createElement(pe.a,{container:!0,spacing:2},i.a.createElement(pe.a,{item:!0},i.a.createElement(Ne.a,{variant:"contained",color:"primary",onClick:()=>this.handleClickAddComment()},"Add Comment")),t&&i.a.createElement(pe.a,{item:!0},i.a.createElement(Ne.a,{onClick:()=>this.handleClickCancel(),className:e.button},"Cancel")))))}}Oc.defaultProps={api:null,parentCommentId:null,toggleShowReply:null,commentsUpdate:null},Oc.propTypes={classes:s.a.instanceOf(Object).isRequired,cancelButton:s.a.bool.isRequired,api:s.a.instanceOf(Object),parentCommentId:s.a.string,toggleShowReply:s.a.func,commentsUpdate:s.a.func,allComments:s.a.instanceOf(Array).isRequired,theme:s.a.shape({}).isRequired};var wc=Object(L.a)(e=>({commentIcon:{color:e.palette.getContrastText(e.palette.background.default)},commentText:{color:e.palette.getContrastText(e.palette.background.default)},contentWrapper:{maxWidth:e.custom.contentAreaWidth,paddingLeft:e.spacing(2),paddingTop:e.spacing.unig,marginTop:e.spacing(2)},textField:{marginTop:0,width:"88%"},category:{width:"12%"}}),{withTheme:!0})(Oc);class Pc extends i.a.Component{constructor(e){super(e),this.state={commentText:"",category:"",currentLength:0},this.inputChange=this.inputChange.bind(this),this.handleCategoryChange=this.handleCategoryChange.bind(this),this.handleClickUpdateComment=this.handleClickUpdateComment.bind(this),this.handleClickCancel=this.handleClickCancel.bind(this),this.filterCommentToUpdate=this.filterCommentToUpdate.bind(this),this.filterCommentToUpdateReply=this.filterCommentToUpdateReply.bind(this)}componentDidMount(){const{comment:e}=this.props;this.setState({commentText:e.commentText,category:e.category,currentLength:e.commentText.length})}inputChange(e){let{target:t}=e;this.setState({commentText:t.value,currentLength:t.value.length})}handleClickCancel(){const{toggleShowEdit:e,commentsUpdate:t,allComments:a}=this.props;e(),t(a)}handleCategoryChange(e){this.setState({category:e.target.value})}filterCommentToUpdate(e){const{comment:t}=this.props;return e.commentId===t.commentId}filterCommentToUpdateReply(e){const{comment:t}=this.props;return e.commentId===t.parentCommentId}handleClickUpdateComment(){const{api:e,comment:t,allComments:a,toggleShowEdit:n,commentsUpdate:i}=this.props,{category:r,commentText:s}=this.state,o=new Q.a,l=e.id,c=t;c.commentText=s.trim(),c.category=r,t.commentText.replace(/\s/g,"").length?o.updateComment(l,c.commentId,c).then(e=>{const t=e.body;if(void 0===c.parentCommentId){const e=a.findIndex(this.filterCommentToUpdate);a[e].category=t.category,a[e].commentText=t.commentText}else{const e=a.findIndex(this.filterCommentToUpdateReply),n=a[e].replies.findIndex(this.filterCommentToUpdate);a[e].replies[n]=t}n(),i(a)}).catch(e=>{console.error(e),e.response?$.a.error(e.response.body.message):$.a.error("Something went wrong while adding the comment")}):$.a.error("You cannot enter a blank comment")}render(){const{classes:e,theme:t}=this.props,{category:a,commentText:n,currentLength:r}=this.state;return i.a.createElement("div",null,i.a.createElement(ft.a,{className:e.category},i.a.createElement(Ji.a,{value:a,onChange:this.handleCategoryChange},i.a.createElement(At.a,{value:"General"},"General"),i.a.createElement(At.a,{value:"Feature Request"},"Feature Request"),i.a.createElement(At.a,{value:"Bug Report"},"Bug Report"))),i.a.createElement(vt.a,{id:"multiline-static",autoFocus:!0,multiline:!0,className:e.textField,margin:"normal",placeholder:"Write a comment",inputProps:{maxLength:t.custom.maxCommentLength},value:n,onChange:this.inputChange}),i.a.createElement(K.a,{className:e.commentText,align:"right"},r+"/"+t.custom.maxCommentLength),i.a.createElement(pe.a,{container:!0,spacing:2},i.a.createElement(pe.a,{item:!0},i.a.createElement(Ne.a,{variant:"contained",color:"primary",onClick:()=>this.handleClickUpdateComment()},"Save")),i.a.createElement(pe.a,{item:!0},i.a.createElement(Ne.a,{onClick:()=>this.handleClickCancel(),className:e.button},"Cancel"))))}}Pc.propTypes={classes:s.a.instanceOf(Object).isRequired,api:s.a.instanceOf(Object).isRequired,allComments:s.a.instanceOf(Array).isRequired,commentsUpdate:s.a.func.isRequired,toggleShowEdit:s.a.func.isRequired,comment:s.a.instanceOf(Object).isRequired,theme:s.a.shape({}).isRequired};var xc=Object(L.a)(e=>({textField:{marginTop:0,width:"87.5%"},contentWrapper:{maxWidth:e.custom.contentAreaWidth,paddingLeft:e.spacing(2),paddingTop:e.spacing(1),marginTop:e.spacing(2)},category:{width:"12%",marginRight:"0.5%"}}),{withTheme:!0})(Pc),Tc=a(581);class Ic extends i.a.Component{constructor(e){super(e),this.state={},this.showAddComment=this.showAddComment.bind(this),this.showEditComment=this.showEditComment.bind(this),this.handleClickOpen=this.handleClickOpen.bind(this)}showAddComment(e){const{editIndex:t,showAddComment:a}=this.props;-1===t&&a(e)}showEditComment(e){const{editIndex:t,showEditComment:a}=this.props;-1===t&&a(e)}handleClickOpen(e){const{editIndex:t,handleClickOpen:a}=this.props;-1===t&&a(e)}displayDate(e){const t=new Date(e);return t.toLocaleDateString(void 0,{day:"numeric",month:"short",year:"numeric"})+" "+t.toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit"})}render(){const{classes:e,comment:t,editIndex:a,index:n,theme:r}=this.props,s=t.createdBy===o.a.getUser().name||o.a.getUser().name===r.custom.adminRole,l=t.createdBy===o.a.getUser().name&&"APIPublisher"===t.entryPoint;return i.a.createElement(Cc.a,{container:!0,spacing:2,className:e.verticalSpace,key:t.commentId},null==t.parentCommentId&&[i.a.createElement(Cc.a,{item:!0,key:"key-reply"},i.a.createElement(K.a,{component:"a",className:-1===a?e.link:e.disable,onClick:()=>this.showAddComment(n)},"Reply")),i.a.createElement(Cc.a,{item:!0,key:"key-reply-vertical-divider"},i.a.createElement(Tc.a,{height:15}))],s&&[i.a.createElement(Cc.a,{item:!0,key:"key-delete"},i.a.createElement(K.a,{component:"a",className:-1===a?e.link:e.disable,onClick:()=>this.handleClickOpen(t)},"Delete")),i.a.createElement(Cc.a,{item:!0,key:"key-delete-vertical-divider"},i.a.createElement(Tc.a,{height:15}))],l&&[i.a.createElement(Cc.a,{item:!0,key:"key-edit"},i.a.createElement(K.a,{component:"a",className:-1===a?e.link:e.disable,onClick:()=>this.showEditComment(n)},"Edit")),i.a.createElement(Cc.a,{item:!0,key:"key-edit-verical-divider"},i.a.createElement(Tc.a,{height:15}))],i.a.createElement(Cc.a,{item:!0,className:e.time},i.a.createElement(K.a,{component:"a",variant:"caption"},this.displayDate(t.createdTime))),a===n?null:[i.a.createElement(Cc.a,{item:!0,key:"key-category-vertical-divider"},i.a.createElement(Tc.a,{height:15})),i.a.createElement(Cc.a,{item:!0,className:e.time,key:"key-category"},i.a.createElement(K.a,{component:"a",variant:"caption"},t.category))])}}Ic.defaultProps={showAddComment:null},Ic.propTypes={classes:s.a.instanceOf(Object).isRequired,editIndex:s.a.number.isRequired,index:s.a.number.isRequired,comment:s.a.instanceOf(Object).isRequired,handleClickOpen:s.a.func.isRequired,showEditComment:s.a.func.isRequired,showAddComment:s.a.func,theme:s.a.shape({}).isRequired};var Mc=Object(L.a)(e=>({link:{color:e.palette.getContrastText(e.palette.background.default),cursor:"pointer"},time:{color:e.palette.getContrastText(e.palette.background.default),marginTop:e.spacing(.3)},verticalSpace:{marginTop:e.spacing(.2)},disable:{color:e.custom.disableColor},commentIcon:{color:e.palette.getContrastText(e.palette.background.default)},commentText:{color:e.palette.getContrastText(e.palette.background.default),marginTop:e.spacing.unig,width:"100%",whiteSpace:"pre-wrap",overflowWrap:"break-word"},root:{marginTop:e.spacing(2.5)},contentWrapper:{maxWidth:e.custom.contentAreaWidth,paddingLeft:e.spacing(2),paddingTop:e.spacing.unig}}),{withTheme:!0})(Ic);function Rc(){return(Rc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}class Nc extends i.a.Component{constructor(e){super(e),this.state={openDialog:!1,editIndex:-1,deleteComment:null},this.keyCount=0,this.getKey=this.getKey.bind(this),this.handleClickDeleteComment=this.handleClickDeleteComment.bind(this),this.handleShowEdit=this.handleShowEdit.bind(this),this.handleClickOpen=this.handleClickOpen.bind(this),this.showEditComment=this.showEditComment.bind(this),this.handleConfirmDialog=this.handleConfirmDialog.bind(this),this.handleClose=this.handleClose.bind(this),this.filterRemainingComments=this.filterRemainingComments.bind(this),this.filterCommentToDelete=this.filterCommentToDelete.bind(this)}getKey(){return this.keyCount++}filterRemainingComments(e){const{deleteComment:t}=this.state;return e.commentId!==t.commentId}filterCommentToDelete(e){const{deleteComment:t}=this.state;return e.commentId===t.parentCommentId}showEditComment(e){const{editIndex:t}=this.state;-1===t&&this.setState({editIndex:e})}handleShowEdit(){this.setState({editIndex:-1})}handleClickOpen(e){const{editIndex:t}=this.state;-1===t&&this.setState({deleteComment:e,openDialog:!0})}handleClose(){this.setState({openDialog:!1})}handleConfirmDialog(e){e?this.handleClickDeleteComment():this.handleClose()}handleClickDeleteComment(){const e=new Q.a,{deleteComment:t}=this.state,{api:a,allComments:n,commentsUpdate:i}=this.props,r=t.commentId,s=t.parentCommentId,o=a.id;this.handleClose(),e.deleteComment(o,r).then(()=>{if(void 0===s){const e=n.filter(this.filterRemainingComments);i(e)}else{const e=n.findIndex(this.filterCommentToDelete),t=n[e].replies.filter(this.filterRemainingComments);n[e].replies=t,i(n)}}).catch(e=>{console.error(e),e.response?$.a.error(e.response.body.message):$.a.error("Something went wrong while deleting comment - ".concat(r))})}render(){const{classes:e,comments:t,api:a,allComments:n,commentsUpdate:r}=this.props,{editIndex:s,openDialog:o}=this.state,l={api:a,allComments:n,commentsUpdate:r};return[t&&t.map((t,a)=>i.a.createElement("div",{key:this.getKey(),className:e.contentWrapper},i.a.createElement(pe.a,{container:!0,spacing:2,className:e.root},i.a.createElement(pe.a,{item:!0},i.a.createElement(Dc.a,{className:e.commentIcon})),i.a.createElement(pe.a,{item:!0,xs:!0,zeroMinWidth:!0},i.a.createElement(K.a,{noWrap:!0,className:e.commentText,variant:"body1"},t.createdBy),a!==s&&i.a.createElement(K.a,{className:e.commentText},t.commentText),a===s&&i.a.createElement(xc,Rc({},l,{comment:t,toggleShowEdit:this.handleShowEdit})),i.a.createElement(Mc,{classes:e,comment:t,editIndex:s,index:a,showAddComment:this.showAddComment,handleClickOpen:this.handleClickOpen,showEditComment:this.showEditComment}))))),i.a.createElement(Sc.a,{key:"key-dialog",labelCancel:"Cancel",title:"Confirm Delete",message:"Are you sure you want to delete this comment?",labelOk:"Yes",callback:this.handleConfirmDialog,open:o})]}}Nc.defaultProps={api:null},Nc.propTypes={classes:s.a.instanceOf(Object).isRequired,api:s.a.instanceOf(Object),allComments:s.a.instanceOf(Array).isRequired,commentsUpdate:s.a.func.isRequired,comments:s.a.instanceOf(Array).isRequired};var jc=Object(L.a)(e=>({link:{color:e.palette.getContrastText(e.palette.background.default),cursor:"pointer"},commentIcon:{color:e.palette.getContrastText(e.palette.background.default)},commentText:{color:e.palette.getContrastText(e.palette.background.default),marginTop:e.spacing(1),width:"100%",whiteSpace:"pre-wrap",overflowWrap:"break-word"},root:{marginTop:e.spacing(2.5)},contentWrapper:{maxWidth:e.custom.contentAreaWidth,paddingLeft:e.spacing(2),paddingTop:e.spacing(1)}}))(Nc);function kc(){return(kc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}class Lc extends i.a.Component{constructor(e){super(e),this.state={openDialog:!1,replyIndex:-1,editIndex:-1,deleteComment:null},this.keyCount=0,this.getKey=this.getKey.bind(this),this.handleClickDeleteComment=this.handleClickDeleteComment.bind(this),this.handleShowEdit=this.handleShowEdit.bind(this),this.handleShowReply=this.handleShowReply.bind(this),this.handleClickOpen=this.handleClickOpen.bind(this),this.showAddComment=this.showAddComment.bind(this),this.showEditComment=this.showEditComment.bind(this),this.handleConfirmDialog=this.handleConfirmDialog.bind(this),this.handleClose=this.handleClose.bind(this),this.filterRemainingComments=this.filterRemainingComments.bind(this),this.filterCommentToDelete=this.filterCommentToDelete.bind(this)}getKey(){return this.keyCount++}filterRemainingComments(e){const{deleteComment:t}=this.state;return e.commentId!==t.commentId}filterCommentToDelete(e){const{deleteComment:t}=this.state;return e.commentId===t.parentCommentId}showAddComment(e){const{editIndex:t}=this.state;-1===t&&this.setState({replyIndex:e})}showEditComment(e){const{editIndex:t}=this.state;-1===t&&this.setState({editIndex:e})}handleShowEdit(){this.setState({editIndex:-1})}handleShowReply(){this.setState({replyIndex:-1})}handleClickOpen(e){const{editIndex:t}=this.state;-1===t&&this.setState({deleteComment:e,openDialog:!0})}handleClose(){this.setState({openDialog:!1})}handleConfirmDialog(e){e?this.handleClickDeleteComment():this.handleClose()}handleClickDeleteComment(){const e=new Q.a,{deleteComment:t}=this.state,{api:a,allComments:n,commentsUpdate:i}=this.props,r=t.commentId,s=t.parentCommentId,o=a.id;this.handleClose(),e.deleteComment(o,r).then(()=>{if(void 0===s){const e=n.filter(this.filterRemainingComments);i(e)}else{const e=n.findIndex(this.filterCommentToDelete),t=n[e].replies.filter(this.filterRemainingComments);n[e].replies=t,i(n)}}).catch(e=>{console.error(e),e.response?$.a.error(e.response.body.message):$.a.error("Something went wrong while deleting comment - ".concat(r))})}render(){const{classes:e,comments:t,api:a,allComments:n,commentsUpdate:r}=this.props,{editIndex:s,replyIndex:o,openDialog:l}=this.state,c={api:a,allComments:n,commentsUpdate:r};return[t&&t.slice(0).reverse().map((t,a)=>i.a.createElement("div",{key:this.getKey(),className:e.contentWrapper},i.a.createElement(pe.a,{container:!0,spacing:2,className:e.root},i.a.createElement(pe.a,{item:!0},i.a.createElement(Dc.a,{className:e.commentIcon})),i.a.createElement(pe.a,{item:!0,xs:!0,zeroMinWidth:!0},i.a.createElement(K.a,{noWrap:!0,className:e.commentText,variant:"body1"},t.createdBy),a!==s&&i.a.createElement(K.a,{className:e.commentText},t.commentText),a===s&&i.a.createElement(xc,kc({},c,{comment:t,toggleShowEdit:this.handleShowEdit})),i.a.createElement(Mc,{classes:e,comment:t,editIndex:s,index:a,showAddComment:this.showAddComment,handleClickOpen:this.handleClickOpen,showEditComment:this.showEditComment}),a===o&&i.a.createElement(wc,kc({},c,{parentCommentId:t.commentId,toggleShowReply:this.handleShowReply,cancelButton:!0})),0!==t.replies.length&&i.a.createElement(jc,kc({},c,{classes:e,comments:t.replies})))))),i.a.createElement(Sc.a,{key:"key-dialog",labelCancel:"Cancel",title:"Confirm Delete",message:"Are you sure you want to delete this comment?",labelOk:"Yes",callback:this.handleConfirmDialog,open:l})]}}Lc.defaultProps={api:null},Lc.propTypes={classes:s.a.instanceOf(Object).isRequired,api:s.a.instanceOf(Object),allComments:s.a.instanceOf(Array).isRequired,commentsUpdate:s.a.func.isRequired,comments:s.a.instanceOf(Array).isRequired};var qc=Object(L.a)(e=>({link:{color:e.palette.getContrastText(e.palette.background.default),cursor:"pointer"},commentIcon:{color:e.palette.getContrastText(e.palette.background.default)},commentText:{color:e.palette.getContrastText(e.palette.background.default),marginTop:e.spacing.unig,width:"100%",whiteSpace:"pre-wrap",overflowWrap:"break-word"},root:{marginTop:e.spacing(2.5)},contentWrapper:{maxWidth:e.custom.contentAreaWidth,paddingLeft:e.spacing(2),paddingTop:e.spacing(2)}}))(Lc);class _c extends n.Component{constructor(e){super(e),this.state={expanded:!0,allComments:[],comments:[],totalComments:0,startCommentsToDisplay:0},this.updateCommentList=this.updateCommentList.bind(this),this.handleExpandClick=this.handleExpandClick.bind(this),this.handleLoadMoreComments=this.handleLoadMoreComments.bind(this)}componentDidMount(){const{api:e,theme:t}=this.props;(new Q.a).getAllComments(e.id).then(e=>{const a=e.body.list;this.setState({allComments:a,totalComments:a.length}),a.length<t.custom.commentsLimit?this.setState({startCommentsToDisplay:0,comments:a.slice(0,a.length)}):this.setState({startCommentsToDisplay:a.length-t.custom.commentsLimit,comments:a.slice(a.length-t.custom.commentsLimit,a.length)})}).catch(e=>{console.error(e),e.response?$.a.error(e.response.body.message):$.a.error("Something went wrong while retrieving comments")})}handleLoadMoreComments(){const{totalComments:e,startCommentsToDisplay:t,allComments:a}=this.state,{theme:n}=this.props;t-n.custom.commentsLimit<=0?this.setState({startCommentsToDisplay:0,comments:a.slice(0,e)}):this.setState({startCommentsToDisplay:t-n.custom.commentsLimit,comments:a.slice(t-n.custom.commentsLimit,e)})}handleExpandClick(){const{expanded:e}=this.state;this.setState({expanded:!e})}updateCommentList(e){const{startCommentsToDisplay:t,totalComments:a}=this.state,{theme:n}=this.props;let i,r,s;this.setState({allComments:e}),a<n.custom.commentsLimit?(s=e.length,this.setState({startCommentsToDisplay:0,totalComments:s,comments:e})):a<=e.length?(i=t+(r=e.length-a),s=e.length,this.setState({startCommentsToDisplay:i,totalComments:s,comments:e.slice(i,s)})):(r=a-e.length,i=0===t?t:t-r,s=e.length,this.setState({startCommentsToDisplay:i,totalComments:s,comments:e.slice(i,s)}))}render(){const{classes:e,api:t}=this.props,{comments:a,expanded:n,allComments:r,startCommentsToDisplay:s,totalComments:o}=this.state;return i.a.createElement("div",{className:e.contentWrapper},i.a.createElement("div",{className:e.root},i.a.createElement(yc.a,{onClick:this.handleExpandClick,"aria-expanded":n}),i.a.createElement(K.a,{onClick:this.handleExpandClick,variant:"h4",className:e.titleSub},"Comments")),i.a.createElement(Da.a,{in:n,timeout:"auto",unmountOnExit:!0},i.a.createElement(wc,{api:t,commentsUpdate:this.updateCommentList,allComments:r,parentCommentId:null,cancelButton:!1}),i.a.createElement(qc,{comments:a,api:t,commentsUpdate:this.updateCommentList,allComments:r}),0!==s&&i.a.createElement("div",{className:e.contentWrapper},i.a.createElement(Cc.a,{container:!0,spacing:8,className:e.root},i.a.createElement(Cc.a,{item:!0},i.a.createElement(K.a,{className:e.verticalSpace,variant:"body1",onClick:this.handleLoadMoreComments},i.a.createElement("a",{className:e.link+" "+e.loadMoreLink},"Load Previous Comments"))),i.a.createElement(Cc.a,null,i.a.createElement(ur.a,{onClick:this.handleLoadMoreComments,className:e.link+" "+e.verticalSpace})),i.a.createElement(Cc.a,{item:!0},i.a.createElement(K.a,{className:e.verticalSpace,variant:"body1"},"Showing comments",o+-s+" of "+o))))))}}_c.propTypes={classes:s.a.instanceOf(Object).isRequired,api:s.a.instanceOf(Object).isRequired,theme:s.a.shape({}).isRequired};var Wc=Object(L.a)(e=>({root:{display:"flex",alignItems:"center",paddingTop:e.spacing(2),paddingBottom:e.spacing(2)},contentWrapper:{maxWidth:e.custom.contentAreaWidth,paddingLeft:e.spacing(2),paddingTop:e.spacing.unig},titleSub:{cursor:"pointer"},link:{color:e.palette.getContrastText(e.palette.background.default),cursor:"pointer"},verticalSpace:{marginTop:e.spacing(.2)},loadMoreLink:{textDecoration:"underline"}}),{withTheme:!0})(_c);function Fc(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}class zc extends i.a.Component{constructor(e){var t,a,n;super(e),n=e=>{const{validRoles:t,invalidRoles:a}=this.state;if(a.includes(e)){const t=a.filter(t=>t!==e);this.setState({invalidRoles:t}),0===t.length&&this.setState({roleValidity:!0})}else this.setState({validRoles:t.filter(t=>t!==e)})},(a="handleRoleDeletion")in(t=this)?Object.defineProperty(t,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[a]=n,this.api=new Q.a,this.api_uuid=e.match.params.api_uuid;const i=[];i.name={invalid:!1,error:""},i.description={invalid:!1,error:""},this.state={apiScopes:null,apiScope:{},validRoles:[],valid:i,roleValidity:!0,invalidRoles:[],scopeAddDisabled:!1},this.addScope=this.addScope.bind(this),this.validateScopeName=this.validateScopeName.bind(this),this.handleScopeNameInput=this.handleScopeNameInput.bind(this),this.validateScopeDescription=this.validateScopeDescription.bind(this),this.handleRoleAddition=this.handleRoleAddition.bind(this),this.handleRoleDeletion=this.handleRoleDeletion.bind(this)}handleRoleAddition(e){const{validRoles:t,invalidRoles:a}=this.state;Ot.a.role.validate(Pt.a.encode(e)).then(()=>{this.setState({roleValidity:!0,validRoles:[].concat(Fc(t),[e])})}).catch(t=>{404===t.status?this.setState({roleValidity:!1,invalidRoles:[].concat(Fc(a),[e])}):($.a.error("Error when validating role: "+e),console.error("Error when validating role "+t))})}validateScopeDescription(e){let{target:{id:t,value:a}}=e;const{valid:n,apiScope:i}=this.state;i[t]=a,n[t].invalid=!1,n[t].error="",this.setState({valid:n,apiScope:i})}validateScopeName(e,t){const{valid:a,apiScope:n}=this.state,{api:{scopes:i}}=this.props;n[e]=t,a[e].invalid=!(t&&t.length>0),a[e].invalid&&(a[e].error="Scope name cannot be empty"),/\s/.test(t)&&(a[e].invalid=!0,a[e].error="Scope name cannot have spaces");const r=i.find(e=>e.name===t);if(!a[e].invalid&&r&&(a[e].invalid=!0,a[e].error="Scope name already exist"),!a[e].invalid&&/[!@#$%^&*(),?"{}[\]|<>\t\n]|(^apim:)/i.test(t)&&(a[e].invalid=!0,a[e].error="Field contains special characters"),!a[e].invalid){Ot.a.scope.validate(Pt.a.encode(t)).then(()=>{a[e].invalid=!0,a[e].error="Scope name is already used by another API",this.setState({valid:a})}).catch(n=>{404===n.status?(a[e].invalid=!1,a[e].error="",this.setState({valid:a})):($.a.error("Error when validating scope: "+t),console.error("Error when validating scope "+n))})}return a[e].invalid||(a[e].error=""),this.setState({valid:a,apiScope:n}),a[e].invalid}addScope(){const{intl:e,api:t,history:a,updateAPI:n}=this.props,i="APIProduct"===t.apiType?"api-products":"apis";if(this.validateScopeName("name",this.state.apiScope.name))return;const r=this.state.apiScope;r.bindings={type:"role",values:this.state.validRoles};const s=t.scopes.map(e=>e);s.push(r);const o=n({scopes:s});this.setState({scopeAddDisabled:!0}),o.then(()=>{$.a.info(e.formatMessage({id:"Apis.Details.Scopes.CreateScope.scope.added.successfully",defaultMessage:"Scope added successfully"}));const{apiScopes:n}=this.state,r="/"+i+"/"+t.id+"/scopes/";a.push(r),this.setState({apiScopes:n,apiScope:{},validRoles:[]})}).catch(e=>{const{response:t}=e;if(t.body){const{description:e}=t.body;$.a.error(e)}}).finally(()=>{this.setState({scopeAddDisabled:!1})})}handleScopeNameInput(e){let{target:{id:t,value:a}}=e;this.validateScopeName(t,a)}render(){const{classes:e,api:t}=this.props,a="APIProduct"===t.apiType?"api-products":"apis",n="/".concat(a,"/").concat(t.id,"/scopes"),{roleValidity:r,validRoles:s,invalidRoles:l,scopeAddDisabled:c}=this.state;return i.a.createElement(pe.a,{container:!0,spacing:3},i.a.createElement(pe.a,{item:!0,sm:12,md:12}),i.a.createElement(pe.a,{item:!0,sm:0,md:0,lg:2}),i.a.createElement(pe.a,{item:!0,sm:12,md:12,lg:8},i.a.createElement(pe.a,{container:!0,spacing:5,className:e.titleGrid},i.a.createElement(pe.a,{item:!0,md:12},i.a.createElement("div",{className:e.titleWrapper},i.a.createElement(W.b,{to:n,className:e.titleLink},i.a.createElement(K.a,{variant:"h4"},i.a.createElement(q.a,{id:"Apis.Details.Scopes.Scopes.heading.scope.heading",defaultMessage:"Scopes"}))),i.a.createElement(Ma.a,null,"keyboard_arrow_right"),i.a.createElement(K.a,{variant:"h4"},i.a.createElement(q.a,{id:"Apis.Details.Scopes.CreateScope.create.new.scope",defaultMessage:"Create New Scope"})))),i.a.createElement(pe.a,{item:!0,md:12},i.a.createElement(ce.a,{elevation:0,className:e.root},i.a.createElement(ft.a,{margin:"normal"},i.a.createElement(vt.a,{id:"name",label:"Name",placeholder:"Scope Name",error:this.state.valid.name.invalid,helperText:this.state.valid.name.invalid?this.state.valid.name.error:i.a.createElement(q.a,{id:"Apis.Details.Scopes.CreateScope.short.description.name",defaultMessage:"Enter Scope Name ( Ex: creator )"}),fullWidth:!0,margin:"normal",variant:"outlined",InputLabelProps:{shrink:!0},value:this.state.apiScope.name||"",onChange:this.handleScopeNameInput})),i.a.createElement(ft.a,{margin:"normal",classes:{root:e.descriptionForm}},i.a.createElement(vt.a,{id:"description",label:"Description",variant:"outlined",placeholder:"Short description about the scope",helperText:i.a.createElement(q.a,{id:"Apis.Details.Scopes.CreateScope.short.description.about.the.scope",defaultMessage:"Short description about the scope"}),margin:"normal",InputLabelProps:{shrink:!0},onChange:this.validateScopeDescription,value:this.state.apiScope.description||"",multiline:!0})),i.a.createElement(ft.a,{margin:"normal"},i.a.createElement(St.a,{label:"Roles",InputLabelProps:{shrink:!0},variant:"outlined",value:s.concat(l),alwaysShowPlaceholder:!1,placeholder:"Enter roles and press Enter",blurBehavior:"clear",InputProps:{endAdornment:!r&&i.a.createElement(It.a,{position:"end"},i.a.createElement(Tt.a,{color:"error"}))},onAdd:this.handleRoleAddition,error:!r,helperText:r?i.a.createElement(q.a,{id:"Apis.Details.Scopes.CreateScope.roles.help",defaultMessage:"Enter a valid role and press `Enter`."}):i.a.createElement(q.a,{id:"Apis.Details.Scopes.Roles.Invalid",defaultMessage:"Role is invalid"}),chipRenderer:(e,t)=>{let{value:a}=e;return i.a.createElement(ue.a,{key:t,label:a,onDelete:()=>{this.handleRoleDeletion(a)},style:{backgroundColor:l.includes(a)?Mt.a[300]:null,margin:"8px 8px 8px 0",float:"left"}})}})),i.a.createElement("div",{className:e.addNewOther},i.a.createElement(Ne.a,{variant:"contained",color:"primary",onClick:this.addScope,disabled:Object(o.b)(["apim:api_create"],t)||this.state.valid.name.invalid||0!==l.length||c,className:e.saveButton},c?i.a.createElement(i.a.Fragment,null,i.a.createElement(q.a,{id:"Apis.Details.Scopes.CreateScope.saving",defaultMessage:"Saving"}),i.a.createElement(Ze.a,{size:16,classes:{root:e.progress}})):i.a.createElement(q.a,{id:"Apis.Details.Scopes.CreateScope.save",defaultMessage:"Save"})),i.a.createElement(W.b,{to:n},i.a.createElement(Ne.a,null,i.a.createElement(q.a,{id:"Apis.Details.Scopes.CreateScope.cancel",defaultMessage:"Cancel"})))))))))}}zc.propTypes={match:s.a.shape({params:s.a.object}),api:s.a.shape({id:s.a.string}).isRequired,history:s.a.shape({push:s.a.func}).isRequired,classes:s.a.shape({}).isRequired,intl:s.a.shape({formatMessage:s.a.func}).isRequired,updateAPI:s.a.func.isRequired},zc.defaultProps={match:{params:{}}};var Bc=Object(q.d)(Object(L.a)(e=>({root:{flexGrow:1,marginTop:10,display:"flex",flexDirection:"column",padding:20},titleWrapper:{display:"flex",flexDirection:"row",alignItems:"center",marginBottom:e.spacing(3)},titleLink:{color:e.palette.primary.main,marginRight:e.spacing(1)},contentWrapper:{maxWidth:e.custom.contentAreaWidth},mainTitle:{paddingLeft:0},FormControl:{padding:"0 0 0 ".concat(e.spacing(1),"px"),width:"100%",marginTop:0},FormControlOdd:{padding:"0 0 0 ".concat(e.spacing(1),"px"),backgroundColor:e.palette.background.paper,width:"100%",marginTop:0},FormControlLabel:{marginBottom:e.spacing(1),marginTop:e.spacing(1),fontSize:e.typography.caption.fontSize},buttonSection:{paddingTop:e.spacing(3)},saveButton:{marginRight:e.spacing(1)},helpText:{color:e.palette.text.hint,marginTop:e.spacing(1)},extraPadding:{paddingLeft:e.spacing(2)},addNewOther:{paddingTop:40},titleGrid:{" & .MuiGrid-item":{padding:0,margin:0}},descriptionForm:{marginTop:e.spacing(1)},progress:{marginLeft:e.spacing(1)}}))(zc)),Uc=a(2311),Vc=a.n(Uc);function Hc(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Gc(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Kc(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Gc(a,!0).forEach(function(t){Yc(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Gc(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function Yc(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Jc extends i.a.Component{constructor(e){super(e),Yc(this,"handleRoleDeletion",e=>{const{validRoles:t,invalidRoles:a}=this.state;if(a.includes(e)){const t=a.filter(t=>t!==e);this.setState({invalidRoles:t}),0===t.length&&this.setState({roleValidity:!0})}else this.setState({validRoles:t.filter(t=>t!==e)})}),this.api_uuid=e.match.params.api_uuid;const{api:t,location:a}=this.props,n=t.scopes.find(e=>e.name===a.state.scopeName);this.state={apiScope:Kc({},n),validRoles:n.bindings.values,invalidRoles:[],roleValidity:!0},this.updateScope=this.updateScope.bind(this),this.handleInputs=this.handleInputs.bind(this),this.handleRoleDeletion=this.handleRoleDeletion.bind(this),this.handleRoleAddition=this.handleRoleAddition.bind(this),this.validateScopeDescription=this.validateScopeDescription.bind(this)}handleInputs(e){if(Array.isArray(e)){const{apiScope:t}=this.state;t.bindings.values=e,this.setState({apiScope:t})}else{const t=e.target,{apiScope:a}=this.state;a[t.id]=t.value,this.setState({apiScope:a})}}updateScope(){const{apiScope:e,validRoles:t}=this.state,{intl:a,api:n,history:i,updateAPI:r}=this.props;e.bindings={type:"role",values:t};const s="APIProduct"===n.apiType?"api-products":"apis",o=r({scopes:n.scopes.map(t=>t.name===e.name?e:t)});o.then(()=>{$.a.info(a.formatMessage({id:"Apis.Details.Scopes.CreateScope.scope.updated.successfully",defaultMessage:"Scope updated successfully"}));const e="/"+s+"/"+n.id+"/scopes/";i.push(e)}),o.catch(e=>{const{response:t}=e;if(t.body){const{description:e}=t.body;$.a.error(e)}})}handleRoleAddition(e){const{validRoles:t,invalidRoles:a}=this.state;Ot.a.role.validate(Pt.a.encode(e)).then(()=>{this.setState({roleValidity:!0,validRoles:[].concat(Hc(t),[e])})}).catch(t=>{404===t.status?this.setState({roleValidity:!1,invalidRoles:[].concat(Hc(a),[e])}):($.a.error("Error when validating role: "+e),console.error("Error when validating role "+t))})}validateScopeDescription(e){let{target:{id:t,value:a}}=e;const{apiScope:n}=this.state;n[t]=a,this.setState({apiScope:n})}render(){const{classes:e,api:t,isAPIProduct:a}=this.props,{apiScope:n,roleValidity:r,validRoles:s,invalidRoles:o}=this.state,l="/".concat(a?"api-products":"apis","/").concat(t.id,"/scopes");return i.a.createElement(pe.a,{container:!0,spacing:3},i.a.createElement(pe.a,{item:!0,sm:12,md:12}),i.a.createElement(pe.a,{item:!0,sm:0,md:0,lg:2}),i.a.createElement(pe.a,{item:!0,sm:12,md:12,lg:8},i.a.createElement(pe.a,{container:!0,spacing:5,className:e.titleGrid},i.a.createElement(pe.a,{item:!0,md:12},i.a.createElement("div",{className:e.titleWrapper},i.a.createElement(W.b,{to:l,className:e.titleLink},i.a.createElement(K.a,{variant:"h4"},i.a.createElement(q.a,{id:"Apis.Details.Scopes.Scopes.heading.scope.heading",defaultMessage:"Scopes"}))),i.a.createElement(Ma.a,null,"keyboard_arrow_right"),i.a.createElement(K.a,{variant:"h4"},i.a.createElement(q.a,{id:"Apis.Details.Scopes.EditScope.update.scope",defaultMessage:"Update Scope"})))),i.a.createElement(pe.a,{item:!0,md:12},i.a.createElement(ce.a,{elevation:0,className:e.root},i.a.createElement(ft.a,{margin:"normal"},i.a.createElement(vt.a,{id:"name",label:"Name",fullWidth:!0,margin:"normal",variant:"outlined",InputLabelProps:{shrink:!0},value:n.name,onChange:this.handleScopeNameInput,disabled:!0})),i.a.createElement(ft.a,{margin:"normal"},i.a.createElement(vt.a,{id:"description",label:"Description",variant:"outlined",placeholder:"Short description about the scope",helperText:i.a.createElement(q.a,{id:"Apis.Details.Scopes.EditScope.short.description.about.the.scope",defaultMessage:"Short description about the scope"}),margin:"normal",InputLabelProps:{shrink:!0},onChange:this.validateScopeDescription,value:n.description||"",multiline:!0})),i.a.createElement(ft.a,{margin:"normal"},i.a.createElement(St.a,{label:"Roles",InputLabelProps:{shrink:!0},variant:"outlined",value:s.concat(o),alwaysShowPlaceholder:!1,placeholder:"Enter roles and press Enter",blurBehavior:"clear",InputProps:{endAdornment:!r&&i.a.createElement(It.a,{position:"end"},i.a.createElement(Vc.a,{color:"error"}))},onAdd:this.handleRoleAddition,error:!r,helperText:r?i.a.createElement(q.a,{id:"Apis.Details.Scopes.EditScopes.roles.help",defaultMessage:"Enter a valid role and press `Enter`."}):i.a.createElement(q.a,{id:"Apis.Details.EditScopes.Roles.Invalid",defaultMessage:"Role is invalid"}),chipRenderer:(e,t)=>{let{value:a}=e;return i.a.createElement(ue.a,{key:t,label:a,onDelete:()=>{this.handleRoleDeletion(a)},style:{backgroundColor:o.includes(a)?Mt.a[300]:null,margin:"8px 8px 8px 0",float:"left"}})}})),i.a.createElement("div",{className:e.addNewOther},i.a.createElement(Ne.a,{variant:"contained",color:"primary",onClick:this.updateScope,disabled:0!==o.length,className:e.saveButton},i.a.createElement(q.a,{id:"Apis.Details.Scopes.EditScope.update",defaultMessage:"Update"})),i.a.createElement(W.b,{to:l},i.a.createElement(Ne.a,{variant:"contained"},i.a.createElement(q.a,{id:"Apis.Details.Scopes.EditScope.cancel",defaultMessage:"Cancel"})))))))))}}Jc.propTypes={match:s.a.shape({params:s.a.object}),api:s.a.shape({id:s.a.string}).isRequired,classes:s.a.shape({}).isRequired,intl:s.a.shape({formatMessage:s.a.func}).isRequired,location:s.a.shape({state:s.a.shape({scopeName:s.a.string})}).isRequired,history:s.a.shape({push:s.a.func}).isRequired,isAPIProduct:s.a.bool.isRequired,updateAPI:s.a.func.isRequired},Jc.defaultProps={match:{params:{}}};var Qc=Object(q.d)(Object(_.withRouter)(Object(L.a)(e=>({root:{flexGrow:1,marginTop:10,display:"flex",flexDirection:"column",padding:20},titleWrapper:{display:"flex",flexDirection:"row",alignItems:"center",marginBottom:e.spacing(3)},titleLink:{color:e.palette.primary.main,marginRight:e.spacing(1)},contentWrapper:{maxWidth:e.custom.contentAreaWidth},mainTitle:{paddingLeft:0},FormControl:{padding:"0 0 0 ".concat(e.spacing(1),"px"),width:"100%",marginTop:0},FormControlOdd:{padding:"0 0 0 ".concat(e.spacing(1),"px"),backgroundColor:e.palette.background.paper,width:"100%",marginTop:0},FormControlLabel:{marginBottom:e.spacing(1),marginTop:e.spacing(1),fontSize:e.typography.caption.fontSize},buttonSection:{paddingTop:e.spacing(3)},saveButton:{marginRight:e.spacing(2)},helpText:{color:e.palette.text.hint,marginTop:e.spacing(1)},extraPadding:{paddingLeft:e.spacing(2)},addNewOther:{paddingTop:40},titleGrid:{" & .MuiGrid-item":{padding:0,margin:0}}}))(Jc)));function Zc(e){const[t,a]=Object(de.d)(),{intl:r}=e,[s,l]=Object(n.useState)(!1),{scopeName:c}=e;return i.a.createElement("div",null,i.a.createElement(Ne.a,{onClick:()=>{l(!s)},disabled:Object(o.b)(["apim:api_create"],t)},i.a.createElement(Ma.a,null,"delete_forever"),i.a.createElement(q.a,{id:"Apis.Details.Documents.Delete.document.delete",defaultMessage:"Delete"})),i.a.createElement(Sc.a,{key:"key-dialog",labelCancel:i.a.createElement(q.a,{id:"Apis.Details.Documents.Delete.document.listing.label.cancel",defaultMessage:"Cancel"}),title:i.a.createElement(q.a,{id:"Apis.Details.Documents.Delete.document.listing.delete.confirm",defaultMessage:"Confirm Delete"}),message:i.a.createElement(q.a,{id:"Apis.Details.Documents.Delete.document.listing.label.ok.confirm",defaultMessage:"Are you sure you want to delete scope {scope} ?",values:{scope:c}}),labelOk:i.a.createElement(q.a,{id:"Apis.Details.Documents.Delete.document.listing.label.ok.yes",defaultMessage:"Yes"}),callback:n=>{n?(()=>{const{scopeName:n}=e,i=t.operations&&JSON.parse(JSON.stringify(t.operations)),o=i&&i.map(e=>(e.scopes=e.scopes.filter(e=>e!==n),e)),c=t.scopes.filter(e=>e.name!==n),p=l;a({scopes:c,operations:o}).then(()=>{$.a.info(r.formatMessage({id:"Apis.Details.Resources.Resources.api.scope.deleted.successfully",defaultMessage:"API Scope deleted successfully!"})),p(!s)}).catch(e=>{console.error(e),$.a.error(r.formatMessage({id:"Apis.Details.Resources.Resources.something.went.wrong.while.updating.the.api",defaultMessage:"Error occurred while updating API"}))})})():l(!s)},open:s}))}Zc.propTypes={classes:s.a.shape({}).isRequired,scopeName:s.a.string.isRequired,intl:s.a.shape({}).isRequired};var Xc=Object(q.d)(Object(L.a)({appBar:{position:"relative"},flex:{flex:1},popupHeader:{display:"flex",flexDirection:"row",alignItems:"center"},splitWrapper:{padding:0},docName:{alignItems:"center",display:"flex"},button:{height:30,marginLeft:30}})(Zc));class $c extends i.a.Component{constructor(e){super(e),this.api=new Q.a,this.api_uuid=e.match.params.api_uuid,this.api_data=e.api}render(){const{intl:e,classes:t,api:a}=this.props,n="APIProduct"===a.apiType?"api-products":"apis",{scopes:r}=a,s="/".concat(n,"/").concat(a.id,"/scopes/create"),l="/".concat(n,"/").concat(a.id,"/scopes/edit"),c=[e.formatMessage({id:"Apis.Details.Scopes.Scopes.table.header.name",defaultMessage:"Name"}),e.formatMessage({id:"Apis.Details.Scopes.Scopes.table.header.description",defaultMessage:"Description"}),{options:{customBodyRender:(e,t)=>{if(t.rowData){return(e||[]).join(",")}return!1},filter:!1,sort:!1,label:i.a.createElement(q.a,{id:"Apis.Details.Scopes.Scopes.table.header.roles",defaultMessage:"Roles"})}},{options:{customBodyRender:(e,a)=>!(!e||!a.rowData)&&i.a.createElement(tn.a,{component:"nav",className:t.root},e.map(e=>i.a.createElement(an.a,{button:!0},i.a.createElement(Ft.a,{primary:e})))),filter:!1,sort:!1,label:i.a.createElement(q.a,{id:"Apis.Details.Scopes.Scopes.table.header.usages",defaultMessage:"Used In"})}},{options:{customBodyRender:(e,n)=>{if(n.rowData){const e=n.rowData[0];return i.a.createElement("table",{className:t.actionTable},i.a.createElement("tr",null,i.a.createElement("td",null,i.a.createElement(W.b,{to:!Object(o.b)(["apim:api_create"],a)&&{pathname:l,state:{scopeName:e}}},i.a.createElement(Ne.a,{disabled:Object(o.b)(["apim:api_create"],a)},i.a.createElement(Ma.a,null,"edit"),i.a.createElement(q.a,{id:"Apis.Details.Documents.Edit.documents.text.editor.edit",defaultMessage:"Edit"})))),i.a.createElement("td",null,i.a.createElement(Xc,{scopeName:e,api:a,isAPIProduct:!0}))))}return!1},filter:!1,sort:!1,label:i.a.createElement(q.a,{id:"Apis.Details.Scopes.Scopes.table.header.actions",defaultMessage:"Actions"})}}],p=a.scopes.map(e=>{const t=[];t.push(e.name),t.push(e.description),t.push(e.bindings.values);const n=a.operations&&a.operations.filter(t=>t.scopes.includes(e.name)).map(e=>e.target+" "+e.verb);return t.push(n),t});return r?0===r.length?i.a.createElement("div",{className:t.root},i.a.createElement("div",{className:t.titleWrapper},i.a.createElement(K.a,{variant:"h4",align:"left",className:t.mainTitle},i.a.createElement(q.a,{id:"Apis.Details.Scopes.Scopes.heading.scope.heading",defaultMessage:"Scopes"}))),i.a.createElement(si.a,{type:"info",height:140},i.a.createElement("div",{className:t.contentWrapper},i.a.createElement(K.a,{variant:"h5",component:"h3",className:t.head},i.a.createElement(q.a,{id:"Apis.Details.Scopes.Scopes.create.scopes.title",defaultMessage:"Create Scopes"})),i.a.createElement(K.a,{component:"p",className:t.content},i.a.createElement(q.a,{id:"Apis.Details.Scopes.Scopes.scopes.enable.fine.gained.access.control",defaultMessage:"Scopes enable fine-grained access control to API resources based on user roles."})),i.a.createElement("div",{className:t.actions},i.a.createElement(W.b,{to:!Object(o.b)(["apim:api_create"],a)&&s},i.a.createElement(Ne.a,{variant:"contained",color:"primary",className:t.button,disabled:Object(o.b)(["apim:api_create"],a)},i.a.createElement(q.a,{id:"Apis.Details.Scopes.Scopes.create.scopes.button",defaultMessage:"Create Scopes"}))))))):i.a.createElement("div",{className:t.heading},i.a.createElement("div",{className:t.titleWrapper},i.a.createElement(K.a,{variant:"h4",align:"left",className:t.mainTitle},i.a.createElement(q.a,{id:"Apis.Details.Scopes.Scopes.heading.scope.heading",defaultMessage:"Scopes"})),i.a.createElement(W.b,{to:!Object(o.b)(["apim:api_create"],a)&&s},i.a.createElement(Ne.a,{size:"small",className:t.button,disabled:Object(o.b)(["apim:api_create"],a)},i.a.createElement(ri.a,{className:t.buttonIcon}),i.a.createElement(q.a,{id:"Apis.Details.Scopes.Scopes.heading.scope.add_new",defaultMessage:"Add New Scope"}))),Object(o.b)(["apim:api_create"],a)&&i.a.createElement(pe.a,{item:!0},i.a.createElement(K.a,{variant:"body2",color:"primary"},i.a.createElement(q.a,{id:"Apis.Details.Scopes.Scopes.update.not.allowed",defaultMessage:"*You are not authorized to update scopes of the API due to insufficient permissions"})))),i.a.createElement(ni.a,{title:!1,data:p,columns:c,options:{filterType:"multiselect",selectableRows:!1,title:!1,filter:!1,sort:!1,print:!1,download:!1,viewColumns:!1,customToolbar:!1}})):i.a.createElement(X.a,null)}}$c.propTypes={match:s.a.shape({params:s.a.object}),api:s.a.instanceOf(Object).isRequired,classes:s.a.shape({}).isRequired,intl:s.a.shape({formatMessage:s.a.func}).isRequired},$c.defaultProps={match:{params:{}}};var ep=Object(q.d)(Object(de.e)(wl()(e=>({root:{paddingTop:0,paddingLeft:0},buttonProgress:{position:"relative",margin:e.spacing(1)},headline:{paddingTop:e.spacing(1.25),paddingLeft:e.spacing(2.5)},heading:{flexGrow:1,marginTop:10},titleWrapper:{display:"flex",flexDirection:"row",alignItems:"center",marginBottom:e.spacing(2)},mainTitle:{paddingLeft:0},button:{textDecoration:"none",color:e.palette.getContrastText(e.palette.primary.main),marginLeft:e.spacing(1)},buttonIcon:{marginRight:e.spacing(1)},content:{margin:"".concat(e.spacing(2),"px 0 ").concat(e.spacing(2),"px 0")},head:{fontWeight:200}}))($c)));function tp(){return(tp=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}const ap=()=>{const[e,t]=Object(de.d)(),a=e.isAPIProduct()?"api-products":"apis";return i.a.createElement(_.Switch,null,i.a.createElement(_.Route,{exact:!0,path:"/"+a+"/:api_uuid/scopes/",component:ep}),i.a.createElement(_.Route,{exact:!0,path:"/"+a+"/:api_uuid/scopes/create",component:a=>i.a.createElement(Bc,tp({api:e},a,{updateAPI:t}))}),i.a.createElement(_.Route,{exact:!0,path:"/"+a+"/:api_uuid/scopes/edit",component:a=>i.a.createElement(Qc,tp({api:e},a,{updateAPI:t}))}),i.a.createElement(_.Route,{component:U.a}))};ap.propTypes={api:s.a.shape({id:s.a.string,additionalProperties:s.a.shape({key:s.a.string,value:s.a.string}).isRequired}).isRequired};var np=ap;function ip(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class rp extends n.Component{constructor(){super(...arguments),ip(this,"state",{selectedPolicy:{uuid:"",name:"Select",policy:"",type:""},policies:[]}),ip(this,"handleChange",()=>e=>{const t=e.target.value;(new Q.a).getThreatProtectionPolicy(t).then(e=>{this.setState({selectedPolicy:e.obj})})}),ip(this,"formatPolicy",e=>{let t=e;return t=(t=t.replace(":"," : ")).split(",").join(",\n")})}componentDidMount(){const e=new Q.a;e.getThreatProtectionPolicies().then(e=>{this.setState({policies:e.obj.list})}),e.get(this.props.id).then(e=>{this.setState({currentApi:e.obj})})}handlePolicyAdd(){const{intl:e}=this.props,t=this.state.selectedPolicy;if(""!==t.uuid&&""!==t.name){if(this.state.currentApi){const{currentApi:t}=this.state;(new Q.a).addThreatProtectionPolicyToApi(t.id,this.state.selectedPolicy.uuid).then(t=>{200===t.status?($.a.info(e.formatMessage({id:"Apis.Details.Security.AddPolicy.threat.protection.policy.add.success",defaultMessage:"Threat protection policy added successfully."})),this.props.updateData()):$.a.error(e.formatMessage({id:"Apis.Details.Security.AddPolicy.threat.protection.policy.add.failure",defaultMessage:"Failed to add threat protection policy."}))})}}else $.a.error(e.formatMessage({id:"Apis.Details.Security.AddPolicy.select.policy",defaultMessage:"Please select a policy"}))}render(){const{classes:e}=this.props;return i.a.createElement("div",{className:e.contentWrapper},i.a.createElement("div",{className:e.addNewWrapper},i.a.createElement(K.a,{className:e.addNewHeader},i.a.createElement(q.a,{id:"Apis.Details.Security.AddPolicy.add.threat.protection.policy",defaultMessage:"Add New Threat Protection Policy"})),i.a.createElement(oi.a,{className:e.divider}),i.a.createElement("div",{className:e.addNewOther},i.a.createElement(Nr.a,{htmlFor:"selectedPolicy"},i.a.createElement(q.a,{id:"Apis.Details.Security.AddPolicy.policy",defaultMessage:"Policy"})),"  ",i.a.createElement(Ji.a,{value:this.state.selectedPolicy.uuid,onChange:this.handleChange("selectedPolicy"),input:i.a.createElement(Jo.a,{name:"selectedPolicy",id:"selectedPolicy"})},this.state.policies.map(e=>i.a.createElement(At.a,{key:e.uuid,value:e.uuid},e.name)),";"),i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement("p",null,i.a.createElement(q.a,{id:"Apis.Details.Security.AddPolicy.policy.type.label",defaultMessage:"Policy Type: "}),this.state.selectedPolicy.type),i.a.createElement("div",null,i.a.createElement("p",null,i.a.createElement(q.a,{id:"Apis.Details.Security.AddPolicy.policy.label",defaultMessage:"Policy: "})),i.a.createElement("div",{className:e.addJsonContent},this.formatPolicy(this.state.selectedPolicy.policy)))),i.a.createElement(oi.a,{className:e.divider}),i.a.createElement("div",{className:e.addNewOther},i.a.createElement(Ne.a,{variant:"contained",color:"primary",onClick:()=>this.handlePolicyAdd()},i.a.createElement(q.a,{id:"Apis.Details.Security.AddPolicy.add.policy.to.api",defaultMessage:"Add Policy to API"})),i.a.createElement(Ne.a,{className:e.button,onClick:this.props.toggleShowAddPolicy},i.a.createElement(q.a,{id:"Apis.Details.Security.AddPolicy.cancel",defaultMessage:"Cancel"})))))}}rp.propTypes={classes:s.a.shape({}).isRequired,toggleShowAddPolicy:s.a.func.isRequired,id:s.a.string.isRequired,updateData:s.a.func.isRequired,intl:s.a.shape({}).isRequired};var sp=Object(q.d)(Object(L.a)(e=>({addNewWrapper:{backgroundColor:e.palette.background.paper,color:e.palette.getContrastText(e.palette.background.paper),border:"solid 1px "+e.palette.grey[300],borderRadius:e.shape.borderRadius,marginTop:e.spacing(2)},addNewHeader:{padding:e.spacing(2),backgroundColor:e.palette.grey[300],fontSize:e.typography.h6.fontSize,color:e.typography.h6.color,fontWeight:e.typography.h6.fontWeight},addNewOther:{padding:e.spacing(2)},button:{marginLeft:e.spacing(2),color:e.palette.getContrastText(e.palette.primary.main)},contentWrapper:{maxWidth:e.custom.contentAreaWidth},addJsonContent:{whiteSpace:"pre"}}))(rp));function op(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class lp extends n.Component{constructor(e){super(e),op(this,"toggleShowAddPolicy",()=>{this.setState({showAddPolicy:!this.state.showAddPolicy})}),op(this,"formatPolicy",e=>{let t=e;return t=(t=t.replace(":"," : ")).split(",").join(",\n")}),this.api=new Q.a,this.state={api:{name:""},policies:[],showAddPolicy:!1},this.updateData=this.updateData.bind(this),this.toggleShowAddPolicy=this.toggleShowAddPolicy.bind(this),this.updateData=this.updateData.bind(this)}componentDidMount(){this.updateData()}updateData(){this.api.get(this.props.match.params.api_uuid).then(e=>{this.setState({api:e.obj}),this.updatePolicyData()})}updatePolicyData(){this.setState({policies:[]});const e=this.state.api.threatProtectionPolicies.list;for(let t=0;t<e.length;t++){const a=e[t].policyId;this.api.getThreatProtectionPolicy(a).then(e=>{const t=this.state.policies;t.push(e.obj),this.setState({policies:t})})}}deletePolicy(e){const{intl:t}=this.props,a=this.state.api;this.api.deleteThreatProtectionPolicyFromApi(a.id,e).then(n=>{if(200===n.status){$.a.info(t.formatMessage({id:"Apis.Details.Security.SecurityOverview.policy.remove.success",defaultMessage:"Policy removed successfully."}));const n=a.threatProtectionPolicies.list.indexOf({policyId:e});a.threatProtectionPolicies.list.splice(n,1),this.setState({api:a}),this.updatePolicyData()}else $.a.error(t.formatMessage({id:"Apis.Details.Security.SecurityOverview.policy.remove.failure",defaultMessage:"Failed to remove policy."}))})}render(){let e=[];this.state.policies&&(e=this.state.policies);const{classes:t}=this.props,{showAddPolicy:a}=this.state;return i.a.createElement("div",{className:t.root},i.a.createElement("div",{className:t.contentWrapper},i.a.createElement("div",{className:t.titleWrapper},i.a.createElement(K.a,{variant:"h4",align:"left",className:t.mainTitle},i.a.createElement(q.a,{id:"Apis.Details.Security.SecurityOverview.threat.protection.policies",defaultMessage:"Threat Protection Policies"})),i.a.createElement(Ne.a,{size:"small",className:t.button,onClick:this.toggleShowAddPolicy},i.a.createElement(ri.a,{className:t.buttonIcon}),i.a.createElement(q.a,{id:"Apis.Details.Security.SecurityOverview.add.threat.protection.policy",defaultMessage:"Add New Threat Protection Policy"})))),i.a.createElement("div",{className:t.contentWrapper},a&&i.a.createElement(sp,{id:this.state.api.id,toggleShowAddPolicy:this.toggleShowAddPolicy,updateData:this.updateData})),i.a.createElement("br",null),i.a.createElement("div",{className:t.contentWrapper},i.a.createElement("div",{className:t.addNewWrapper},i.a.createElement(K.a,{className:t.addNewHeader},i.a.createElement(q.a,{id:"Apis.Details.Security.SecurityOverview.manage.threat.protection.policies",defaultMessage:"Manage Threat Protection Policies"})),i.a.createElement(oi.a,{className:t.divider}),i.a.createElement(Ae.a,{className:t.table},i.a.createElement(Qn.a,null,i.a.createElement(Se.a,null,i.a.createElement(De.a,null,i.a.createElement(q.a,{id:"Apis.Details.Security.SecurityOverview.policy.name",defaultMessage:"Policy Name"})),i.a.createElement(De.a,null,i.a.createElement(q.a,{id:"Apis.Details.Security.SecurityOverview.policy.type",defaultMessage:"Policy Type"})),i.a.createElement(De.a,null,i.a.createElement(q.a,{id:"Apis.Details.Security.SecurityOverview.policy",defaultMessage:"Policy"})),i.a.createElement(De.a,null))),i.a.createElement(Jn.a,null,e.map(e=>i.a.createElement(Se.a,{key:e.uuid},i.a.createElement(De.a,null,e.name+("GLOBAL-JSON"===e.uuid?" (GLOBAL)":"")),i.a.createElement(De.a,null,e.type),i.a.createElement(De.a,null,i.a.createElement("div",{className:t.addJsonContent},this.formatPolicy(e.policy))),i.a.createElement(De.a,null,i.a.createElement("span",null,i.a.createElement(Ne.a,{color:"accent",onClick:()=>this.deletePolicy(e.uuid)},i.a.createElement(q.a,{id:"Apis.Details.Security.SecurityOverview.delete",defaultMessage:"Delete"})))))))))))}}lp.propTypes={classes:s.a.shape({}).isRequired,match:s.a.shape({params:s.a.shape({api_uuid:s.a.string})}).isRequired,intl:s.a.shape({}).isRequired};var cp=Object(q.d)(Object(L.a)(e=>({root:{flexGrow:1,marginTop:10},titleWrapper:{display:"flex",flexDirection:"row",alignItems:"center"},mainTitle:{paddingLeft:0},button:{marginLeft:e.spacing(2),color:e.palette.getContrastText(e.palette.primary.main)},buttonIcon:{marginRight:10},table:{"& td":{fontSize:e.typography.fontSize},"& th":{fontSize:1.2*e.typography.fontSize},tableLayout:"fixed"},addNewHeader:{padding:e.spacing(2),backgroundColor:e.palette.grey[300],fontSize:e.typography.h6.fontSize,color:e.typography.h6.color,fontWeight:e.typography.h6.fontWeight},addNewWrapper:{backgroundColor:e.palette.background.paper,color:e.palette.getContrastText(e.palette.background.paper),border:"solid 1px "+e.palette.grey[300],borderRadius:e.shape.borderRadius,marginTop:e.spacing(2)},contentWrapper:{maxWidth:e.custom.contentAreaWidth},addJsonContent:{whiteSpace:"pre"}}))(lp));var pp=()=>i.a.createElement(_.Switch,null,i.a.createElement(_.Route,{path:"/apis/:api_uuid/security",component:cp})),dp=a(1025),mp=a.n(dp),up=a(2481),gp=a.n(up),hp=a(2482),fp=a.n(hp),Ep=a(780),bp=a.n(Ep),yp=a(2313),vp=a.n(yp),Cp=a(2315),Ap=(a(2316),a(2318)),Dp=a.n(Ap),Sp=a(1052),Op=a(1261),wp=a(2850),Pp=a(2319),xp=a.n(Pp);function Tp(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Ip extends n.Component{constructor(e){super(e),Tp(this,"getMuiTheme",()=>Object(Sp.a)({typography:{useNextVariants:!0},overrides:{MUIDataTableBodyCell:{root:{width:"30%"}},MUIDataTableSelectCell:{root:{display:"none"}},MUIDataTableToolbarSelect:{title:{display:"none"}}}})),Tp(this,"getErrorMuiTheme",()=>Object(Sp.a)({typography:{useNextVariants:!0},overrides:{MUIDataTableBodyCell:{root:{width:"100%"}},MUIDataTableSelectCell:{root:{display:"none"}},MUIDataTableToolbarSelect:{title:{display:"none"}}}})),Tp(this,"editorDidMount",(e,t,a)=>{const{classes:n}=this.props;if(""!==a){const i=[],r=a.split("/"),s=[];for(let e=0;e<r.length;e++)if(""!==r[e]&&"0"!==r[e]){let t='"'+r[e]+'":';t.includes("~1")&&(t=t.replace(/~1/i,"/")),s.push(t)}for(let t=0;t<s.length;t++)""!==s[t]&&(0!==t&&0!==i.length&&null!==i[i.length-1]?i.push(e.getModel().findNextMatch(s[t],{lineNumber:i[i.length-1].range.endLineNumber,column:1},!0,!0,null,!1)):i.push(e.getModel().findNextMatch(s[t],1,!0,!0,null,!0)));const o=i.length-1;null!=i[o]&&(e.revealLineInCenter(i[o].range.startLineNumber),e.deltaDecorations([],[{range:new t.Range(i[o].range.startLineNumber,i[o].range.startColumn,i[o].range.endLineNumber,i[o].range.endColumn),options:{isWholeLine:!0,className:n.inlineDecoration,glyphMarginClassName:n.contentLine}}]))}}),this.state={report:null,overallScore:0,numErrors:0,externalApiId:null,loading:!1,apiDefinition:null},this.criticalityObject={1:"INFO",2:"LOW",3:"MEDIUM",4:"HIGH",5:"CRITICAL"},this.searchTerm=null}componentDidMount(){this.setState({loading:!0});const{apiId:e,history:t,intl:a}=this.props,n=new Q.a;n.getSwagger(e).then(e=>{this.setState({apiDefinition:JSON.stringify(e.obj,null,1)})}).catch(e=>{console.log(e)}),n.getSecurityAuditReport(e).then(e=>{this.setState({report:e.body.report,overallScore:e.body.grade,numErrors:e.body.numErrors,externalApiId:e.body.externalApiId,loading:!1})}).catch(n=>{console.log(n),this.setState({loading:!1}),$.a.error(a.formatMessage({id:"Apis.Details.APIDefinition.AuditApi.GetReportError",defaultMessage:"Something went wrong while retrieving the API Security Report"}));const i="/apis/"+e+"/api definition";t.push(i)})}getRowData(e,t,a){const n=[];for(const i in e)if({}.hasOwnProperty.call(e,i))for(let r=0;r<e[i].issues.length;r++){const s=[];"error"===a?e[i].issues[r].specificDescription?s.push(e[i].issues[r].specificDescription,e[i].issues[r].pointer,t,a,i):s.push(e[i].description,e[i].issues[r].pointer,t,a,i):"normal"===a&&(e[i].issues[r].specificDescription?s.push(this.criticalityObject[e[i].criticality],e[i].issues[r].specificDescription,this.roundScore(e[i].issues[r].score),e[i].issues[r].pointer,e[i].issues[r].tooManyImpacted,e[i].issues[r].pointersAffected,t,e[i].tooManyError,a,i):s.push(this.criticalityObject[e[i].criticality],e[i].description,this.roundScore(e[i].issues[r].score),e[i].issues[r].pointer,e[i].issues[r].tooManyImpacted,e[i].issues[r].pointersAffected,t,e[i].tooManyError,a,i)),n.push(s)}return n}getMoreDetailUrl(e){const t="https://apisecurity.io/ref/";let a="";switch(e){case"OpenAPI Format Requirements":a=t+"oasconformance/";break;case"Security":a=t+"security/";break;case"Data Validation":a=t+"datavalidation/datavalidation/";break;default:a=t}return a}roundScore(e){return 0!==e?Math.round(100*e)/100:0}render(){const{classes:e}=this.props,{report:t,overallScore:a,numErrors:n,externalApiId:r,loading:s,apiDefinition:o}=this.state,l=JSON.parse(t),c="https://platform.42crunch.com/apis/"+r+"/security-audit-report";if(s)return i.a.createElement("div",null,i.a.createElement(si.a,{type:"info",height:140},i.a.createElement("div",{className:e.contentWrapper},i.a.createElement(K.a,{variant:"h5",component:"h3",className:e.head},i.a.createElement(q.a,{id:"Apis.Details.APIDefinition.AuditApi.WaitForReport",defaultMessage:"Please wait..."})),i.a.createElement(K.a,{component:"p",className:e.content},i.a.createElement(q.a,{id:"Apis.Details.APIDefinition.AuditApi.WaitForReport.Content",defaultMessage:"Auditing an API for the first time will take some time"})))),i.a.createElement(Pl.a,null));const p=[{name:"Severity",options:{filter:!0,sort:!0}},{name:"Description",options:{filter:!0,sort:!0}},{name:"Score Impact",options:{filter:!0,sort:!0}},{name:"Pointer",options:{display:"excluded",filter:!1,sort:!1}},{name:"Too Many Impacted",options:{display:"excluded",filter:!1,sort:!1}},{name:"Pointers Affected",options:{display:"excluded",filter:!1,sort:!1}},{name:"Issue Category",options:{display:"excluded",filter:!1,sort:!1}},{name:"Too Many Errors",options:{display:"excluded",filter:!1,sort:!1}},{name:"isError",options:{display:"excluded",filter:!1,sort:!1}},{name:"ReferenceUrl",options:{display:"excluded",filter:!1,sort:!1}}],d=[{name:"Description",options:{filter:!0,sort:!0}},{name:"Pointer",options:{display:"excluded",filter:!1,sort:!1}},{name:"Issue Category",options:{display:"excluded",filter:!1,sort:!1}},{name:"isError",options:{display:"excluded",filter:!1,sort:!1}},{name:"ReferenceUrl",options:{display:"excluded",filter:!1,sort:!1}}],m={selectOnLineNumbers:!0,readOnly:!0,smoothScrolling:!0,wordWrap:"on",glyphMargin:!0},u={filterType:"dropdown",responsive:"stacked",print:!1,download:!1,selectableRows:!1,expandableRows:!0,expandableRowsOnClick:!0,renderExpandableRow:t=>{let a=null;return"error"===t[3]?(a=l.index[t[1]],i.a.createElement(Se.a,{className:e.tableRow},i.a.createElement(De.a,{className:e.columnOne},i.a.createElement(xp.a,{height:"250px",theme:"vs-dark",value:o,options:m,editorDidMount:(e,t)=>this.editorDidMount(e,t,a)})),i.a.createElement(De.a,{className:e.columnTwo},i.a.createElement(K.a,{variant:"body1",className:e.referenceErrorTypography},i.a.createElement(q.a,{id:"Apis.Details.APIDefinition.AuditApi.ReferenceSection",description:"Link to visit for detail on how to remedy issue",defaultMessage:"Visit this {link} to view a detailed description, possible exploits and remediation for this issue.",values:{link:i.a.createElement("strong",null,i.a.createElement("a",{href:this.getMoreDetailUrl(t[2]),target:"_blank",rel:"noopener noreferrer"},"link"))}}))))):(a=l.index[t[3]],i.a.createElement(Se.a,{className:e.tableRow},i.a.createElement(De.a,{colSpan:"2"},i.a.createElement(xp.a,{width:"85%",height:"250px",theme:"vs-dark",value:o,options:m,editorDidMount:(e,t)=>this.editorDidMount(e,t,a)})),i.a.createElement(De.a,null,i.a.createElement(K.a,{variant:"body1",className:e.referenceTypography},i.a.createElement(q.a,{id:"Apis.Details.APIDefinition.AuditApi.ReferenceSection",description:"Link to visit for detail on how to remedy issue",defaultMessage:"Visit this {link} to view a detailed description, possible exploits and remediation for this issue.",values:{link:i.a.createElement("strong",null,i.a.createElement("a",{href:this.getMoreDetailUrl(t[6]),target:"_blank",rel:"noopener noreferrer"},"link"))}})))))}};return i.a.createElement("div",null,t&&i.a.createElement("div",{width:"100%",height:"calc(100vh - 51px)"},i.a.createElement(K.a,{variant:"h4",className:e.subheadingTypography},i.a.createElement(q.a,{id:"Apis.Details.APIDefinition.AuditApi.ApiSecurityAuditReport",defaultMessage:"API Security Audit Report"})),i.a.createElement("div",{className:e.paperDiv},i.a.createElement(ce.a,{elevation:1,className:e.rootPaper},i.a.createElement("div",null,i.a.createElement(K.a,{variant:"h5",className:e.sectionHeadingTypography},i.a.createElement(q.a,{id:"Apis.Details.APIDefinition.AuditApi.AuditScoreSummary",defaultMessage:"Audit Score and Summary"})),i.a.createElement(K.a,{variant:"body1",className:e.linkText},i.a.createElement(q.a,{id:"Apis.Details.APIDefinition.AuditApi.LinkToDetailedReport",defaultMessage:"{linkToDetailedReportText} {link} {afterLinkText}",values:{linkToDetailedReportText:"Check out the ",link:i.a.createElement("b",null,i.a.createElement("a",{href:c,target:"_blank",rel:"noopener noreferrer"},"detailed Report")),afterLinkText:" from 42Crunch"}})),i.a.createElement("div",{className:e.auditSummaryDiv},i.a.createElement("div",{className:e.auditSummarySubDiv},i.a.createElement(Dp.a,null,t=>{let{isVisible:n}=t;const r=n?a:0;return i.a.createElement(Cp.a,{value:r},i.a.createElement(K.a,{variant:"body1",className:e.circularProgressBarScore},i.a.createElement(q.a,{id:"Apis.Details.APIDefinition.AuditApi .OverallScoreProgress",defaultMessage:"{overallScore}",values:{overallScore:i.a.createElement("strong",null,Math.round(a))}})),i.a.createElement(K.a,{variant:"body1",className:e.circularProgressBarScoreFooter},i.a.createElement(q.a,{id:"Apis.Details.APIDefinition.AuditApi.ScoreFooter",defaultMessage:"out of 100"})))})),i.a.createElement("div",{className:e.auditSummaryDivRight},{}.hasOwnProperty.call(l,"score")&&i.a.createElement(K.a,{variant:"body1"},i.a.createElement(q.a,{id:"Apis.Details.APIDefinition.AuditApi.overallScore",defaultMessage:"{overallScoreText} {overallScore} / 100",values:{overallScoreText:i.a.createElement("strong",null,"Overall Score:"),overallScore:this.roundScore(a)}})),null!==n&&i.a.createElement(K.a,{variant:"body1"},i.a.createElement(q.a,{id:"Apis.Details.APIDefinition.AuditApi.TotalNumOfErrors",defaultMessage:"{totalNumOfErrorsText} {totalNumOfErrors}",values:{totalNumOfErrorsText:i.a.createElement("strong",null,"Total Number of Errors: "),totalNumOfErrors:n}})),{}.hasOwnProperty.call(l,"criticality")&&i.a.createElement(i.a.Fragment,null,i.a.createElement(K.a,{variant:"body1"},i.a.createElement(q.a,{id:"Apis.Details.APIDefinition.AuditApi.OverallCriticality",defaultMessage:"{overallCriticalityText} {overallCriticality}",values:{overallCriticalityText:i.a.createElement("strong",null,"Overall Severity:"),overallCriticality:this.criticalityObject[l.criticality]}}),i.a.createElement(ie.a,{placement:"right",classes:{tooltip:e.htmlTooltip},title:i.a.createElement(i.a.Fragment,null,i.a.createElement(q.a,{id:"Apis.Details.APIDefinition.AuditApi.tooltip.severity",defaultMessage:"Severity ranges from: "}),i.a.createElement("br",null),i.a.createElement(q.a,{id:"Apis.Details.APIDefinition.AuditApi.tooltip.info",defaultMessage:"1. INFO"}),i.a.createElement("br",null),i.a.createElement(q.a,{id:"Apis.Details.APIDefinition.AuditApi.tooltip.low",defaultMessage:"2. LOW"}),i.a.createElement("br",null),i.a.createElement(q.a,{id:"Apis.Details.APIDefinition.AuditApi.tooltip.medium",defaultMessage:"3. MEDIUM"}),i.a.createElement("br",null),i.a.createElement(q.a,{id:"Apis.Details.APIDefinition.AuditApi.tooltip.high",defaultMessage:"4. HIGH"}),i.a.createElement("br",null),i.a.createElement(q.a,{id:"Apis.Details.APIDefinition.AuditApi.tooltip.critical",defaultMessage:"5. CRITICAL"}),i.a.createElement("br",null))},i.a.createElement(Ne.a,{className:e.helpButton},i.a.createElement(ke.a,{className:e.helpIcon}))))),i.a.createElement("hr",null),{}.hasOwnProperty.call(l,"security")&&i.a.createElement(K.a,{variant:"body1"},i.a.createElement(q.a,{id:"Apis.Details.APIDefinition.AuditApi.SecuritySummary",defaultMessage:"{securitySummary}",values:{securitySummary:i.a.createElement("strong",null,"Security - (",this.roundScore(l.security.score)," ","/ 30)")}}),i.a.createElement(Dp.a,null,e=>{let{isVisible:t}=e;const a=t?this.roundScore(l.security.score)/30*100:0;return i.a.createElement(wp.a,{percent:a,strokeColor:"#3d98c7"})})),{}.hasOwnProperty.call(l,"data")&&i.a.createElement(K.a,{variant:"body1"},i.a.createElement(q.a,{id:"Apis.Details.APIDefinition.AuditApi.DataValidationSummary",defaultMessage:"{dataValidationSummary}",values:{dataValidationSummary:i.a.createElement("strong",null,"Data Validation - (",this.roundScore(l.data.score)," ","/ 70)")}}),i.a.createElement(Dp.a,null,e=>{let{isVisible:t}=e;const a=t?this.roundScore(l.data.score)/70*100:0;return i.a.createElement(wp.a,{percent:a,strokeColor:"#3d98c7"})})),{}.hasOwnProperty.call(l,"validationErrors")&&i.a.createElement(si.a,{type:"warning",height:140},i.a.createElement("div",{className:e.contentWrapper},i.a.createElement(K.a,{variant:"h5",component:"h3",className:e.head},i.a.createElement(q.a,{id:"Apis.Details.APIDefinition.AuditApi.FailedToValidate.Heading",defaultMessage:"Failed to Validate OpenAPI File"})),i.a.createElement(K.a,{component:"p",className:e.content},i.a.createElement(q.a,{id:"Apis.Details.APIDefinition.AuditApi.FailedToValidate.Content",defaultMessage:"Fix the critical errors shown below and run the audit again."}))))))))),i.a.createElement("div",{className:e.paperDiv},i.a.createElement(ce.a,{elevation:1,className:e.rootPaper},i.a.createElement("div",null,i.a.createElement(K.a,{variant:"h5",className:e.sectionHeadingTypography},i.a.createElement(q.a,{id:"Apis.Details.APIDefinition.AuditApi.OpenApiFormatRequirements",defaultMessage:"OpenAPI Format Requirements"})),{}.hasOwnProperty.call(l,"semanticErrors")&&i.a.createElement(i.a.Fragment,null,i.a.createElement("div",null,i.a.createElement(K.a,{variant:"body1"},i.a.createElement(Op.a,{theme:this.getMuiTheme()},i.a.createElement(ni.a,{title:"Semantic Errors",data:this.getRowData(l.semanticErrors.issues,"OpenAPI Format Requirements","error"),columns:d,options:u}))))),{}.hasOwnProperty.call(l,"validationErrors")&&i.a.createElement(i.a.Fragment,null,i.a.createElement("div",null,i.a.createElement(K.a,{variant:"body1"},i.a.createElement(Op.a,{theme:this.getErrorMuiTheme()},i.a.createElement(ni.a,{title:"Structural Errors",data:this.getRowData(l.validationErrors.issues,"OpenAPI Format Requirements","error"),columns:d,options:u}))))),{}.hasOwnProperty.call(l,"warnings")&&i.a.createElement(i.a.Fragment,null,i.a.createElement("div",null,i.a.createElement(K.a,{variant:"body1"},i.a.createElement(Op.a,{theme:this.getErrorMuiTheme()},i.a.createElement(ni.a,{title:"Best Practices Issues",data:this.getRowData(l.warnings.issues,"OpenAPI Format Requirements","error"),columns:d,options:u}))))),!{}.hasOwnProperty.call(l,"validationErrors")&&!{}.hasOwnProperty.call(l,"semanticErrors")&&!{}.hasOwnProperty.call(l,"warnings")&&i.a.createElement(K.a,{variant:"body1"},i.a.createElement(q.a,{id:"Apis.Details.APIDefinition.AuditApi.OASNoIssuesFound",defaultMessage:"No Issues Found"}))))),{}.hasOwnProperty.call(l,"security")&&i.a.createElement("div",{className:e.paperDiv},i.a.createElement(ce.a,{elevation:1,className:e.rootPaper},i.a.createElement("div",null,i.a.createElement(K.a,{variant:"h5",className:e.sectionHeadingTypography},i.a.createElement(q.a,{id:"Apis.Details.APIDefinition.AuditApi.Security",defaultMessage:"Security"})),i.a.createElement(K.a,{variant:"body1"},i.a.createElement(q.a,{id:"Apis.Details.APIDefinition.AuditApi.SecurityNumOfIssues",defaultMessage:"{securityNumOfIssuesText} {securityNumOfIssues}",values:{securityNumOfIssuesText:i.a.createElement("strong",null,"Number of Issues:"),securityNumOfIssues:l.security.issueCounter}})),i.a.createElement(K.a,{variant:"body1"},i.a.createElement(q.a,{id:"Apis.Details.APIDefinition.AuditApi.SecurityScore",defaultMessage:"{securityScoreText} {securityScore}  / 30",values:{securityScoreText:i.a.createElement("strong",null,"Score:"),securityScore:Math.round(100*l.security.score)/100}})),i.a.createElement(i.a.Fragment,null,i.a.createElement(K.a,{variant:"body1"},i.a.createElement(q.a,{id:"Apis.Details.APIDefinition.AuditApi.securityCriticality",defaultMessage:"{securityCriticalityText} {securityCriticality}",values:{securityCriticalityText:i.a.createElement("strong",null,"Severity:"),securityCriticality:this.criticalityObject[l.security.criticality]}}),i.a.createElement(ie.a,{placement:"right",classes:{tooltip:e.htmlTooltip},title:i.a.createElement(i.a.Fragment,null,i.a.createElement(q.a,{id:"Apis.Details.APIDefinition.AuditApi.tooltip.severity",defaultMessage:"Severity ranges from: "}),i.a.createElement("br",null),i.a.createElement(q.a,{id:"Apis.Details.APIDefinition.AuditApi.tooltip.info",defaultMessage:"1. INFO"}),i.a.createElement("br",null),i.a.createElement(q.a,{id:"Apis.Details.APIDefinition.AuditApi.tooltip.low",defaultMessage:"2. LOW"}),i.a.createElement("br",null),i.a.createElement(q.a,{id:"Apis.Details.APIDefinition.AuditApi.tooltip.medium",defaultMessage:"3. MEDIUM"}),i.a.createElement("br",null),i.a.createElement(q.a,{id:"Apis.Details.APIDefinition.AuditApi.tooltip.high",defaultMessage:"4. HIGH"}),i.a.createElement("br",null),i.a.createElement(q.a,{id:"Apis.Details.APIDefinition.AuditApi.tooltip.critical",defaultMessage:"5. CRITICAL"}),i.a.createElement("br",null))},i.a.createElement(Ne.a,{className:e.helpButton},i.a.createElement(ke.a,{className:e.helpIcon}))))),0!==l.security.issueCounter&&i.a.createElement("div",null,i.a.createElement("hr",null),i.a.createElement(K.a,{variant:"body1"},i.a.createElement(Op.a,{theme:this.getMuiTheme()},i.a.createElement(ni.a,{title:"Issues",data:this.getRowData(l.security.issues,"Security","normal"),columns:p,options:u}))))))),{}.hasOwnProperty.call(l,"data")&&i.a.createElement("div",{className:e.paperDiv},i.a.createElement(ce.a,{elevation:1,className:e.rootPaper},i.a.createElement("div",null,i.a.createElement(K.a,{variant:"h5",className:e.sectionHeadingTypography},i.a.createElement(q.a,{id:"Apis.Details.APIDefinition.AuditApi.DataValidation",defaultMessage:"Data Validation"})),i.a.createElement(K.a,{variant:"body1"},i.a.createElement(q.a,{id:"Apis.Details.APIDefinition.AuditApi.DataValidationNumOfIssues",defaultMessage:"{dataNumOfIssuesText} {dataNumOfIssues}",values:{dataNumOfIssuesText:i.a.createElement("strong",null,"Number of Issues:"),dataNumOfIssues:l.data.issueCounter}})),i.a.createElement(K.a,{variant:"body1"},i.a.createElement(q.a,{id:"Apis.Details.APIDefinition.AuditApi.DataValidationScore",defaultMessage:"{dataScoreText} {dataScore}  / 70",values:{dataScoreText:i.a.createElement("strong",null,"Score:"),dataScore:Math.round(100*l.data.score)/100}})),i.a.createElement(i.a.Fragment,null,i.a.createElement(K.a,{variant:"body1"},i.a.createElement(q.a,{id:"Apis.Details.APIDefinition.AuditApi.dataCriticality",defaultMessage:"{dataCriticalityText} {dataCriticality}",values:{dataCriticalityText:i.a.createElement("strong",null,"Severity:"),dataCriticality:this.criticalityObject[l.data.criticality]}}),i.a.createElement(ie.a,{placement:"right",classes:{tooltip:e.htmlTooltip},title:i.a.createElement(i.a.Fragment,null,i.a.createElement(q.a,{id:"Apis.Details.APIDefinition.AuditApi.tooltip.severity",defaultMessage:"Severity ranges from: "}),i.a.createElement("br",null),i.a.createElement(q.a,{id:"Apis.Details.APIDefinition.AuditApi.tooltip.info",defaultMessage:"1. INFO"}),i.a.createElement("br",null),i.a.createElement(q.a,{id:"Apis.Details.APIDefinition.AuditApi.tooltip.low",defaultMessage:"2. LOW"}),i.a.createElement("br",null),i.a.createElement(q.a,{id:"Apis.Details.APIDefinition.AuditApi.tooltip.medium",defaultMessage:"3. MEDIUM"}),i.a.createElement("br",null),i.a.createElement(q.a,{id:"Apis.Details.APIDefinition.AuditApi.tooltip.high",defaultMessage:"4. HIGH"}),i.a.createElement("br",null),i.a.createElement(q.a,{id:"Apis.Details.APIDefinition.AuditApi.tooltip.critical",defaultMessage:"5. CRITICAL"}),i.a.createElement("br",null))},i.a.createElement(Ne.a,{className:e.helpButton},i.a.createElement(ke.a,{className:e.helpIcon}))))),0!==l.data.issueCounter&&i.a.createElement("div",null,i.a.createElement("hr",null),i.a.createElement(K.a,{variant:"body1"},i.a.createElement(Op.a,{theme:this.getMuiTheme()},i.a.createElement(ni.a,{title:"Issues",data:this.getRowData(l.data.issues,"Data Validation","normal"),columns:p,options:u})))))))))}}Ip.propTypes={classes:s.a.shape({}).isRequired,apiId:s.a.string.isRequired,theme:s.a.shape({}).isRequired,history:s.a.shape({push:s.a.func.isRequired}).isRequired,intl:s.a.shape({formatMessage:s.a.func}).isRequired};var Mp=Object(_.withRouter)(Object(q.d)(Object(L.a)(e=>({rootPaper:{padding:e.spacing(3),margin:e.spacing(2)},inlineDecoration:{background:"#FF0000"},contentLine:{background:"#add8e6"},htmlToolTip:{backgroundColor:"#f5f5f9",color:"rgba(0, 0, 0, 0.87)",maxWidth:220,fontSize:e.typography.pxToRem(14),border:"1px solid #dadde9","& b":{fontWeight:e.typography.fontWeightMedium}},helpButton:{padding:0,minWidth:20,"margin-left":10},helpIcon:{fontSize:16},tableRow:{"background-color":"#d3d3d3"},referenceErrorTypography:{width:"70%",marginTop:"15%"},referenceTypography:{width:"70%"},subheadingTypography:{paddingTop:30,paddingLeft:20},paperDiv:{marginTop:30},sectionHeadingTypography:{marginBottom:18},auditSummaryDiv:{display:"flex",marginTop:25},auditSummarySubDiv:{width:250,marginLeft:40,marginRight:40,display:"table"},circularProgressBarScore:{fontSize:70,color:"#3d98c7",marginTop:18},circularProgressBarScoreFooter:{fontSize:18,marginTop:10},auditSummaryDivRight:{flexGrow:1,marginLeft:200,marginTop:10},columnOne:{display:"block",width:"50%",float:"left"},columnTwo:{width:"40%",float:"right"},head:{fontWeight:200,marginBottom:20},linkText:{float:"right"}}))(Ip))),Rp=a(2480),Np=a.n(Rp),jp=a(1259),kp=a(1252),Lp=a(1260);function qp(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function _p(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?qp(a,!0).forEach(function(t){Wp(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):qp(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function Wp(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Fp=Object(Ue.a)(()=>({importDefinitionDialogHeader:{fontWeight:"600"},buttonIcon:{marginRight:10}}));function zp(e){const{setSchemaDefinition:t}=e,a=Fp(),[r,s]=Object(n.useState)(!1),[l,c]=Object(n.useState)(!1),[p]=Object(de.d)(),d=Object(q.e)(),m=p.isGraphql(),u=p.isSOAP();const[g,h]=Object(n.useReducer)(function(e,t){const{action:a,value:n}=t;switch(a){case"inputValue":case"isFormValid":return _p({},e,{[a]:n});case"inputType":return _p({},e,{[a]:n,inputValue:"url"===n?"":null});case"preSetAPI":return _p({},e,{content:n.content});default:return e}},{type:"",inputType:"url",inputValue:"",formValidity:!1,mode:"update"});function f(){const{inputValue:e}=g;Q.a.validateGraphQLFile(e).then(e=>{const{isValid:a,graphQLInfo:n}=e.obj;!0===a&&(p.operations=n.operations,function(e){p.updateGraphQLAPIDefinition(p.id,e).then(()=>{$.a.success(d.formatMessage({id:"Apis.Details.APIDefinition.APIDefinition.graphQLDefinition.updated.successfully",defaultMessage:"Schema Definition Updated Successfully"})),s(!1),t(e)}).catch(e=>{console.log(e),$.a.error(d.formatMessage({id:"Apis.Details.APIDefinition.APIDefinition.error.updating.graphQL.schema",defaultMessage:"Error while updating GraphQL schema"}))})}(n.graphQLSchema.schemaDefinition))}).catch(e=>{console.log(e),$.a.error(d.formatMessage({id:"Error.while.validating.the.imported.graphQLSchema",defaultMessage:"Error while validating the imported schema"}))})}function E(e){h({action:"isFormValid",value:e})}let b=i.a.createElement(q.a,{id:"Apis.Details.APIDefinition.APIDefinition.import.definition.oas",defaultMessage:"Import OpenAPI Definition"}),y=i.a.createElement(kp.a,{onValidate:E,apiInputs:g,inputsDispatcher:h}),v=i.a.createElement(q.a,{id:"Apis.Details.APIDefinition.APIDefinition.import.definition",defaultMessage:"Import Definition"});return m&&(b=i.a.createElement(q.a,{id:"Apis.Details.APIDefinition.APIDefinition.import.definition.graphql",defaultMessage:"Import GraphQL Schema Definition"}),y=i.a.createElement(Lp.a,{onValidate:E,apiInputs:g,inputsDispatcher:h})),u&&(b=i.a.createElement(q.a,{id:"Apis.Details.APIDefinition.APIDefinition.import.definition.wsdl",defaultMessage:"Import WSDL"}),y=i.a.createElement(jp.a,{onValidate:E,apiInputs:g,inputsDispatcher:h}),v=i.a.createElement(q.a,{id:"Apis.Details.APIDefinition.APIDefinition.import.wsdl",defaultMessage:"Import WSDL"})),i.a.createElement(i.a.Fragment,null,i.a.createElement(Ne.a,{size:"small",className:a.button,onClick:()=>{s(!0)},disabled:Object(o.b)(["apim:api_create"],p)},i.a.createElement(Np.a,{className:a.buttonIcon}),v),i.a.createElement(ha.a,{onBackdropClick:s,open:r},i.a.createElement(ya.a,null,i.a.createElement(K.a,{className:a.importDefinitionDialogHeader},b)),i.a.createElement(Ea.a,null,y),i.a.createElement(fa.a,null,i.a.createElement(Ne.a,{onClick:()=>{s(!1)}},i.a.createElement(q.a,{id:"Apis.Details.APIDefinition.APIDefinition.import.definition.cancel",defaultMessage:"Cancel"})),i.a.createElement(Ne.a,{onClick:function(){m?f():u?function(){const{inputType:e,inputValue:a}=g,n="file"===e;let i;(i=n?p.updateWSDLByFileOrArchive(p.id,a):p.updateWSDLByUrl(p.id,a)).then(()=>{$.a.success(d.formatMessage({id:"Apis.Details.APIDefinition.ImportDefinition.WSDL.updated.successfully",defaultMessage:"WSDL Updated Successfully"})),s(!1),t(n&&"application/zip"===a.type)}).catch(e=>{console.log(e),$.a.error(d.formatMessage({id:"Apis.Details.APIDefinition.ImportDefinition.error.updating.WSDL",defaultMessage:"Error while updating WSDL"}))})}():function(){c(!0);const{inputValue:e,inputType:a,content:n}=g,i="file"===a;if(i){const a=new FileReader,n=e.type.includes("yaml")?"yaml ":"json";a.onloadend=e=>{t(e.currentTarget.result,n)},a.readAsText(e)}const r=new Q.a;(i?r.updateAPIDefinitionByFile(p.id,e):r.updateAPIDefinitionByUrl(p.id,e)).then(()=>{if($.a.success(d.formatMessage({id:"Apis.Details.APIDefinition.APIDefinition.api.definition.updated.successfully",defaultMessage:"API Definition Updated Successfully"})),s(!1),!i){const e=RegExp(/^\s*{/).test(n)?"json":"yaml";t(n,e)}}).catch(e=>{console.error(e),$.a.error(d.formatMessage({id:"Apis.Details.APIDefinition.APIDefinition.error.while.updating.api.definition",defaultMessage:"Error while updating the API Definition"}))}).finally(()=>c(!1))}()},variant:"contained",color:"primary",disabled:!g.isFormValid||l},i.a.createElement(q.a,{id:"Apis.Details.APIDefinition.APIDefinition.import.definition.import",defaultMessage:"Import"}),l&&i.a.createElement(Ze.a,{size:20})))))}function Bp(){return(Bp=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}zp.propTypes={setSchemaDefinition:s.a.func.isRequired};const Up=Object(n.lazy)(()=>Promise.all([a.e(0),a.e(11),a.e(6)]).then(a.bind(null,2872))),Vp=Object(n.lazy)(()=>Promise.resolve().then(a.t.bind(null,2319,7)));class Hp extends i.a.Component{constructor(e){var t,a,n;super(e),n=(e,t)=>{const{api:a}=this.props;a.isGraphql()?this.setState({graphQL:e}):this.setState({swagger:e,swaggerModified:e,convertTo:this.getConvertToFormat(t),format:t})},(a="setSchemaDefinition")in(t=this)?Object.defineProperty(t,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[a]=n,this.state={openEditor:!1,swagger:null,swaggerModified:null,graphQL:null,format:null,convertTo:null,isAuditApiClicked:!1,securityAuditProperties:[],isSwaggerValid:!0},this.handleNo=this.handleNo.bind(this),this.handleOk=this.handleOk.bind(this),this.openEditor=this.openEditor.bind(this),this.transition=this.transition.bind(this),this.closeEditor=this.closeEditor.bind(this),this.hasJsonStructure=this.hasJsonStructure.bind(this),this.getConvertToFormat=this.getConvertToFormat.bind(this),this.onAuditApiClick=this.onAuditApiClick.bind(this),this.onChangeFormatClick=this.onChangeFormatClick.bind(this),this.openUpdateConfirmation=this.openUpdateConfirmation.bind(this),this.updateSwaggerDefinition=this.updateSwaggerDefinition.bind(this),this.onChangeSwaggerContent=this.onChangeSwaggerContent.bind(this)}componentDidMount(){const{api:e}=this.props,{settings:t}=this.context;let a;a="GRAPHQL"===e.type?e.getSchema(e.id):e.getSwagger(e.id),this.setState({securityAuditProperties:t.securityAuditProperties}),a.then(t=>{"GRAPHQL"===e.type?this.setState({graphQL:t.obj.schemaDefinition,format:"txt"}):this.setState({swagger:vp.a.stringify(t.obj).replace("---\n",""),swaggerModified:vp.a.stringify(t.obj).replace("---\n",""),format:"yaml",convertTo:this.getConvertToFormat("yaml")})}).catch(e=>{const{status:t}=e;404===t?this.setState({notFound:!0}):401===t&&Object(ee.b)()})}onAuditApiClick(){this.setState({isAuditApiClicked:!0})}onChangeFormatClick(){const{format:e,swagger:t,convertTo:a}=this.state;let n="";n="json"===a?JSON.stringify(bp.a.load(t),null,1):vp.a.stringify(JSON.parse(t)).replace("---\n",""),this.setState({swagger:n,swaggerModified:n,format:a,convertTo:e})}onChangeSwaggerContent(e){const{format:t}=this.state;try{"json"===t?JSON.parse(e,null):bp.a.load(e),this.setState({isSwaggerValid:!0,swaggerModified:e})}catch(t){this.setState({isSwaggerValid:!1,swaggerModified:e})}}getConvertToFormat(e){return"json"===e?"yaml":"json"}hasJsonStructure(e){if("string"!=typeof e)return!1;try{const t=JSON.parse(e);return t&&"object"==typeof t}catch(e){return!1}}handleOk(){const{swaggerModified:e}=this.state;this.setState({openDialog:!1},()=>this.updateSwaggerDefinition(e,"",""))}handleNo(){this.setState({openDialog:!1})}openEditor(){this.setState({openEditor:!0})}closeEditor(){this.setState({openEditor:!1});const{intl:e,api:t,history:a}=this.props,{isAuditApiClicked:n}=this.state;if(!0===n){$.a.info(e.formatMessage({id:"Apis.Details.APIDefinition.info.updating.auditapi",defaultMessage:"To reflect the changes made, you need to click Audit API"}));const n="/apis/"+t.id+"/api definition";a.push(n)}}transition(e){return i.a.createElement(qn.a,Bp({direction:"up"},e))}openUpdateConfirmation(){this.setState({openDialog:!0})}updateSwaggerDefinition(e,t,a){const{api:n,intl:i,updateAPI:r}=this.props;let s={};if(this.hasJsonStructure(e))s=JSON.parse(e);else try{s=bp.a.load(e)}catch(e){return console.log(e),void $.a.error(i.formatMessage({id:"Apis.Details.APIDefinition.APIDefinition.error.while.updating.api.definition",defaultMessage:"Error occurred while updating the API Definition"}))}n.updateSwagger(s).then(s=>{const{endpointImplementationType:o}=n;"INLINE"===o&&n.generateMockScripts(n.id),s&&($.a.success(i.formatMessage({id:"Apis.Details.APIDefinition.APIDefinition.api.definition.updated.successfully",defaultMessage:"API Definition updated successfully"})),t&&a?this.setState({swagger:e,format:t,convertTo:a}):this.setState({swagger:e})),r()}).catch(e=>{console.log(e),$.a.error(i.formatMessage({id:"Apis.Details.APIDefinition.APIDefinition.error.while.updating.api.definition",defaultMessage:"Error occurred while updating the API Definition"}))})}render(){const{swagger:e,graphQL:t,openEditor:a,openDialog:r,format:s,convertTo:l,notFound:c,isAuditApiClicked:p,securityAuditProperties:d,isSwaggerValid:m,swaggerModified:u}=this.state,{classes:g,resourceNotFountMessage:h,api:f}=this.props;let E,b,y=0;null!==t?(E="data:text/"+s+";charset=utf-8,"+encodeURIComponent(t),b=f.provider+"-"+f.name+"-"+f.version+".graphql",y=1):(E="data:text/"+s+";charset=utf-8,"+encodeURIComponent(e),b="swagger."+s);return c?i.a.createElement(U.a,{message:h}):e||t||"undefined"!==f?i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:g.topBar},i.a.createElement("div",{className:g.titleWrapper},i.a.createElement(K.a,{variant:"h4"},t?i.a.createElement(q.a,{id:"Apis.Details.APIDefinition.APIDefinition.schema.definition",defaultMessage:"Schema Definition"}):i.a.createElement(q.a,{id:"Apis.Details.APIDefinition.APIDefinition.api.definition",defaultMessage:"API Definition"})),!(t||"APIProduct"===f.type)&&i.a.createElement(Ne.a,{size:"small",className:g.button,onClick:this.openEditor,disabled:Object(o.b)(["apim:api_create"],f)},i.a.createElement(_a.a,{className:g.buttonIcon}),i.a.createElement(q.a,{id:"Apis.Details.APIDefinition.APIDefinition.edit",defaultMessage:"Edit"})),"APIProduct"!==f.type&&i.a.createElement(zp,{setSchemaDefinition:this.setSchemaDefinition}),i.a.createElement("a",{className:g.downloadLink,href:E,download:b},i.a.createElement(Ne.a,{size:"small",className:g.button},i.a.createElement(mp.a,{className:g.buttonIcon}),i.a.createElement(q.a,{id:"Apis.Details.APIDefinition.APIDefinition.download.definition",defaultMessage:"Download Definition"}))),d.apiToken&&d.collectionId&&i.a.createElement(Ne.a,{size:"small",className:g.button,onClick:this.onAuditApiClick},i.a.createElement(gp.a,{className:g.buttonIcon}),i.a.createElement(q.a,{id:"Apis.Details.APIDefinition.APIDefinition.audit.api",defaultMessage:"Audit API"})),Object(o.b)(["apim:api_create"],f)&&i.a.createElement(K.a,{variant:"body2",color:"primary"},i.a.createElement(q.a,{id:"Apis.Details.APIDefinition.APIDefinition.update.not.allowed",defaultMessage:"Unauthorized: Insufficient permissions to update API Definition"}))),0===y&&i.a.createElement("div",{className:g.titleWrapper},i.a.createElement(Ne.a,{size:"small",className:g.button,onClick:this.onChangeFormatClick},i.a.createElement(fp.a,{className:g.buttonIcon}),i.a.createElement(q.a,{id:"Apis.Details.APIDefinition.APIDefinition.convert.to",defaultMessage:"Convert to"})," ",l))),i.a.createElement("div",null,i.a.createElement(n.Suspense,{fallback:i.a.createElement(X.a,null)},p?i.a.createElement(Mp,{apiId:f.id}):i.a.createElement(Vp,{language:s,width:"100%",height:"calc(100vh - 51px)",theme:"vs-dark",value:null!==e?e:t,options:{selectOnLineNumbers:!0,readOnly:!0,smoothScrolling:!0,wordWrap:"on"}}))),i.a.createElement(ha.a,{fullScreen:!0,open:a,onClose:this.closeEditor,TransitionComponent:this.transition},i.a.createElement(ce.a,{square:!0,className:g.popupHeader},i.a.createElement(Ta.a,{className:g.button,color:"inherit",onClick:this.closeEditor,"aria-label":i.a.createElement(q.a,{id:"Apis.Details.APIDefinition.APIDefinition.btn.close",defaultMessage:"Close"})},i.a.createElement(Ma.a,null,"close")),i.a.createElement(Ne.a,{className:g.button,variant:"contained",color:"primary",onClick:this.openUpdateConfirmation,disabled:!m},i.a.createElement(q.a,{id:"Apis.Details.APIDefinition.APIDefinition.documents.swagger.editor.update.content",defaultMessage:"Update Content"}))),i.a.createElement(n.Suspense,{fallback:i.a.createElement("div",null,"(",i.a.createElement(q.a,{id:"Apis.Details.APIDefinition.APIDefinition.loading",defaultMessage:"Loading..."}),")")},i.a.createElement(Up,{swagger:u,language:s,onEditContent:this.onChangeSwaggerContent}))),i.a.createElement(ha.a,{open:r,onClose:this.handleNo,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},i.a.createElement(ya.a,{id:"alert-dialog-title"},i.a.createElement(K.a,{align:"left"},i.a.createElement(q.a,{id:"Apis.Details.APIDefinition.APIDefinition.save.api.definition",defaultMessage:"Save API Definition"}))),i.a.createElement(Ea.a,null,i.a.createElement(ba.a,{id:"alert-dialog-description"},i.a.createElement(q.a,{id:"Apis.Details.APIDefinition.APIDefinition.api.definition.save.confirmation",defaultMessage:"Are you sure you want to save the API Definition? This might affect the existing resources."}))),i.a.createElement(fa.a,null,i.a.createElement(Ne.a,{onClick:this.handleNo,color:"primary"},i.a.createElement(q.a,{id:"Apis.Details.APIDefinition.APIDefinition.btn.no",defaultMessage:"CANCEL"})),i.a.createElement(Ne.a,{onClick:this.handleOk,color:"primary",autoFocus:!0,variant:"contained"},i.a.createElement(q.a,{id:"Apis.Details.APIDefinition.APIDefinition.btn.yes",defaultMessage:"SAVE"}))))):i.a.createElement(X.a,null)}}Hp.contextType=te.b,Hp.propTypes={classes:s.a.shape({button:s.a.shape({}),popupHeader:s.a.shape({}),buttonIcon:s.a.shape({}),root:s.a.shape({}),topBar:s.a.shape({}),titleWrapper:s.a.shape({}),mainTitle:s.a.shape({}),converterWrapper:s.a.shape({}),dropzone:s.a.shape({}),downloadLink:s.a.shape({})}).isRequired,api:s.a.shape({updateSwagger:s.a.func,getSwagger:s.a.func,id:s.a.string,apiType:s.a.oneOf([Q.a.CONSTS.API,Q.a.CONSTS.APIProduct])}).isRequired,history:s.a.shape({push:s.a.object}).isRequired,location:s.a.shape({pathname:s.a.object}).isRequired,resourceNotFountMessage:s.a.shape({}).isRequired,theme:s.a.shape({}).isRequired,intl:s.a.shape({formatMessage:s.a.func}).isRequired,updateAPI:s.a.func.isRequired};var Gp=Object(_.withRouter)(Object(q.d)(Object(L.a)(e=>({titleWrapper:{display:"flex",flexDirection:"row",alignItems:"center"},swaggerEditorWrapper:{height:"100vh",overflowY:"auto"},buttonIcon:{marginRight:10},topBar:{display:"flex",flexDirection:"row",marginBottom:e.spacing(2)},converterWrapper:{display:"flex",alignItems:"center",justifyContent:"flex-end",flex:"1",fontSize:"0.6964285714285714rem"},downloadLink:{color:"black"},button:{marginLeft:e.spacing(1)}}),{withTheme:!0})(Hp)));const Kp=Object(n.lazy)(()=>Promise.resolve().then(a.t.bind(null,2319,7)));class Yp extends i.a.Component{constructor(e){var t,a,n;super(e),n=e=>{if(this.setState({isArchive:e,wsdl:null}),!e){const{api:e}=this.props;this.loadWSDLInEditor(e)}},(a="setSchemaDefinition")in(t=this)?Object.defineProperty(t,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[a]=n,this.state={isArchive:!1,wsdl:null},this.loadWSDLInEditor=this.loadWSDLInEditor.bind(this),this.handleDownloadWSDLZip=this.handleDownloadWSDLZip.bind(this)}componentDidMount(){const{api:e,intl:t}=this.props;e.getWSDLInfo(e.id).then(t=>{"WSDL"===t.obj.type?this.loadWSDLInEditor(e):this.setState({isArchive:!0,wsdl:null})}).catch(e=>{const{status:a}=e;404===a?this.setState({notFound:!0}):$.a.error(t.formatMessage({id:"Apis.Details.APIDefinition.WSDL.error.loading.wsdl.info",defaultMessage:"Error loading WSDL"}))})}loadWSDLInEditor(e){const{intl:t}=this.props;e.getWSDL(e.id).then(e=>{e.data.text().then(e=>{this.setState({isArchive:!1,wsdl:e})})}).catch(e=>{const{status:a}=e;404===a?this.setState({notFound:!0}):$.a.error(t.formatMessage({id:"Apis.Details.APIDefinition.WSDL.error.loading.wsdl",defaultMessage:"Error loading WSDL"}))})}handleDownloadWSDLZip(){const{api:e,intl:t}=this.props;e.getWSDL(e.id).then(e=>{B.a.forceDownload(e)}).catch(e=>{$.a.error(t.formatMessage({id:"Apis.Details.APIDefinition.WSDL.download.error",defaultMessage:"Error downloading WSDL ZIP file"}))})}render(){const{wsdl:e,notFound:t,isArchive:a}=this.state,{classes:r,resourceNotFountMessage:s,api:l}=this.props;if(t)return i.a.createElement(U.a,{message:s});if(!a&&!e)return i.a.createElement(X.a,null);let c;const p=i.a.createElement(i.a.Fragment,null,i.a.createElement(mp.a,{className:r.buttonIcon}),i.a.createElement(q.a,{id:"Apis.Details.APIDefinition.WSDL.download.definition",defaultMessage:"Download WSDL"}));if(a)c=i.a.createElement(Ne.a,{size:"small",className:r.button,onClick:this.handleDownloadWSDLZip},p);else{const t="data:text/xml;charset=utf-8,"+encodeURIComponent(e),a=l.name+"-"+l.version+".wsdl";c=i.a.createElement("a",{className:r.downloadLink,href:t,download:a},i.a.createElement(Ne.a,{size:"small",className:r.button},p))}return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:r.topBar},i.a.createElement("div",{className:r.titleWrapper},i.a.createElement(K.a,{variant:"h4"},i.a.createElement(q.a,{id:"Apis.Details.APIDefinition.WSDL.wsdl.definition",defaultMessage:"WSDL Definition"})),i.a.createElement(zp,{setSchemaDefinition:this.setSchemaDefinition}),c,Object(o.b)(["apim:api_create"],l)&&i.a.createElement(K.a,{variant:"body2",color:"primary"},i.a.createElement(q.a,{id:"Apis.Details.APIDefinition.WSDL.update.not.allowed",defaultMessage:"Unauthorized: Insufficient permissions to update WSDL Definition"})))),i.a.createElement("div",null,i.a.createElement(n.Suspense,{fallback:i.a.createElement(X.a,null)},a?i.a.createElement(si.a,{type:"info",height:80,className:r.emptyBox},i.a.createElement("div",{className:r.contentWrapper},i.a.createElement(K.a,{component:"p",className:r.content},i.a.createElement(q.a,{id:"Apis.Details.APIDefinition.WSDL.preview.not.available",defaultMessage:"The API has a WSDL ZIP hence the preview is not available."})))):i.a.createElement(Kp,{language:"xml",width:"100%",height:"calc(100vh - 51px)",theme:"vs-dark",value:e,options:{selectOnLineNumbers:!0,readOnly:!0,smoothScrolling:!0,wordWrap:"on",cursorStyle:"line-thin"}}))))}}Yp.contextType=te.b,Yp.propTypes={classes:s.a.shape({button:s.a.shape({}),popupHeader:s.a.shape({}),buttonIcon:s.a.shape({}),root:s.a.shape({}),topBar:s.a.shape({}),titleWrapper:s.a.shape({}),mainTitle:s.a.shape({}),converterWrapper:s.a.shape({}),dropzone:s.a.shape({}),downloadLink:s.a.shape({})}).isRequired,api:s.a.shape({updateSwagger:s.a.func,getSwagger:s.a.func,id:s.a.string,apiType:s.a.oneOf([Q.a.CONSTS.API,Q.a.CONSTS.APIProduct])}).isRequired,history:s.a.shape({push:s.a.object}).isRequired,location:s.a.shape({pathname:s.a.object}).isRequired,resourceNotFountMessage:s.a.shape({}).isRequired,theme:s.a.shape({}).isRequired,intl:s.a.shape({formatMessage:s.a.func}).isRequired};var Jp=Object(_.withRouter)(Object(q.d)(Object(L.a)(e=>({titleWrapper:{display:"flex",flexDirection:"row",alignItems:"center"},swaggerEditorWrapper:{height:"100vh",overflowY:"auto"},buttonIcon:{marginRight:10},topBar:{display:"flex",flexDirection:"row",marginBottom:e.spacing(2)},converterWrapper:{display:"flex",alignItems:"center",justifyContent:"flex-end",flex:"1",fontSize:"0.6964285714285714rem"},downloadLink:{color:"black"},button:{marginLeft:e.spacing(1)}}),{withTheme:!0})(Yp))),Qp=a(1177);var Zp={common:[{label:"Overview",route:"overview"},{label:"MetaData",route:"overview"},{label:"Runtime Configurations",route:"runtime-configuration"},{label:"Transport Level Security",route:"runtime-configuration"},{label:"Mutual SSL",route:"runtime-configuration"},{label:"Design Configurations",route:"configuration"},{label:"Manage SSL Certificates",route:"configuration"},{label:"HTTP HTTPS enable disable",route:"runtime-configuration"},{label:"Application Level Security",route:"runtime-configuration"},{label:"Enable/Disable OAuth2",route:"runtime-configuration"},{label:"Enable/Disable Basic Auth",route:"runtime-configuration"},{label:"Enable/Disable Api Key",route:"runtime-configuration"},{label:"Authorization Headers",route:"runtime-configuration"},{label:"CORS Configuration",route:"runtime-configuration"},{label:"Backend Throughput",route:"runtime-configuration"},{label:"Message Mediation",route:"runtime-configuration"},{label:"Response",route:"runtime-configuration"},{label:"Request",route:"runtime-configuration"},{label:"Backend",route:"runtime-configuration"},{label:"Access Control Allow Origins",route:"configuration"},{label:"Access Control Allow Headers",route:"configuration"},{label:"Access Control Allow Credentials",route:"configuration"},{label:"Response caching",route:"runtime-configuration"},{label:"Publisher Access Control",route:"configuration"},{label:"Developer Portal Visibility",route:"configuration"},{label:"Tags",route:"configuration"},{label:"Default Version",route:"configuration"},{label:"Image",route:"configuration"},{label:"Description",route:"configuration"},{label:"Documents",route:"documents"},{label:"Add New Documents",route:"documents"},{label:"API Help",route:"documents"},{label:"Markdown Documents",route:"documents"},{label:"Business Information",route:"business info"},{label:"Business Owner",route:"business info"},{label:"Technical Owner",route:"business info"},{label:"Properties",route:"business info"},{label:"Subscriptions",route:"subscriptions"},{label:"Subscription Policies",route:"subscriptions"},{label:"Subscription Availability",route:"subscriptions"}],apiOnly:[{label:"API Gateways",route:"environments"},{label:"Microgateway Labels",route:"environments"},{label:"Environments",route:"environments"},{label:"Lifecycle",route:"lifecycle"},{label:"Publish API",route:"lifecycle"},{label:"Block API",route:"lifecycle"},{label:"Depricate API",route:"lifecycle"},{label:"Change Lifecycle",route:"lifecycle"},{label:"Deploy as a Prototype API",route:"lifecycle"},{label:"Requirements",route:"lifecycle"},{label:"Mediation Policies",route:"runtime-configuration"},{label:"Monetization",route:"monetization"},{label:"Monetization Properties",route:"monetization"},{label:"Commercial Policies",route:"monetization"},{label:"Create New Version",route:"new_version"},{label:"Prototyped API",route:"endpoints"},{label:"AWS Lambda Endpoints",route:"endpoints"},{label:"HTTP/HTTPS Endpoints",route:"endpoints"},{label:"HTTP/SOAP Endpoints",route:"endpoints"},{label:"Dynamic Endpoints",route:"endpoints"},{label:"Endpoint Security",route:"endpoints"},{label:"Certificates",route:"endpoints"},{label:"Production Endpoint",route:"endpoints"},{label:"Sandbox Endpoint",route:"endpoints"},{label:"Failover Endpoint",route:"endpoints"},{label:"Load Balance Endpoint",route:"endpoints"},{label:"Endpoints",route:"endpoints"},{label:"API Definition",route:"api definition"},{label:"Import API Definition",route:"api definition"},{label:"Download API Definition",route:"api definition"},{label:"Swagger",route:"api definition"},{label:"Import Swagger",route:"api definition"},{label:"Download Swagger",route:"api definition"},{label:"Resources",route:"resources"},{label:"Resources Configuration",route:"resources"},{label:"Rate Limiting",route:"resources"},{label:"Operation Governance",route:"resources"},{label:"Scopes",route:"scopes"},{label:"Add New Scope",route:"scopes"},{label:"Schema validation",route:"runtime-configuration"},{label:"Fault",route:"runtime-configuration"},{label:"Endpoints",route:"runtime-configuration"},{label:"Properties",route:"properties"}],productOnly:[{label:"Product only feature",route:"configuration"},{label:"API Definition",route:"api definition"},{label:"Import API Definition",route:"api definition"},{label:"Download API Definition",route:"api definition"},{label:"Swagger",route:"api definition"},{label:"Import Swagger",route:"api definition"},{label:"Download Swagger",route:"api definition"},{label:"Resources",route:"resources"},{label:"Resources Configuration",route:"resources"},{label:"Rate Limiting",route:"resources"},{label:"Operation Governance",route:"resources"},{label:"Schema validation",route:"runtime-configuration"}],graphqlOnly:[{label:"Operations",route:"operations"},{label:"Operation Type",route:"operations"},{label:"Operations Configuration",route:"operations"},{label:"Rate Limiting",route:"operations"},{label:"Schema Definition",route:"schema definition"},{label:"Scopes",route:"scopes"},{label:"Add New Scope",route:"scopes"},{label:"Fault",route:"runtime-configuration"},{label:"Endpoints",route:"runtime-configuration"},{label:"Environments",route:"environments"},{label:"API Gateways",route:"environments"},{label:"Microgateway Labels",route:"environments"},{label:"Lifecycle",route:"lifecycle"},{label:"Publish API",route:"lifecycle"},{label:"Block API",route:"lifecycle"},{label:"Depricate API",route:"lifecycle"},{label:"Change Lifecycle",route:"lifecycle"},{label:"Deploy as a Prototype API",route:"lifecycle"},{label:"Requirements",route:"lifecycle"},{label:"Monetization",route:"monetization"},{label:"Monetization Properties",route:"monetization"},{label:"Commercial Policies",route:"monetization"},{label:"Create New Version",route:"new_version"},{label:"Prototyped API",route:"endpoints"},{label:"AWS Lambda Endpoints",route:"endpoints"},{label:"HTTP/HTTPS Endpoints",route:"endpoints"},{label:"HTTP/SOAP Endpoints",route:"endpoints"},{label:"Dynamic Endpoints",route:"endpoints"},{label:"Endpoint Security",route:"endpoints"},{label:"Certificates",route:"endpoints"},{label:"Production Endpoint",route:"endpoints"},{label:"Sandbox Endpoint",route:"endpoints"},{label:"Failover Endpoint",route:"endpoints"},{label:"Load Balance Endpoint",route:"endpoints"},{label:"Endpoints",route:"endpoints"},{label:"Fault",route:"runtime-configuration"},{label:"Endpoints",route:"runtime-configuration"},{label:"Properties",route:"properties"}]};function Xp(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function $p(){return($p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function ed(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function td(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ed(a,!0).forEach(function(t){ad(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ed(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function ad(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function nd(e,t){if(null==e)return{};var a,n,i=function(e,t){if(null==e)return{};var a,n,i={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(i[a]=e[a]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}const id=Object(Ue.a)(e=>({root:{flexGrow:1,height:250},container:{flexGrow:1,position:"relative"},paper:{position:"absolute",zIndex:e.zIndex.goToSearch,marginTop:e.spacing(1),left:0,right:0},chip:{margin:e.spacing(.5,.25)},inputRoot:{flexWrap:"wrap"},inputInput:{width:"auto",flexGrow:1},divider:{height:e.spacing(2)},linkButton:{display:"flex",alignItems:"center",flexDirection:"column",padding:10,cursor:"pointer",minWidth:30},goToWrapper:{position:"relative"},downshiftWrapper:{position:"absolute",padding:e.spacing(1),right:60,top:0,width:300,background:"white",border:"solid 1px #ccc",borderRadius:5}}));function rd(e){const{InputProps:t,classes:a,ref:n}=e,r=nd(e,["InputProps","classes","ref"]);return i.a.createElement(vt.a,$p({autoFocus:!0,InputProps:td({inputRef:n,classes:{root:a.inputRoot,input:a.inputInput}},t)},r))}function sd(e){const{suggestion:t,index:a,itemProps:n,highlightedIndex:r,api:s,isAPIProduct:o,handleClickAway:l}=e,c=r===a,p=o?"/api-products/".concat(s.id,"/").concat(t.route):"/apis/".concat(s.id,"/").concat(t.route);return i.a.createElement(W.b,{to:p,onClick:l},i.a.createElement(an.a,$p({key:t.label},n,{selected:c,button:!0,"aria-haspopup":"true","aria-controls":"lock-menu","aria-label":"when device is locked"}),i.a.createElement(Ft.a,{primary:t.label,secondary:t.route})))}function od(e){const{isAPIProduct:t,api:a}=e,r=id(),[s,o]=Object(n.useState)(!1);let l=!1;"GRAPHQL"===a.type&&(l=!0);const c=()=>{o(!1)};return i.a.createElement(Qp.a,{onClickAway:c},i.a.createElement("div",{className:r.goToWrapper},i.a.createElement("a",{className:r.linkButton,onClick:()=>{o(!s)}},i.a.createElement(Ma.a,null,"find_in_page"),i.a.createElement(K.a,{variant:"caption"},i.a.createElement(q.a,{id:"Apis.Details.GoTo.GoTo.btn",defaultMessage:"Go To"}))),s&&i.a.createElement("div",{className:r.downshiftWrapper},i.a.createElement(Dr.a,{id:"downshift-simple"},a=>{let{getInputProps:n,getItemProps:s,getLabelProps:o,getMenuProps:p,highlightedIndex:d,inputValue:m,isOpen:u,selectedItem:g}=a;const h=n({placeholder:"Type what you want to do.."}),{onBlur:f,onFocus:E}=h,b=nd(h,["onBlur","onFocus"]);return i.a.createElement("div",{className:r.container},rd({fullWidth:!0,classes:r,label:"Go to menu item",InputLabelProps:o({shrink:!0}),InputProps:{onBlur:f,onFocus:E},inputProps:b}),i.a.createElement("div",p(),u?i.a.createElement(ce.a,{className:r.paper,square:!0},function(e,t,a){let{showEmpty:n=!1}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const i=Ar()(e.trim()).toLowerCase(),r=i.length;let s=0;const o=Xp(Zp.common);return t?o.push.apply(o,Xp(Zp.productOnly)):a?o.push.apply(o,Xp(Zp.graphqlOnly)):o.push.apply(o,Xp(Zp.apiOnly)),0!==r||n?o.filter(e=>{const t=s<5&&e.label.slice(0,r).toLowerCase()===i;return t&&(s+=1),t}):[]}(m,t,l).map((t,a)=>sd(td({suggestion:t,index:a,itemProps:s({item:t.label}),highlightedIndex:d,selectedItem:g,handleClickAway:c},e)))):null))}))))}rd.propTypes={classes:s.a.shape({}).isRequired,InputProps:s.a.shape({}).isRequired},sd.propTypes={highlightedIndex:s.a.oneOfType([s.a.oneOf([null]),s.a.number]).isRequired,index:s.a.number.isRequired,itemProps:s.a.shape({}).isRequired,selectedItem:s.a.string.isRequired,suggestion:s.a.shape({label:s.a.string.isRequired}).isRequired},od.propTypes={api:s.a.shape({}).isRequired,isAPIProduct:s.a.bool.isRequired};var ld=od,cd=a(1277),pd=a(2483),dd=a.n(pd);function md(e){const{api:t,classes:a}=e;return i.a.createElement(i.a.Fragment,null,i.a.createElement(Mn.a,{resourceMethod:Mn.b.POST,resourcePath:Mn.c.API_COPY},i.a.createElement("div",{className:a.createNewVersionWrapper},i.a.createElement(Tc.a,{height:70}),i.a.createElement(W.b,{className:a.createNewVersion,to:"/apis/"+t.id+"/new_version",style:{minWidth:95}},i.a.createElement("div",null,i.a.createElement(dd.a,null)),i.a.createElement(K.a,{variant:"caption"},i.a.createElement(q.a,{id:"Apis.Details.components.CreateNewVersionButton.create.new.version",defaultMessage:"Create New Version"}))))))}md.propTypes={api:s.a.shape({id:s.a.string}).isRequired,history:s.a.shape({push:s.a.func}).isRequired,classes:s.a.shape({}).isRequired};var ud=Object(_.withRouter)(Object(L.a)(e=>({root:{height:70,background:e.palette.background.paper,borderBottom:"solid 1px "+e.palette.grey.A200,display:"flex",alignItems:"center"},backLink:{alignItems:"center",textDecoration:"none",display:"flex"},backIcon:{color:e.palette.primary.main,fontSize:56,cursor:"pointer"},backText:{color:e.palette.primary.main,cursor:"pointer",fontFamily:e.typography.fontFamily},createNewVersionWrapper:{display:"flex",justifyContent:"flex-end"},createNewVersion:{display:"flex",flexDirection:"column",textAlign:"center",justifyContent:"center",cursor:"pointer",color:e.custom.createNewVersionButtonColor||"inherit"},linkText:{fontSize:e.typography.fontSize}}),{withTheme:!0})(md));const gd=e=>{const{classes:t,theme:a,api:r,isAPIProduct:s,imageUpdate:o,intl:l}=e,c=["PROTOTYPED","PUBLISHED"].includes(r.lifeCycleStatus);const p=["API"].includes(r.apiType),{settings:d,user:m}=Object(te.c)();let u="API";s&&(u="PRODUCT");const{tenantList:g}=Object(n.useContext)(de.c),h=m.name.split("@"),f=h[h.length-1];let E="".concat(d.storeUrl,"/apis/").concat(r.id,"/overview");return g&&g.length>0&&(E="".concat(d.storeUrl,"/apis/").concat(r.id,"/overview?tenant=").concat(f)),i.a.createElement("div",{className:t.root},i.a.createElement(W.b,{to:s?"/api-products":"/apis",className:t.backLink},i.a.createElement(Ml.a,{className:t.backIcon}),i.a.createElement("div",{className:t.backText},i.a.createElement(q.a,{id:"Apis.Details.components.APIDetailsTopMenu.back.to.listing",defaultMessage:"BACK TO {break} {apiType}s",values:{break:i.a.createElement("br",null),apiType:u}}))),i.a.createElement(Tc.a,{height:70}),i.a.createElement(ut.a,{api:r,width:70,height:50,imageUpdate:o}),i.a.createElement("div",{style:{marginLeft:a.spacing(1),maxWidth:500}},i.a.createElement(K.a,{variant:"h4",className:t.apiName},r.name," ",s?"":":"+r.version),i.a.createElement(K.a,{variant:"caption",gutterBottom:!0,align:"left"},"Created by:"," ",r.provider)),i.a.createElement(Tc.a,{height:70}),i.a.createElement("div",{className:t.infoItem},i.a.createElement(K.a,{variant:"subtitle1"},s?r.state:r.lifeCycleStatus),i.a.createElement(K.a,{variant:"caption",align:"left"},"State")),i.a.createElement("div",{className:t.dateWrapper}),i.a.createElement(Tc.a,{height:70}),i.a.createElement(ld,{api:r,isAPIProduct:s}),(c||s)&&i.a.createElement(Tc.a,{height:70}),(c||s)&&i.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:E,className:t.viewInStoreLauncher,style:{minWidth:90}},i.a.createElement("div",null,i.a.createElement(fe.a,null)),i.a.createElement(K.a,{variant:"caption"},i.a.createElement(q.a,{id:"Apis.Details.components.APIDetailsTopMenu.view.in.portal",defaultMessage:"View in Dev Portal"}))),s?null:i.a.createElement(ud,{buttonClass:t.viewInStoreLauncher,api:r}),p&&i.a.createElement(Tc.a,{height:70}),i.a.createElement("div",{className:t.downloadApi},p&&i.a.createElement("a",{onClick:function(){return(new Q.a).exportApi(r.id).then(e=>B.a.forceDownload(e)).catch(e=>{e.response?$.a.error(e.response.body.description):$.a.error(l.formatMessage({id:"Apis.Details.components.APIDetailsTopMenu.error",defaultMessage:"Something went wrong while downloading the API."})),console.error(e)})},onKeyDown:"null",className:t.downloadApiFlex},i.a.createElement("div",null,i.a.createElement(mp.a,null)),i.a.createElement(K.a,{variant:"caption",align:"left"},i.a.createElement(q.a,{id:"Apis.Details.APIDetailsTopMenu.download.api",defaultMessage:"Download API"})))),i.a.createElement(cd.a,{buttonClass:t.viewInStoreLauncher,api:r,isAPIProduct:s}))};gd.propTypes={classes:s.a.shape({}).isRequired,theme:s.a.shape({}).isRequired,api:s.a.shape({}).isRequired,isAPIProduct:s.a.bool.isRequired,imageUpdate:s.a.number.isRequired};var hd=Object(q.d)(Object(L.a)(e=>({root:{height:70,background:e.palette.background.paper,borderBottom:"solid 1px "+e.palette.grey.A200,display:"flex",alignItems:"center"},backLink:{alignItems:"center",textDecoration:"none",display:"flex"},backIcon:{color:e.palette.primary.main,fontSize:56,cursor:"pointer"},backText:{color:e.palette.primary.main,cursor:"pointer",fontFamily:e.typography.fontFamily},viewInStoreLauncher:{display:"flex",flexDirection:"column",color:e.palette.getContrastText(e.palette.background.paper),textAlign:"center",justifyContent:"center",height:70},linkText:{fontSize:e.typography.fontSize},dateWrapper:{flex:1,alignSelf:"center"},lastUpdatedTypography:{display:"inline-block",minWidth:30},apiName:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},downloadApi:{display:"flex",flexDirection:"column",textAlign:"center",justifyContent:"center",cursor:"pointer",height:70,color:e.palette.getContrastText(e.palette.background.paper)},downloadApiFlex:{display:"flex",flexDirection:"column"}}),{withTheme:!0})(gd));function fd(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Ed extends i.a.Component{constructor(e){super(e),fd(this,"isValid",()=>this.isValidBusinessOwnerEmail&&this.isValidTechnicalOwnerEmail&&this.isFormUpdated),fd(this,"handleChange",e=>t=>{let{value:a}=t.target;const{checked:n}=t.target;if("accessControlRoles"===e||"visibleRoles"===e?a=a.split(","):"isDefaultVersion"===e?a="yes"===a:"responseCaching"===e&&(a=n?"Enabled":"Disabled"),"businessOwnerEmail"===e){const e=Ot.a.email.validate(a).error;this.isValidBusinessOwnerEmail=null===e||""===a}if("technicalOwnerEmail"===e){const e=Ot.a.email.validate(a).error;this.isValidTechnicalOwnerEmail=null===e||""===a}this.isFormUpdated=!0,this.setState({[e]:a})});const{businessOwner:t,businessOwnerEmail:a,technicalOwner:n,technicalOwnerEmail:i}=this.props.api.businessInformation;this.state={businessOwner:t,businessOwnerEmail:a,technicalOwner:n,technicalOwnerEmail:i},this.isFormUpdated=!1,this.isValidBusinessOwnerEmail=!0,this.isValidTechnicalOwnerEmail=!0}handleSubmit(e){const{businessOwner:t,businessOwnerEmail:a,technicalOwner:n,technicalOwnerEmail:i}=this.state;e({businessInformation:{businessOwner:t,businessOwnerEmail:a,technicalOwner:n,technicalOwnerEmail:i}})}render(){const{classes:e,api:t,updateAPI:a}=this.props,{businessOwner:n,businessOwnerEmail:r,technicalOwner:s,technicalOwnerEmail:l}=this.state;return i.a.createElement(i.a.Fragment,null,i.a.createElement(mt.a,{maxWidth:"md"},i.a.createElement(ge.a,{mb:3},i.a.createElement(K.a,{variant:"h4"},i.a.createElement(q.a,{id:"Apis.Details.BusinessInformation.BusinessInformation.business.info",defaultMessage:"Business Information"})),t.apiType===Q.a.CONSTS.APIProduct?i.a.createElement(K.a,{variant:"caption"},i.a.createElement(q.a,{id:"Apis.Details.BusinessInformation.BusinessInformation.APIProduct.sub.heading",defaultMessage:"Business Information of the API"})):i.a.createElement(K.a,{variant:"caption"},i.a.createElement(q.a,{id:"Apis.Details.BusinessInformation.BusinessInformation.sub.heading",defaultMessage:"Business Information of the API"}))),i.a.createElement(ce.a,{elevation:0},i.a.createElement(ge.a,{px:8,py:5},i.a.createElement("form",{noValidate:!0,autoComplete:"off"},i.a.createElement(vt.a,{disabled:Object(o.b)(["apim:api_create","apim:api_publish"],t),fullWidth:!0,id:"name",label:i.a.createElement(i.a.Fragment,null,i.a.createElement(q.a,{id:"Apis.Details.BusinessInformation.BusinessInformation.business.owner.name",defaultMessage:"Business Owner"})),helperText:i.a.createElement(q.a,{id:"Apis.Details.BusinessInformation.BusinessInformation.business.owner.name.helper.text",defaultMessage:"Provide the name of the business owner"}),type:"text",name:"name",margin:"normal",variant:"outlined",value:n,onChange:this.handleChange("businessOwner"),autoFocus:!0}),i.a.createElement(vt.a,{error:!this.isValidBusinessOwnerEmail,disabled:Object(o.b)(["apim:api_create","apim:api_publish"],t),fullWidth:!0,id:"name",label:i.a.createElement(i.a.Fragment,null,i.a.createElement(q.a,{id:"Apis.Details.BusinessInformation.BusinessInformation.business.owner.email",defaultMessage:"Business Owner Email"})),helperText:this.isValidBusinessOwnerEmail?i.a.createElement(q.a,{id:"Apis.Details.BusinessInformation.BusinessInformation.business.owner.email.helper.text",defaultMessage:"Provide the email of the business owner"}):i.a.createElement(q.a,{id:"Apis.Details.BusinessInformation.BusinessInformation.business.owner.email.helper.text.error",defaultMessage:"Please enter a valid email address"}),type:"email",name:"name",margin:"normal",value:r,onChange:this.handleChange("businessOwnerEmail"),variant:"outlined"}),i.a.createElement(vt.a,{disabled:Object(o.b)(["apim:api_create","apim:api_publish"],t),fullWidth:!0,id:"name",label:i.a.createElement(i.a.Fragment,null,i.a.createElement(q.a,{id:"Apis.Details.BusinessInformation.BusinessInformation.technical.owner.name",defaultMessage:"Technical Owner"})),helperText:i.a.createElement(q.a,{id:"Apis.Details.BusinessInformation.BusinessInformation.technical.owner.name.helper.text",defaultMessage:"Provide the name of the technical owner"}),type:"text",name:"name",margin:"normal",value:s,onChange:this.handleChange("technicalOwner"),variant:"outlined"}),i.a.createElement(vt.a,{error:!this.isValidTechnicalOwnerEmail,disabled:Object(o.b)(["apim:api_create","apim:api_publish"],t),fullWidth:!0,id:"name",label:i.a.createElement(q.a,{id:"Apis.Details.BusinessInformation.BusinessInformation.technical.owner.email",defaultMessage:"Technical Owner Email"}),helperText:this.isValidTechnicalOwnerEmail?i.a.createElement(q.a,{id:"Apis.Details.BusinessInformation.BusinessInformation.technical.owner.email.helper.text",defaultMessage:"Provide the email of the technical owner"}):i.a.createElement(q.a,{id:"Apis.Details.BusinessInformation.BusinessInformation.technical.owner.email.helper.text.error",defaultMessage:"Please enter a valid email address"}),type:"email",name:"name",margin:"normal",value:l,onChange:this.handleChange("technicalOwnerEmail"),variant:"outlined"})),i.a.createElement("div",{className:e.buttonWrapper},i.a.createElement(pe.a,{container:!0,direction:"row",alignItems:"flex-start",spacing:1,className:e.buttonSection},i.a.createElement(pe.a,{item:!0},i.a.createElement("div",null,i.a.createElement(Ne.a,{variant:"contained",color:"primary",onClick:()=>this.handleSubmit(a),disabled:Object(o.b)(["apim:api_create","apim:api_publish"],t)||!this.isValid()},i.a.createElement(q.a,{id:"save",defaultMessage:"Save"})))),i.a.createElement(pe.a,{item:!0},i.a.createElement(W.b,{to:(t.apiType===Q.a.CONSTS.APIProduct?"/api-products/":"/apis/")+t.id+"/overview"},i.a.createElement(Ne.a,null,i.a.createElement(q.a,{id:"cancel",defaultMessage:"Cancel"}))))))))))}}Ed.propTypes={state:s.a.shape({}).isRequired,classes:s.a.shape({}).isRequired,api:s.a.shape({id:s.a.string,businessInformation:s.a.shape({businessOwner:s.a.string,businessOwnerEmail:s.a.string,technicalOwner:s.a.string,technicalOwnerEmail:s.a.string,apiType:s.a.oneOf([Q.a.CONSTS.API,Q.a.CONSTS.APIProduct])}).isRequired}).isRequired,updateAPI:s.a.func.isRequired};var bd=Object(de.e)(Object(L.a)(e=>({FormControl:{padding:0,width:"100%",marginTop:0},FormControlOdd:{padding:0,backgroundColor:e.palette.background.paper,width:"100%",marginTop:0},buttonWrapper:{paddingTop:20},paperRoot:{padding:20,marginTop:20}}))(Ed)),yd=a(2485),vd=a.n(yd),Cd=a(2484),Ad=a.n(Cd);const Dd=Object(Ue.a)(()=>({link:{cursor:"pointer"}}));function Sd(e){const{oldKey:t,oldValue:a,handleUpdateList:r,handleDelete:s,apiAdditionalProperties:o,intl:l,setEditing:c,isRestricted:p,api:d}=e,[m,u]=Object(n.useState)(t),[g,h]=Object(n.useState)(a),[f,E]=Object(n.useState)(!1),b=function(e){return null!==e&&""===e},y=function(){r({oldKey:t,oldValue:a},{newKey:m||t,newValue:g||a}),E(!1),c(!1)},v=function(e){"Enter"===e.key&&y()},C=Dd();return i.a.createElement(Se.a,null,f?i.a.createElement(De.a,null,i.a.createElement(vt.a,{fullWidth:!0,required:!0,id:"outlined-required",label:l.formatMessage({id:"Apis.Details.Properties.Properties.editable.row.property.name",defaultMessage:"Property Name"}),margin:"normal",variant:"outlined",className:C.addProperty,value:m,onChange:e=>{const{value:t}=e.target;u(t)},onKeyDown:v,error:b(m)})):i.a.createElement(De.a,null,t),f?i.a.createElement(De.a,null,i.a.createElement(vt.a,{fullWidth:!0,required:!0,id:"outlined-required",label:l.formatMessage({id:"Apis.Details.Properties.Properties.editable.row.edit.mode.property.name",defaultMessage:"Property Name"}),margin:"normal",variant:"outlined",className:C.addProperty,value:g,onChange:e=>{const{value:t}=e.target;h(t)},onKeyDown:v,error:b(g)})):i.a.createElement(De.a,null,a),i.a.createElement(De.a,{align:"right"},f?i.a.createElement(i.a.Fragment,null,i.a.createElement(Ta.a,{className:C.link,"aria-label":"save",onClick:y,onKeyDown:()=>{},disabled:b(m)||b(g),color:"inherit"},i.a.createElement(Ad.a,{className:C.buttonIcon}))):i.a.createElement(Ta.a,{className:C.link,"aria-label":"edit",onClick:function(){E(!f),c(!0)},onKeyDown:()=>{},color:"inherit",disabled:p(["apim:api_create","apim:api_publish"],d)},i.a.createElement(Gr.a,{className:C.buttonIcon})),i.a.createElement(Ta.a,{className:C.link,"aria-label":"remove",onClick:function(){s(o,t)},onKeyDown:()=>{},color:"inherit",disabled:p(["apim:api_create","apim:api_publish"],d)},i.a.createElement(vd.a,{className:C.buttonIcon}))))}Sd.propTypes={oldKey:s.a.shape({}).isRequired,oldValue:s.a.shape({}).isRequired,classes:s.a.shape({}).isRequired,handleUpdateList:s.a.shape({}).isRequired,handleDelete:s.a.shape({}).isRequired,apiAdditionalProperties:s.a.shape({}).isRequired,intl:s.a.shape({formatMessage:s.a.func}).isRequired,setEditing:s.a.func.isRequired};var Od=Object(q.d)(Sd);function wd(){return(wd=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}const Pd=Object(Ue.a)(e=>({root:{paddingTop:0,paddingLeft:0,maxWidth:e.custom.contentAreaWidth},titleWrapper:{display:"flex",flexDirection:"row",alignItems:"center"},button:{marginLeft:e.spacing(2),color:e.palette.getContrastText(e.palette.primary.main)},FormControl:{padding:0,width:"100%",marginTop:0,display:"flex",flexDirection:"row"},FormControlOdd:{padding:0,backgroundColor:e.palette.background.paper,width:"100%",marginTop:0},buttonWrapper:{paddingTop:e.spacing(3)},paperRoot:{padding:e.spacing(3),marginTop:e.spacing(3)},addNewHeader:{padding:e.spacing(2),backgroundColor:e.palette.grey[300],fontSize:e.typography.h6.fontSize,color:e.typography.h6.color,fontWeight:e.typography.h6.fontWeight},addNewOther:{padding:e.spacing(2)},addNewWrapper:{backgroundColor:e.palette.background.paper,color:e.palette.getContrastText(e.palette.background.paper),border:"solid 1px "+e.palette.grey[300],borderRadius:e.shape.borderRadius,marginTop:e.spacing(2)},addProperty:{marginRight:e.spacing(2)},buttonIcon:{marginRight:e.spacing(1)},link:{cursor:"pointer"},messageBox:{marginTop:20},actions:{padding:"20px 0","& button":{marginLeft:0}},head:{fontWeight:200,marginBottom:20},marginRight:{marginRight:e.spacing(1)},helpText:{paddingTop:e.spacing(1)}}));function xd(e){const{api:t,updateAPI:a}=Object(n.useContext)(de.c),r=na()(t.additionalProperties),[s,l]=Object(n.useState)(r),[c,p]=Object(n.useState)(!1),[d,m]=Object(n.useState)(null),[u,g]=Object(n.useState)(null),[h,f]=Object(n.useState)(!1),[E,b]=Object(n.useState)(!1),[y,v]=Object(n.useState)(!1);let C=!1;C=!!["provider","version","context","status","description","subcontext","doc","lcState","name","tags"].includes(d);const A=()=>{p(!c)},D=e=>t=>{const{value:a}=t.target;"propertyKey"===e?m(a):"propertyValue"===e&&g(a)},S=e=>null!==e&&""===e,O=(e,t)=>{const a=JSON.parse(JSON.stringify(s));Object.prototype.hasOwnProperty.call(a,t)&&delete a[t],l(a),a!==s&&v(!0)},w=(e,t)=>{const a=JSON.parse(JSON.stringify(s)),{oldKey:n,oldValue:i}=e,{newKey:r,newValue:o}=t;Object.prototype.hasOwnProperty.call(a,r)&&n===r?o&&i!==o&&(a[n]=o):(delete a[n],a[r]=o),l(a)},P=()=>{const e=JSON.parse(JSON.stringify(s));null!=e[d]?$.a.warning("Property name already exists"):(e[d]=u,l(e),m(null),g(null))},x=e=>{"Enter"===e.key&&P()},{intl:T}=e,I=Pd();return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:I.titleWrapper},t.apiType===Q.a.CONSTS.APIProduct?i.a.createElement(K.a,{variant:"h4",align:"left",className:I.mainTitle},i.a.createElement(q.a,{id:"Apis.Details.Properties.Properties.api.product.properties",defaultMessage:"API Properties"})):i.a.createElement(K.a,{variant:"h4",align:"left",className:I.mainTitle},i.a.createElement(q.a,{id:"Apis.Details.Properties.Properties.api.properties",defaultMessage:"API Properties"})),(!zi()(s)||c)&&i.a.createElement(Ne.a,{size:"small",className:I.button,onClick:A,disabled:c||Object(o.b)(["apim:api_create","apim:api_publish"],t)},i.a.createElement(ri.a,{className:I.buttonIcon}),i.a.createElement(q.a,{id:"Apis.Details.Properties.Properties.add.new.property",defaultMessage:"Add New Property"}))),i.a.createElement(K.a,{variant:"caption",component:"div",className:I.helpText},i.a.createElement(q.a,{id:"Apis.Details.Properties.Properties.help.main",defaultMessage:"Usually, APIs have a pre-defined set of properties such as \n                        the name, version, context, etc. API Properties allows you to \n                         add specific custom properties to the API."})),zi()(s)&&!y&&!c&&i.a.createElement("div",{className:I.messageBox},i.a.createElement(si.a,{type:"info",height:140},i.a.createElement("div",{className:I.contentWrapper},i.a.createElement(K.a,{variant:"h5",component:"h3",className:I.head},i.a.createElement(q.a,{id:"Apis.Details.Properties.Properties.add.new.property.message.title",defaultMessage:"Create Additional Properties"})),t.apiType===Q.a.CONSTS.APIProduct?i.a.createElement(K.a,{component:"p",className:I.content},i.a.createElement(q.a,{id:"Apis.Details.Properties.Properties.APIProduct. add.new.property.message.content",defaultMessage:"Add specific custom properties to your API here."})):i.a.createElement(K.a,{component:"p",className:I.content},i.a.createElement(q.a,{id:"Apis.Details.Properties.Properties.add.new.property.message.content",defaultMessage:"Add specific custom properties to your API here."})),i.a.createElement("div",{className:I.actions},i.a.createElement(Ne.a,{variant:"contained",color:"primary",className:I.button,onClick:A,disabled:Object(o.b)(["apim:api_create","apim:api_publish"],t)},i.a.createElement(q.a,{id:"Apis.Details.Properties.Properties.add.new.property",defaultMessage:"Add New Property"})))))),(!zi()(s)||c||y)&&i.a.createElement(pe.a,{container:!0,spacing:7},i.a.createElement(pe.a,{item:!0,xs:12},i.a.createElement(ce.a,{className:I.paperRoot},i.a.createElement(Ae.a,{className:I.table},i.a.createElement(Qn.a,null,i.a.createElement(Se.a,null,i.a.createElement(De.a,null,i.a.createElement(q.a,{id:"Apis.Details.Properties.Properties.add.new.property.table",defaultMessage:"Property Name"})),i.a.createElement(De.a,null,i.a.createElement(q.a,{id:"Apis.Details.Properties.Properties.add.new.property.value",defaultMessage:"Property Value"})),i.a.createElement(De.a,null))),i.a.createElement(Jn.a,null,c&&i.a.createElement(i.a.Fragment,null,i.a.createElement(Se.a,null,i.a.createElement(De.a,null,i.a.createElement(vt.a,{fullWidth:!0,required:!0,id:"outlined-required",label:T.formatMessage({id:"Apis.Details.Properties.Properties.\n                                                                show.add.property.property.name",defaultMessage:"Name"}),margin:"normal",variant:"outlined",className:I.addProperty,value:null===d?"":d,onChange:D("propertyKey"),onKeyDown:x("propertyKey"),helperText:S(d)?"":((e,t,a)=>e?t:a)(C,"Invalid property name",""),error:S(d)||C,disabled:Object(o.b)(["apim:api_create","apim:api_publish"],t)})),i.a.createElement(De.a,null,i.a.createElement(vt.a,{fullWidth:!0,required:!0,id:"outlined-required",label:T.formatMessage({id:"Apis.Details.Properties.Properties.property.value",defaultMessage:"Value"}),margin:"normal",variant:"outlined",className:I.addProperty,value:null===u?"":u,onChange:D("propertyValue"),onKeyDown:x("propertyValue"),error:S(u),disabled:Object(o.b)(["apim:api_create","apim:api_publish"],t)})),i.a.createElement(De.a,{align:"right"},i.a.createElement(Ne.a,{variant:"contained",color:"primary",disabled:!u||!d||Object(o.b)(["apim:api_create","apim:api_publish"],t)||C,onClick:P,className:I.marginRight},i.a.createElement(q.a,{id:"Apis.Details.Properties.Properties.add",defaultMessage:"Add"})),i.a.createElement(Ne.a,{onClick:A},i.a.createElement(q.a,{id:"Apis.Details.Properties.Properties.cancel",defaultMessage:"Cancel"})))),i.a.createElement(Se.a,null,i.a.createElement(De.a,{colSpan:3},i.a.createElement(K.a,{variant:"caption"},i.a.createElement(q.a,{id:"Apis.Details.Properties.Properties.help",defaultMessage:"Property name should be unique, should not contain spaces and cannot be any of the following reserved keywords : provider, version, context, status, description, subcontext, doc, lcState, name, tags."}))))),(()=>{const a=[];for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&a.push(i.a.createElement(Od,wd({oldKey:n,oldValue:s[n],handleUpdateList:w,handleDelete:O,apiAdditionalProperties:s},e,{setEditing:b,isRestricted:o.b,api:t})));return a})()))),i.a.createElement("div",{className:I.buttonWrapper},i.a.createElement(pe.a,{container:!0,direction:"row",alignItems:"flex-start",spacing:1,className:I.buttonSection},i.a.createElement(pe.a,{item:!0},i.a.createElement("div",null,i.a.createElement(Ne.a,{variant:"contained",color:"primary",onClick:()=>{f(!0),a({additionalProperties:s}).then(()=>{f(!1)}).catch(e=>{f(!1);const{status:t}=e;401===t&&Object(ee.b)()})},disabled:E||h||zi()(s)&&!y||Object(o.b)(["apim:api_create","apim:api_publish"],t)},h&&i.a.createElement(i.a.Fragment,null,i.a.createElement(Ze.a,{size:20}),i.a.createElement(q.a,{id:"Apis.Details.Properties.Properties.updating",defaultMessage:"Updating ..."})),!h&&i.a.createElement(q.a,{id:"Apis.Details.Properties.Properties.save",defaultMessage:"Save"})))),i.a.createElement(pe.a,{item:!0},i.a.createElement(W.b,{to:"/apis/"+t.id+"/overview"},i.a.createElement(Ne.a,null,i.a.createElement(q.a,{id:"Apis.Details.Properties.Properties.cancel",defaultMessage:"Cancel"})))),Object(o.b)(["apim:api_create","apim:api_publish"],t)&&i.a.createElement(pe.a,{item:!0,xs:12},i.a.createElement(K.a,{variant:"body2",color:"primary"},i.a.createElement(q.a,{id:"Apis.Details.Properties.Properties.update.not.allowed",defaultMessage:"*You are not authorized to update properties of the API due to insufficient permissions"}))))))))}xd.propTypes={state:s.a.shape({}).isRequired,intl:s.a.shape({formatMessage:s.a.func}).isRequired};var Td=Object(de.e)(Object(q.d)(xd));class Id extends n.Component{constructor(e){super(e),this.state={policies:[],monetizedPolices:null},this.monetizationQuery=this.monetizationQuery.bind(this)}componentDidMount(){const{api:e}=this.props;e.getSubscriptionPolicies(e.id).then(e=>{const t=e.filter(e=>"COMMERCIAL"===e.tierPlan);this.setState({policies:t})}),e.getMonetization(e.id).then(e=>{this.setState({monetizedPolices:e.properties})})}monetizationQuery(e){const{monetizedPolices:t}=this.state;return e in t}render(){const{policies:e,monetizedPolices:t}=this.state,{classes:a}=this.props;if(null===t)return i.a.createElement(X.a,null);const n=e.map(e=>i.a.createElement(pe.a,{item:!0,xs:12},i.a.createElement(Ae.a,{className:a.table},i.a.createElement(Se.a,null,i.a.createElement(De.a,{variant:"head",colSpan:2,className:a.tableHeadCell},i.a.createElement(ge.a,{display:"flex"},i.a.createElement(K.a,{component:"div",className:a.tableHeadTitle,variant:"subtitle1"},e.name),this.monetizationQuery(e.name)?i.a.createElement("div",{className:a.stateWrapper},i.a.createElement("div",null,i.a.createElement(Ye.a,{color:"primary"})),i.a.createElement(K.a,{component:"div"},i.a.createElement(q.a,{id:"Apis.Details.Monetization.BusinessPlans.monetized",defaultMessage:"Monetized"}))):i.a.createElement("div",{className:a.stateWrapper},i.a.createElement("div",null,i.a.createElement(Qe.a,{color:"error"})),i.a.createElement(K.a,{component:"div"},i.a.createElement(q.a,{id:"Apis.Details.Monetization.BusinessPlans.not.monetized",defaultMessage:"Not Monetized"})))))),Object.keys(e.monetizationAttributes).map(t=>null!==e.monetizationAttributes[t]&&i.a.createElement(Se.a,null,i.a.createElement(De.a,{className:a.tableCel,align:"left"},i.a.createElement(K.a,{component:"p",variant:"subtitle2"},t)),i.a.createElement(De.a,{align:"left"},e.monetizationAttributes[t]))))));return i.a.createElement(pe.a,{container:!0,spacing:1},i.a.createElement(pe.a,{item:!0,xs:12},i.a.createElement(K.a,{variant:"h6"},i.a.createElement(q.a,{id:"Apis.Details.Monetization.BusinessPlans.commercial.policies",defaultMessage:"Commercial Policies"}))),i.a.createElement(pe.a,{item:!0,xs:12},i.a.createElement(pe.a,{container:!0,direction:"row",spacing:3},n)),i.a.createElement(pe.a,{item:!0,xs:12},e.length>0?i.a.createElement(Rn.a,{disableActions:!0,dense:!0,paperProps:{elevation:1},type:"info",message:"Click Save to monetize all unmonetized policies"}):i.a.createElement(Rn.a,{disableActions:!0,dense:!0,paperProps:{elevation:1},type:"info",message:"No commercial policies to monetize"})))}}Id.propTypes={api:s.a.instanceOf(Q.a).isRequired,classes:s.a.shape({}).isRequired};var Md=Object(L.a)(e=>({root:{flexGrow:1,paddingBottom:"10px"},margin:{margin:e.spacing()},rightDataColumn:{display:"flex",flex:1},grid:{marginTop:"10px",paddingRight:"10px",paddingBottom:"10px"},box:{display:"block"},tableCel:{width:50},table:{width:"100%",border:"solid 1px #ccc"},tableHeadCell:{color:"black",background:e.palette.grey[200]},stateWrapper:{display:"flex",flexDirection:"row"},tableHeadTitle:{flex:1,fontWeight:"bold"}}))(Id);function Rd(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Nd extends n.Component{constructor(e){super(e),Rd(this,"handleChange",e=>{this.setState({monStatus:e.target.checked})}),Rd(this,"handleInputChange",e=>{const{name:t,value:a}=e.target;this.setState(e=>{const{property:n}=e;return n[t]=a,{property:n}})}),this.state={monetizationAttributes:[],monStatus:null,property:{}},this.handleChange=this.handleChange.bind(this),this.handleInputChange=this.handleInputChange.bind(this),this.handleSubmit=this.handleSubmit.bind(this)}componentDidMount(){this.getMonetizationData()}getMonetizationData(){const{api:e}=this.props;if("APIProduct"===e.apiType){const t=new Z.a(e.name,e.context,e.policies);t.getSettings().then(e=>{null!=e.monetizationAttributes&&this.setState({monetizationAttributes:e.monetizationAttributes})}),t.getMonetization(this.props.api.id).then(e=>{this.setState({monStatus:e.enabled})})}else e.getSettings().then(e=>{null!=e.monetizationAttributes&&this.setState({monetizationAttributes:e.monetizationAttributes})}),e.getMonetization(this.props.api.id).then(e=>{this.setState({monStatus:e.enabled})})}handleSubmit(){const{api:e,intl:t}=this.props;if("APIProduct"===e.apiType){const a=this.state.property,n={enabled:this.state.monStatus,properties:a};new Z.a(e.name,e.context,e.policies).configureMonetizationToApiProduct(e.id,n).then(e=>{JSON.parse(e.data).enabled?$.a.info(t.formatMessage({id:"Apis.Details.Monetization.Index.monetization.configured.successfully",defaultMessage:"Monetization Enabled Successfully"})):$.a.info(t.formatMessage({id:"Apis.Details.Monetization.Index.monetization.disabled.successfully",defaultMessage:"Monetization Disabled Successfully"})),this.setState(e=>({monStatus:!e.monStatus}))}).catch(e=>{console.error(e),e.response?$.a.error(e.response.body.description):$.a.error(t.formatMessage({id:"Apis.Details.Monetization.Index.something.went.wrong.while.configuring.monetization",defaultMessage:"Something went wrong while configuring monetization"}))})}else{const a=this.state.property,n={enabled:this.state.monStatus,properties:a};e.configureMonetizationToApi(this.props.api.id,n).then(e=>{JSON.parse(e.data).enabled?$.a.info(t.formatMessage({id:"Apis.Details.Monetization.Index.monetization.configured.successfully",defaultMessage:"Monetization Enabled Successfully"})):$.a.info(t.formatMessage({id:"Apis.Details.Monetization.Index.monetization.disabled.successfully",defaultMessage:"Monetization Disabled Successfully"})),this.setState(e=>({monStatus:!e.monStatus}))}).catch(e=>{console.error(e),e.response?$.a.error(e.response.body.description):$.a.error(t.formatMessage({id:"Apis.Details.Monetization.Index.something.went.wrong.while.configuring.monetization",defaultMessage:"Something went wrong while configuring monetization"}))})}}render(){const{api:e,classes:t}=this.props,{monetizationAttributes:a,monStatus:n}=this.state;return e&&Object(o.b)(["apim:api_publish"],e)?i.a.createElement(pe.a,{container:!0,direction:"row",alignItems:"center",spacing:4,style:{marginTop:20}},i.a.createElement(pe.a,{item:!0},i.a.createElement(K.a,{variant:"body2",color:"primary"},i.a.createElement(q.a,{id:"Apis.Details.Monetization.Index.update.not.allowed",defaultMessage:"* You are not authorized to update API monetization due to insufficient permissions"})))):a&&null!==n?i.a.createElement("form",{method:"post",onSubmit:this.handleSubmit},i.a.createElement(pe.a,{container:!0,xs:6,spacing:2},i.a.createElement(pe.a,{item:!0,xs:12},i.a.createElement(K.a,{variant:"h4"},i.a.createElement(q.a,{id:"Apis.Details.Monetization.Index.monetization",defaultMessage:"Monetization"}))),i.a.createElement(pe.a,{item:!0,xs:12},i.a.createElement(Et.a,{control:i.a.createElement(zt.a,{disabled:Object(o.b)(["apim:api_publish"],e),id:"monStatus",name:"monStatus",checked:n,onChange:this.handleChange,value:n,color:"primary"}),label:"Enable Monetization"})),i.a.createElement(pe.a,{item:!0,xs:12},i.a.createElement(ce.a,{className:t.root},i.a.createElement(pe.a,{item:!0,xs:12,className:t.grid},i.a.createElement(K.a,{className:t.heading,variant:"h6"},i.a.createElement(q.a,{id:"Apis.Details.Monetization.Index.monetization.properties",defaultMessage:"Monetization Properties"})),a.length>0?a.map((t,a)=>i.a.createElement(vt.a,{disabled:Object(o.b)(["apim:api_publish"],e),fullWidth:!0,id:"attribute"+a,label:t.displayName,placeholder:t.displayName,name:t.name,type:"text",margin:"normal",variant:"outlined",required:t.required,onChange:this.handleInputChange,autoFocus:!0})):i.a.createElement(K.a,null,i.a.createElement(q.a,{id:"Apis.Details.Monetization.Index.there.are.no .monetization.properties.configured",defaultMessage:"There are no monetization properties configured"}))))),i.a.createElement(pe.a,{item:!0,xs:12},i.a.createElement(ce.a,{className:t.root},i.a.createElement(pe.a,{item:!0,xs:12,className:t.grid},i.a.createElement(Md,{api:e,monStatus:n})))),i.a.createElement(pe.a,{item:!0,xs:12},i.a.createElement(Ne.a,{onClick:this.handleSubmit,color:"primary",variant:"contained",className:t.button},i.a.createElement(q.a,{id:"Apis.Details.Monetization.Index.save",defaultMessage:"Save"})),i.a.createElement(W.b,{to:"/apis/"+e.id+"/overview"},i.a.createElement(Ne.a,null,i.a.createElement(q.a,{id:"Apis.Details.Monetization.Index.cancel",defaultMessage:"Cancel"})))))):i.a.createElement(X.a,null)}}Nd.propTypes={api:s.a.instanceOf(Q.a).isRequired,classes:s.a.shape({}).isRequired,intl:s.a.shape({formatMessage:s.a.func}).isRequired};var jd=Object(q.d)(Object(_.withRouter)(Object(L.a)(e=>({root:{flexGrow:1},container:{display:"flex",flexWrap:"wrap"},margin:{margin:e.spacing()},paper:{padding:e.spacing(2),textAlign:"left",color:e.palette.text.secondary,paddingBottom:"10px"},grid:{paddingLeft:"10px",paddingRight:"10px",paddingBottom:"10px",minWidth:"50%"},button:{margin:e.spacing()}}))(Nd)));function kd(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}const Ld=Object(Ue.a)(e=>({root:{width:e.custom.contentAreaWidth,marginTop:e.spacing(3),overflowX:"auto"},table:{minWidth:650},viewInExStoreLink:{color:e.palette.common.black,textDecoration:"underline"}}));function qd(){const{api:e}=Object(n.useContext)(de.a),{settings:t}=Object(te.c)(),[a,r]=Object(n.useState)([]),[s,l]=Object(n.useState)([]),[c,p]=Object(n.useState)(!1),d=Ld(),m=Object(q.e)();if(!t.externalStoresEnabled){const t=Object(q.c)({titleMessage:{id:"Apis.Details.ExternalStores.ExternalStores.external.stores.not.found.title",defaultMessage:"External Developert Portals not found for the API : {apiUUID}"},bodyMessage:{id:"Apis.Details.ExternalStores.ExternalStores.external.stores.not.found.body",defaultMessage:"No External Developer Portals configured for the current tenant"}}),a={title:m.formatMessage(t.titleMessage,{apiUUID:"".concat(e.id)}),body:m.formatMessage(t.bodyMessage)};return i.a.createElement(U.a,{message:a})}function u(){Q.a.getPublishedExternalStores(e.id).then(e=>{const t=e.body.list.map(e=>e.id);l(t)}).catch(e=>{const t=e.response&&e.response.obj,a=t&&"["+t.message+"] "+t.description;$.a.error(m.formatMessage({id:"Apis.Details.ExternalStores.ExternalStores.error.getting.published.external.stores",defaultMessage:"Error while getting published external developer portals!! {reason}"},{reason:a}))})}return Object(n.useEffect)(()=>{Q.a.getAllExternalStores().then(e=>{r(kd(e.body.list))}),u()},[]),i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement(K.a,{variant:"h4",align:"left"},i.a.createElement(q.a,{id:"Apis.Details.ExternalStores.ExternalStores.external-stores",defaultMessage:"External Developer Portals"})),i.a.createElement(ce.a,{className:d.root},i.a.createElement(Ae.a,{className:d.table},i.a.createElement(Qn.a,null,i.a.createElement(Se.a,null,i.a.createElement(De.a,null),i.a.createElement(De.a,null,i.a.createElement(K.a,null,i.a.createElement(q.a,{id:"Apis.Details.ExternalStores.ExternalStores.name",defaultMessage:"Name"}))),i.a.createElement(De.a,null,i.a.createElement(K.a,null,i.a.createElement(q.a,{id:"Apis.Details.ExternalStores.ExternalStores.type",defaultMessage:"Type"}))),i.a.createElement(De.a,null,i.a.createElement(K.a,null,i.a.createElement(q.a,{id:"Apis.Details.ExternalStores.ExternalStores.endpoint",defaultMessage:"Endpoint"}))))),i.a.createElement(Jn.a,null,a.map(t=>i.a.createElement(Se.a,{key:t.id},i.a.createElement(De.a,{padding:"checkbox"},i.a.createElement(zt.a,{checked:s.includes(t.id),disabled:"PUBLISHED"!==e.lifeCycleStatus||Object(o.b)(["apim:api_publish"],e),onChange:e=>{const{checked:t,name:a}=e.target;t?s.includes(a)||l([].concat(kd(s),[a])):l(s.filter(e=>e!==a))},name:t.id,color:"primary"})),i.a.createElement(De.a,{component:"th",scope:"row"},i.a.createElement(K.a,null," ",t.displayName," ")),i.a.createElement(De.a,null," ",i.a.createElement(K.a,null,t.type)),i.a.createElement(De.a,null,i.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:t.endpoint,className:d.viewInExStoreLink},i.a.createElement(K.a,null,t.endpoint)))))))),i.a.createElement(pe.a,{container:!0},i.a.createElement(pe.a,{container:!0,direction:"row",alignItems:"center",spacing:4,style:{marginTop:20}},i.a.createElement(pe.a,{item:!0},i.a.createElement(Ne.a,{type:"submit",variant:"contained",color:"primary",disabled:c||"PUBLISHED"!==e.lifeCycleStatus||Object(o.b)(["apim:api_publish"],e),onClick:function(){p(!0),Q.a.publishAPIToExternalStores(e.id,s).then(e=>{const t=e.body.list.map(e=>e.id);$.a.success(m.formatMessage({id:"Apis.Details.ExternalStores.ExternalStores.successfully.published.to.external.stores",defaultMessage:"Successfully Published to external developer portals: {successfulStores}"},{successfulStores:t}))}).catch(e=>{const t=e.response&&e.response.obj,a=t&&"["+t.message+"] "+t.description;$.a.error(m.formatMessage({id:"Apis.Details.ExternalStores.ExternalStores.error.while.updating.external.stores",defaultMessage:"Error while updating external developer portals!! {reason}"},{reason:a}))}).finally(()=>{p(!1),u()})}},i.a.createElement(q.a,{id:"Apis.Details.ExternalStores.ExternalStores.save",defaultMessage:"Save"}),c&&i.a.createElement(Ze.a,{size:20}))),i.a.createElement(pe.a,{item:!0},i.a.createElement(W.b,{to:"/apis/"+e.id+"/overview"},i.a.createElement(Ne.a,null,i.a.createElement(q.a,{id:"Apis.Details.ExternalStores.ExternalStores.cancel",defaultMessage:"Cancel"})))),Object(o.b)(["apim:api_publish"],e)&&i.a.createElement(pe.a,{item:!0},i.a.createElement(K.a,{variant:"body2",color:"primary"},i.a.createElement(q.a,{id:"Apis.Details.ExternalStores.ExternalStores.update.not.allowed",defaultMessage:"* You are not authorized to publish the API to external developer portals due to insufficient permissions"})))))))}function _d(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Wd extends i.a.Component{constructor(e){super(e),_d(this,"handleDefaultVersionChange",()=>e=>{const{value:t}=e.target;this.setState({isDefaultVersion:t})}),_d(this,"handleVersionChange",()=>e=>{const{value:t}=e.target;this.setState({newVersion:t,valid:{version:{empty:!t,alreadyExists:!1,hasSpecialChars:this.hasSpecialChars(t)}}})}),this.state={isDefaultVersion:"no",valid:{version:{empty:!1,alreadyExists:!1,hasSpecialChars:!1}}}}hasSpecialChars(e){return!/^[^~!@#;:%^*()+={}|\\<>"',&\/$]+$/.test(e)}handleSubmit(e,t,a){if(!t)return void this.setState({valid:{version:{empty:!0}}});const n="yes"===a,{intl:i}=this.props;e.createNewAPIVersion(t,n).then(e=>{this.setState({redirectToReferrer:!0,apiId:e.obj.id}),$.a.error(i.formatMessage({id:"Apis.Details.NewVersion.NewVersion.success",defaultMessage:"Successfully created new version"})+t)}).catch(e=>{409===e.status?this.setState({valid:{version:{alreadyExists:!0}}}):$.a.error(i.formatMessage({id:"Apis.Details.NewVersion.NewVersion.error",defaultMessage:"Something went wrong while creating a new version!. Error: "})+e.status)})}render(){const{classes:e,api:t}=this.props,{isDefaultVersion:a,newVersion:n,redirectToReferrer:r,apiId:s,valid:o}=this.state;if(r)return i.a.createElement(_.Redirect,{to:"/apis/"+s+"/overview"});let l="";return o.version.empty?l="This field cannot be empty":o.version.alreadyExists?l='An API with version "'+n+'" already exists.':o.version.hasSpecialChars&&(l="API Version should not contain special characters"),i.a.createElement(i.a.Fragment,null,i.a.createElement(mt.a,{maxWidth:"md"},i.a.createElement("div",{className:e.titleWrapper},i.a.createElement(K.a,{variant:"h4",align:"left",className:e.mainTitle},i.a.createElement(q.a,{id:"Apis.Details.NewVersion.NewVersion.create.new.version",defaultMessage:"Create New Version"}))),i.a.createElement(pe.a,{container:!0,spacing:7},i.a.createElement(pe.a,{item:!0,xs:12},i.a.createElement(ce.a,{className:e.root,elevation:0},i.a.createElement(ft.a,{margin:"normal",className:e.FormControlOdd},i.a.createElement(vt.a,{fullWidth:!0,id:"newVersion",error:o.version.empty||o.version.alreadyExists||o.version.hasSpecialChars,label:i.a.createElement(q.a,{id:"Apis.Details.NewVersion.NewVersion.new.version",defaultMessage:"New Version"}),helperText:l,type:"text",name:"newVersion",placeholder:"Eg: 2.0.0",value:n,variant:"outlined",onChange:this.handleVersionChange(),margin:"normal",InputLabelProps:{shrink:!0},autoFocus:!0})),i.a.createElement(ft.a,{margin:"normal",className:e.FormControl},i.a.createElement(bt.a,{className:e.FormLabel,component:"legend"},i.a.createElement(q.a,{id:"Apis.Details.NewVersion.NewVersion.default",defaultMessage:"Make this the default version"}),i.a.createElement(ie.a,{placement:"top",classes:{tooltip:e.htmlTooltip},title:i.a.createElement(i.a.Fragment,null,i.a.createElement(q.a,{id:"Apis.Details.NewVersion.NewVersion.tooltip",defaultMessage:"Indicates if this is the default version of the API. If an API is invoked without specifying a version, the API Gateway will route the request to the default version of the API."})),interactive:!0,"aria-label":"Default Version Selector",tabIndex:"-1"},i.a.createElement(Ne.a,{className:e.helpButton},i.a.createElement(ke.a,{className:e.helpIcon})))),i.a.createElement(ht.a,{name:"isDefaultVersion",id:"isDefaultVersion",className:e.group,value:a,onChange:this.handleDefaultVersionChange()},i.a.createElement(Et.a,{value:"yes",control:i.a.createElement(gt.a,{color:"primary"}),label:"Yes"}),i.a.createElement(Et.a,{value:"no",control:i.a.createElement(gt.a,{color:"primary"}),label:"No"}))),i.a.createElement("div",{className:e.buttonWrapper},i.a.createElement(pe.a,{container:!0,direction:"row",alignItems:"flex-start",spacing:1,className:e.buttonSection},i.a.createElement(pe.a,{item:!0},i.a.createElement("div",null,i.a.createElement(Ne.a,{variant:"contained",color:"primary",id:"createBtn",onClick:()=>this.handleSubmit(t,n,a),disabled:o.version.empty||o.version.alreadyExists||o.version.hasSpecialChars},i.a.createElement(q.a,{id:"Apis.Details.NewVersion.NewVersion.create",defaultMessage:"Create"})))),i.a.createElement(pe.a,{item:!0},i.a.createElement(W.b,{to:"/apis/"+t.id+"/overview"},i.a.createElement(Ne.a,{id:"cancelBtn"},i.a.createElement(q.a,{id:"Apis.Details.NewVersion.NewVersion.cancel",defaultMessage:"Cancel"})))))))))))}}Wd.propTypes={classes:s.a.shape({}).isRequired,api:s.a.shape({id:s.a.string}).isRequired,intl:s.a.shape({formatMessage:s.a.func}).isRequired};var Fd=Object(de.e)(Object(L.a)(e=>({FormControl:{padding:0,width:"100%",marginTop:20},FormControlOdd:{padding:0,backgroundColor:e.palette.background.paper,width:"100%",marginTop:0},FormLabel:{transform:"translate(0, 1.5px) scale(0.75)",transformOrigin:"top left"},buttonWrapper:{paddingTop:20},root:{padding:20,marginTop:20},group:{flexDirection:"row"},helpButton:{padding:0,minWidth:20},helpIcon:{fontSize:16},htmlTooltip:{backgroundColor:"#f5f5f9",color:"rgba(0, 0, 0, 0.87)",maxWidth:220,fontSize:e.typography.pxToRem(14),border:"1px solid #dadde9","& b":{fontWeight:e.typography.fontWeightMedium}}}))(Wd));class zd extends n.Component{static isValidURL(e){for(const[t,a]of Object.entries(zd.subPaths))if("BASE"!==t&&"BASE_PRODUCT"!==t){const t=Object(_.matchPath)(e,a);if(t)return t}return!1}constructor(e){super(e);this.state={api:null,apiNotFound:!1,isAPIProduct:null,imageUpdate:0},this.setAPI=this.setAPI.bind(this),this.setAPIProduct=this.setAPIProduct.bind(this),this.updateAPI=this.updateAPI.bind(this),this.setImageUpdate=this.setImageUpdate.bind(this)}componentDidMount(){const{location:{pathname:e},isAPIProduct:t}=this.props;if(zd.isValidURL(e)){t?this.setAPIProduct():this.setAPI(),(new Q.a).getTenantsByState("active").then(e=>{const{list:t}=e.body;this.setState({tenantList:t})}).catch(e=>{console.error("error when getting tenants "+e)})}}componentDidUpdate(){const{api:e}=this.state,{match:t,isAPIProduct:a}=this.props,{apiUUID:n}=t.params,{apiProdUUID:i}=t.params;e&&e.id!==n&&e.id!==i&&(a?this.setAPIProduct():this.setAPI())}setImageUpdate(){this.setState(e=>({imageUpdate:e.imageUpdate+1}))}setAPI(e){if(e)this.setState({api:e});else{const{match:e}=this.props,{apiUUID:t}=e.params;Q.a.get(t).then(e=>{this.setState({api:e})}).catch(e=>{const{status:t}=e;404===t?this.setState({apiNotFound:!0}):401===t&&Object(ee.b)()})}}setAPIProduct(){const{match:e}=this.props,{apiProdUUID:t}=e.params,{isAPIProduct:a}=this.props;Z.a.get(t).then(e=>{this.setState({isAPIProduct:a}),this.setState({api:e})}).catch(e=>{const{status:t}=e;404===t&&this.setState({apiNotFound:!0})})}getLeftMenuItemForDefinitionByType(e){const{isAPIProduct:t}=this.state,{intl:a,match:n}=this.props,r="/"+(t?"api-products":"apis")+"/"+(n.params.apiUUID||n.params.api_uuid||n.params.apiProdUUID)+"/",s=i.a.createElement(J,{text:a.formatMessage({id:"Apis.Details.index.api.definition2",defaultMessage:"API definition"}),route:"api definition",to:r+"api definition",Icon:i.a.createElement(D.a,null)});switch(e){case"GRAPHQL":return i.a.createElement(i.a.Fragment,null,i.a.createElement(J,{text:a.formatMessage({id:"Apis.Details.index.schema.definition",defaultMessage:"Schema Definition"}),route:"schema definition",to:r+"schema definition",Icon:i.a.createElement(D.a,null)}));case"WS":return"";case"SOAP":return i.a.createElement(i.a.Fragment,null,s,i.a.createElement(J,{text:a.formatMessage({id:"Apis.Details.index.wsdl.definition",defaultMessage:"WSDL Definition"}),route:"wsdl",to:r+"wsdl",Icon:i.a.createElement(D.a,null)}));default:return i.a.createElement(i.a.Fragment,null,s)}}getLeftMenuItemForResourcesByType(e){const{isAPIProduct:t}=this.state,{intl:a,match:n}=this.props,r="/"+(t?"api-products":"apis")+"/"+(n.params.apiUUID||n.params.api_uuid||n.params.apiProdUUID)+"/";switch(e){case"GRAPHQL":return i.a.createElement(i.a.Fragment,null,i.a.createElement(J,{text:a.formatMessage({id:"Apis.Details.index.operations",defaultMessage:"operations"}),to:r+"operations",Icon:i.a.createElement(h.a,null)}));case"WS":return"";default:return i.a.createElement(i.a.Fragment,null,i.a.createElement(J,{text:a.formatMessage({id:"Apis.Details.index.resources",defaultMessage:"resources"}),to:r+"resources",Icon:i.a.createElement(h.a,null)}))}}updateAPI(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{api:t}=this.state;let a=!1;"APIProduct"===t.apiType&&(a=!0);const n=e instanceof Q.a?e.toJson():e;let i;return(i=z()(n)?Q.a.get(t.id):t.update(n)).then(e=>($.a.info("".concat(e.name," API updated successfully")),this.setState({api:e}),e)).catch(e=>{throw console.error(e),$.a.error("Something went wrong while updating the ".concat(t.name," API!!")),this.setState({api:t}),e})}render(){const{api:e,apiNotFound:t,isAPIProduct:a,imageUpdate:n,tenantList:r}=this.state,{classes:s,theme:l,match:p,intl:m,location:g,location:{pathname:h}}=this.props,{settings:f}=this.context;if(!zd.isValidURL(h))return i.a.createElement(U.a,{location:g});const b="/"+(a?"api-products":"apis")+"/"+(p.params.apiUUID||p.params.api_uuid||p.params.apiProdUUID)+"/",v=b;if(t){const{apiUUID:e}=p.params,t=Object(q.c)({titleMessage:{id:"Apis.Details.index.api.not.found.title",defaultMessage:"API is not found in the {environmentLabel} Environment"},bodyMessage:{id:"Apis.Details.index.api.not.found.body",defaultMessage:"Cannot find the API with the given id"}}),a={title:m.formatMessage(t.titleMessage,{environmentLabel:"".concat(B.a.getCurrentEnvironment().label)}),body:m.formatMessage(t.bodyMessage,{apiUUID:"".concat(e)})};return i.a.createElement(U.a,{message:a})}if(!e)return i.a.createElement(X.a,null);const{leftMenuIconMainSize:A}=l.custom;return i.a.createElement(i.a.Fragment,null,i.a.createElement(de.b,{value:{api:e,updateAPI:this.updateAPI,isAPIProduct:a,setAPI:this.setAPI,setImageUpdate:this.setImageUpdate,tenantList:r}},i.a.createElement("div",{className:s.LeftMenu},i.a.createElement(W.b,{to:"/"+(a?"api-products":"apis")+"/"},i.a.createElement("div",{className:s.leftLInkMain},i.a.createElement(V.a,{width:A,height:A,icon:a?"api-product":"api"}))),i.a.createElement(J,{text:m.formatMessage({id:"Apis.Details.index.overview",defaultMessage:"overview"}),to:b+"overview"}),i.a.createElement(J,{text:m.formatMessage({id:"Apis.Details.index.design.configs",defaultMessage:"Design Configurations"}),route:"configuration",to:b+"configuration",Icon:i.a.createElement(O.a,null)}),!e.isWebSocket()&&i.a.createElement(J,{text:m.formatMessage({id:"Apis.Details.index.runtime.configs",defaultMessage:"Runtime Configurations"}),route:"runtime-configuration",to:b+"runtime-configuration",Icon:i.a.createElement(P.a,null)}),this.getLeftMenuItemForResourcesByType(e.type),!a&&i.a.createElement(J,{text:m.formatMessage({id:"Apis.Details.index.endpoints",defaultMessage:"endpoints"}),to:b+"endpoints",Icon:i.a.createElement(d.a,null)}),i.a.createElement(J,{text:m.formatMessage({id:"Apis.Details.index.subscriptions",defaultMessage:"subscriptions"}),to:b+"subscriptions",Icon:i.a.createElement(M.a,null)}),!a&&!Object(o.b)(["apim:api_publish"],e)&&i.a.createElement(J,{text:m.formatMessage({id:"Apis.Details.index.lifecycle",defaultMessage:"lifecycle"}),to:b+"lifecycle",Icon:i.a.createElement(c.a,null)}),this.getLeftMenuItemForDefinitionByType(e.type),!a&&i.a.createElement(J,{text:m.formatMessage({id:"Apis.Details.index.environments",defaultMessage:"environments"}),route:"environments",to:b+"environments",Icon:i.a.createElement(u.a,null)}),!e.isWebSocket()&&!a&&i.a.createElement(J,{text:m.formatMessage({id:"Apis.Details.index.left.menu.scope",defaultMessage:"scopes"}),to:b+"scopes",Icon:i.a.createElement(E.a,null)}),i.a.createElement(J,{text:m.formatMessage({id:"Apis.Details.index.business.info",defaultMessage:"business info"}),to:b+"business info",Icon:i.a.createElement(C.a,null)}),i.a.createElement(J,{text:m.formatMessage({id:"Apis.Details.index.properties",defaultMessage:"properties"}),to:b+"properties",Icon:i.a.createElement(T.a,null)}),i.a.createElement(J,{text:m.formatMessage({id:"Apis.Details.index.documents",defaultMessage:"documents"}),to:b+"documents",Icon:i.a.createElement(y.a,null)}),!e.isWebSocket()&&!Object(o.b)(["apim:api_publish"],e)&&i.a.createElement(J,{text:m.formatMessage({id:"Apis.Details.index.monetization",defaultMessage:"monetization"}),to:b+"monetization",Icon:i.a.createElement(N.a,null)}),!a&&f.externalStoresEnabled&&i.a.createElement(J,{text:m.formatMessage({id:"Apis.Details.index.external-stores",defaultMessage:"external dev portals"}),to:b+"external-devportals",Icon:i.a.createElement(k.a,null)})),i.a.createElement("div",{className:s.content},i.a.createElement(hd,{api:e,isAPIProduct:a,imageUpdate:n}),i.a.createElement("div",{className:s.contentInside},i.a.createElement(se,{lastUpdatedTime:e.lastUpdatedTime}),i.a.createElement(_.Switch,null,i.a.createElement(_.Redirect,{exact:!0,from:zd.subPaths.BASE,to:v}),i.a.createElement(_.Route,{path:zd.subPaths.OVERVIEW_PRODUCT,key:zd.subPaths.OVERVIEW_PRODUCT,component:()=>i.a.createElement(dt,{api:e})}),i.a.createElement(_.Route,{path:zd.subPaths.OVERVIEW,component:()=>i.a.createElement(dt,{api:e})}),i.a.createElement(_.Route,{path:zd.subPaths.API_DEFINITION,component:()=>i.a.createElement(Gp,{api:e,updateAPI:this.updateAPI})}),i.a.createElement(_.Route,{path:zd.subPaths.WSDL,component:()=>i.a.createElement(Jp,{api:e})}),i.a.createElement(_.Route,{path:zd.subPaths.API_DEFINITION_PRODUCT,component:()=>i.a.createElement(Gp,{api:e})}),i.a.createElement(_.Route,{path:zd.subPaths.SCHEMA_DEFINITION,component:()=>i.a.createElement(Gp,{api:e})}),i.a.createElement(_.Route,{path:zd.subPaths.LIFE_CYCLE,component:()=>i.a.createElement(ti,{api:e})}),i.a.createElement(_.Route,{path:zd.subPaths.CONFIGURATION,component:()=>i.a.createElement(Zt,{api:e})}),i.a.createElement(_.Route,{path:zd.subPaths.RUNTIME_CONFIGURATION,component:()=>i.a.createElement(In,{api:e})}),i.a.createElement(_.Route,{path:zd.subPaths.CONFIGURATION_PRODUCT,component:()=>i.a.createElement(Zt,{api:e})}),i.a.createElement(_.Route,{path:zd.subPaths.RUNTIME_CONFIGURATION_PRODUCT,component:()=>i.a.createElement(In,{api:e})}),i.a.createElement(_.Route,{path:zd.subPaths.ENDPOINTS,component:()=>i.a.createElement(bl,{api:e})}),i.a.createElement(_.Route,{path:zd.subPaths.ENVIRONMENTS,component:()=>i.a.createElement(Sl,{api:e})}),i.a.createElement(_.Route,{path:zd.subPaths.OPERATIONS,component:()=>i.a.createElement(nr,{api:e,updateAPI:this.updateAPI})}),i.a.createElement(_.Route,{exact:!0,path:zd.subPaths.RESOURCES_PRODUCT,component:Qs}),i.a.createElement(_.Route,{path:zd.subPaths.RESOURCES_PRODUCT_EDIT,component:$s}),i.a.createElement(_.Route,{path:zd.subPaths.RESOURCES,key:zd.subPaths.RESOURCES,component:Js}),i.a.createElement(_.Route,{path:zd.subPaths.SCOPES,component:()=>i.a.createElement(np,{api:e})}),i.a.createElement(_.Route,{path:zd.subPaths.DOCUMENTS,component:()=>i.a.createElement(Hi,{api:e})}),i.a.createElement(_.Route,{path:zd.subPaths.DOCUMENTS_PRODUCT,component:()=>i.a.createElement(Hi,{api:e})}),i.a.createElement(_.Route,{path:zd.subPaths.SUBSCRIPTIONS,component:()=>i.a.createElement(Ec,{api:e,updateAPI:this.updateAPI})}),i.a.createElement(_.Route,{path:zd.subPaths.SUBSCRIPTIONS_PRODUCT,component:()=>i.a.createElement(Ec,{api:e,updateAPI:this.updateAPI})}),i.a.createElement(_.Route,{path:zd.subPaths.SECURITY,component:()=>i.a.createElement(pp,{api:e})}),i.a.createElement(_.Route,{path:zd.subPaths.COMMENTS,component:()=>i.a.createElement(Wc,{api:e})}),i.a.createElement(_.Route,{path:zd.subPaths.BUSINESS_INFO,component:()=>i.a.createElement(bd,{api:e})}),i.a.createElement(_.Route,{path:zd.subPaths.BUSINESS_INFO_PRODUCT,component:()=>i.a.createElement(bd,{api:e})}),i.a.createElement(_.Route,{path:zd.subPaths.PROPERTIES,component:()=>i.a.createElement(Td,{api:e})}),i.a.createElement(_.Route,{path:zd.subPaths.PROPERTIES_PRODUCT,component:()=>i.a.createElement(Td,{api:e})}),i.a.createElement(_.Route,{path:zd.subPaths.NEW_VERSION,component:()=>i.a.createElement(Fd,null)}),i.a.createElement(_.Route,{path:zd.subPaths.SUBSCRIPTIONS,component:()=>i.a.createElement(Ec,null)}),i.a.createElement(_.Route,{path:zd.subPaths.MONETIZATION,component:()=>i.a.createElement(jd,{api:e})}),i.a.createElement(_.Route,{path:zd.subPaths.MONETIZATION_PRODUCT,component:()=>i.a.createElement(jd,{api:e})}),i.a.createElement(_.Route,{path:zd.subPaths.EXTERNAL_STORES,component:qd}))))))}}zd.contextType=te.b,zd.subPaths={BASE:"/apis/:api_uuid",BASE_PRODUCT:"/api-products/:apiprod_uuid",OVERVIEW:"/apis/:api_uuid/overview",OVERVIEW_PRODUCT:"/api-products/:apiprod_uuid/overview",API_DEFINITION:"/apis/:api_uuid/api definition",WSDL:"/apis/:api_uuid/wsdl",API_DEFINITION_PRODUCT:"/api-products/:apiprod_uuid/api definition",SCHEMA_DEFINITION:"/apis/:api_uuid/schema definition",LIFE_CYCLE:"/apis/:api_uuid/lifecycle",CONFIGURATION:"/apis/:api_uuid/configuration",RUNTIME_CONFIGURATION:"/apis/:api_uuid/runtime-configuration",CONFIGURATION_PRODUCT:"/api-products/:apiprod_uuid/configuration",RUNTIME_CONFIGURATION_PRODUCT:"/api-products/:apiprod_uuid/runtime-configuration",ENDPOINTS:"/apis/:api_uuid/endpoints",ENVIRONMENTS:"/apis/:api_uuid/environments",OPERATIONS:"/apis/:api_uuid/operations",RESOURCES:"/apis/:api_uuid/resources",RESOURCES_PRODUCT:"/api-products/:apiprod_uuid/resources",RESOURCES_PRODUCT_EDIT:"/api-products/:apiprod_uuid/resources/edit",SCOPES:"/apis/:api_uuid/scopes",DOCUMENTS:"/apis/:api_uuid/documents",DOCUMENTS_PRODUCT:"/api-products/:apiprod_uuid/documents",SUBSCRIPTIONS_PRODUCT:"/api-products/:apiprod_uuid/subscriptions",SUBSCRIPTIONS:"/apis/:api_uuid/subscriptions",SECURITY:"/apis/:api_uuid/security",COMMENTS:"/apis/:api_uuid/comments",BUSINESS_INFO:"/apis/:api_uuid/business info",BUSINESS_INFO_PRODUCT:"/api-products/:apiprod_uuid/business info",PROPERTIES:"/apis/:api_uuid/properties",PROPERTIES_PRODUCT:"/api-products/:apiprod_uuid/properties",NEW_VERSION:"/apis/:api_uuid/new_version",MONETIZATION:"/apis/:api_uuid/monetization",MONETIZATION_PRODUCT:"/api-products/:apiprod_uuid/monetization",EXTERNAL_STORES:"/apis/:api_uuid/external-devportals"},Object.freeze(zd.paths),zd.propTypes={classes:s.a.shape({LeftMenu:s.a.string,content:s.a.string,leftLInkMain:s.a.string,contentInside:s.a.string}).isRequired,match:s.a.shape({params:s.a.object}).isRequired,location:s.a.shape({pathname:s.a.object}).isRequired,history:s.a.shape({push:s.a.object}).isRequired,theme:s.a.shape({custom:s.a.shape({leftMenuIconMainSize:s.a.number})}).isRequired,isAPIProduct:s.a.bool.isRequired,intl:s.a.shape({formatMessage:s.a.func}).isRequired};t.default=Object(q.d)(Object(L.a)(e=>({LeftMenu:{backgroundColor:e.palette.background.leftMenu,width:e.custom.leftMenuWidth,textAlign:"center",fontFamily:e.typography.fontFamily,position:"absolute",bottom:0,left:0,top:0,overflowY:"auto"},leftLInkMain:{borderRight:"solid 1px "+e.palette.background.leftMenu,paddingBottom:e.spacing(1),paddingTop:e.spacing(1),cursor:"pointer",backgroundColor:e.palette.background.leftMenuActive,color:e.palette.getContrastText(e.palette.background.leftMenuActive),textDecoration:"none"},detailsContent:{display:"flex",flex:1},content:{display:"flex",flex:1,flexDirection:"column",marginLeft:e.custom.leftMenuWidth,paddingBottom:e.spacing(3)},contentInside:{paddingLeft:e.spacing(3),paddingRight:e.spacing(3),paddingTop:e.spacing(2)}}),{withTheme:!0})(zd))}}]);
//# sourceMappingURL=DeferredDetails.bundle.js.map